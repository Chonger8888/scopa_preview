window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return i(e[r][1][t]||t)},l,l.exports,t,e,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({BaseGameFlow:[function(t,e,o){"use strict";cc._RF.push(e,"8925doxkvtFF5WZiQ/iDpUG","BaseGameFlow"),Object.defineProperty(o,"__esModule",{value:!0}),o.BaseGameFlow=void 0;var n=t("../../../../script/app/const/game/GameConstant"),i=t("../../model/ScopaConstant"),a=t("../../../../script/lib/base/TaskFlow"),r=t("../../../../script/lib/event/EventDispatcher"),s=t("../../model/GameEvent"),c=t("../../model/GameInitConfig"),p=function(){function t(t){this.logicHander=t,this.taskFlow=new a.TaskFlow,this.finishProcess=[]}return t.prototype.dispatch=function(t,e){r.EventDispatcher.getInstance().dispatch(t,e)},t.prototype.clear=function(){this.taskFlow&&this.taskFlow.clear(),this.finishProcess&&(this.finishProcess=[])},t.prototype.stop=function(){this.taskFlow&&this.taskFlow.clear(),this.finishProcess&&(this.finishProcess=[])},t.prototype.addFinishProcess=function(t){this.finishProcess.push(t)},t.prototype.isProcessFinished=function(t){for(var e=0;e<this.finishProcess.length;e++)if(t===this.finishProcess[e])return!0;return!1},t.prototype.addGameStartFlow=function(){this.clear(),this.dispatch(s.GameEvent.Base.GAME_PLAYING),0==this.isProcessFinished(n.GameConstant.GameProcess.GAME_START)&&this.taskFlow.addTask(this.processGameStart,this),this.taskFlow.addTask(this.processResetDesk,this)},t.prototype.processGameStart=function(){return this.dispatch(s.GameEvent.Popup.CLOSE_ALL),this.dispatch(s.GameEvent.Com.GAME_SCENE_CLEAR),this.dispatch(s.GameEvent.Com.READY_NEXT_CLEAR),this.dispatch(s.GameEvent.Effect.VS_ANIM,{players:this.logicHander.getRoomData().getCurAllPlayerInfo()}),this.dispatch(s.GameEvent.Player.GAME_START),this.dispatch(s.GameEvent.Desk.WAIT_MENU_CLEAR),2e3},t.prototype.processResetDesk=function(){var t=this.logicHander.getRoomData();return this.dispatch(s.GameEvent.Desk.UPDATE_DESKINFO,{deskCfg:t.getDeskInfo(),roomCfg:t.getRoomInfo()}),this.dispatch(s.GameEvent.Desk.REMAIN_CARD_NUM_CHANGE,this.logicHander.getPlayData().cardTotalNum),this.dispatch(s.GameEvent.Voice.PLAY_MUSIC_BG),this.dispatch(s.GameEvent.Desk.DESKINFO_TRANSPARENT,!0),this.addFinishProcess(n.GameConstant.GameProcess.GAME_START),0},t.prototype.processMovePlayer=function(){return this.dispatch(s.GameEvent.Player.MOVE,{bMoveToMid:!1,bRun:!1}),150},t.prototype.processSendCard=function(t){var e=this.logicHander.getPlayData(),o={firstSendViewId:t,allHandCardDatas:e.allHandCardDatas,deskOutCardData:e.sendToDeskDatas,sendCardCount:e.sendCardCount};this.dispatch(s.GameEvent.HandCard.START_CTL_SEND_CARD,o);var n=e.sendCardCount*this.logicHander.getRoomData().maxPlayerNum+e.sendToDeskDatas.length;return i.ScopaConstant.SEND_CARD_SPACE_TIME*n*1e3},t.prototype.processRefreshHandcard=function(t){void 0===t&&(t=!0);var e=this.logicHander.getPlayData();return c.GameInitConfig.isReplay?(t&&(e.sortHandCardDatas(0),e.sortHandCardDatas(1),e.sortHandCardDatas(2),e.sortHandCardDatas(3)),this.dispatch(s.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:e.allHandCardDatas})):(t&&e.sortHandCardDatas(0),this.dispatch(s.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:e.allHandCardDatas})),0},t.prototype.addReplayGameFlow=function(){this.taskFlow.addTask(this.replayDelayTime,this),this.taskFlow.addTask(this.replayDecodeBuff,this)},t.prototype.replayDelayTime=function(){return 1},t.prototype.replayDecodeBuff=function(){return this.dispatch(s.GameEvent.Replay.REPLAY_DECODE_BUFFER),0},t.prototype.addGameEndFlow=function(){this.taskFlow.clear(),this.taskFlow.addTask(this.processDelayTime,this,500),this.taskFlow.addTask(this.processShowGameResult,this)},t.prototype.processUpdateUserGold=function(){for(var t=this.logicHander.getRoomData(),e=0;e<n.GameConstant.MaxPlayerNum;e++){var o=e+1,i=t.getViewIdByChairId(o),a=t.getPlayerByViewId(i);a&&this.dispatch(s.GameEvent.Player.GOLD_CHANGE,{userId:a.userId,gold:this.logicHander.getPlayData().userGold[i]})}return 0},t.prototype.processShowGameResult=function(){return this.dispatch(s.GameEvent.Popup.CLOSE_ALL),this.dispatch(s.GameEvent.Popup.GAME_ONCE_RESULT,this.logicHander.getPlayData().curResult),0},t.prototype.processBeforeShowResultView=function(){return this.dispatch(s.GameEvent.Base.BEFORE_GAME_RESULT),0},t.prototype.processAfterShowResultView=function(){return this.dispatch(s.GameEvent.Base.AFLTER_GAME_RESULT),0},t.prototype.processDelayTime=function(t){return t},t.prototype.addTotalResultFlow=function(){this.taskFlow.clear(),this.taskFlow.addTask(this.processDelayTime,this,600),this.taskFlow.addTask(this.processTotalResult,this)},t.prototype.processTotalResult=function(){return this.dispatch(s.GameEvent.Popup.GAME_ONCE_RESULT,{rmthis:!0}),this.dispatch(s.GameEvent.OperateEvent.SHOW_TOTAL_RESULT),0},t}();o.BaseGameFlow=p,cc._RF.pop()},{"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/lib/base/TaskFlow":void 0,"../../../../script/lib/event/EventDispatcher":void 0,"../../model/GameEvent":"GameEvent","../../model/GameInitConfig":"GameInitConfig","../../model/ScopaConstant":"ScopaConstant"}],BaseGameUIConfig:[function(t,e,o){"use strict";cc._RF.push(e,"e51777Nb81AR5LgyiWDjoQ+","BaseGameUIConfig");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BaseGameBundleConfig=o.BaseGameUIConfig=o.GameZIndex=void 0;var a,r=t("./../../../script/app/config/ResConfig"),s=t("../../../script/app/config/ResConfig"),c=t("../../../script/app/const/Global"),p=t("../../../script/lib/manager/ResManager");(function(t){t[t.gameBg=1]="gameBg",t[t.gameInfo=10]="gameInfo",t[t.deskInfo=20]="deskInfo",t[t.standCard=29]="standCard",t[t.goldCard=40]="goldCard",t[t.chaShuiStatus=45]="chaShuiStatus",t[t.eatCard=58]="eatCard",t[t.sendCard=59]="sendCard",t[t.outCards=60]="outCards",t[t.scopeCount=61]="scopeCount",t[t.buyGoldMenu=65]="buyGoldMenu",t[t.buhua=68]="buhua",t[t.playStatus=69]="playStatus",t[t.myCards=70]="myCards",t[t.playerCards=71]="playerCards",t[t.flyCard=73]="flyCard",t[t.myInfoPanel=75]="myInfoPanel",t[t.trustMenu=77]="trustMenu",t[t.players=76]="players",t[t.deskMenu=90]="deskMenu",t[t.waitMenu=91]="waitMenu",t[t.opView=92]="opView",t[t.replayControl=110]="replayControl",t[t.tingInfo=139]="tingInfo",t[t.gameTipOpResult=140]="gameTipOpResult",t[t.gameTipProcess=150]="gameTipProcess",t[t.goldCardAnima=160]="goldCardAnima",t[t.goldChangeAnima=165]="goldChangeAnima",t[t.scopaAnima=166]="scopaAnima",t[t.waitAni=170]="waitAni",t[t.chaShuiMenu=175]="chaShuiMenu"})(a=o.GameZIndex||(o.GameZIndex={})),o.BaseGameUIConfig={bunldleName:c.gAssetBundleName.GAME_BASE_RES,prefab:{GameChatPop:new s.PrefabItem("UIGameChatPop","prefabs/chat/GameChatPop",c.gLayerLevel.Effect,0),GameVSAnim:new s.PrefabItem("UIGameVSAnim","prefabs/effect/GameVSAnim",c.gLayerLevel.Effect,r.PopupZIndex.effect),GameUpperEffectLayer:new s.PrefabItem("UIEffectLayer","prefabs/effect/GameUpperEffectLayer",c.gLayerLevel.Effect,r.PopupZIndex.effect),GameLowerEffectLayer:new s.PrefabItem("UIEffectLayer","prefabs/effect/GameLowerEffectLayer",c.gLayerLevel.Normal,a.gameBg),GameTips:new s.PrefabItem("UIGameTips","prefabs/effect/GameTips",c.gLayerLevel.Normal,a.gameTipProcess),GameTrustMenu:new s.PrefabItem("UIGameTrustMenu","prefabs/desk/GameTrustMenu",c.gLayerLevel.Normal,a.trustMenu),PreviewSkinTip:new s.PrefabItem("UIPreviewSkinTip","prefabs/room/PreviewSkinTip",c.gLayerLevel.Normal,a.waitAni),SkinSendCardCtrl:new s.PrefabItem("UISendCardCtrl","skinPrefabs/desk/SkinSendCardCtrl",c.gLayerLevel.Normal,a.sendCard),SkinGamePlayersView:new s.PrefabItem("UIGamePlayersView","skinPrefabs/player/SkinGamePlayersView",c.gLayerLevel.Normal,a.players)},defPrefab:{},skinPrefab:{},altas:["altas/GameChat"],popup:{GameSetting:new s.PrefabItem("UIGameSetting","prefabs/room/GameSetting",c.gLayerLevel.Popup,r.PopupZIndex.settings),GameChatView:new s.PrefabItem("UIGameChatView","prefabs/chat/GameChatView",c.gLayerLevel.Popup,r.PopupZIndex.chatLayer),GameExitDlg:new s.PrefabItem("UIGameExitDlg","prefabs/room/GameExitDlg",c.gLayerLevel.Popup,r.PopupZIndex.exitDlg),GameLoading:new s.PrefabItem("UIGameLoading","prefabs/room/GameLoading",c.gLayerLevel.Popup,r.PopupZIndex.loading)}};var l=function(t){function e(){var e=t.call(this)||this;return e.name=c.gAssetBundleName.GAME_BASE_RES,e.tips="\u6e38\u620f\u57fa\u672c\u5143\u7d20",e.dependency=[c.gAssetBundleName.GAME_BASE_SRC,c.gAssetBundleName.MAIN,c.gAssetBundleName.TABLES_RES],e}return i(e,t),e.prototype.getRes=function(){return o.BaseGameUIConfig},e}(p.BundleConfig);o.BaseGameBundleConfig=l,p.default.getInstance().addBundleCfg(new l),cc._RF.pop()},{"../../../script/app/config/ResConfig":void 0,"../../../script/app/const/Global":void 0,"../../../script/lib/manager/ResManager":void 0,"./../../../script/app/config/ResConfig":void 0}],BaseGoldGameFlow:[function(t,e,o){"use strict";cc._RF.push(e,"03ac0PUobJJxbMoXtw1Jt3b","BaseGoldGameFlow");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BaseGoldGameFlow=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(t("../flow/BaseGameFlow").BaseGameFlow);o.BaseGoldGameFlow=a,cc._RF.pop()},{"../flow/BaseGameFlow":"BaseGameFlow"}],BaseGoldRoomData:[function(t,e,o){"use strict";cc._RF.push(e,"a2b7aFSn0tK1I3GTCmAFdcd","BaseGoldRoomData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BaseGoldRoomData=void 0;var a=t("../../../../script/lib/utils/ComUtils"),r=t("../../../../script/lib/utils/Logger"),s=function(t){function e(e){var o=t.call(this,e)||this;return o.iMultpNum=1,o.iWaitTime=0,o.bWild=!1,o.people=0,o.gameID=0,o.iBaseScore=0,o.clear(),o}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.iMultpNum=1,this.people=0,this.gameID=0,this.iBaseScore=0,this.iWaitTime=0,this.bWild=!1},e.prototype.getDeskInfo=function(){return[]},e.prototype.getRoomInfo=function(){return[""]},e.prototype.getBaseScore=function(){return this.iBaseScore},e.prototype.setMultpNum=function(t){this.iMultpNum=t},e.prototype.isWild=function(){return this.bWild},e.prototype.parse=function(t){if(t){var e=a.ComUtils.u8ToUTF8Str(t);if(r.Logger.info("[BaseGoldRoomData parse] gameID("+this.gameID+") strRoomInfo="+e),e.length<=0)return null;var o=JSON.parse(e);return o&&(this.iWaitTime=o.time||0,this.iBaseScore=o.basescore||0,this.people=o.people||0),o}return null},e}(t("../BaseRoomData").BaseRoomData);o.BaseGoldRoomData=s,cc._RF.pop()},{"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../BaseRoomData":"BaseRoomData"}],BaseHandCardsView:[function(t,e,o){"use strict";cc._RF.push(e,"d37e6IdPV1A14tU3e1pmACB","BaseHandCardsView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BaseHandCardsView=void 0;var a=t("../../../../script/lib/base/CxCompExt"),r=t("../../model/GameEvent"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handCardLSDatas=[],e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.curDisplayMode=e.curDisplayMode},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(r.GameEvent.HandCard.CLEAR,this.clear),this.bindEvent(r.GameEvent.HandCard.START_SEND_CARD,this.onStartSendCard),this.bindEvent(cc.js.formatStr(r.GameEvent.HandCard.SENDING_CARD,this.viewId),this.onSendingCard),this.bindEvent(r.GameEvent.HandCard.END_SEND_CARD,this.onEndSendCard),this.bindEvent(r.GameEvent.HandCard.REDEAL_CARD,this.onRedealCard),this.bindEvent(r.GameEvent.HandCard.INFORM_PLAYER_OP,this.onInformPlayerOp),this.bindEvent(cc.js.formatStr(r.GameEvent.HandCard.REFREASH,this.viewId),this.onHandCardRefreash),this.bindEvent(r.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(r.GameEvent.Com.GAME_SCENE_CLEAR,this.clear)},e.prototype.setDataDelegate=function(t){this.playDataDelegate=t},e.prototype.getDataDelegate=function(){return this.playDataDelegate},e.prototype.getCurDisplayMode=function(){return this.curDisplayMode},e.prototype.getViewId=function(){return this.viewId},e.prototype.onHandCardRefreash=function(t){t==this.viewId&&this.handCardRefreash()},e.prototype.clear=function(){this.handCardLSDatas=[],t.prototype.clear.call(this)},e}(a.CxCompExt);o.BaseHandCardsView=s,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../model/GameEvent":"GameEvent"}],BasePlayData:[function(t,e,o){"use strict";cc._RF.push(e,"dbef28r6mVDAqQYY5W0zLGz","BasePlayData"),Object.defineProperty(o,"__esModule",{value:!0}),o.BasePlayData=o.ScopaOpEatCard=o.BaseGameResult=o.AllCardDatas=void 0;var n=t("../../../script/app/const/game/GameConstant");o.AllCardDatas=[2,3,4,5,6,7,8,9,10,11,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,30,34,35,36,37,38,39,40,41,42,43,44,45,46,50,51,52,53,54,55,56,57,58,59,60,61,62,66,67];var i=function(){function t(){}return t.prototype.clear=function(){},t}();o.BaseGameResult=i;var a=function(){function t(){}return t.prototype.clear=function(){this.viewId=0,this.deleteCards=[],this.outCardData=0,this.bScopa=!1,this.bSurplus=!1,this.scopaCount=0,this.bOurSide=!1,this.bSettebello=!1,this.delayTime=0,this.iMultpNum=0},t.prototype.equals=function(t){if(!t)return!1;if(this.viewId!=t.viewId)return!1;if(this.deleteCards.length!=t.deleteCards.length)return!1;if(this.deleteCards.length===t.deleteCards.length)for(var e=0;e<this.deleteCards.length;e++)if(this.deleteCards[e]!==t.deleteCards[e])return!1;return this.outCardData==t.outCardData&&this.bScopa==t.bScopa&&this.bSurplus==t.bSurplus&&this.scopaCount==t.scopaCount&&this.bOurSide==t.bOurSide&&this.bSettebello==t.bSettebello&&this.iMultpNum==t.iMultpNum},t}();o.ScopaOpEatCard=a;var r=function(){function t(t){this.gameName=null,this.opTimeMax=10,this.clear(),this.gameName=t}return t.prototype.isViewIdCanOutCard=function(t){return this.curOperateViewId==t},t.prototype.clear=function(){this.unKnowCardData=o.AllCardDatas.slice(0),this.cardTotalNum=0,this.curCardStackNum=0,this.handCardDisplayMode=[0,0,0,0],this.outCardDatas=[],this.allHandCardDatas=[[],[],[],[]],this.isOutCardStatus=!1,this.curOperateViewId=0,this.curProvideViewId=0,this.curOpRemainTime=0,this.curOpActionCode=0,this.curProvideCard=0,this.userGold=[0,0,0,0],this.isTotalEnd=!1,this.initScore=0,this.isTrust=!1,this.curResult?this.curResult.clear():this.curResult=new i},t.prototype.setHandCardData=function(t,e,o){this.allHandCardDatas[t]=[];for(var n=0;n<o;n++)this.addHandCard(t,e[n]||0)},t.prototype.initHandCardData0=function(t,e){this.allHandCardDatas[t]=[];for(var o=0;o<e;o++)this.addHandCard(t,0)},t.prototype.sortHandCardDatas=function(t){var e=this;this.allHandCardDatas[t].sort(function(t,o){return e.handCardCompare(t,o)})},t.prototype.addHandCard=function(t,e){this.allHandCardDatas[t].push(e)},t.prototype.deleteOneHandCardByData=function(t,e){if(n.GameConstant.HandCardMode.DISPLAY==this.handCardDisplayMode[t]){var o=this.allHandCardDatas[t].indexOf(e);o>-1&&this.allHandCardDatas[t].splice(o,1)}else this.allHandCardDatas[t].pop()},t.prototype.deleteHandCardByDatas=function(t,e){for(var o=0,n=e;o<n.length;o++){var i=n[o];this.deleteOneHandCardByData(t,i)}},t.prototype.addDeskOutCard=function(t){for(var e=!1,o=0;o<this.outCardDatas.length;o++)if(0===this.outCardDatas[o]){this.outCardDatas[o]=t,e=!0;break}e||this.outCardDatas.push(t)},t.prototype.deleteDeskOutCard=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];if(n>0){var i=this.outCardDatas.indexOf(n);i>=0&&(this.outCardDatas[i]=0)}}for(var a=this.outCardDatas.length-1;a>=0&&!(this.outCardDatas[a]>0);--a)0===this.outCardDatas[a]&&this.outCardDatas.splice(a,1)},t.prototype.deleteUnknowCardDatas=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];if(n>0){var i=this.unKnowCardData.indexOf(n);i>=0&&this.unKnowCardData.splice(i,1)}}},t.prototype.getRemainNumInUnknowCard=function(t){var e=0;if(t>0)for(var o=0;o<this.unKnowCardData.length;o++)t==this.unKnowCardData[o]&&e++;return e},t.prototype.getAiCards=function(){return[]},t}();o.BasePlayData=r,cc._RF.pop()},{"../../../script/app/const/game/GameConstant":void 0}],BaseRoomData:[function(t,e,o){"use strict";cc._RF.push(e,"101c0+hGBFIIY+okluRRB9q","BaseRoomData"),Object.defineProperty(o,"__esModule",{value:!0}),o.BaseRoomData=void 0;var n=t("../../../script/app/const/game/GameConstant"),i=t("../../../script/app/const/Global"),a=t("../../../script/app/model/DataProxy"),r=t("./GameInitConfig"),s=function(){function t(t){this.playerInfo=null,this.myBaseInfo=null,this.bankerViewId=0,this.maxPlayerNum=0,this.loginFinish=!1,this.isReplay=!1,this.gameID=0,this.roomPlayStatus=n.GameConstant.RoomPlayStatus.None,this.roomID=0,this.deskID=0,this.goldNotEnough=!1,this.isTimeOut=!1,this.isExitGame=!1,this.isConnectBreak=!1,this.leftPlayerIdList=[],this.strRoomYMD="",this.strRoomUUID="",this.isGameEnd=!1,this.gameName="",this.clear(),this.maxPlayerNum=2,this.gameName=t}return t.prototype.setLoginFinish=function(t){this.loginFinish=t},t.prototype.isLoginFinish=function(){return this.loginFinish},t.prototype.setGameId=function(t){this.gameID=t},t.prototype.setMyBaseInfo=function(t){this.myBaseInfo=t},t.prototype.getMyBaseInfo=function(){return this.myBaseInfo},t.prototype.getMyViewId=function(){return 0},t.prototype.getMaxPlayerNum=function(){return this.maxPlayerNum},t.prototype.setMaxPlayerNum=function(t){r.GameInitConfig.maxPlayerNum=t,this.maxPlayerNum=t,t<2&&console.error("setMaxPlayerNum")},t.prototype.getViewIdByChairId=function(t){if(t<=0||t>this.maxPlayerNum)return-1;if(this.myBaseInfo.chairId==t)return this.getMyViewId();if(2==this.maxPlayerNum)return 2;if(3==this.maxPlayerNum){var e=t-this.myBaseInfo.chairId;return e>0?2==e?3:1:e+4==2?1:3}return(t+this.maxPlayerNum-this.myBaseInfo.chairId+this.getMyViewId())%this.maxPlayerNum},t.prototype.getChairIdByUserId=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].userId==t)return this.playerInfo[e].chairId;return-1},t.prototype.getUserIdByViewId=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].viewId==t)return this.playerInfo[e].userId;return 0},t.prototype.getPlayerByUserId=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].userId==t)return this.playerInfo[e];return null},t.prototype.getPlayerByViewId=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].viewId==t)return this.playerInfo[e];return null},t.prototype.getPlayerByChairId=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].chairId==t)return this.playerInfo[e];return null},t.prototype.getChairIdByViewId=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].viewId==t)return this.playerInfo[e].chairId;return 0},t.prototype.isExsitRealPlayer=function(){return this.playerInfo.filter(function(t){return 0==t.isRobot}).length>1},t.prototype.addPlayer=function(t){var e=!1;t.userId==this.myBaseInfo.userId?(t.viewId=this.getMyViewId(),this.myBaseInfo=t):t.viewId=this.getViewIdByChairId(t.chairId);for(var o=0;o<this.playerInfo.length;o++)if(this.playerInfo[o].userId==t.userId){this.playerInfo[o]=t,e=!0;break}e||this.playerInfo.push(t)},t.prototype.removePlayer=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].userId==t)return this.playerInfo.splice(e,1),!0;return!1},t.prototype.removeAllPlayer=function(){this.playerInfo=[]},t.prototype.getCurAllPlayerInfo=function(){return this.playerInfo},t.prototype.getOnDeskPlayerNum=function(){return this.playerInfo.length},t.prototype.isUserOnDesk=function(t){for(var e=0;e<this.playerInfo.length;e++)if(this.playerInfo[e].userId==t)return!0;return!1},t.prototype.playerStatusUpdate=function(t,e){1==this.isUserOnDesk(t)&&(this.getPlayerByUserId(t).status=e,e==n.GameConstant.RoomUserStatus.GetOut?this.roomPlayStatus==n.GameConstant.RoomPlayStatus.waiting?this.removePlayer(t):this.roomPlayStatus==n.GameConstant.RoomPlayStatus.gameEnd&&t!=this.myBaseInfo.userId&&this.leftPlayerIdList.push(t):this.filterLeftPlayer(t))},t.prototype.removeLeftPlayer=function(){var t=this;this.leftPlayerIdList.forEach(function(e){t.removePlayer(e)}),this.leftPlayerIdList=[]},t.prototype.filterLeftPlayer=function(t){var e=this.leftPlayerIdList.indexOf(t);this.leftPlayerIdList.splice(e,1)},t.prototype.playerGoldUpdate=function(t,e){var o=this.getPlayerByUserId(t);o&&(o.gold=e.gold,e.gem&&(o.gem=e.gem))},t.prototype.setPlayStatus=function(t){this.roomPlayStatus=t},t.prototype.isPlaying=function(){return this.roomPlayStatus==n.GameConstant.RoomPlayStatus.playing},t.prototype.onLoginFinish=function(){this.setLoginFinish(!0)},t.prototype.getGameName=function(){var t=a.DataProxy.getInstance().gameData.enterGameId;return i.Global.getHuskyGameInfo(t).name},t.prototype.getCardDisplayMode=function(){return this.isReplay?n.GameConstant.HandCardMode.DISPLAY:n.GameConstant.HandCardMode.NORMAL},t.prototype.clear=function(){this.playerInfo=[],this.roomPlayStatus=n.GameConstant.RoomPlayStatus.None,this.goldNotEnough=!1,this.isTimeOut=!1,this.isExitGame=!1,this.isConnectBreak=!1,this.loginFinish=!1,this.isRobotRoom=!1,this.isGameEnd=!1},t}();o.BaseRoomData=s,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/const/game/GameConstant":void 0,"../../../script/app/model/DataProxy":void 0,"./GameInitConfig":"GameInitConfig"}],CMD_GameMsg:[function(t,e,o){"use strict";cc._RF.push(e,"c4890ix2KVHzaCotkX/8J+n","CMD_GameMsg"),Object.defineProperty(o,"__esModule",{value:!0}),o.CHANGE_GAME_ERR=o.GAME_SUB_MSG=o.LOGIN_GAME_ERR=o.LOGIN_GAME_SUB_MSG=o.MSG_SC_UserCUP=o.MSG_SC_UserPS=o.MSG_SC_UserChangeDeskInform=o.MSG_SC_ChangeDeskFailed=o.MSG_SC_BroadcastVoiceChat=o.MSG_CS_VoiceChat=o.MSG_SC_BroadcastTextChat=o.MSG_CS_TextChat=o.MSG_SC_BroadcastPhizChat=o.MSG_CS_PhizChat=o.MSG_CS_GameData=o.MSG_SCS_UserTrustMsg=o.MSG_SC_UserGold=o.MSG_SC_UserStatus=o.MSG_SC_UserEnterList=o.MSG_SC_UserEnter=o.MSG_SC_UserReadyResult=o.MSG_SC_DeskInfo=o.MSG_SC_LoginFinished=o.MSG_SC_LoginFailed=o.MSG_SC_LoginSuccess=o.MSG_CS_LoginGameData=void 0;var n=function(){function t(){this.dwUserID=0,this.chLoginData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.chLoginData&&e.uint32(18).bytes(t.chLoginData),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.chLoginData=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_CS_LoginGameData=n;var i=function(){function t(){this.dwEnterGameID=0,this.chLoginData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwEnterGameID&&e.uint32(8).uint32(t.dwEnterGameID),null!=t.chLoginData&&e.uint32(18).bytes(t.chLoginData),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwEnterGameID=n.uint32();break;case 2:a.chLoginData=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_LoginSuccess=i;var a=function(){function t(){this.ErrorCode=1,this.dwLineNum=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.ErrorCode&&e.uint32(8).int32(t.ErrorCode),null!=t.dwLineNum&&e.uint32(16).uint32(t.dwLineNum),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.ErrorCode=n.int32();break;case 2:a.dwLineNum=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_LoginFailed=a;var r=function(){function t(){this.chLoginData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.chLoginData&&e.uint32(10).bytes(t.chLoginData),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.chLoginData=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_LoginFinished=r;var s=function(){function t(){this.dwDeskID=0,this.dwChairNums=0,this.dwPeople=0,this.bIsLock=!1,this.bIsPlaying=!1,this.bIsLookon=!1,this.dwTimeOut=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwDeskID&&e.uint32(8).uint32(t.dwDeskID),null!=t.dwChairNums&&e.uint32(16).uint32(t.dwChairNums),null!=t.dwPeople&&e.uint32(24).uint32(t.dwPeople),null!=t.bIsLock&&e.uint32(32).bool(t.bIsLock),null!=t.bIsPlaying&&e.uint32(40).bool(t.bIsPlaying),null!=t.bIsLookon&&e.uint32(48).bool(t.bIsLookon),null!=t.dwTimeOut&&e.uint32(56).uint32(t.dwTimeOut),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwDeskID=n.uint32();break;case 2:a.dwChairNums=n.uint32();break;case 3:a.dwPeople=n.uint32();break;case 4:a.bIsLock=n.bool();break;case 5:a.bIsPlaying=n.bool();break;case 6:a.bIsLookon=n.bool();break;case 7:a.dwTimeOut=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_DeskInfo=s;var c=function(){function t(){this.dwDeskID=0,this.dwTimeOut=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwDeskID&&e.uint32(8).uint32(t.dwDeskID),null!=t.dwTimeOut&&e.uint32(16).uint32(t.dwTimeOut),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwDeskID=n.uint32();break;case 2:a.dwTimeOut=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserReadyResult=c;var p=function(){function t(){this.dwUserID=0,this.dwChairID=0,this.dwGem=0,this.llGold=protobuf.util.Long?protobuf.util.LongBits.from(0).toLong():0,this.dwSysFaceID=0,this.dwUserCustFID=0,this.iGender=0,this.szNickName=protobuf.util.newBuffer([]),this.us=0,this.dwJifen=0,this.bRobot=!1,this.chProfilePhoto=protobuf.util.newBuffer([]),this.chInfo=protobuf.util.newBuffer([]),this.dwValuePS=0,this.dwUseTableId=0,this.tabHaveTableId=protobuf.util.emptyArray,this.bIsGoldenPass=!1,this.dwExpLevel=0,this.dwNextLevelExp=0,this.dwNowExp=0}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwChairID&&e.uint32(16).uint32(t.dwChairID),null!=t.dwGem&&e.uint32(24).uint32(t.dwGem),null!=t.llGold&&e.uint32(32).uint64(t.llGold),null!=t.dwSysFaceID&&e.uint32(40).uint32(t.dwSysFaceID),null!=t.dwUserCustFID&&e.uint32(48).uint32(t.dwUserCustFID),null!=t.iGender&&e.uint32(56).int32(t.iGender),null!=t.szNickName&&e.uint32(66).bytes(t.szNickName),null!=t.us&&e.uint32(72).int32(t.us),null!=t.dwJifen&&e.uint32(80).int32(t.dwJifen),null!=t.bRobot&&e.uint32(88).bool(t.bRobot),null!=t.chProfilePhoto&&e.uint32(98).bytes(t.chProfilePhoto),null!=t.chInfo&&e.uint32(106).bytes(t.chInfo),null!=t.dwValuePS&&e.uint32(112).uint32(t.dwValuePS),null!=t.dwUseTableId&&e.uint32(120).uint32(t.dwUseTableId),void 0!==t.tabHaveTableId&&t.tabHaveTableId.length)for(var o=0,n=t.tabHaveTableId;o<n.length;o++){var i=n[o];e.uint32(128).uint32(i)}return null!=t.bIsGoldenPass&&e.uint32(136).bool(t.bIsGoldenPass),null!=t.dwExpLevel&&e.uint32(144).uint32(t.dwExpLevel),null!=t.dwNextLevelExp&&e.uint32(152).uint32(t.dwNextLevelExp),null!=t.dwNowExp&&e.uint32(160).uint32(t.dwNowExp),e},t.decode=function(e,o){var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;for(a.tabHaveTableId=[];n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwChairID=n.uint32();break;case 3:a.dwGem=n.uint32();break;case 4:a.llGold=n.uint64();break;case 5:a.dwSysFaceID=n.uint32();break;case 6:a.dwUserCustFID=n.uint32();break;case 7:a.iGender=n.int32();break;case 8:a.szNickName=n.bytes();break;case 9:a.us=n.int32();break;case 10:a.dwJifen=n.int32();break;case 11:a.bRobot=n.bool();break;case 12:a.chProfilePhoto=n.bytes();break;case 13:a.chInfo=n.bytes();break;case 14:a.dwValuePS=n.uint32();break;case 15:a.dwUseTableId=n.uint32();break;case 16:if(2==(7&s))for(var c=n.uint32()+n.pos;n.pos<c;)a.tabHaveTableId.push(n.uint32());else a.tabHaveTableId.push(n.uint32());break;case 17:a.bIsGoldenPass=n.bool();break;case 18:a.dwExpLevel=n.uint32();break;case 19:a.dwNextLevelExp=n.uint32();break;case 20:a.dwNowExp=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserEnter=p;var l=function(){function t(){this.UserList=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create());for(var o=0,n=t.UserList;o<n.length;o++){var i=n[o];null!=i&&p.encode(i,e.uint32(10).fork()).ldelim()}return e},t.decode=function(e,o){var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;for(a.UserList=[];n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.UserList.push(p.decode(n,n.uint32()));break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserEnterList=l;var d=function(){function t(){this.dwUserID=0,this.dwChairID=0,this.us=0,this.dwLeftTag=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwChairID&&e.uint32(16).uint32(t.dwChairID),null!=t.us&&e.uint32(24).int32(t.us),null!=t.dwLeftTag&&e.uint32(32).uint32(t.dwLeftTag),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwChairID=n.uint32();break;case 3:a.us=n.int32();break;case 4:a.dwLeftTag=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserStatus=d;var u=function(){function t(){this.dwUserID=0,this.dwChairID=0,this.dwGem=0,this.llGold=protobuf.util.Long?protobuf.util.LongBits.from(0).toLong():0,this.dwValuePS=protobuf.util.Long?protobuf.util.LongBits.from(0).toLong():0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwChairID&&e.uint32(16).uint32(t.dwChairID),null!=t.dwGem&&e.uint32(24).uint32(t.dwGem),null!=t.llGold&&e.uint32(32).uint64(t.llGold),null!=t.dwValuePS&&e.uint32(40).uint64(t.dwValuePS),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwChairID=n.uint32();break;case 3:a.dwGem=n.uint32();break;case 4:a.llGold=n.uint64();break;case 5:a.dwValuePS=n.uint64();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserGold=u;var h=function(){function t(){this.dwUserID=0,this.dwChairID=0,this.bIsTrust=!1}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwChairID&&e.uint32(16).uint32(t.dwChairID),null!=t.bIsTrust&&e.uint32(24).bool(t.bIsTrust),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwChairID=n.uint32();break;case 3:a.bIsTrust=n.bool();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SCS_UserTrustMsg=h;var _=function(){function t(){this.dwMainID=0,this.dwSubID=0,this.byGameData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwMainID&&e.uint32(8).uint32(t.dwMainID),null!=t.dwSubID&&e.uint32(16).uint32(t.dwSubID),null!=t.byGameData&&e.uint32(26).bytes(t.byGameData),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwMainID=n.uint32();break;case 2:a.dwSubID=n.uint32();break;case 3:a.byGameData=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_CS_GameData=_;var f=function(){function t(){this.dwChatIndex=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChatIndex&&e.uint32(8).uint32(t.dwChatIndex),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwChatIndex=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_CS_PhizChat=f;var m=function(){function t(){this.dwUserID=0,this.dwRoomID=0,this.dwDeskID=0,this.dwChairID=0,this.dwChatIndex=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwRoomID&&e.uint32(16).uint32(t.dwRoomID),null!=t.dwDeskID&&e.uint32(24).uint32(t.dwDeskID),null!=t.dwChairID&&e.uint32(32).uint32(t.dwChairID),null!=t.dwChatIndex&&e.uint32(40).uint32(t.dwChatIndex),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwRoomID=n.uint32();break;case 3:a.dwDeskID=n.uint32();break;case 4:a.dwChairID=n.uint32();break;case 5:a.dwChatIndex=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_BroadcastPhizChat=m;var y=function(){function t(){this.chSayInfo=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.chSayInfo&&e.uint32(10).bytes(t.chSayInfo),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.chSayInfo=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_CS_TextChat=y;var g=function(){function t(){this.dwUserID=0,this.byMsgTag=0,this.dwRoomID=0,this.dwDeskID=0,this.dwChairID=0,this.chSayInfo=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.byMsgTag&&e.uint32(16).uint32(t.byMsgTag),null!=t.dwRoomID&&e.uint32(24).uint32(t.dwRoomID),null!=t.dwDeskID&&e.uint32(32).uint32(t.dwDeskID),null!=t.dwChairID&&e.uint32(40).uint32(t.dwChairID),null!=t.chSayInfo&&e.uint32(50).bytes(t.chSayInfo),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.byMsgTag=n.uint32();break;case 3:a.dwRoomID=n.uint32();break;case 4:a.dwDeskID=n.uint32();break;case 5:a.dwChairID=n.uint32();break;case 6:a.chSayInfo=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_BroadcastTextChat=g;var E=function(){function t(){this.chVoiceBufData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.chVoiceBufData&&e.uint32(10).bytes(t.chVoiceBufData),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.chVoiceBufData=n.bytes();break;default:n.skipType(7&s)}}return a},t}();o.MSG_CS_VoiceChat=E;var C=function(){function t(){this.dwUserID=0,this.byMsgTag=0,this.szNickName=protobuf.util.newBuffer([]),this.bGender=!1,this.iSysFaceID=0,this.chVoiceBufData=protobuf.util.newBuffer([]),this.dwVIPGrade=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.byMsgTag&&e.uint32(16).uint32(t.byMsgTag),null!=t.szNickName&&e.uint32(26).bytes(t.szNickName),null!=t.bGender&&e.uint32(32).bool(t.bGender),null!=t.iSysFaceID&&e.uint32(40).int32(t.iSysFaceID),null!=t.chVoiceBufData&&e.uint32(50).bytes(t.chVoiceBufData),null!=t.dwVIPGrade&&e.uint32(56).uint32(t.dwVIPGrade),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.byMsgTag=n.uint32();break;case 3:a.szNickName=n.bytes();break;case 4:a.bGender=n.bool();break;case 5:a.iSysFaceID=n.int32();break;case 6:a.chVoiceBufData=n.bytes();break;case 7:a.dwVIPGrade=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_BroadcastVoiceChat=C;var S=function(){function t(){this.ErrorCode=1,this.dwLineNum=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.ErrorCode&&e.uint32(8).int32(t.ErrorCode),null!=t.dwLineNum&&e.uint32(16).uint32(t.dwLineNum),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.ErrorCode=n.int32();break;case 2:a.dwLineNum=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_ChangeDeskFailed=S;var G=function(){function t(){this.dwUserID=0,this.dwOldChairID=0,this.dwNewChairID=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwOldChairID&&e.uint32(16).uint32(t.dwOldChairID),null!=t.dwNewChairID&&e.uint32(24).uint32(t.dwNewChairID),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwOldChairID=n.uint32();break;case 3:a.dwNewChairID=n.uint32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserChangeDeskInform=G;var v=function(){function t(){this.dwUserID=0,this.dwBasicPS=0,this.dwCurPS=0,this.iChangePS=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwBasicPS&&e.uint32(16).uint32(t.dwBasicPS),null!=t.dwCurPS&&e.uint32(24).uint32(t.dwCurPS),null!=t.iChangePS&&e.uint32(32).int32(t.iChangePS),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwBasicPS=n.uint32();break;case 3:a.dwCurPS=n.uint32();break;case 4:a.iChangePS=n.int32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserPS=v;var I=function(){function t(){this.dwUserID=0,this.dwCurCup=0,this.iChangeCUP=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwUserID&&e.uint32(8).uint32(t.dwUserID),null!=t.dwCurCup&&e.uint32(16).uint32(t.dwCurCup),null!=t.iChangeCUP&&e.uint32(24).int32(t.iChangeCUP),e},t.decode=function(e,o){for(var n=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===o?n.len:n.pos+o,a=new t,r=!1;n.pos<i&&!r;){var s=n.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwUserID=n.uint32();break;case 2:a.dwCurCup=n.uint32();break;case 3:a.iChangeCUP=n.int32();break;default:n.skipType(7&s)}}return a},t}();o.MSG_SC_UserCUP=I,o.LOGIN_GAME_SUB_MSG={MSGID_CS_LOGIN_GAME:2e3,MSGID_SC_LOGIN_SUCCESS:2500,MSGID_SC_LOGIN_FAILED:2501,MSGID_SC_LOGIN_FINISHED:2502,UNRECOGNIZED:-1},o.LOGIN_GAME_ERR={ERR_SC_LONG_NULLITY:1,ERR_SC_ACCOUNTS_NOT_EXIST:2,ERR_SC_NOFIND_CHAIR:3,ERR_SC_GATE_ERROR:4,ERR_SC_UUID:5,ERR_SC_GOLD_NOENOUGH:6,ERR_SC_TAIL_FAILED:7,ERR_SC_GOLD_TOOMUCH:8,UNRECOGNIZED:-1},o.GAME_SUB_MSG={MSGID_SC_USER_ENTER:2600,MSGID_SC_USER_STATUS:2601,MSGID_SC_USER_GOLD:2602,MSGID_SC_USER_GOLDNOENOUGH:2603,MSGID_CS_USER_READY:2605,MSGID_SC_USER_READYRESULT:2606,MSGID_CS_USER_LEFT:2607,MSGID_SC_USER_LEFTSUC:2608,MSGID_SCS_USER_TRUST:2609,MSGID_CS_USER_INIT_FINISH:2610,MSGID_SCS_DESK_GAMEDATA:2700,MSGID_SC_DESK_DESKINFO:2701,MSGID_SC_DESK_GAMESTART:2702,MSGID_SC_DESK_GAMEEND:2703,MSGID_CS_DESK_PHIZ_CHAT:2750,MSGID_SC_DESK_B_PHIZCHAT:2751,MSGID_CS_DESK_TEXT_CHAT:2752,MSGID_SC_DESK_B_TEXTCHAT:2753,MSGID_CS_DESK_VOICE_CHAT:2754,MSGID_SC_DESK_B_VOICECHAT:2755,MSGID_CS_DESK_PICTURE_CHAT:2756,MSGID_SC_DESK_B_PICTURECHAT:2757,MSGID_CS_DESK_CHANGE:2760,MSGID_SC_DESK_CHANGESUC:2761,MSGID_SC_DESK_CHANGEFIN:2762,MSGID_SC_DESK_CHANGE_FAILD:2763,MSGID_SC_DESK_USERCHANGEDESK:2770,MSGID_SC_USER_PSUPDATE:2800,MSGID_SC_USER_CUPUPDATE:2801,UNRECOGNIZED:-1},o.CHANGE_GAME_ERR={CHANGE_ERR_SC_LONG_NULLITY:1,CHANGE_ERR_SC_NOFIND_CHAIR:2,CHANGE_ERR_SC_GOLD_NOENOUGH:3,CHANGE_ERR_SC_IS_PLAYING:4,UNRECOGNIZED:-1},cc._RF.pop()},{}],GameBaseI18n:[function(t,e,o){"use strict";cc._RF.push(e,"4b7d0NBT9RGhZH5UqnQ+qlQ","GameBaseI18n");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.IGameBaseI18n=o.GameBaseLan=void 0;var a=t("../../../script/app/language/LanguageImpl"),r=t("../../../script/app/const/Global"),s=function(){function t(){}return Object.defineProperty(t,"bundle",{get:function(){return r.gAssetBundleName.GAME_BASE_SRC},enumerable:!1,configurable:!0}),t.setLanguage=function(t){if(!this.lan||this.lan.language!==t){switch(this.lan=null,t){case cc.sys.LANGUAGE_ENGLISH:this.lan=new l;break;case cc.sys.LANGUAGE_ITALIAN:this.lan=new d;break;case cc.sys.LANGUAGE_CHINESE:this.lan=new p;break;default:this.lan=new l}a.i18n[""+this.bundle]={},a.i18n[""+this.bundle]=this.lan}},Object.defineProperty(t,"i18n",{get:function(){return this.lan},enumerable:!1,configurable:!0}),t}();o.GameBaseLan=s;var c=function(){function t(){this.txt_Denari="",this.txt_Primiera="",this.txt_Cards="",this.txt_Settebello="",this.txt_Scopa="",this.txt_Score="",this.game_end_win="",this.game_end_lost="",this.game_end_draw="",this.game_end_text_capped="",this.game_end_you_capped_tips="",this.game_end_other_capped_tips="",this.game_is_not_your_turn="",this.game_choose_take_cards="",this.chat_chat="",this.chat_emoji="",this.chat_input_tips="",this.preview_skin_tips=""}return t.k={login_fail:"login_fail",match_desk_fail:"match_desk_fail",game_exit_trust:"game_exit_trust",game_end_rematch:"game_end_rematch",txt_Denari:"txt_Denari",txt_Primiera:"txt_Primiera",txt_Cards:"txt_Cards",txt_Settebello:"txt_Settebello",txt_Scopa:"txt_Scopa",txt_Score:"txt_Score",game_end_win:"game_end_win",game_end_lost:"game_end_lost",game_end_draw:"game_end_draw",game_end_text_capped:"game_end_text_capped",game_end_you_capped_tips:"game_end_you_capped_tips",game_end_other_capped_tips:"game_end_other_capped_tips",game_is_not_your_turn:"game_is_not_your_turn",game_choose_take_cards:"game_choose_take_cards",wait_for_partner:"wait_for_partner",chat_chat:"chat_chat",chat_emoji:"chat_emoji",chat_input_tips:"chat_input_tips",txt_leave:"txt_leave",txt_back_to_game:"txt_back_to_game",gold_game_exit_tips:"gold_game_exit_tips",preview_skin_tips:"preview_skin_tips"},t}();o.IGameBaseI18n=c;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.language=cc.sys.LANGUAGE_CHINESE,e.login_fail="\u767b\u5f55\u5931\u8d25",e.match_desk_fail="\u5339\u914d\u5931\u8d25",e.game_exit_trust="\u53d6\u6d88\u6258\u7ba1",e.game_end_rematch="\u91cd\u65b0\u5339\u914d({0})",e.gold_game_exit_tips="\u786e\u5b9a\u9000\u51fa\u6e38\u620f\u5417?\u673a\u5668\u4eba\u4f1a\u66ff\u4f60\u73a9",e.txt_leave="\u79bb\u5f00",e.txt_back_to_game="\u8fd4\u56de\u6e38\u620f",e.txt_Denari="Denari",e.txt_Primiera="Primiera",e.txt_Cards="Cards",e.txt_Settebello="Settebello",e.txt_Scopa="Scopa",e.txt_Score="Score",e.game_end_win="\u4f60\u8d62\u4e86",e.game_end_lost="\u4f60\u8f93\u4e86",e.game_end_draw="\u5e73\u5c40",e.game_end_text_capped="\u5c01\u9876",e.game_end_you_capped_tips="\u4f60\u80fd\u8d62{0}\u91d1\u5e01, \u56e0\u4e3a\u4f60\u53ea\u62e5\u6709{1}\u91d1\u5e01",e.game_end_other_capped_tips="\u4f60\u80fd\u8d62{0}\u91d1\u5e01, \u56e0\u4e3a\u5bf9\u624b\u53ea\u62e5\u6709{1}\u91d1\u5e01",e.game_is_not_your_turn="\u8fd8\u6ca1\u8f6e\u5230\u60a8\u51fa\u724c\u54e6",e.game_choose_take_cards="\u8bf7\u9009\u62e9\u51fa\u724c",e.wait_for_partner="\u6b63\u5728\u7b49\u5f85\u5bf9\u624b",e.chat_chat="\u804a\u5929",e.chat_emoji="\u8868\u60c5",e.chat_input_tips="\u8f93\u5165...",e.preview_skin_tips="\u9884\u89c8\u5bf9\u624b\u7684\u684c\u5b50",e}return i(e,t),e}(c),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.language=cc.sys.LANGUAGE_ENGLISH,e.login_fail="login fail",e.match_desk_fail="match desk fail",e.game_exit_trust="CANCEL",e.game_end_rematch="PLAY AGAIN({0})",e.gold_game_exit_tips="Are you sure to leave?A bot will playing for you.",e.txt_leave="LEAVE",e.txt_back_to_game="BACK TO GAME",e.txt_Denari="Denari",e.txt_Primiera="Primiera",e.txt_Cards="Cards",e.txt_Settebello="Settebello",e.txt_Scopa="Scopa",e.txt_Score="Score",e.game_end_win="YOU WON",e.game_end_lost="YOU LOST",e.game_end_draw="DRAW",e.game_end_text_capped="CAPPED",e.game_end_you_capped_tips="You can win {0} coins, because you only own {1} coins",e.game_end_other_capped_tips="You can win {0} coins, because the opponent only own {1} coins",e.game_is_not_your_turn="It is not your turn",e.game_choose_take_cards="CHOOSE WHICH CARDS TO TAKE= ",e.wait_for_partner="Waiting for the partner",e.chat_chat="CHAT",e.chat_emoji="EMOJI",e.chat_input_tips="Typing...",e.preview_skin_tips="OPPONENT'S TABLE PREVIEW",e}return i(e,t),e}(c),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.language=cc.sys.LANGUAGE_ITALIAN,e.login_fail="login fail",e.match_desk_fail="match desk fail",e.game_exit_trust="ANNULLA",e.game_end_rematch="UN'ALTRA PARTITA({0})",e.gold_game_exit_tips="Sei sicuro di voler uscire? Dopo essere uscito, il robot giocher\xe0 per te.\x03",e.txt_leave="ESCI",e.txt_back_to_game="TORNA AL GIOCO",e.txt_Denari="Denari",e.txt_Primiera="Primiera",e.txt_Cards="Cards",e.txt_Settebello="Settebello",e.txt_Scopa="Scopa",e.txt_Score="Punto",e.game_end_win="HAI PERSO",e.game_end_lost="HAI VINTO",e.game_end_draw="PAREGGIO",e.game_end_text_capped="CAPPED",e.game_end_you_capped_tips="Puoi vincere {0} monete, perch\xe9 hai vinto solo {1} monete",e.game_end_other_capped_tips="Puoi vincere {0} monete, perch\xe9 il opposto ha vinto solo{1} monete",e.game_is_not_your_turn="It is not your turn",e.game_choose_take_cards="SCEGLI UNA CARTA PER GIOCARE= ",e.wait_for_partner="Aspettando l'avversario",e.chat_chat="CHIACCHIERARE",e.chat_emoji="EMOJI",e.chat_input_tips="Digitando...",e.preview_skin_tips="OPPONENT'S TABLE PREVIEW",e}return i(e,t),e}(c);cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/language/LanguageImpl":void 0}],GameChatConfig:[function(t,e,o){"use strict";cc._RF.push(e,"0f82bRmKMlNDqHRVNEpQm6G","GameChatConfig");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.IChatConfig=o.GameChatConfig=void 0;var a=function(){function t(){}return Object.defineProperty(t,"ChatIndexEmojiStart",{get:function(){return this.chatCfg.ChatIndexEmojiStart},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ChatIndexEmojiEnd",{get:function(){return this.chatCfg.ChatIndexEmojiEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ChatIndexTextStart",{get:function(){return this.chatCfg.ChatIndexTextStart},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ChatIndexTextEnd",{get:function(){return this.chatCfg.ChatIndexTextEnd},enumerable:!1,configurable:!0}),t.setLanguage=function(t){if(!this.chatCfg||this.chatCfg.language!==t)switch(this.chatCfg=null,t){case cc.sys.LANGUAGE_ENGLISH:this.chatCfg=new s;break;case cc.sys.LANGUAGE_ITALIAN:this.chatCfg=new c;break;case cc.sys.LANGUAGE_CHINESE:this.chatCfg=new p;break;default:this.chatCfg=new s}},t.Emoji=function(t){return this.chatCfg.ChatEmoji[t]},t.ChatText=function(t){return this.chatCfg.ChatText[t]},t.ChatType={Common:1,Emoj:2,InputText:3,Voice:4},t}();o.GameChatConfig=a;var r=function(){this.ChatIndexEmojiStart=0,this.ChatIndexEmojiEnd=19,this.ChatIndexTextStart=30,this.ChatIndexTextEnd=36};o.IChatConfig=r;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.language=cc.sys.LANGUAGE_ENGLISH,e.ChatEmoji=["game_chat_emoj_01","game_chat_emoj_02","game_chat_emoj_03","game_chat_emoj_04","game_chat_emoj_05","game_chat_emoj_06","game_chat_emoj_07","game_chat_emoj_08"],e.ChatText=[{text:"Hello!",audio:"game_chat_com_%s_1"},{text:"Good Luck!",audio:"game_chat_com_%s_5"},{text:"Play Again?",audio:"game_chat_com_%s_6"},{text:"Ok!",audio:"game_chat_com_%s_2"},{text:"Sorry",audio:"game_chat_com_%s_3"},{text:"My God!",audio:"game_chat_com_%s_4"}],e}return i(e,t),e}(r),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.language=cc.sys.LANGUAGE_ITALIAN,e.ChatEmoji=["game_chat_emoj_01","game_chat_emoj_02","game_chat_emoj_03","game_chat_emoj_04","game_chat_emoj_05","game_chat_emoj_06","game_chat_emoj_07","game_chat_emoj_08"],e.ChatText=[{text:"Ciao!",audio:"game_chat_com_%s_1"},{text:"Buona Fortuna!",audio:"game_chat_com_%s_5"},{text:"Gioca un'altra volta?",audio:"game_chat_com_%s_6"},{text:"Ok!",audio:"game_chat_com_%s_2"},{text:"Mi dispiace",audio:"game_chat_com_%s_3"},{text:"Oh Dio!",audio:"game_chat_com_%s_4"}],e}return i(e,t),e}(r),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.language=cc.sys.LANGUAGE_CHINESE,e.ChatEmoji=["game_chat_emoj_01","game_chat_emoj_02","game_chat_emoj_03","game_chat_emoj_04","game_chat_emoj_05","game_chat_emoj_06","game_chat_emoj_07","game_chat_emoj_08"],e.ChatText=[{text:"\u4f60\u597d",audio:"game_chat_com_%s_1"},{text:"\u795d\u4f60\u597d\u8fd0",audio:"game_chat_com_%s_5"},{text:"\u518d\u6765\u4e00\u5c40",audio:"game_chat_com_%s_6"},{text:"\u597d\u7684",audio:"game_chat_com_%s_2"},{text:"\u4e0d\u597d\u610f\u601d",audio:"game_chat_com_%s_3"},{text:"\u6211\u7684\u5929",audio:"game_chat_com_%s_4"}],e}return i(e,t),e}(r);cc._RF.pop()},{}],GameEntry:[function(t,e,o){"use strict";cc._RF.push(e,"1ee19Am9TRHz5o0MwdH5mxw","GameEntry");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GameEntry=void 0;var r=t("../../../../script/app/view/ComUI"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../../script/lib/manager/SceneManager"),p=t("../../../../script/lib/utils/Logger"),l=t("../../../../script/lib/utils/ComUtils"),d=t("../../../../script/app/language/LanguageCfg"),u=t("../../../../script/app/model/DataProxy"),h=t("../../../../script/app/const/Global"),_=cc._decorator,f=_.ccclass,m=(_.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){t.prototype.init.call(this),t.prototype.onLoad.call(this),this.enterGame()},e.prototype.enterGame=function(){var t=u.DataProxy.getInstance().gameData.enterGameId,e=h.Global.convertGameType(t),o=h.Global.getHuskyGameInfo(e).key;if(o){var n=o+"Scene";if(!cc.js.getClassByName(n))return void this.showExitDialog({tips:"Sorry, no game ("+e+") entry found, please try to fix it."});var i=this.getComponent(n);i||(i=this.addComponent(n)),i?i.init(this):(p.Logger.error("[GameEntry enterGame] warning not found "+n),this.showExitDialog({tips:"Sorry, no game resources found, please try to repair."}))}else p.Logger.warn("[GameEntry enterGame] warning not found gameScript, gameid is "+e),this.showExitDialog({tips:"Sorry, no game ("+e+") resource found, please try to fix it."})},e.prototype.showExitDialog=function(t){var e=t.close||!1,o=t.outClose||!1;r.ComUI.showDialog({title:l.ComUtils.getLang(d.LangKey.text_quit),text:t.tips,close:e,outClose:o,cb1:function(){c.default.getInstance().gotoLobby()}})},e.prototype.onTest=function(){var t=this,e=this.node.getChildByName("testlayer");e?e.active=!0:cc.assetManager.loadBundle("test",function(o,n){n&&n.load("prefab/TestLayer",cc.Prefab,function(o,n){n&&(e=cc.instantiate(n),t.node.addChild(e,1e3,"testlayer"))})})},a([f],e)}(s.CxCompExt));o.GameEntry=m,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/manager/SceneManager":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0}],GameEvent:[function(t,e,o){"use strict";cc._RF.push(e,"fdc42uOh0hPk4HniZuM83jL","GameEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameEvent=void 0,function(t){(function(t){t.INIT_FINISH="g_bs_initfinish",t.GAME_START="g_bs_gamestart",t.GAME_PLAYING="g_bs_gameplaying",t.GAME_RESULT="g_bs_gameresult",t.SCENE_PLAYING="g_bs_sceneplaying",t.CHANGE_DESK_RESULT="g_bs_changedeskresult",t.DESK_BASE_CONFIG="g_bs_deskbaseconfig",t.BEFORE_GAME_RESULT="g_bs_beforegameresult",t.AFLTER_GAME_RESULT="g_bs_aftergameresult",t.FAKE_MSG="g_bs_fake_msg"})(t.Base||(t.Base={})),function(t){t.GAME_EXIT="g_cm_gameexit",t.GAME_SCENE_CLEAR="g_cm_gamesceneclear",t.READY_NEXT_CLEAR="g_cm_readynextclear",t.SPEAKER_RECV="g_cm_speakerrecv",t.CARD_HIGH_LIGHT_ORANGE="g_cm_cardhighlightorange",t.MAX_PLAYER_NUM_CHANGE="g_cm_maxplayernumchange",t.RECONNECT="g_cm_reconect",t.LOADING="g_cm_loading",t.LOGIN_GAME="g_cm_logingame",t.RECONNECT_GAME="g_cm_reconnectgame",t.LOGIN_FAILED="g_cm_loginfailed",t.SET_DATA_DELEGATE="g_hdc_setplaydatadelegate",t.LOGIN_SUCCESS="g_cm_loginsuccess",t.REDEAL_CARD="g_cm_redealcard"}(t.Com||(t.Com={})),function(t){t.REAL_ENTEY="g_plyr_realentry",t.ENTRY="g_plyr_entry",t.STATUS_CHANGE="g_plyr_statuschange",t.OP_TIMEOUT="g_plyr_optimeout",t.GOLD_CHANGE="g_plyr_goldchange",t.POWER_CHANGE="g_plyr_powerchange",t.SAME_IP="g_plyr_sameip",t.SHOW_BANKER="g_plyr_showbanker",t.MOVE_END="g_plyr_moveend",t.MOVE="g_plyr_move",t.GAME_START="g_plyr_gamestart",t.CHAT_POS_GET="g_plyr_chatposget",t.CHAT_POS_EMIT="g_plyr_chatposemit",t.UPDATE_USERS_INFO="g_plyr_updateUsersInfo",t.SET_TIMER="g_plyr_settimer",t.SET_TRUST_STATUS="g_plyr_trustresult",t.CLEAR_READY_STATUS="g_plyr_clearreadystatus",t.CLEAR_BANKER_STAUS="g_plyr_clearbankerstatus",t.CLEAR_ALL_STATUS="g_plyr_clearallstatus",t.ON_USER_CLICK="g_plyr_ONUSERCLICK",t.UPDATE_ROOM_USERINFO="g_plyr_updateroomuserinfo",t.ASK_AUTHORIZE_WX_INFO="g_plyr_askauthorizewxinfo",t.SHOW_FANGZHU="g_plyr_showfangzhu",t.PLAYER_CLEAR="g_plyr_clear",t.PUT_HEADS_POS="g_plyr_putheadspos"}(t.Player||(t.Player={})),function(t){t.PLAY_MUSIC_BG="g_vc_playmusicbg",t.STOP_MUSIC_BG="g_vc_stopmusicbg",t.PLAY_EFFECT_CHAT="g_vc_playeffectchat",t.PLAY_EFFECT_OP="g_vc_playeffectop",t.PLAY_EFFECT_CARD="g_vc_playeffectcard",t.PLAY_EFFECT_OTHER="g_vc_playeffectother"}(t.Voice||(t.Voice={})),function(t){t.ON_CHAT_MSG="g_cht_onchatmsg",t.DISPLAY_CHAT_POP="g_cht_displaychatpop",t.CLEAR="g_cht_clear"}(t.Chat||(t.Chat={})),function(t){t.OUT_CARD_SELF="g_opt_outcardself",t.CHANGE_DESK_EVENT="g_opt_changedeskevent",t.OPERATE="g_opt_operate",t.SHOW_TOTAL_RESULT="g_opt_showtotalresult",t.CHOOSE_CHI_GROUP="g_opt_choosechigroup",t.EXIT_GAME_SCENE="g_opt_exitgamescene",t.NEXT_GAME="g_opt_nextgame",t.TRUST="g_opt_trust",t.COPY_ROOM_INFO="g_opt_copyroominfo",t.CLICK_SETTING="g_opt_clicksetting",t.CLICK_JIESAN="g_opt_clickjiesan",t.CLICK_COPY_TOTAL_RESULT="g_opt_clickcopytotalresult",t.CLICK_REMATCH="g_opt_clickrematch",t.CLICK_EATCARD="g_opt_clickcard",t.CLICK_HOME="g_opt_clickhome",t.CLICK_RULE_HELP="g_opt_clickrulehelp"}(t.OperateEvent||(t.OperateEvent={})),function(t){t.GAME_RESULT_TAP_NEXT="g_dsk_gameresulttapnext",t.REMAIN_CARD_NUM_CHANGE="g_dsk_remaincardnumchange",t.GAME_JUSHU_CHANGE="g_dsk_gamejushuchange",t.GAME_JU_CHANGE="g_dsk_gameju_hange",t.DESKINFO_TRANSPARENT="g_dsk_deskinfotransparent",t.UPDATE_DESKINFO="g_dsk_updatedeskinfo",t.REDUCE_CARD_NUM="g_dsk_reducecardnum",t.WAIT_MENU_STATUS_CHANGE="g_dsk_waitmenustatuschange",t.WAIT_MENU_PLAYER_NUM_CHANGE="g_dsk_waitmenuplayernumchange",t.WAIT_MENU_CLEAR="g_dsk_waitmenuclear",t.DESK_ROCK_DICE_RESULT="g_dsk_rockdiceresult",t.DESK_REMAIN_TIME_RESET="g_dsk_remaintimereset",t.DESK_REST="g_dsk_rest",t.DESK_CLEAR_TIMER="g_dsk_cleartimer",t.UPDATE_DESK_TIMER="g_dsk_updatedesktimer",t.ROBOT_ROOM="g_dsk_robotroom",t.ROBOT_ROOM_ON_OFF="g_dsk_robotroomonoff",t.SET_TRUST="g_dsk_settrust",t.WAIT_TIPS_CHANGE="g_dsk_waittipschange",t.WAIT_QUCIK_START_CD="g_dsk_quickstartcd",t.ACTIVE_READY_BTN="g_dsk_activereadybtn",t.BEI_SHU_POS="g_dsk_bspos",t.BEI_SHU_CHANGE="g_dsk_bschange",t.SHOW_SKIN_CD="g_dsk_deskshowskincd",t.RESUME_SKIN="g_dsk_stopskin",t.PREVIEW_SKIN="g_dsk_previewskin"}(t.Desk||(t.Desk={})),function(t){t.CLOSE_ALL="g_ppp_closeall",t.COM_DLG="g_ppp_comdlg",t.EXIT_DLG="g_ppp_exitdlg",t.DISMISS_ROOM="g_ppp_dismissroomdlg",t.QUICK_START="g_ppp_quickstartdlg",t.CHAT="g_ppp_chat",t.SETTING="g_ppp_setting",t.START_RECORD="g_ppp_startrecord",t.GAME_ONCE_RESULT="g_ppp_gameonceresult",t.GAME_TOTAL_RESULT="g_ppp_gametotalresult",t.GAME_USER_INFO="g_ppp_gameuserinfo",t.GAME_AUTHORIZE="g_ppp_authorize",t.SIMPLE_USER_INFO="g_ppp_simpleuserinfo",t.SCOPA="g_ppp_scopaanim",t.SETTEBELLO="g_ppp_settebelloanim",t.REALTIME_SCORE="g_ppp_realscore"}(t.Popup||(t.Popup={})),function(t){t.CLEAR="g_tps_clear",t.REDEAL="g_tps_redeal",t.PLAYER_STATUS_CLEAR="g_tps_playerstatusclear",t.PLAYER_STATUS_FINAL_TURN="g_tps_finalturn",t.SCOPA="g_tps_scopa"}(t.GameTips||(t.GameTips={})),function(t){t.CLEAR="g_hdc_clear",t.START_CTL_SEND_CARD="g_hdc_startctlsendcard",t.STOP_CTL_SEND_CARD="g_hdc_stopctlsendcard",t.HAND_CARD_POS_CHANGE="g_hdc_handcardposchange",t.DESK_CARD_THROW="g_hdc_deskcardthrow",t.MY_HAND_CARD_TOUCH="g_hdc_myhandcardtouch",t.MY_HAND_CARD_SELECT="g_hdc_myhandcardselect",t.PUT_BUHUA_CARD_POS="g_hdc_putbuhuacardpos",t.START_SEND_CARD="g_hdc_startsendcard",t.SENDING_CARD="g_hdc_sendingcard%s",t.END_SEND_CARD="g_hdc_endsendcard",t.PLAYER_MO_CARD="g_hdc_mocard",t.PLAYER_OUT_CARD_RESULT="g_hdc_outcard",t.PLAYER_HU_RESULT="g_hdc_huresult",t.PLAYER_HAND_CAED_REFREASH="g_hdc_reserash%s",t.PLAYER_OP_RESULT="g_hdc_opresult",t.INFORM_PLAYER_OP="g_hdc_informplayerop",t.SCENE_PLAYING="g_hdc_sceneplaying",t.REFREASH="g_hdc_refreash",t.UPDATE_DATA="g_hdc_updatedata",t.UPDATE_CARD_STATUS="g_hdc_updatestatus",t.CLEAR_CARD_STATUS="g_hdc_clearstatus",t.SET_CAN_TOUCH="g_hdc_setcantouch",t.REDEAL_CARD="g_hdc_redealcard"}(t.HandCard||(t.HandCard={})),function(t){t.DELELE_EAT_CARDS="g_otc_deleleeatcards",t.UPDATE_DATA="g_otc_updatedata",t.SCENE_PLAYING="g_otc_sceneplaying",t.CLEAR="g_otc_clear",t.OUT_TIPS="g_otc_outtips",t.SENDING_CARD="g_otc_sendcard",t.START_SEND_CARD="g_otc_startsendcard",t.END_SEND_CARD="g_otc_endsendcard",t.SHOW_EAT_CARDS="g_dsk_showeatcards",t.REDEAL_CARD="g_dsk_redealcard"}(t.OutCard||(t.OutCard={})),function(t){t.CLEAR="g_etc_clear",t.EMIT="g_etc_emit",t.STOP_ACTION="g_etc_action_stop",t.MOVE_TO_DESK="g_etc_movetodesk",t.SCENE_PLAYING="g_etc_sceneplaying",t.SCOPA_COUNT="g_etc_scopacount",t.PUT_POINTS="g_etc_putpoints"}(t.EatCard||(t.EatCard={})),function(t){t.CLEAR="gmvc_clear",t.START="gmvc_start",t.STOP="gmvc_stop"}(t.MoveCard||(t.MoveCard={})),(t.Position||(t.Position={})).REG_POSITION="g_pos_regpostion",function(t){t.CLEAR="g_efct_clear",t.CHANGE_SCORE="g_efct_changescore",t.RADAR="g_efct_radar",t.VS_ANIM="g_efct_vsanim"}(t.Effect||(t.Effect={})),function(t){t.CHOOSE_CARD="g_opv_choose_card",t.CLEAR="g_opv_clear"}(t.OpView||(t.OpView={})),function(t){t.SHARE_CANVAS_HISTORY="g_shr_canvashistory",t.SHARE_CANVAS_INVATE="g_shr_canvasinvate",t.SHARE_CANVAS_TOTAL_RESULT="g_shr_canvastotalresult"}(t.Share||(t.Share={})),function(t){t.REPLAY_DECODE_BUFFER="g_rply_eventdecodebuffer",t.REPLAY_PARSE_DATE="g_rply_eventparsedata",t.REPLAY_START_PLAY="g_rply_startplay",t.REPLAY_GAME_MESSAGE="g_rply_gamemessage",t.REPLAY_GAME_SCENE="g_rply_gamescene",t.REPLAY_GAME_SHARE="g_rply_gameshare",t.REPLAY_GAME_CLEAR="g_rply_gameclear"}(t.Replay||(t.Replay={})),function(t){t.SEND_OUTCARD="g_msg_outcard",t.SEND_OPERATTION="g_msg_operattion",t.SEND_LEFT_ROOM="g_msg_leftroom",t.SEND_READY="g_msg_ready",t.SEND_LOGIN="g_msg_logindesk",t.SEND_CHANGE_DESK="g_msg_changedesk",t.SEND_ROOM_COM_CHAT="g_msg_roomcomchat",t.SEND_ROOM_TEXT_CHAT="g_msg_roomtextchat",t.SEND_ROOM_VOICE_CHAT="g_msg_roomvoicechat",t.SEND_TRUST_STATUS="g_msg_truststatus",t.SEND_INIT_FINISH="g_msg_gameinitfinish"}(t.Msg||(t.Msg={}))}(o.GameEvent||(o.GameEvent={})),cc._RF.pop()},{}],GameInitConfig:[function(t,e,o){"use strict";cc._RF.push(e,"be6a4ByNDRDYp3Qitiucu3d","GameInitConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameInitConfig=void 0;var n=function(){function t(){}return Object.defineProperty(t,"maxPlayerNum",{get:function(){return t._maxPlayerNum},set:function(e){null!=e&&(t._maxPlayerNum=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"CurDisplayMode",{get:function(){return t._iCurDisplayMode},set:function(e){null!=e&&(t._iCurDisplayMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isReplay",{get:function(){return t._isReplay},set:function(e){null!=e&&(t._isReplay=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isGoldRoom",{get:function(){return t._is_gold_room},set:function(e){null!=e&&(t._is_gold_room=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tableId",{get:function(){return t._tableId},set:function(e){t._tableId=e},enumerable:!1,configurable:!0}),t.reset=function(){t.isReplay=!1,t.isGoldRoom=!1,t.tableId=1},t.isLocalTestMode=!1,t._maxPlayerNum=4,t._iCurDisplayMode=0,t._isReplay=!1,t._is_gold_room=!1,t}();o.GameInitConfig=n,cc._RF.pop()},{}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"bf0f6ouHqxLUqm1apzcVJuC","GameScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GameScene=void 0;var r=t("./../../../../script/app/view/ComUI"),s=t("./../../../../script/app/const/Global"),c=t("./../../../../script/app/module/buryPoint/BuryPointUtils"),p=t("./../../i18n/GameBaseI18n"),l=t("../../../../script/app/const/Global"),d=t("../../../../script/app/event/Notify"),u=t("../../../../script/app/model/DataProxy"),h=t("../../../../script/lib/manager/ResConfigHandler"),_=t("../../../../script/lib/manager/SceneManager"),f=t("../../../../script/lib/utils/Logger"),m=t("../../../../script/lib/utils/ScreenAdapter"),y=t("../../controller/GameVoice"),g=t("../../model/GameEvent"),E=t("../../model/GameInitConfig"),C=t("../../model/GameChatConfig"),S=t("../../../../script/app/module/buryPoint/BuryPoint"),G=t("../../../../script/app/language/LanguageCfg"),v=t("../../../../script/lib/utils/ComUtils"),I=t("../../../../script/lib/base/Language"),b=t("../../../../script/app/base/BaseScene"),P=t("../../../../script/app/module/tables/TableSkinMgr"),D=cc._decorator,A=D.ccclass,T=(D.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.logicHandler=null,e.isGameBackGround=!1,e.gameVoice=null,e.mountPrefabFinished=!1,e.initHandlerFinished=!1,e.callingSdk=!1,e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.mountPrefabFinished=!1,this.initHandlerFinished=!1,E.GameInitConfig.tableId=u.DataProxy.getInstance().userData.useTableId,P.TableSkinMgr.changeTableId(E.GameInitConfig.tableId),this.enterGame()},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),f.Logger.info("--------- GameScene(): onLoad() ---------"),m.ScreenAdapter.setCanvas(cc.director.getScene().getComponentInChildren(cc.Canvas)),c.BuryPointUtils.send(S.BuryPoint.Debug.Game.ShowView),u.DataProxy.getInstance().comData.setInGame(!0)},e.prototype.onDestroy=function(){this.logicHandler&&(this.logicHandler.destory(),this.logicHandler=null),this.gameVoice&&(this.gameVoice.onDestroy(),this.gameVoice=null),u.DataProxy.getInstance().gameData.clearGameUserHead(),E.GameInitConfig.reset(),this.dispatch(d.Notify.AD.RM_BANNER),t.prototype.onDestroy.call(this)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(g.GameEvent.Base.GAME_RESULT,this.onPreLoadResultRes),this.bindEvent(g.GameEvent.Com.GAME_EXIT,this.onExitScene),this.bindEvent(g.GameEvent.Com.RECONNECT,this.onReconnect),this.bindEvent(g.GameEvent.OperateEvent.OUT_CARD_SELF,this.onOutCardEvent),this.bindEvent(g.GameEvent.OperateEvent.OPERATE,this.onOperateEvent),this.bindEvent(d.Notify.Base.ON_APP_PAUSE,this.onAppPause),this.bindEvent(d.Notify.Base.ON_APP_RESUME,this.onAppResume),this.bindEvent(d.Notify.Base.ON_RECONNET_TIP,this.onReconnetTip),this.bindEvent(d.Notify.Gate.CONNECTED,this.onConnected),this.bindEvent(d.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage),this.bindEvent(d.Notify.Game.EXIT_SCENE,this.onExitScene),this.bindEvent(d.Notify.Base.CHANGE_SKIN,this.onChangeSkin)},e.prototype.setIsGameBackGround=function(t){this.isGameBackGround=t},e.prototype.getIsGameBackGround=function(){return this.isGameBackGround},e.prototype.getIsGameReplay=function(){return E.GameInitConfig.isReplay},e.prototype.getSceneName=function(){return"game"},e.prototype.enterGame=function(){f.Logger.info("GameScene(): enterGame()"),this.onChangeLanguage(I.Language.getInstance().getLanguage()),this.initHandler(),this.initVoice(),this.initView()},e.prototype.tryLoginGame=function(){this.mountPrefabFinished&&this.initHandlerFinished&&(this.loginGame(),this.dispatch(g.GameEvent.Base.INIT_FINISH))},e.prototype.initView=function(){var t=this,e=function(){t.mountPrefabFinished=!0,t.tryLoginGame(),e=null},o=s.Global.convertGameType(u.DataProxy.getInstance().gameData.enterGameId),n=h.ResConfigHandler.getGoldGameResConfig(o);this.mountPrefab(n,e),this.onPreLoadResultRes()},e.prototype.mountPrefab=function(e,o){e||cc.log("mountPrefab error: not find uiconfig"),t.prototype.mountPrefab.call(this,e,o)},e.prototype.initHandler=function(){},e.prototype.initVoice=function(){null===this.gameVoice&&(this.gameVoice=new y.GameVoice)},e.prototype.setDataDelegate=function(t){t?this.dispatch(g.GameEvent.Com.SET_DATA_DELEGATE,t):f.Logger.error("[GameScene setDataDelegate] IDelegate \u9700\u8981\u63d0\u524d\u521d\u8bc6\u5316")},e.prototype.onExitScene=function(t){this.logicHandler&&this.logicHandler.getRoomData().loginFinish&&!1===E.GameInitConfig.isReplay&&t===l.gExitGameType.exitAndLeftRoom&&this.dispatch(g.GameEvent.Msg.SEND_LEFT_ROOM),this.dispatch(g.GameEvent.OperateEvent.EXIT_GAME_SCENE,t),this.dispatch(g.GameEvent.Voice.STOP_MUSIC_BG),c.BuryPointUtils.send(S.BuryPoint.Debug.Game.ExitGame,t+""),null!=t&&t!=l.gExitGameType.exitAndLeftRoom&&t!=l.gExitGameType.returnLobby||_.default.getInstance().gotoLobby(),t===l.gExitGameType.reLogin&&_.default.getInstance().gotoLogin(),t===l.gExitGameType.exitApp&&_.default.getInstance().exitApp()},e.prototype.onAppResume=function(t){var e=this;this.callingSdk=!1,t.callSdk?this.callingSdk=!0:(this.dispatch(g.GameEvent.Msg.SEND_LEFT_ROOM),this.dispatch(d.Notify.Base.ON_RECONNET_TIP),this.scheduleOnce(function(){e.dispatch(d.Notify.Gate.CONNECT)},.5),this.dispatch(g.GameEvent.Com.GAME_SCENE_CLEAR))},e.prototype.onAppPause=function(){this.setIsGameBackGround(!0)},e.prototype.onReconnetTip=function(){var t=this;E.GameInitConfig.isLocalTestMode||(u.DataProxy.getInstance().otherData.isNetConnected?this.dispatch(g.GameEvent.Com.LOADING,!0):this.dispatch(g.GameEvent.Popup.COM_DLG,{title:v.ComUtils.getLang(G.LangKey.text_prompt),text:v.ComUtils.getLang(G.LangKey.text_no_network_tip),cb1:function(){t.onExitScene(l.gExitGameType.reLogin)}}))},e.prototype.onConnected=function(){c.BuryPointUtils.send(S.BuryPoint.Debug.Game.GameReconnectSucc),r.ComUI.dismissDialog()},e.prototype.onScreenShake=function(t){t.times>1?this.screenShakeTwo(t.delaytime):this.screenShakeOne()},e.prototype.screenShakeOne=function(){var t=this.getRootNode();this.shakeAction&&(t.stopAction(this.shakeAction),this.shakeAction=null),this.shakeAction=cc.tween(t).by(.06,{y:-16}).by(.06,{y:16}).start()},e.prototype.screenShakeTwo=function(t){var e=this.getRootNode();this.shakeAction&&(e.stopAction(this.shakeAction),this.shakeAction=null),this.shakeAction=cc.tween(e).delay(t||.06).by(.06,{y:-8}).by(.06,{y:8}).by(.06,{y:-6}).by(.06,{y:6}).start()},e.prototype.onOutCardEvent=function(t){this.logicHandler&&this.logicHandler.getPlayData().isTrust&&this.dispatch(g.GameEvent.OperateEvent.TRUST,!1),this.dispatch(g.GameEvent.Msg.SEND_OUTCARD,t)},e.prototype.onOperateEvent=function(t){this.logicHandler&&this.logicHandler.getPlayData().isTrust&&this.dispatch(g.GameEvent.OperateEvent.TRUST,!1),this.dispatch(g.GameEvent.Msg.SEND_OPERATTION,t)},e.prototype.onPreLoadResultRes=function(){},e.prototype.onReconnect=function(){this.dispatch(d.Notify.Gate.CONNECT),this.setIsGameBackGround(!1),c.BuryPointUtils.send(S.BuryPoint.Debug.Game.GameReconnectStart)},e.prototype.clearGame=function(){},e.prototype.loginGame=function(){this.setDataDelegate(this.logicHandler.getPlayData()),c.BuryPointUtils.send(S.BuryPoint.Debug.Game.LoginGame)},e.prototype.onChangeLanguage=function(t){p.GameBaseLan.setLanguage(t),C.GameChatConfig.setLanguage(t)},e.prototype.onChangeSkin=function(){E.GameInitConfig.tableId=u.DataProxy.getInstance().userData.useTableId},a([A],e)}(b.BaseScene));o.GameScene=T,cc._RF.pop()},{"../../../../script/app/base/BaseScene":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/lib/base/Language":void 0,"../../../../script/lib/manager/ResConfigHandler":void 0,"../../../../script/lib/manager/SceneManager":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"../../controller/GameVoice":"GameVoice","../../model/GameChatConfig":"GameChatConfig","../../model/GameEvent":"GameEvent","../../model/GameInitConfig":"GameInitConfig","./../../../../script/app/const/Global":void 0,"./../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"./../../../../script/app/view/ComUI":void 0,"./../../i18n/GameBaseI18n":"GameBaseI18n"}],GameVoice:[function(t,e,o){"use strict";cc._RF.push(e,"50633Noce5OiYFDdK9iLbED","GameVoice"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameVoice=void 0;var n=t("./../model/GameChatConfig"),i=t("../../../script/app/const/AudioFile"),a=t("../../../script/app/event/Notify"),r=t("../../../script/lib/event/EventDispatcher"),s=t("../model/GameEvent"),c=t("../../../script/app/const/Global"),p=function(){function t(){var t=this,e=this.listEvent();e&&e.size>0&&e.forEach(function(e,o){r.EventDispatcher.getInstance().add(o,e,t,0)});var o=this.subEvent();o&&o.size>0&&o.forEach(function(e,o){r.EventDispatcher.getInstance().add(o,e,t,0)})}return t.prototype.listEvent=function(){return new Map([[s.GameEvent.Voice.PLAY_MUSIC_BG,this.playBgMusic],[s.GameEvent.Voice.STOP_MUSIC_BG,this.stopBgMusic],[s.GameEvent.Voice.PLAY_EFFECT_CHAT,this.playChatEffect],[s.GameEvent.Voice.PLAY_EFFECT_OTHER,this.playOtherEffect]])},t.prototype.subEvent=function(){return null},t.prototype.onDestroy=function(){r.EventDispatcher.getInstance().remove(this)},t.prototype.dispatch=function(t,e){r.EventDispatcher.getInstance().dispatch(t,e)},t.prototype.getSexString=function(t){var e="boy";return t===c.Gender.GIRL&&(e="girl"),e},t.prototype.playBgMusic=function(t){void 0===t&&(t=i.AudioFile.Game.BG_MUSIC),this.dispatch(a.Notify.Base.PLAY_MUSIC,{path:t})},t.prototype.stopBgMusic=function(){this.dispatch(a.Notify.Base.STOP_MUSIC)},t.prototype.playChatEffect=function(t){var e=n.GameChatConfig.ChatText(t.idx-n.GameChatConfig.ChatIndexTextStart);if(e){var o=e.audio;o=cc.js.formatStr(o,this.getSexString(t.sex)),this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:i.AudioFile.Game.CHAT_EFFECT+o,loop:!1,cb:t.cb})}},t.prototype.playOtherEffect=function(t){this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:t})},t}();o.GameVoice=p,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/const/Global":void 0,"../../../script/app/event/Notify":void 0,"../../../script/lib/event/EventDispatcher":void 0,"../model/GameEvent":"GameEvent","./../model/GameChatConfig":"GameChatConfig"}],GoldDeskHandler:[function(t,e,o){"use strict";cc._RF.push(e,"f780a+nfCdEfqm01hv4Hig4","GoldDeskHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GoldDeskHandler=void 0;var a=t("./../../../../script/app/model/AdDataProxy"),r=t("./../../../../script/app/const/Global"),s=t("./../../model/GameChatConfig"),c=t("../../../../script/app/const/game/GameConstant"),p=t("../../../../script/app/event/Notify"),l=t("../../../../script/app/model/LocalDataProxy"),d=t("../../../../script/app/view/ComUI"),u=t("../../../../script/lib/utils/ComUtils"),h=t("../../../../script/lib/utils/VoiceHelper"),_=t("../../model/RoomPlayerInfo"),f=t("../../../../script/app/base/handler/ProxyHandler"),m=t("../../model/goldGame/CMD_GameMsg"),y=t("../../../../script/plugin/pb/protofile/GlobalMsgDef"),g=t("../../model/GameEvent"),E=t("../../../../script/lib/utils/Logger"),C=t("../../../../script/app/module/match/GameMatchManager"),S=t("../../../../script/app/language/LanguageCfg"),G=t("../../../../script/app/event/GuiEvent"),v=t("../../../../script/app/model/AdDataProxy"),I=t("../../../../script/app/model/DataProxy"),b=t("../../../../script/app/module/buryPoint/BuryPoint"),P=t("../../../../script/app/module/buryPoint/BuryPointUtils"),D=function(t){function e(e){var o=t.call(this)||this;return o.logicHandler=e,e.setParent(o),o}return i(e,t),e.prototype.getName=function(){return"GoldDeskHandler"},e.prototype.destory=function(){this.handler.clear(),this.removeEvent(null),this.logicHandler&&(this.logicHandler.destory(),this.logicHandler=null)},e.prototype.getMainID=function(){return y.MAIN_MSG_ID.MAIN_MSG_GAME_MSG_ID},e.prototype.protocolConfig=function(){return[{protocol:m.MSG_SC_DeskInfo,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_DESKINFO,cb:this.onDeskInfo},{protocol:m.MSG_SC_UserEnterList,subid:m.GAME_SUB_MSG.MSGID_SC_USER_ENTER,cb:this.onUserEnterList},{protocol:m.MSG_SC_UserStatus,subid:m.GAME_SUB_MSG.MSGID_SC_USER_STATUS,cb:this.onUserStatus},{protocol:m.MSG_SC_UserGold,subid:m.GAME_SUB_MSG.MSGID_SC_USER_GOLD,cb:this.onUserGold},{protocol:null,subid:m.GAME_SUB_MSG.MSGID_SC_USER_GOLDNOENOUGH,cb:this.onUserGoldNotEnough},{protocol:m.MSG_SC_UserReadyResult,subid:m.GAME_SUB_MSG.MSGID_SC_USER_READYRESULT,cb:this.onUserReadyResult},{protocol:m.MSG_SC_UserPS,subid:m.GAME_SUB_MSG.MSGID_SC_USER_PSUPDATE,cb:this.onUserPower},{protocol:m.MSG_SCS_UserTrustMsg,subid:m.GAME_SUB_MSG.MSGID_SCS_USER_TRUST,cb:this.onUserTrustMsg},{protocol:null,subid:m.GAME_SUB_MSG.MSGID_SC_USER_LEFTSUC,cb:this.onUserLeftSucc},{protocol:m.MSG_CS_GameData,subid:m.GAME_SUB_MSG.MSGID_SCS_DESK_GAMEDATA,cb:this.onGameData},{protocol:m.MSG_SC_BroadcastTextChat,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_B_TEXTCHAT,cb:this.onReceiveChatText},{protocol:m.MSG_SC_BroadcastVoiceChat,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_B_VOICECHAT,cb:this.onReceiveChatVoice},{protocol:m.MSG_SC_BroadcastPhizChat,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_B_PHIZCHAT,cb:this.onReceiveChatCom},{protocol:null,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_CHANGESUC,cb:this.onDeskChangeSucc},{protocol:m.MSG_SC_ChangeDeskFailed,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_CHANGE_FAILD,cb:this.onDeskChangeFaild},{protocol:null,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_GAMESTART,cb:this.onDeskGameStart},{protocol:null,subid:m.GAME_SUB_MSG.MSGID_SC_DESK_GAMEEND,cb:this.onDeskGameEnd}]},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(g.GameEvent.Msg.SEND_LEFT_ROOM,this.sendLeftRoomMsg),this.addEvent(g.GameEvent.Msg.SEND_CHANGE_DESK,this.sendChangeDeskMsg),this.addEvent(g.GameEvent.Msg.SEND_TRUST_STATUS,this.sendTrustMsg),this.addEvent(g.GameEvent.Msg.SEND_ROOM_COM_CHAT,this.sendComChatMsg),this.addEvent(g.GameEvent.Msg.SEND_ROOM_TEXT_CHAT,this.sendTextChatMsg),this.addEvent(g.GameEvent.Msg.SEND_ROOM_VOICE_CHAT,this.sendVoiceChatMsg),this.addEvent(g.GameEvent.Msg.SEND_INIT_FINISH,this.sendUserInitFinish),this.addEvent(g.GameEvent.OperateEvent.EXIT_GAME_SCENE,this.onExitGameScene),this.addEvent(g.GameEvent.OperateEvent.CLICK_SETTING,this.onClickSetting),this.addEvent(g.GameEvent.OperateEvent.CLICK_HOME,this.onClickHome),this.addEvent(g.GameEvent.Player.ON_USER_CLICK,this.onUserClick),this.addEvent(g.GameEvent.Base.INIT_FINISH,this.onInitFinished),this.addEvent(g.GameEvent.Base.BEFORE_GAME_RESULT,this.onBeforeGameResult),this.addEvent(g.GameEvent.Base.AFLTER_GAME_RESULT,this.onAfterGameResult),this.addEvent(g.GameEvent.Base.FAKE_MSG,this.onFakeMsg)},e.prototype.getDeskMsgHead=function(){var t=new y.Msg_GameHead;return t.strUUID=this.userData.sessionId,t},e.prototype.sendUserInitFinish=function(){var t=new m.MSG_CS_LoginGameData;this.sendRequest(t,this.getMainID(),m.GAME_SUB_MSG.MSGID_CS_USER_INIT_FINISH,this.getDeskMsgHead()),E.Logger.info("\u53d1\u9001\u7528\u6237\u521d\u59cb\u5316\u5b8c\u6210=========> ")},e.prototype.sendLeftRoomMsg=function(){this.sendRequest("",this.getMainID(),m.GAME_SUB_MSG.MSGID_CS_USER_LEFT,this.getDeskMsgHead()),E.Logger.info("\u53d1\u9001\u79bb\u5f00\u623f\u95f4\u6d88\u606f=========>")},e.prototype.sendChangeDeskMsg=function(){this.sendRequest("",this.getMainID(),m.GAME_SUB_MSG.MSGID_CS_DESK_CHANGE,this.getDeskMsgHead())},e.prototype.sendComChatMsg=function(t){var e=new m.MSG_CS_PhizChat;e.dwChatIndex=t,this.sendRequest(e,this.getMainID(),m.GAME_SUB_MSG.MSGID_CS_DESK_PHIZ_CHAT,this.getDeskMsgHead())},e.prototype.sendTextChatMsg=function(t){var e=new m.MSG_CS_TextChat;e.chSayInfo=u.ComUtils.utf8StrToU8(t),this.sendRequest(e,this.getMainID(),m.GAME_SUB_MSG.MSGID_CS_DESK_TEXT_CHAT,this.getDeskMsgHead())},e.prototype.sendVoiceChatMsg=function(t){var e=new m.MSG_CS_VoiceChat,o=null;"string"==typeof t&&(o=u.ComUtils.utf8StrToU8(t)),e.chVoiceBufData=o,this.sendRequest(e,this.getMainID(),m.GAME_SUB_MSG.MSGID_CS_DESK_VOICE_CHAT,this.getDeskMsgHead())},e.prototype.sendTrustMsg=function(t){var e=new m.MSG_SCS_UserTrustMsg;e.bIsTrust=t.isTrust,e.dwChairID=t.chairId,e.dwUserID=this.userData.userId,this.sendRequest(e,this.getMainID(),m.GAME_SUB_MSG.MSGID_SCS_USER_TRUST,this.getDeskMsgHead())},e.prototype.onGameData=function(t){var e=t.data,o=e.dwMainID,n=e.dwSubID;this.logicHandler&&!cc.director.isPaused()&&this.logicHandler.handle(o+"-"+n,e)},e.prototype.onDeskInfo=function(t){var e=t.data,o=this.logicHandler.getRoomData();o.roomID=e.dwDeskID,o.roomPlayStatus=e.bIsPlaying?c.GameConstant.RoomPlayStatus.playing:c.GameConstant.RoomPlayStatus.waiting,o.setMaxPlayerNum(e.dwChairNums),this.dispatch(g.GameEvent.Base.DESK_BASE_CONFIG,{isPlaying:e.bIsPlaying,gameId:o.gameID,roomId:o.roomID,maxPlayerNum:o.getMaxPlayerNum(),deskCfg:o.getDeskInfo(),roomCfg:o.getRoomInfo()})},e.prototype.onDeskChangeSucc=function(){this.logicHandler.getGameFlow().stop(),this.dispatch(g.GameEvent.Com.LOADING,!1)},e.prototype.onDeskChangeFaild=function(t){var e=t.data,o=e.ErrorCode,n="",i=0,a=r.Global.convertGameType(this.gameData.enterGameId),s=C.GameMatchManager.getInstance().getQuickGameInfoByGameType(a),c=this.userData.gold,l=this.configData.isGoldEnoughEnterGameType(a,c);switch(e.ErrorCode){case m.CHANGE_GAME_ERR.CHANGE_ERR_SC_LONG_NULLITY:n=u.ComUtils.getLang(S.LangKey.text_login_prohibited);break;case m.CHANGE_GAME_ERR.CHANGE_ERR_SC_NOFIND_CHAIR:n="Can't find the table";break;case m.CHANGE_GAME_ERR.CHANGE_ERR_SC_GOLD_NOENOUGH:l&&s.gameId>0?(i=s.gameId,n=cc.js.formatStr(u.ComUtils.getLang(S.LangKey.text_not_enough_coins_play),s.gameName)):n=u.ComUtils.getLang(S.LangKey.text_not_enough_coins);break;case m.CHANGE_GAME_ERR.CHANGE_ERR_SC_IS_PLAYING:n="Is playing";break;default:n=u.ComUtils.getLang(S.LangKey.text_login_fail)+"("+o+")"}d.ComUI.showDialog({title:"Tips",text:n,close:!1,outClose:!1,cb1:function(){i>0?this.dispatch(p.Notify.Gate.USER_ON_OTHER_GAME,{gameID:s.gameId,gameName:u.ComUtils.u8ToUTF8Str(s.gameName),gameType:s.gameType,gradeType:s.gradeType}):this.dispatch(g.GameEvent.Com.GAME_EXIT,0)}})},e.prototype.onUserEnterList=function(t){for(var e=t.data.UserList,o=null,n=this.logicHandler.getRoomData(),i=0;i<e.length;i++){var a=_.RoomPlayerInfo.createFrom(e[i],!1);if(this.userData.userId==a.userId){n.setMyBaseInfo(a);break}}for(e.length>1&&(n.removeAllPlayer(),this.dispatch(g.GameEvent.Player.PLAYER_CLEAR)),i=0;i<e.length;i++)o=e[i],a=_.RoomPlayerInfo.createFrom(o,!1),n.addPlayer(a);var r=n.getCurAllPlayerInfo();for(i=0;i<r.length;++i){var s=r[i];this.dispatch(g.GameEvent.Player.ENTRY,{player:s,isPlaying:!0})}n.roomPlayStatus===c.GameConstant.RoomPlayStatus.waiting&&n.getOnDeskPlayerNum()>1&&this.dispatch(g.GameEvent.Desk.WAIT_TIPS_CHANGE,{showCD:!1})},e.prototype.onUserStatus=function(t){var e=t.data,o=this.logicHandler.getRoomData();o.playerStatusUpdate(e.dwUserID,e.us.valueOf());var n=o.roomPlayStatus;5==e.dwLeftTag&&e.dwUserID==o.myBaseInfo.userId&&(o.isTimeOut=!0),n!==c.GameConstant.RoomPlayStatus.gameEnd&&this.dispatch(g.GameEvent.Player.STATUS_CHANGE,{userId:e.dwUserID,status:e.us})},e.prototype.onUserGold=function(t){var e=t.data;this.logicHandler.getRoomData().playerGoldUpdate(e.dwUserID,{gold:e.llGold,gem:e.dwGem});var o=this.userData;o.userId==e.dwUserID&&(o.gold=e.llGold),this.dispatch(g.GameEvent.Player.GOLD_CHANGE,{userId:e.dwUserID,gold:e.llGold})},e.prototype.onUserPower=function(t){var e=t.data;E.Logger.info("onUserPower \u73a9\u5bb6\u4f53\u529b <=========",JSON.stringify(e));var o=this.userData;if(o.userId==e.dwUserID){if(o.powerInfo.dwCurPS=e.dwCurPS,o.powerInfo)o.powerInfo.dwCurPS=e.dwCurPS,o.powerInfo.dwBasicPS=e.dwBasicPS,o.powerInfo.changeNum=e.iChangePS;else{var n={};n.dwBasicPS=e.dwBasicPS,n.dwCurPS=e.dwCurPS,n.changeNum=e.iChangePS,n.dwGetPSValue=0,n.dwSYTime=0,n.dwTimeCount=0,o.powerInfo=n}this.dispatch(g.GameEvent.Player.POWER_CHANGE,{userId:e.dwUserID,power:e.dwCurPS,dwBasicPS:e.dwBasicPS,iChangePS:e.iChangePS})}},e.prototype.onUserGoldNotEnough=function(){E.Logger.info("\u73a9\u5bb6\u91d1\u5e01\u4e0d\u8db3 <========="),this.logicHandler.getRoomData().goldNotEnough=!0,this.dispatch(p.Notify.Other.REQ_BRANKRUPT_INFO,0)},e.prototype.onUserTrustMsg=function(t){var e=t.data;this.dispatch(g.GameEvent.Player.SET_TRUST_STATUS,{isTrust:e.bIsTrust,chairId:e.dwChairID,userId:e.dwUserID}),e.dwUserID==this.userData.userId&&(this.logicHandler.getPlayData().isTrust=e.bIsTrust,this.dispatch(g.GameEvent.Desk.SET_TRUST,e.bIsTrust))},e.prototype.onUserReadyResult=function(t){E.Logger.info("\u73a9\u5bb6\u51c6\u5907\u7ed3\u679c <========="),t.data},e.prototype.onUserLeftSucc=function(){},e.prototype.onReceiveChatCom=function(t){var e=t.data,o=e.dwUserID,n=e.dwChatIndex;this.dispatch(g.GameEvent.Chat.ON_CHAT_MSG,{type:s.GameChatConfig.ChatType.Common,userId:o,data:n})},e.prototype.onReceiveChatText=function(t){var e=t.data,o=e.dwUserID,n=u.ComUtils.u8ToUTF8Str(e.chSayInfo);this.dispatch(g.GameEvent.Chat.ON_CHAT_MSG,{type:s.GameChatConfig.ChatType.InputText,userId:o,data:n})},e.prototype.onReceiveChatVoice=function(t){var e=this;if(l.LocalStorageProxy.On!==this.localData.get(l.LocalStorageProxy.Record,l.LocalStorageProxy.Off)){var o=t.data,n=o.dwUserID,i=o.chVoiceBufData,a=u.ComUtils.u8ToUTF8Str(i);h.VoiceHelper.download(a).then(function(t){e.dispatch(g.GameEvent.Chat.ON_CHAT_MSG,{type:s.GameChatConfig.ChatType.Voice,userId:n,data:t})}).catch(function(){})}},e.prototype.onHongBaoData=function(){},e.prototype.onRtnNewUserHBInfo=function(){},e.prototype.onDeskGameStart=function(){E.Logger.info("onDeskGameStart <========="),this.userData.isNewPlayer,this.dispatch(p.Notify.AD.LOAD_CP_GG,v.ChaPingType.GAME_SETTLE)},e.prototype.onDeskGameEnd=function(){E.Logger.info("onDeskGameEnd <========="),this.gameData.isInGame=!1},e.prototype.onExitGameScene=function(){this.gameData.clearEnterGameInfo(),this.logicHandler.getRoomData().isExitGame=!0},e.prototype.onClickSetting=function(t){this.dispatch(g.GameEvent.Popup.SETTING,{music:this.localData.get(l.LocalStorageProxy.Music,l.LocalStorageProxy.On),sound:this.localData.get(l.LocalStorageProxy.Effect,l.LocalStorageProxy.On),worldPos:t})},e.prototype.onUserClick=function(t){var e=this.logicHandler.getRoomData().getPlayerByUserId(t),o=this.userData.userId;this.dispatch(G.GuiEvent.PopMsg.DISPLAY_INFO_DIALOG,{bInGame:!0,userId:t,myUserId:o,userName:e.name,userGold:e.gold,totalTimes:0,totalWins:0,gameWinList:[],faceId:e.sysFaceId,headUrl:e.headURL,gender:e.sex,custFaceId:e.custFaceId,powerInfo:this.userData.powerInfo,ownTableList:e.ownTableList,curTableId:o==t?this.userData.useTableId:1,level:e.level,curExp:e.curExp,nextLvlExp:e.nextLvlExp})},e.prototype.onInitFinished=function(){var t=!1,e=this.otherData.tangKuangInfo;e&&e.bShowFuFei&&(t=!0),this.dispatch(G.GuiEvent.UI.DISPLAY_MENU_SPECIAL_SALE,t)},e.prototype.onClickHome=function(){this.dispatch(g.GameEvent.Com.GAME_EXIT,r.gExitGameType.exitAndLeftRoom),this.dispatch(p.Notify.AD.LOAD_CP_GG,v.ChaPingType.GAME_TO_HALL),this.dispatch(p.Notify.AD.OPEN_CP_GG,v.ChaPingType.GAME_TO_HALL)},e.prototype.onBeforeGameResult=function(){P.BuryPointUtils.send(b.BuryPoint.Debug.Game.GameEnd),this.dispatch(p.Notify.FFD.REQ_OTHER_GG_INFO);var t=l.LocalStorageProxy.getUserValue(l.LocalStorageProxy.NumOfGameToday,0);l.LocalStorageProxy.setUserValue(l.LocalStorageProxy.NumOfGameToday,t+1);var e=parseInt(l.LocalStorageProxy.getUserValue(l.LocalStorageProxy.ChaPinADJuShu,0)||0);l.LocalStorageProxy.setUserValue(l.LocalStorageProxy.ChaPinADJuShu,e+1),this.dispatch(p.Notify.FFD.REQ_FFD_SCENEDATA,a.RVADSceneID.HIT_LUCKY),this.dispatch(p.Notify.AD.LOAD_CP_GG,v.ChaPingType.GAME_SETTLE),this.dispatch(p.Notify.AD.LOAD_BANNER,a.BannerType.SETTLE)},e.prototype.onAfterGameResult=function(){var t=parseInt(l.LocalStorageProxy.getUserValue(l.LocalStorageProxy.PopHigherGameJSCount,0)||0);l.LocalStorageProxy.setUserValue(l.LocalStorageProxy.PopHigherGameJSCount,t+1);var e=I.DataProxy.getInstance().adData.getRVSceneData(a.RVADSceneID.HIT_LUCKY);if(e&&e.bCanGG){var o=e;o.isWin=c.GameConstant.GameEndStatus.WIN===this.logicHandler.getPlayData().curResult.endStatus,this.dispatch(G.GuiEvent.PopMsg.DISPLAY_HIT_BONUS,o)}this.dispatch(p.Notify.Other.REQ_LEVEL_UP)},e.prototype.onFakeMsg=function(t){var e=t.getID();this.handle(e,t.data)},e}(f.ProxyHandler);o.GoldDeskHandler=D,cc._RF.pop()},{"../../../../script/app/base/handler/ProxyHandler":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/AdDataProxy":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/model/LocalDataProxy":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../../script/app/module/match/GameMatchManager":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../../script/lib/utils/VoiceHelper":void 0,"../../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../../model/GameEvent":"GameEvent","../../model/RoomPlayerInfo":"RoomPlayerInfo","../../model/goldGame/CMD_GameMsg":"CMD_GameMsg","./../../../../script/app/const/Global":void 0,"./../../../../script/app/model/AdDataProxy":void 0,"./../../model/GameChatConfig":"GameChatConfig"}],GoldGameMsg:[function(t,e,o){"use strict";cc._RF.push(e,"9d6d7DNuTZNLYUCp4QiUNdH","GoldGameMsg");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GoldGameMsg=void 0;var a=t("../../../../script/lib/external/ByteArray"),r=t("../../../../script/lib/network/struct/StructProtocol"),s=t("../../model/goldGame/CMD_GameMsg"),c=t("../../../../script/plugin/pb/protofile/GlobalMsgDef");(function(t){t.loginMainId=c.MAIN_MSG_ID.MAIN_MSG_LOGIN_GAME_ID,t.gameMainId=c.MAIN_MSG_ID.MAIN_MSG_GAME_MSG_ID;var e=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this),o=s.MSG_CS_LoginGameData.encode(this.data).finish();return null!=this.head&&(this.head.byLoginData=o,o=c.Msg_LoginHead.encode(this.head).finish()),t.writeBytes(new a.ByteArray(o)),t},o.ProtocolId=t.loginMainId+"-"+s.LOGIN_GAME_SUB_MSG.MSGID_CS_LOGIN_GAME,o}(r.StructProtocol);t.MSG_CS_LoginGameData=e;var o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_LoginSuccess.decode(this.getBytes(t))},o.ProtocolId=t.loginMainId+"-"+s.LOGIN_GAME_SUB_MSG.MSGID_SC_LOGIN_SUCCESS,o}(r.StructProtocol);t.MSG_SC_LoginSuccess=o;var n=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_LoginFailed.decode(this.getBytes(t))},o.ProtocolId=t.loginMainId+"-"+s.LOGIN_GAME_SUB_MSG.MSGID_SC_LOGIN_FAILED,o}(r.StructProtocol);t.MSG_SC_LoginFailed=n;var p=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_LoginFinished.decode(this.getBytes(t))},o.ProtocolId=t.loginMainId+"-"+s.LOGIN_GAME_SUB_MSG.MSGID_SC_LOGIN_FINISHED,o}(r.StructProtocol);t.MSG_SC_LoginFinished=p;var l=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this);if(this.head){var o=c.Msg_GameHead.encode(this.head).finish();t.writeBytes(new a.ByteArray(o))}return t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_DESK_CHANGE,o}(r.StructProtocol);t.MSG_CS_DESK_CHANGE=l;var d=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this);if(this.head){var o=c.Msg_GameHead.encode(this.head).finish();t.writeBytes(new a.ByteArray(o))}return t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_USER_READY,o}(r.StructProtocol);t.MSG_CS_UserReady=d;var u=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this);if(this.head){var o=c.Msg_GameHead.encode(this.head).finish();t.writeBytes(new a.ByteArray(o))}return t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_USER_LEFT,o}(r.StructProtocol);t.MSG_CS_UserLeft=u;var h=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t)},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_LEFTSUC,o}(r.StructProtocol);t.MSG_SC_UserLeftSucc=h;var _=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t)},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_CHANGESUC,o}(r.StructProtocol);t.MSG_SC_DeskChangeSucc=_;var f=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t)},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_USERCHANGEDESK,o}(r.StructProtocol);t.MSG_SC_UserChangeDeskInform=f;var m=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this),o=s.MSG_SCS_UserTrustMsg.encode(this.data).finish();return null!=this.head&&(this.head.byGameData=o,o=c.Msg_GameHead.encode(this.head).finish()),t.writeBytes(new a.ByteArray(o)),t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SCS_USER_TRUST,o}(r.StructProtocol);t.MSG_CS_UserTrustMsg=m;var y=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SCS_UserTrustMsg.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SCS_USER_TRUST,o}(r.StructProtocol);t.MSG_SC_UserTrustMsg=y;var g=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_DeskInfo.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_DESKINFO,o}(r.StructProtocol);t.MSG_SC_DeskInfo=g;var E=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_UserEnterList.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_ENTER,o}(r.StructProtocol);t.MSG_SC_UserEnterList=E;var C=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_UserStatus.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_STATUS,o}(r.StructProtocol);t.MSG_SC_UserStatus=C;var S=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_UserGold.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_GOLD,o}(r.StructProtocol);t.MSG_SC_UserGold=S;var G=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t)},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_GOLDNOENOUGH,o}(r.StructProtocol);t.MSG_SC_UserGoldNotEnough=G;var v=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_UserReadyResult.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_READYRESULT,o}(r.StructProtocol);t.MSG_SC_UserReadyResult=v;var I=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_CS_GameData.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SCS_DESK_GAMEDATA,o}(r.StructProtocol);t.MSG_SC_GameData=I;var b=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this),o=s.MSG_CS_PhizChat.encode(this.data).finish();return null!=this.head&&(this.head.byGameData=o,o=c.Msg_GameHead.encode(this.head).finish()),t.writeBytes(new a.ByteArray(o)),t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_DESK_PHIZ_CHAT,o}(r.StructProtocol);t.MSG_CS_DeskPhizChat=b;var P=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_BroadcastPhizChat.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_B_PHIZCHAT,o}(r.StructProtocol);t.MSG_SC_DeskBPhizChat=P;var D=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this),o=s.MSG_CS_TextChat.encode(this.data).finish();return null!=this.head&&(this.head.byGameData=o,o=c.Msg_GameHead.encode(this.head).finish()),t.writeBytes(new a.ByteArray(o)),t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_DESK_TEXT_CHAT,o}(r.StructProtocol);t.MSG_CS_DeskTextChat=D;var A=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_BroadcastTextChat.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_B_TEXTCHAT,o}(r.StructProtocol);t.MSG_SC_DeskBTextChat=A;var T=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this),o=s.MSG_CS_VoiceChat.encode(this.data).finish();return null!=this.head&&(this.head.byGameData=o,o=c.Msg_GameHead.encode(this.head).finish()),t.writeBytes(new a.ByteArray(o)),t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_DESK_VOICE_CHAT,o}(r.StructProtocol);t.MSG_CS_DeskVoiceChat=T;var R=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_BroadcastVoiceChat.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_B_VOICECHAT,o}(r.StructProtocol);t.MSG_SC_DeskBVoiceChat=R;var M=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_ChangeDeskFailed.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_CHANGE_FAILD,o}(r.StructProtocol);t.MSG_SC_ChangeDeskFailed=M;var w=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t)},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_GAMESTART,o}(r.StructProtocol);t.MSG_SC_DeskGameStart=w;var L=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t)},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_DESK_GAMEEND,o}(r.StructProtocol);t.MSG_SC_DeskGameEnd=L;var N=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.encode=function(){var t=e.prototype.encode.call(this),o=null;return null!=this.head&&(this.head.byGameData=o,o=c.Msg_GameHead.encode(this.head).finish()),t.writeBytes(new a.ByteArray(o)),t},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_CS_USER_INIT_FINISH,o}(r.StructProtocol);t.MSG_CS_UserInitFinished=N;var U=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(o,e),o.prototype.getID=function(){return o.ProtocolId},o.prototype.decode=function(t){e.prototype.decode.call(this,t),this.data=s.MSG_SC_UserPS.decode(this.getBytes(t))},o.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SC_USER_PSUPDATE,o}(r.StructProtocol);t.MSG_SC_UserPS=U})(o.GoldGameMsg||(o.GoldGameMsg={})),cc._RF.pop()},{"../../../../script/lib/external/ByteArray":void 0,"../../../../script/lib/network/struct/StructProtocol":void 0,"../../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../../model/goldGame/CMD_GameMsg":"CMD_GameMsg"}],GoldGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"92504BN0xhDp4S+50gvfnKo","GoldGameScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.GoldGameScene=void 0;var r=t("./../../../../script/app/module/buryPoint/BuryPointUtils"),s=t("../../../../script/app/event/Notify"),c=t("../../model/GameEvent"),p=t("../../model/GameInitConfig"),l=t("../base/GameScene"),d=t("../../../../script/app/module/buryPoint/BuryPoint"),u=cc._decorator.ccclass,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.OperateEvent.NEXT_GAME,this.onNextGame),this.bindEvent(c.GameEvent.OperateEvent.CHANGE_DESK_EVENT,this.onChangeDeskEvent)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.goldDeskHandler&&(this.dispatch(s.Notify.Gate.RM_HANDLER,this.goldDeskHandler),this.goldDeskHandler.destory(),this.goldDeskHandler=null),this.loginMsgHandler&&(this.dispatch(s.Notify.Gate.RM_HANDLER,this.loginMsgHandler),this.loginMsgHandler.clear(),this.loginMsgHandler=null)},e.prototype.getSceneName=function(){return"GoldGameScene"},e.prototype.loginGame=function(){t.prototype.loginGame.call(this),p.GameInitConfig.isLocalTestMode||this.dispatch(c.GameEvent.Com.LOGIN_GAME)},e.prototype.reconnectGame=function(){r.BuryPointUtils.send(d.BuryPoint.Debug.Game.ReconnectGame),this.dispatch(c.GameEvent.Com.RECONNECT_GAME)},e.prototype.onNextGame=function(){this.dispatch(c.GameEvent.Com.READY_NEXT_CLEAR)},e.prototype.clearGame=function(){this.dispatch(c.GameEvent.Popup.CLOSE_ALL),this.logicHandler.clearData(),this.dispatch(c.GameEvent.Com.GAME_SCENE_CLEAR),this.dispatch(c.GameEvent.Com.READY_NEXT_CLEAR)},e.prototype.onConnected=function(){t.prototype.onConnected.call(this),this.dispatch(c.GameEvent.Com.LOADING,!1),this.logicHandler?(this.clearGame(),this.reconnectGame()):this.setIsGameBackGround(!1)},e.prototype.onChangeDeskEvent=function(){this.dispatch(c.GameEvent.Msg.SEND_CHANGE_DESK)},a([u],e)}(l.GameScene);o.GoldGameScene=h,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../model/GameEvent":"GameEvent","../../model/GameInitConfig":"GameInitConfig","../base/GameScene":"GameScene","./../../../../script/app/module/buryPoint/BuryPointUtils":void 0}],GoldLoginMsgHandler:[function(t,e,o){"use strict";cc._RF.push(e,"2e4c254CtlDEbT1eCByccb0","GoldLoginMsgHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GoldLoginMsgHandler=void 0;var a=t("../../../../script/app/event/Notify"),r=t("../../../../script/app/view/ComUI"),s=t("../../../../script/lib/utils/ComUtils"),c=t("../../../../script/app/base/handler/ProxyHandler"),p=t("../../model/GameEvent"),l=t("../../../../script/lib/utils/Logger"),d=t("../../model/goldGame/CMD_GameMsg"),u=t("../../../../script/plugin/pb/protofile/GlobalMsgDef"),h=t("../../../../script/app/model/LocalDataProxy"),_=t("../../../../script/app/module/match/GameMatchManager"),f=t("../../../../script/app/language/LanguageCfg"),m=t("./../../../../script/app/const/Global"),y=function(t){function e(e){var o=t.call(this)||this;return o.logicHandler=e,o}return i(e,t),e.prototype.getName=function(){return"GoldLoginMsgHandler"},e.prototype.clear=function(){this.handler.clear(),this.removeEvent(null),this.logicHandler&&(this.logicHandler=null)},e.prototype.getLoginCfg=function(){return this.gameData.getMatchGameCfg()},e.prototype.getMainID=function(){return u.MAIN_MSG_ID.MAIN_MSG_LOGIN_GAME_ID},e.prototype.protocolConfig=function(){return[{protocol:d.MSG_SC_LoginSuccess,subid:d.LOGIN_GAME_SUB_MSG.MSGID_SC_LOGIN_SUCCESS,cb:this.onLoginSuccess},{protocol:d.MSG_SC_LoginFailed,subid:d.LOGIN_GAME_SUB_MSG.MSGID_SC_LOGIN_FAILED,cb:this.onLoginFailed},{protocol:d.MSG_SC_LoginFinished,subid:d.LOGIN_GAME_SUB_MSG.MSGID_SC_LOGIN_FINISHED,cb:this.onLoginFinished}]},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(a.Notify.MatchGame.MATCH_FINISH,this.onMatchFinished),this.addEvent(p.GameEvent.Msg.SEND_LOGIN,this.sendGameLogin),this.addEvent(p.GameEvent.OperateEvent.CLICK_REMATCH,this.onClickRematch),this.addEvent(p.GameEvent.Com.LOGIN_GAME,this.onLoginGame),this.addEvent(p.GameEvent.Com.RECONNECT_GAME,this.onGameReconnect)},e.prototype.getLoginHead=function(){var t=this.getLoginCfg(),e=new u.Msg_LoginHead;return e.dwGameID=t.gameId,e.dwGameTypeID=t.gameType,e.strUUID=this.userData.sessionId,e.dwLastLGameID=0,e.dwTailUserID=0,e.IsQuickStart=!1,e.byLoginData=s.ComUtils.objToU8(t.loginData),e.byExtData=s.ComUtils.objToU8(t.extData),e},e.prototype.sendGameLogin=function(){var t=this.getLoginCfg();if(0!=t.gameId&&null!=t.gameId){var e=new d.MSG_CS_LoginGameData;this.sendLoginRequest(e,this.getMainID(),d.LOGIN_GAME_SUB_MSG.MSGID_CS_LOGIN_GAME,this.getLoginHead()),l.Logger.info("\u53d1\u9001\u767b\u5f55\u6d88\u606f=========> ","gameId("+t.gameId+") gameType("+t.gameType+")")}else this.dispatch(p.GameEvent.Popup.EXIT_DLG,{tips:"\u91cd\u65b0\u8fdb\u5165\u6e38\u620f"})},e.prototype.onLoginSuccess=function(t){var e=t.data,o=this.logicHandler.getRoomData();o.gameID=e.dwEnterGameID,o.parse(e.chLoginData),this.logicHandler.getGameFlow().stop();var n=m.Global.convertGameType(e.dwEnterGameID);this.dispatch(p.GameEvent.Com.LOADING,!1),this.dispatch(p.GameEvent.Voice.PLAY_MUSIC_BG),h.LocalStorageProxy.setUserValue(h.LocalStorageProxy.EnterGame,""+e.dwEnterGameID),h.LocalStorageProxy.setUserValue(h.LocalStorageProxy.EnterGameType,""+n),this.dispatch(p.GameEvent.Com.LOGIN_SUCCESS,{gameId:e.dwEnterGameID})},e.prototype.onLoginFailed=function(t){var e=t.data.ErrorCode,o="",n=this.gameData.enterGameId||0,i=!1,c=!1,p=m.gExitGameType.returnLobby,l=!1;switch(e){case d.LOGIN_GAME_ERR.ERR_SC_LONG_NULLITY:o=s.ComUtils.getLang(f.LangKey.text_login_prohibited),p=m.gExitGameType.exitAndLeftRoom;break;case d.LOGIN_GAME_ERR.ERR_SC_ACCOUNTS_NOT_EXIST:case d.LOGIN_GAME_ERR.ERR_SC_NOFIND_CHAIR:o=s.ComUtils.getLang(f.LangKey.text_desk_full),p=m.gExitGameType.exitAndLeftRoom;break;case d.LOGIN_GAME_ERR.ERR_SC_GATE_ERROR:o=s.ComUtils.getLang(f.LangKey.text_desk_full),p=m.gExitGameType.reLogin;break;case d.LOGIN_GAME_ERR.ERR_SC_UUID:o=s.ComUtils.getLang(f.LangKey.text_account_expired),p=m.gExitGameType.reLogin;break;case d.LOGIN_GAME_ERR.ERR_SC_GOLD_NOENOUGH:o=s.ComUtils.getLang(f.LangKey.text_not_enough_coins),i=!0;break;case d.LOGIN_GAME_ERR.ERR_SC_TAIL_FAILED:o=s.ComUtils.getLang(f.LangKey.text_desk_full),p=m.gExitGameType.exitAndLeftRoom,l=!0;break;case d.LOGIN_GAME_ERR.ERR_SC_GOLD_TOOMUCH:o=s.ComUtils.getLang(f.LangKey.text_desk_full),c=!0;break;default:o=o=s.ComUtils.getLang(f.LangKey.text_login_fail)+"("+e+")",p=m.gExitGameType.exitAndLeftRoom,l=!0}if(l&&n>0)return o&&r.ComUI.showToast(o),void this.dispatch(a.Notify.Game.EXIT_SCENE,p);i||c?_.GameMatchManager.getInstance().checkGoldAndPower(n):r.ComUI.showDialog({title:"TIPS",text:o,close:!1,outClose:!1,cb1:function(){n>0&&this.dispatch(a.Notify.Game.EXIT_SCENE,p)}})},e.prototype.onLoginFinished=function(t){this.gameData.isInGame=!0,t.data;var e=this.logicHandler.getRoomData();e.onLoginFinish(),this.dispatch(p.GameEvent.Desk.UPDATE_DESKINFO,{deskCfg:e.getDeskInfo(),roomCfg:e.getRoomInfo()}),this.dispatch(a.Notify.UserInfo.GET_USER_INFO),this.dispatch(p.GameEvent.Desk.WAIT_MENU_STATUS_CHANGE,{gameStatus:e.roomPlayStatus})},e.prototype.onClickRematch=function(){this.gameData.isInGame=!1,this.dispatch(a.Notify.MatchGame.MATCH_PLAY_AGAIN)},e.prototype.onGameReconnect=function(){this.dispatch(p.GameEvent.Popup.GAME_ONCE_RESULT,{rmthis:!0}),this.dispatch(p.GameEvent.Msg.SEND_LOGIN)},e.prototype.onLoginGame=function(){var t=this.getLoginCfg();if(t.loginData&&t.loginData.test)this.logicHandler.isTestRoom=!0;else{this.dispatch(p.GameEvent.Popup.GAME_ONCE_RESULT,{rmthis:!0});var e=this.gameData.exsitGameInfo.gameID;this.gameData.isInGame&&e>0?(this.dispatch(p.GameEvent.Msg.SEND_LOGIN),cc.log("onLoginGame SEND_LOGIN")):(this.dispatch(p.GameEvent.Msg.SEND_INIT_FINISH),cc.log("onLoginGame SEND_INIT_FINISH"))}},e.prototype.onMatchFinished=function(){this.dispatch(p.GameEvent.Popup.GAME_ONCE_RESULT,{rmthis:!0}),cc.log("onMatchFinished SEND_INIT_FINISH"),this.dispatch(p.GameEvent.Msg.SEND_INIT_FINISH)},e}(c.ProxyHandler);o.GoldLoginMsgHandler=y,cc._RF.pop()},{"../../../../script/app/base/handler/ProxyHandler":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/LocalDataProxy":void 0,"../../../../script/app/module/match/GameMatchManager":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../../model/GameEvent":"GameEvent","../../model/goldGame/CMD_GameMsg":"CMD_GameMsg","./../../../../script/app/const/Global":void 0}],IPlayDataDelegate:[function(t,e,o){"use strict";cc._RF.push(e,"5c57f9tptZF5JmMrQ8qN4a8","IPlayDataDelegate"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LogicBaseHandler:[function(t,e,o){"use strict";cc._RF.push(e,"c94e3+a8P5N1rjKka4aUdwp","LogicBaseHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.LogicBaseHandler=void 0;var a=t("../../../script/app/base/handler/ProxyHandler"),r=t("../../../script/lib/utils/Logger"),s=t("../model/GameInitConfig"),c=t("../../../script/app/model/DataProxy"),p=t("../../../script/app/base/protocol/ProtocolUtils"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameFlow=null,e.playData=null,e.roomData=null,e.isTestRoom=!1,e}return i(e,t),e.prototype.getName=function(){return"LogicBaseHandler"},e.prototype.getRoomData=function(){return this.roomData},e.prototype.getPlayData=function(){return this.playData},e.prototype.getGameFlow=function(){return this.gameFlow},Object.defineProperty(e.prototype,"gameData",{get:function(){return c.DataProxy.getInstance().gameData},enumerable:!1,configurable:!0}),e.prototype.handle=function(t,e,o){void 0===o&&(o=!0);var n=this.handler.get(t);if(n)if(s.GameInitConfig.isLocalTestMode)n.call(this,e,!0);else if(this.isTestRoom)n.call(this,e,!0);else{var i=p.ProtocolUtils.decodeRaw(t,e.byGameData);if(i)return void n.call(this,i,o)}else r.Logger.info("\u65e0\u6cd5\u8bc6\u522b\u7684\u6d88\u606f "+t,e)},e.prototype.getSendMainId=function(){return 0},e.prototype.getSendSubId=function(){return 0},e.prototype.getGameMsgHead=function(){return null},e.prototype.getGameLogicHead=function(){return null},e.prototype.sendMsg=function(t,e){this.sendGameRequest(t,this.getSendMainId(),this.getSendSubId(),this.getGameLogicHead(),this.getGameMsgHead(),e)},e.prototype.clearData=function(){this.gameFlow&&this.gameFlow.clear(),this.playData&&this.playData.clear(),this.roomData&&this.roomData.clear()},e.prototype.destory=function(){this.clearData(),this.gameFlow&&(this.gameFlow=null),this.playData&&(this.playData=null),this.roomData&&(this.roomData=null)},e.prototype.init=function(){},e}(a.ProxyHandler);o.LogicBaseHandler=l,cc._RF.pop()},{"../../../script/app/base/handler/ProxyHandler":void 0,"../../../script/app/base/protocol/ProtocolUtils":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/utils/Logger":void 0,"../model/GameInitConfig":"GameInitConfig"}],PokerCreator:[function(t,e,o){"use strict";cc._RF.push(e,"a0e6fZMWKVMHa/ZsHgARh2G","PokerCreator"),Object.defineProperty(o,"__esModule",{value:!0}),o.CardPosInfo=o.PokerCreator=void 0;var n=t("./../alg/ScopaLogic"),i=t("../../../script/app/const/Global"),a=t("../../../script/app/module/tables/TableSkinMgr"),r=t("../../../script/app/module/tables/TableSkinSprite"),s=t("../../../script/lib/manager/ObjectPool"),c=t("../../../script/lib/manager/ResManager"),p=t("../model/GameInitConfig"),l=function(){function t(){}return t.init=function(){t.sPokerAltas||(t.sPokerAltas=c.default.getInstance().getAltas(t.sPokerFile,i.gAssetBundleName.SCOPA_GOLD_RES))},t.getColor=function(t){return(240&t)>>4},t.getValue=function(t){return 15&t},t.isA=function(t){return n.ScopaLogic.isA(t)},t.setPokerAFront=function(e){if(e){e.node.getComponent(r.TableSkinSprite).imgName="";var o=a.TableSkinMgr.getCfg();o&&2===o.pk_color?e.spriteFrame=t.sPokerAltas.getSpriteFrame("pk_front_y2"):e.spriteFrame=t.sPokerAltas.getSpriteFrame("pk_front_y")}},t.setPokerFront=function(e,o){if(e){var n=e.node.getComponent(r.TableSkinSprite);n||(n=e.node.addComponent(r.TableSkinSprite)),n.imgName=o?"table_card_front":"table_card_front_2",a.TableSkinMgr.addSprite(n),1===p.GameInitConfig.tableId?e.spriteFrame=t.sPokerAltas.getSpriteFrame("pk_blank_0"):a.TableSkinMgr.setSpriteSkin(e,n.imgName)}},t.setPokerBack=function(e){if(e){var o=e.node.getComponent(r.TableSkinSprite);o||(o=e.node.addComponent(r.TableSkinSprite)),o.imgName="table_card_back",a.TableSkinMgr.setSpriteSkin(e,o.imgName),1===p.GameInitConfig.tableId?e.spriteFrame=t.sPokerAltas.getSpriteFrame("pk_back_0"):a.TableSkinMgr.addSprite(o)}},t.POKER_HAND_CARD_WIDTH=251,t.POKER_HAND_CARD_HEIGHT=393,t.POKER_SELECTED_OFF_Y=30,t.POKER_HAND_CARD_OFF_X=-44,t.POKER_HAND_CARD_BOTTOM=132,t.POKER_OUT_CARD_WIDTH=160.64,t.POKER_OUT_CARD_HEIGHT=251.52,t.POKER_OUT_CARD_OFF_X=20,t.POKER_OUT_CARD_OFF_Y=31,t.POKER_SMALL_CARD_WIDTH=102.6,t.POKER_SMALL_CARD_HEIGHT=161.4,t.POKER_SMALL_CARD_OFF_X=60,t.POKER_SMALL_CARD_OFF_Y=44,t.SMALL_SCALE=.8,t.sPokerFile="ScopaPoker",t}();o.PokerCreator=l;var d=function(){function t(){this.pos=cc.Vec2.ZERO,this.scale=1,this.angle=0,this.zIndex=0}return t.prototype.copy=function(){var e=t.get();return e.pos=new cc.Vec2(this.pos.x,this.pos.y),e.scale=this.scale,e.zIndex=this.zIndex,e.angle=this.angle,e},t.prototype.parse=function(t){return this.pos=new cc.Vec2(t.pos.x,t.pos.y),this.scale=t.scale,this.angle=t.angle,this.zIndex=t.zIndex,this},t.getPool=function(){return s.ObjectPoolMgr.Get().getPool("PokerCardPosInfo")},t.get=function(){var e=t.getPool().pop();return e||(e=new t,t.getPool().put(e)),e},t.put=function(e){e||t.getPool().put(e)},t}();o.CardPosInfo=d,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/module/tables/TableSkinMgr":void 0,"../../../script/app/module/tables/TableSkinSprite":void 0,"../../../script/lib/manager/ObjectPool":void 0,"../../../script/lib/manager/ResManager":void 0,"../model/GameInitConfig":"GameInitConfig","./../alg/ScopaLogic":"ScopaLogic"}],RoomPlayerInfo:[function(t,e,o){"use strict";cc._RF.push(e,"2b43axHVZdOSpRofOg6K3aF","RoomPlayerInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.RoomPlayerInfo=void 0;var n=t("../../../script/app/const/game/GameConstant"),i=t("../../../script/lib/utils/ComUtils"),a=function(){function t(){this.userId=0,this.name="",this.ip="",this.sex=0,this.deskId=0,this.chairId=0,this.status=n.GameConstant.RoomUserStatus.GetOut,this.gem=0,this.gold=null,this.score=null,this.distance=null,this.viewId=-1,this.headURL="",this.isRobot=!1,this.custFaceId=0,this.sysFaceId=0,this.isCardPlayer=!1,this.power=0,this.ownTableList=[],this.bIsGoldenPass=!1,this.level=0,this.curExp=0,this.nextLvlExp=0}return t.createFrom=function(e,o){void 0===o&&(o=!0);var n=new t;if(n.userId=e.dwUserID,n.chairId=e.dwChairID,n.name=i.ComUtils.u8ToUTF8Str(e.szNickName),n.sex=e.iGender,n.status=e.us.valueOf(),n.gold=e.llGold,n.gem=e.dwGem,n.score=e.dwJifen,n.isRobot=e.bRobot,n.sysFaceId=e.dwSysFaceID,n.custFaceId=e.dwUserCustFID,n.headURL=i.ComUtils.u8ToUTF8Str(e.chProfilePhoto).trim(),n.power=e.dwValuePS,n.bIsGoldenPass=e.bIsGoldenPass,n.ownTableList=e.tabHaveTableId||[],n.level=e.dwExpLevel,n.curExp=e.dwNowExp,n.nextLvlExp=e.dwNextLevelExp,0===n.ownTableList.length&&(n.ownTableList=[1]),e.chInfo){var a=i.ComUtils.u8ToUTF8Str(e.chInfo);try{var r=JSON.parse(a);r&&(n.extData=r)}catch(s){}}return n},t.prototype.toString=function(){return JSON.stringify(this)},t}();o.RoomPlayerInfo=a,cc._RF.pop()},{"../../../script/app/const/game/GameConstant":void 0,"../../../script/lib/utils/ComUtils":void 0}],ScopaAlgTest:[function(t,e){"use strict";cc._RF.push(e,"b3b0f4Xs05PEpZJqaoxeaBB","ScopaAlgTest"),cc._RF.pop()},{}],ScopaConstant:[function(t,e,o){"use strict";cc._RF.push(e,"70b4f8m/cxMfb6EozFfsdI8","ScopaConstant"),Object.defineProperty(o,"__esModule",{value:!0}),o.ScopaConstant=void 0,function(t){(function(t){t[t.None=-1]="None",t[t.Spade=0]="Spade",t[t.Heart=1]="Heart",t[t.Diamond=2]="Diamond",t[t.Club=3]="Club",t[t.Swords=0]="Swords",t[t.Clubs=1]="Clubs",t[t.Cups=2]="Cups",t[t.Coins=3]="Coins"})(t.CardColor||(t.CardColor={})),t.START_SEND_CARD_NUM=1,t.SEND_PLAYER_SPACE_TIME=.1,t.SEND_CARD_SPACE_TIME=.2,t.SEND_CARD_RUN_TIME=.6,t.OUT_CARD_RUN_TIME=.7,t.UP_OUT_CARD_TIME=0,t.UP_CARD_STOP_TIME=0,t.THROW_OUT_CARD_TIME=.43,t.MERGE_EAT_DELAY_TIME=.06,t.MERGE_EAT_RUN_TIME=.6,t.EAT_CARD_RUN_TIME=.4,function(t){t[t.NULL=-1]="NULL"}(t.OpType||(t.OpType={}))}(o.ScopaConstant||(o.ScopaConstant={})),cc._RF.pop()},{}],ScopaLogic:[function(t,e,o){"use strict";cc._RF.push(e,"6653cezM7xE1b6B5Q+if1ZH","ScopaLogic"),Object.defineProperty(o,"__esModule",{value:!0}),o.PosState=o.ScopaLogic=o.LocalCardSt=void 0;var n=t("../../../script/lib/manager/ObjectPool"),i=t("./../../../script/lib/utils/ComUtils"),a=function(){function t(t){this.init(t)}return t.prototype.init=function(t){this.o=t,this.r=t,this.l=r.getCardValue(t),this.c=r.getCardColor(t),this.s=0},t.getPool=function(){return n.ObjectPoolMgr.Get().getPool("LocalCardSt")},t.get=function(e){var o=t.getPool().pop();return o?o.init(e):o=new t(e),o},t.put=function(e){if(e){var o=t.getPool();if(Array.isArray(e))for(var n=0,i=e;n<i.length;n++){var a=i[n];o.put(a)}else o.put(e)}},t}();o.LocalCardSt=a;var r=function(){function t(){}return Object.defineProperty(t,"isAScopa",{get:function(){return this._isAScopa},set:function(t){this._isAScopa=t},enumerable:!1,configurable:!0}),t.clear=function(){this._isAScopa=!1},t.byteToLocal=function(t){return a.get(t)},t.bytesToLocal=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1);for(var n=[],i=0,a=t;i<a.length;i++){var r=a[i];n.push(this.byteToLocal(r))}return n},t.localCardsToByte=function(t){for(var e=[],o=0,n=t;o<n.length;o++){var i=n[o];e.push(i.o)}return e},t.getCardColor=function(t){return(240&t)>>4},t.getCardValue=function(t){return 15&t},t.isA=function(t){return!(!this._isAScopa||1!=(15&t))},t.localCardToIndex=function(t){for(var e=[],o=0,n=0,i=t;n<i.length;n++){var a=i[n];e[o=a.o]||(e[o]=[]),e[o].push(a)}return e},t.getAiCard=function(t,e){for(var o=[],n=0,i=0,a=e;i<a.length;i++)n=(l=a[i]).o,this.isSumEqualToValue(t,l.l)&&(o[n]||(o[n]=this.findSumEqualToVaule(t,l.l)));for(var r=0,s=e;r<s.length;r++)o[n=(l=s[r]).o]||(o[n]=this.findSumEqualToVaule(t,l.l));for(var c=0,p=e;c<p.length;c++){var l;o[n=(l=p[c]).o]||(o[n]=this.findSameValueCards(t,l.l))}return o},t.findSameValueCards=function(t,e){for(var o=[],n=0,i=t;n<i.length;n++){var a=i[n];a.l==e&&o.push(a)}return o},t.sortLCards=function(t){return t.sort(function(t,e){return t.l-e.l}),t},t.findSumEqualToVaule=function(t,e){var o=i.ComUtils.clone(t);this.sortLCards(o);var n=[],a=o.length;return this.findGroup(o,e,a-1,[],n),n},t.findGroup=function(e,o,n,i,a){if(0==o)return a.push(Array.from(i)),void i.splice(0,i.length);for(var r=n;r>=0;r--)o>=e[r].l&&(i.push(e[r]),t.findGroup(e,o-e[r].l,r-1,i,a),i.splice(i.length-1,1))},t.isSumEqualToValue=function(t,e){var o=0;return t.forEach(function(t){o+=t.l}),o===e},t.isScopa=function(t,e){if(this.isAScopa&&this.isA(e)&&t.length>0)return!0;var o=this.bytesToLocal(t),n=this.getCardValue(e);return this.isSumEqualToValue(o,n)},t.isSettebello=function(t){for(var e=0,o=t;e<o.length;e++)if(o[e]===this.COINS_7)return!0;return!1},t.COINS_7=55,t._isAScopa=!1,t}();o.ScopaLogic=r,function(t){t[t.MergePos=-1]="MergePos",t[t.NotFoundPos=-2]="NotFoundPos"}(o.PosState||(o.PosState={})),cc._RF.pop()},{"../../../script/lib/manager/ObjectPool":void 0,"./../../../script/lib/utils/ComUtils":void 0}],UICardMoveCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"03fc3s/6HdMfYqOA+vj6f2X","UICardMoveCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.UICardMoveCtrl=o.CardMoveInfo=void 0;var a=t("../../../../script/lib/base/CxCompExt"),r=t("../../model/GameEvent");o.CardMoveInfo=function(){};var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(r.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(r.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(r.GameEvent.MoveCard.CLEAR,this.clear),this.bindEvent(r.GameEvent.MoveCard.START,this.onMoveStart)},e.prototype.onMoveStart=function(t){if(t&&t.cardList)for(var e=0;e<t.cardList.length;e++);},e}(a.CxCompExt);o.UICardMoveCtrl=s,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../model/GameEvent":"GameEvent"}],UIEffectLayer:[function(t,e,o){"use strict";cc._RF.push(e,"5b0909kuwNGt6iqqGH+6OGh","UIEffectLayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIEffectLayer=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=cc._decorator,c=s.ccclass,p=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),a([c],e)}(r.CxCompExt));o.UIEffectLayer=p,cc._RF.pop()},{"../../../../../script/lib/base/CxCompExt":void 0}],UIGameChatPop:[function(t,e,o){"use strict";cc._RF.push(e,"4f014yz/G9Oz54HHe+PYjPD","UIGameChatPop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameChatPop=void 0;var r=t("./../../../../../script/app/const/Global"),s=t("../../../../../script/app/view/ComUI"),c=t("../../../../../script/lib/base/Callback"),p=t("../../../../../script/lib/base/CxCompExt"),l=t("../../../../../script/lib/manager/AudioManager"),d=t("../../../../../script/lib/utils/Logger"),u=t("../../../model/GameEvent"),h=t("../../../model/GameChatConfig"),_=cc._decorator,f=_.ccclass,m=_.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtPop=[],e.emojiPop=[],e.ndTimeOut=null,e.tweenNext=null,e.tweenTimeOut=null,e.timeOutNum=3,e.chatQueue=[],e.maxQueue=5,e.isPlaying=!1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.clearView()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.txtPop=null,this.emojiPop=null,this.tweenNext=null},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(u.GameEvent.Chat.DISPLAY_CHAT_POP,this.displayChatPop),this.bindEvent(u.GameEvent.Chat.CLEAR,this.clear),this.bindEvent(u.GameEvent.Com.GAME_SCENE_CLEAR,this.clear)},e.prototype.displayChatPop=function(t){this.push(t),this.isPlaying||this.next()},e.prototype.next=function(){this.clearView();var t=this.pop();t&&this.displayPopContent(t)},e.prototype.pop=function(){return this.chatQueue.shift()},e.prototype.push=function(t){if(this.chatQueue.length>=this.maxQueue)for(var e=0;e<this.chatQueue.length-this.maxQueue+1;++e)this.pop();this.chatQueue.push(t)},e.prototype.clean=function(){this.chatQueue=[]},e.prototype.displayPopContent=function(t){var e=this;this.isPlaying=!0;var o,n=t.uiData;if(t.type==h.GameChatConfig.ChatType.Common||t.type==h.GameChatConfig.ChatType.InputText){var i="";if(t.type==h.GameChatConfig.ChatType.InputText?(i=t.data,this.delayNext(3)):t.data>=h.GameChatConfig.ChatIndexTextStart&&t.data<=h.GameChatConfig.ChatIndexTextEnd&&h.GameChatConfig.ChatText(t.data-h.GameChatConfig.ChatIndexTextStart)&&(i=h.GameChatConfig.ChatText(t.data-h.GameChatConfig.ChatIndexTextStart).text,l.AudioManager.getInstance().getEnabledEffect()?this.dispatch(u.GameEvent.Voice.PLAY_EFFECT_CHAT,{idx:t.data,sex:n.sex,cb:new c.Callback(this,this.whenEffectEnd)}):(this.dispatch(u.GameEvent.Voice.PLAY_EFFECT_CHAT,{idx:t.data,sex:n.sex}),this.delayNext(3))),""!==i){var a=this.popActive(n.viewId,h.GameChatConfig.ChatType.InputText);a.getComponent(cc.RichText).string=i,(o=a.parent).active=!0}else if(t.data>=h.GameChatConfig.ChatIndexEmojiStart&&t.data<=h.GameChatConfig.ChatIndexEmojiEnd){d.Logger.info("\u8868\u60c5");var p=this.popActive(n.viewId,h.GameChatConfig.ChatType.Emoj);cc.tween(p).to(.1,{scale:1.1}).to(.1,{scale:1}).delay(.8).by(.18,{position:cc.v3(0,-6)}).by(.18,{position:cc.v3(0,14)}).by(.18,{position:cc.v3(0,-14)}).by(.18,{position:cc.v3(0,6)}).delay(1).start();var _=h.GameChatConfig.Emoji(t.data);s.ComUI.setSprite(p,_,r.gAssetBundleName.GAME_BASE_RES),(o=p.parent).active=!0,this.delayNext(3)}}switch(n.viewId){case 0:o.x=n.pos.x+100,o.y=n.pos.y+20;break;case 1:o.x=n.pos.x-85,o.y=n.pos.y+20;break;case 2:o.x=n.pos.x-85,o.y=n.pos.y-85;break;case 3:o.x=n.pos.x+100,o.y=n.pos.y+20}this.tweenTimeOut=cc.tween(this.ndTimeOut).delay(this.timeOutNum).call(function(){e.whenEffectEnd()}).start()},e.prototype.clearView=function(){for(var t=0,e=this.txtPop;t<e.length;t++)e[t].node.parent.active=!1;for(var o=0,n=this.emojiPop;o<n.length;o++)n[o].node.parent.active=!1},e.prototype.popActive=function(t,e){switch(this.clearView(),t){case 0:case 3:if(e===h.GameChatConfig.ChatType.InputText||e===h.GameChatConfig.ChatType.Common)return this.txtPop[0].node;if(e===h.GameChatConfig.ChatType.Emoj)return this.emojiPop[0].node;break;case 1:case 2:if(e===h.GameChatConfig.ChatType.InputText||e===h.GameChatConfig.ChatType.Common)return this.txtPop[t].node;if(e===h.GameChatConfig.ChatType.Emoj)return this.emojiPop[t].node}return null},e.prototype.arrowActive=function(t,e){e.forEach(function(e,o){e.node.active=void 0!==t&&o===t})},e.prototype.delayNext=function(t){var e=this;this.tweenNext=cc.tween(this.node).delay(t).call(function(){e.whenEffectEnd()}).start()},e.prototype.whenEffectEnd=function(){this.isPlaying=!1,this.stopTween(),this.next()},e.prototype.stopTween=function(){this.tweenNext&&(this.tweenNext.stop(),this.tweenNext=null),this.tweenTimeOut&&(this.tweenTimeOut.stop(),this.tweenTimeOut=null)},e.prototype.clear=function(){this.clean(),this.whenEffectEnd(),this.clearView()},a([m([cc.RichText])],e.prototype,"txtPop",void 0),a([m([cc.Sprite])],e.prototype,"emojiPop",void 0),a([m(cc.Node)],e.prototype,"ndTimeOut",void 0),a([f],e)}(p.CxCompExt);o.UIGameChatPop=y,cc._RF.pop()},{"../../../../../script/app/view/ComUI":void 0,"../../../../../script/lib/base/Callback":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/manager/AudioManager":void 0,"../../../../../script/lib/utils/Logger":void 0,"../../../model/GameChatConfig":"GameChatConfig","../../../model/GameEvent":"GameEvent","./../../../../../script/app/const/Global":void 0}],UIGameChatView:[function(t,e,o){"use strict";cc._RF.push(e,"05c171AYzdFNpONh4oAamTK","UIGameChatView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameChatView=void 0;var r=t("./../../../model/GameChatConfig"),s=t("../../../../../script/lib/base/CxCompExt"),c=t("../../../i18n/GameBaseI18n"),p=t("../../../../../script/lib/base/ComPopup"),l=t("../../../model/GameEvent"),d=cc._decorator,u=d.ccclass,h=d.property,_=d.requireComponent,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.toggleTxtChat=null,e.toggleEmojChat=null,e.inputBox=null,e.ndTxtPanel=null,e.ndEmojPanel=null,e.arrEmojBtn=[],e.arrTextBtn=[],e}return i(e,t),e.prototype.start=function(){if(this.inputBox&&(this.inputBox.node.on("editing-did-began",this.onEditingDidBegan,this),this.inputBox.node.on("editing-did-ended",this.onEditingDidEnded,this),this.inputBox.node.on("editing-return",this.onEditingReturn,this),this.inputBox.placeholder=c.GameBaseLan.i18n.chat_input_tips),this.toggleTxtChat){this.toggleTxtChat.node.on("toggle",this.onTxtToggleClick,this);for(var t=0,e=this.toggleTxtChat.getComponentsInChildren(cc.Label);t<e.length;t++)e[t].string=c.GameBaseLan.i18n.chat_chat}if(this.toggleEmojChat){this.toggleEmojChat.node.on("toggle",this.onEmojToggleClick,this);for(var o=0,n=this.toggleEmojChat.getComponentsInChildren(cc.Label);o<n.length;o++)n[o].string=c.GameBaseLan.i18n.chat_emoji}if(this.arrEmojBtn)for(var i=0;i<this.arrEmojBtn.length;i++)(a=this.arrEmojBtn[i]).node.on("click",this.onEmojClick,this),a.name=""+i;if(this.arrTextBtn)for(i=0;i<this.arrTextBtn.length;i++){var a;(a=this.arrTextBtn[i]).node.on("click",this.onTextClick,this),a.name=""+(i+r.GameChatConfig.ChatIndexTextStart),a.node.getChildByName("lab_msg_txt").getComponent(cc.Label).string=r.GameChatConfig.ChatText(i).text}this.swtichPanel(!0);var s=this.getComponent(p.ComPopup);s&&(s.needMask=!1)},e.prototype.onTxtToggleClick=function(t){t.isChecked&&this.swtichPanel(!0)},e.prototype.onEmojToggleClick=function(t){t.isChecked&&this.swtichPanel(!1)},e.prototype.swtichPanel=function(t){t?(this.ndTxtPanel&&(this.ndTxtPanel.active=!0),this.ndEmojPanel&&(this.ndEmojPanel.active=!1)):(this.ndTxtPanel&&(this.ndTxtPanel.active=!1),this.ndEmojPanel&&(this.ndEmojPanel.active=!0))},e.prototype.onEditingDidBegan=function(){},e.prototype.onEditingDidEnded=function(t){this.strInputContent=t.string.trim(),this.onSendBtnClick()},e.prototype.onEditingReturn=function(t){this.strInputContent=t.string.trim(),this.onSendBtnClick()},e.prototype.onEmojClick=function(t){this.dispatch(l.GameEvent.Msg.SEND_ROOM_COM_CHAT,parseInt(t.name)),this.close()},e.prototype.onTextClick=function(t){this.dispatch(l.GameEvent.Msg.SEND_ROOM_COM_CHAT,parseInt(t.name)),this.close()},e.prototype.onSendBtnClick=function(){this.strInputContent.length>0&&(this.dispatch(l.GameEvent.Msg.SEND_ROOM_TEXT_CHAT,this.strInputContent),this.close())},e.prototype.close=function(){this.node.destroy()},a([h(cc.Node)],e.prototype,"box",void 0),a([h(cc.Toggle)],e.prototype,"toggleTxtChat",void 0),a([h(cc.Toggle)],e.prototype,"toggleEmojChat",void 0),a([h(cc.EditBox)],e.prototype,"inputBox",void 0),a([h(cc.Node)],e.prototype,"ndTxtPanel",void 0),a([h(cc.Node)],e.prototype,"ndEmojPanel",void 0),a([h({type:[cc.Button],tooltip:"\u8868\u60c5\uff0c\u540d\u79f0\u9700\u8981\u5bf9\u5e94"})],e.prototype,"arrEmojBtn",void 0),a([h({type:[cc.Button],tooltip:"\b\u5feb\u6377\u8bed"})],e.prototype,"arrTextBtn",void 0),a([u,_(p.ComPopup)],e)}(s.CxCompExt);o.UIGameChatView=f,cc._RF.pop()},{"../../../../../script/lib/base/ComPopup":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../i18n/GameBaseI18n":"GameBaseI18n","../../../model/GameEvent":"GameEvent","./../../../model/GameChatConfig":"GameChatConfig"}],UIGameExitDlg:[function(t,e,o){"use strict";cc._RF.push(e,"0c0c2zAIJBHpInBNIpGe6VA","UIGameExitDlg");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameExitDlg=void 0;var r=t("./../../../i18n/GameBaseI18n"),s=t("./../../../../../script/app/const/Global"),c=t("../../../../../script/app/base/component/ComSubLayer"),p=t("../../../model/GameEvent"),l=t("../../../../../script/lib/base/BottomBarView"),d=cc._decorator,u=d.ccclass,h=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTips=null,e}return i(e,t),e.prototype.initParams=function(){return{showSubBG:!1,showTitle:!1}},e.prototype.start=function(){this.initLayer()},e.prototype.initLayer=function(){var t=this;this.labTips&&(this.labTips.string="       "+r.GameBaseLan.i18n.gold_game_exit_tips),l.BottomBarView.setBottomBar(this.node,[{style:s.gColorStyle.RED,text:r.GameBaseLan.i18n.txt_leave,callback:function(){t.dispatch(p.GameEvent.Com.GAME_EXIT,s.gExitGameType.exitAndLeftRoom),t.close()}},{style:s.gColorStyle.GREEN,text:r.GameBaseLan.i18n.txt_back_to_game,callback:function(){t.close()}}])},a([h(cc.Label)],e.prototype,"labTips",void 0),a([u],e)}(c.default);o.UIGameExitDlg=_,cc._RF.pop()},{"../../../../../script/app/base/component/ComSubLayer":void 0,"../../../../../script/lib/base/BottomBarView":void 0,"../../../model/GameEvent":"GameEvent","./../../../../../script/app/const/Global":void 0,"./../../../i18n/GameBaseI18n":"GameBaseI18n"}],UIGameLoading:[function(t,e,o){"use strict";cc._RF.push(e,"c5d9cZiy6ZIvZeF1uulwFEk","UIGameLoading");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameLoading=void 0;var r=t("../../../../script/app/event/Notify"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../../script/lib/utils/Display"),p=cc._decorator,l=p.ccclass,d=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndLoading=null,e.timeout=2,e.labLoadingText=null,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this),e&&e.tipsTxt&&(this.labLoadingText.node.active=!0,this.labLoadingText.string=e.tipsTxt),e.time&&(this.timeout=e.time)},e.prototype.start=function(){var t=this;if(this.node.width=c.Display.width,this.node.height=c.Display.height,this.node.addComponent(cc.BlockInputEvents),this.ndLoading){this.ndLoading.active=!0;var e=this.ndLoading.getComponent(sp.Skeleton);e&&(e.paused=!1,e.loop=!0)}cc.tween(this.node).delay(this.timeout||3).call(function(){t.dispatch(r.Notify.Gate.GATE_LOGIN_FAILED),t.close()}).start()},e.prototype.clear=function(){if(t.prototype.clear.call(this),this.ndLoading){this.ndLoading.active=!1;var e=this.ndLoading.getComponent(sp.Skeleton);e&&(e.paused=!0)}},e.prototype.close=function(){this.node.stopAllActions(),this.node.destroy()},a([d(cc.Node)],e.prototype,"ndLoading",void 0),a([d(cc.Integer)],e.prototype,"timeout",void 0),a([d(cc.Label)],e.prototype,"labLoadingText",void 0),a([l],e)}(s.CxCompExt);o.UIGameLoading=u,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/Display":void 0}],UIGameMyInfoPanel:[function(t,e,o){"use strict";cc._RF.push(e,"ef773mg8UFEopLR2WQuyoRT","UIGameMyInfoPanel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameMyInfoPanel=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=t("../../../../../script/lib/utils/ScreenAdapter"),c=t("../../../model/GameEvent"),p=cc._decorator,l=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),s.ScreenAdapter.paddingBottom(this.node)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Player.GAME_START,this.onGameStart),this.bindEvent(c.GameEvent.Player.MOVE_END,this.onGameStartEnd)},e.prototype.onGameStart=function(){this.node.opacity=0},e.prototype.onGameStartEnd=function(){this.node.opacity=255},a([l],e)}(r.CxCompExt));o.UIGameMyInfoPanel=d,cc._RF.pop()},{"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/utils/ScreenAdapter":void 0,"../../../model/GameEvent":"GameEvent"}],UIGamePlayerCD:[function(t,e,o){"use strict";cc._RF.push(e,"569fb2szrpN0JxAhq5dhxTK","UIGamePlayerCD");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGamePlayerCD=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=cc._decorator,c=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labInfo=null,e.progress=null,e._maxTime=10,e._startTime=0,e._endTime=0,e._curTime=0,e._bAddTime=!0,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this._maxTime=e.maxTime,this.restTimer()},e.prototype.onDestroy=function(){this.stopTimer(),t.prototype.onDestroy.call(this)},e.prototype.setMaxTime=function(t){this._maxTime=t},e.prototype.restTimer=function(){this.stopTimer(),this._bAddTime=!0,this._startTime=0,this._endTime=0,this._curTime=0,this.progress&&(this.progress.progress=0)},e.prototype.setProcess=function(t){if(this._curTime=t,this.progress){var e=t/this._maxTime;this.progress.progress=e}},e.prototype.runTimer=function(t,e){this.stopTimer(),this.setProcess(t),t-e>0?(this._bAddTime=!1,this._endTime=t,this._startTime=e):(this._bAddTime=!0,this._startTime=t,this._endTime=e),this._endTime=e,this._startTime=t,this.schedule(this.updateTimer)},e.prototype.stopTimer=function(){this.unschedule(this.updateTimer)},e.prototype.setReverse=function(t){this.progress.barSprite.node.scaleX=t?-1:1},e.prototype.updateTimer=function(t){this._bAddTime?(this._curTime+=t,this._curTime>=this._endTime&&this.stopTimer()):(this._curTime-=t,this._curTime<=this._endTime&&this.stopTimer()),this._curTime<0||this._curTime>this._maxTime?this.stopTimer():this.setProcess(this._curTime)},a([p(cc.Label)],e.prototype,"labInfo",void 0),a([p(cc.ProgressBar)],e.prototype,"progress",void 0),a([c],e)}(r.CxCompExt);o.UIGamePlayerCD=l,cc._RF.pop()},{"../../../../../script/lib/base/CxCompExt":void 0}],UIGamePlayerGold:[function(t,e,o){"use strict";cc._RF.push(e,"b2c31H1TzVCBa8/1R11MDkD","UIGamePlayerGold");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGamePlayerGold=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=t("../../../../../script/lib/utils/ComUtils"),c=t("../../../../../script/app/view/ComUI"),p=t("../../../../../script/app/module/tables/TableSkinMgr"),l=t("../../../../../script/app/event/Notify"),d=cc._decorator,u=d.ccclass,h=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spIconBg=null,e.spIcon=null,e.labGold=null,e}return i(e,t),e.prototype.init=function(t){this._viewId=t.viewId,this.changeSkin(p.TableSkinMgr.getCfg())},e.prototype.clear=function(){this.setGoldNum(0)},e.prototype.setGoldNum=function(t){this.labGold&&(this.labGold.string=s.ComUtils.formatGoldStr(t))},e.prototype.getGoldNum=function(){return this.labGold?Number(this.labGold.string):0},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(l.Notify.Base.CHANGE_SKIN,this.onChangeSkin)},e.prototype.onGoldChange=function(t){this.setGoldNum(t.gold)},e.prototype.changeSkin=function(t){t&&c.ComUI.changeLabel(this.labGold,t.font_def)},e.prototype.onChangeSkin=function(t){this.changeSkin(t)},a([h(cc.Sprite)],e.prototype,"spIconBg",void 0),a([h(cc.Sprite)],e.prototype,"spIcon",void 0),a([h(cc.Label)],e.prototype,"labGold",void 0),a([u],e)}(r.CxCompExt);o.UIGamePlayerGold=_,cc._RF.pop()},{"../../../../../script/app/event/Notify":void 0,"../../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../../script/app/view/ComUI":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/utils/ComUtils":void 0}],UIGamePlayerPower:[function(t,e,o){"use strict";cc._RF.push(e,"7c361W7+0pM0oxQrDO+oWzc","UIGamePlayerPower");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGamePlayerPower=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=t("../../../../../script/lib/utils/ComUtils"),c=t("../../../model/GameEvent"),p=t("../../../../../script/app/event/Notify"),l=t("../../../../../script/lib/utils/Logger"),d=t("../../../../../script/app/view/ComUI"),u=t("../../../../../script/app/module/tables/TableSkinMgr"),h=cc._decorator,_=h.ccclass,f=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spIconBg=null,e.spIcon=null,e.labPower=null,e.skeleton=null,e.labAnim=null,e.isKaiJu=!0,e.mNewPower=0,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this._viewId=e.viewId,this.changeSkin(u.TableSkinMgr.getCfg())},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Player.POWER_CHANGE,this.onPowerChange),this.bindEvent(p.Notify.Base.UPDATE_POWER_INFO,this.onGlobalPowerChange),this.bindEvent(p.Notify.Base.CHANGE_SKIN,this.onChangeSkin)},e.prototype.clear=function(){this.setPowerNum(0),this.skeleton&&(this.skeleton.node.active=!1,this.skeleton.paused=!0)},e.prototype.setPowerNum=function(t){cc.log("power: setPowerNum: powerNum="+t),this.labPower&&(this.labPower.string=s.ComUtils.formatGoldStr(t))},e.prototype.getPowerNum=function(){return this.labPower?Number(this.labPower.string):0},e.prototype.onGlobalPowerChange=function(t){var e=this;t&&(this.mNewPower=t.power,this.isKaiJu?this.scheduleOnce(function(){e.setPowerNum(e.mNewPower)},2.5):this.setPowerNum(this.mNewPower))},e.prototype.onPowerChange=function(t){if(t)if(this.mNewPower=t.power,l.Logger.info("aaa:onPowerChange() data=",t),null!=t.iChangePS&&t.iChangePS<0){var e=t.power-t.iChangePS;this.setPowerNum(e),this.playPowerAnim(t.power,t.iChangePS)}else this.setPowerNum(this.mNewPower)},e.prototype.playPowerAnim=function(t,e){var o=this;l.Logger.info("power: playPowerAnim() changPs=",e),this.scheduleOnce(function(){o.playPowerAnimInternal(t,e)},2)},e.prototype.playPowerAnimInternal=function(t,e){var o=this;l.Logger.info("power: playPowerAnimInternal() changPs=",e),this.isKaiJu=!1,this.skeleton&&(this.skeleton.node.active=!0,this.skeleton.paused=!1,d.ComUI.playSkeletonAnim(this.skeleton,"tili_kc",!1,function(){o.skeleton&&(o.skeleton.node.active=!1,o.skeleton.paused=!0)})),this.labAnim&&(this.labAnim.node.y=0,this.labAnim.node.active=!1,this.labAnim.string=""+e,cc.tween(this.labPower.node).delay(.18).call(function(){o.setPowerNum(o.mNewPower)}).start(),cc.tween(this.labAnim.node).delay(.16).set({active:!0,opacity:0}).parallel(cc.tween().to(.24,{opacity:255}).to(.3,{opacity:255}).to(.3,{opacity:0}),cc.tween().by(.7,{y:80})).delay(1).call(function(){}).start())},e.prototype.changeSkin=function(t){t&&d.ComUI.changeLabel(this.labPower,t.font_def)},e.prototype.onChangeSkin=function(t){this.changeSkin(t)},a([f(cc.Sprite)],e.prototype,"spIconBg",void 0),a([f(cc.Sprite)],e.prototype,"spIcon",void 0),a([f(cc.Label)],e.prototype,"labPower",void 0),a([f(sp.Skeleton)],e.prototype,"skeleton",void 0),a([f(cc.Label)],e.prototype,"labAnim",void 0),a([_],e)}(r.CxCompExt);o.UIGamePlayerPower=m,cc._RF.pop()},{"../../../../../script/app/event/Notify":void 0,"../../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../../script/app/view/ComUI":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/utils/ComUtils":void 0,"../../../../../script/lib/utils/Logger":void 0,"../../../model/GameEvent":"GameEvent"}],UIGamePlayersView:[function(t,e,o){"use strict";cc._RF.push(e,"0dcb8Z571BEKI5Eta2YXIua","UIGamePlayersView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./../widgets/UIGamePlayerGold"),s=t("./../widgets/UIGamePlayerPower"),c=t("../../../../../script/app/event/Notify"),p=t("../../../../../script/lib/base/CxCompExt"),l=t("../../../../../script/lib/utils/Display"),d=t("../../../../../script/lib/utils/Logger"),u=t("../../../model/GameEvent"),h=t("../widgets/UIGamePlayer"),_=t("../../../../../script/lib/utils/ScreenAdapter"),f=t("../../../../../script/app/event/GuiEvent"),m=t("../../../../../script/app/model/AdDataProxy"),y=cc._decorator,g=y.ccclass,E=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfPlayerItem=null,e.topGold=null,e.bottomGold=null,e.bottomPower=null,e}var o;return i(e,t),o=e,e.prototype.init=function(e){t.prototype.init.call(this,e)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(u.GameEvent.Player.ENTRY,this.onPlayerEntry),this.bindEvent(u.GameEvent.Player.STATUS_CHANGE,this.onPlayerStatusChange),this.bindEvent(u.GameEvent.Player.OP_TIMEOUT,this.onPlayerTimeoutChange),this.bindEvent(u.GameEvent.Player.MOVE,this.onPlayerMove),this.bindEvent(u.GameEvent.Player.MOVE_END,this.onPlayerMoveEnd),this.bindEvent(u.GameEvent.Player.GAME_START,this.onGameStart),this.bindEvent(u.GameEvent.Player.GOLD_CHANGE,this.onPlayerGoldChange),this.bindEvent(u.GameEvent.Player.POWER_CHANGE,this.onPlayerPowerChange),this.bindEvent(u.GameEvent.Player.SET_TIMER,this.onSetTimer),this.bindEvent(u.GameEvent.Player.CLEAR_READY_STATUS,this.onClearReadyStatus),this.bindEvent(u.GameEvent.Player.CLEAR_ALL_STATUS,this.onClearAllStatus),this.bindEvent(u.GameEvent.Player.SET_TRUST_STATUS,this.onSetTrustStatus),this.bindEvent(u.GameEvent.Player.UPDATE_ROOM_USERINFO,this.onUpdateUserInfo),this.bindEvent(u.GameEvent.Player.PLAYER_CLEAR,this.playerClear),this.bindEvent(u.GameEvent.Com.READY_NEXT_CLEAR,this.onClearAllStatus),this.bindEvent(u.GameEvent.Com.MAX_PLAYER_NUM_CHANGE,this.onPlayerNumChange),this.bindEvent(u.GameEvent.Chat.ON_CHAT_MSG,this.onChatMsg),this.bindEvent(u.GameEvent.Base.CHANGE_DESK_RESULT,this.onChangeDeskResult),this.bindEvent(c.Notify.UserInfo.UPDATE_USER_GOLD,this.onPlayerGoldChange),this.bindEvent(u.GameEvent.Base.GAME_RESULT,this.onClearAllStatus),this.bindEvent(f.GuiEvent.Anim.AWARD_GET_ICON_POS,this.onPutAwardPosInfo),this.bindEvent(f.GuiEvent.Anim.POWER_GET_ICON_POS,this.onPutPowerPosInfo),this.bindEvent(f.GuiEvent.Anim.GET_PACK_UP_TABLE_POS,this.onGetTableTabPos),this.bindEvent(u.GameEvent.Base.INIT_FINISH,this.onPutHeadFinishPos)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.pfPlayerItem||d.Logger.error("UIGamePlayersLayer not found pfPlayerItem"),o.headFinalPos=[cc.v2(152,70+l.Display.paddingBottom),cc.v2(l.Display.width-66,l.Display.cy+311),cc.v2(l.Display.cx+444,l.Display.height-l.Display.paddingTop-68),cc.v2(74,l.Display.cy+311)],this.initPlayer()},e.prototype.start=function(){this.topGold&&(this.topGold.init({viewId:2}),_.ScreenAdapter.paddingTop(this.topGold.node)),this.bottomGold&&(this.bottomGold.init({viewId:0}),_.ScreenAdapter.paddingBottom(this.bottomGold.node)),this.bottomPower&&(this.bottomPower.init({viewId:0}),_.ScreenAdapter.paddingBottom(this.bottomPower.node)),this.onPutHeadFinishPos()},e.prototype.onDestroy=function(){this.playerItems&&(this.playerItems=null),t.prototype.onDestroy.call(this)},e.prototype.clear=function(){for(var t=0,e=this.playerItems;t<e.length;t++){var o=e[t];o&&o.clear()}},e.prototype.initPlayer=function(){if(this.pfPlayerItem){this.playerItems=[];for(var t=0;t<4;t++){var e=cc.instantiate(this.pfPlayerItem);if(!e)break;this.node.addChild(e);var n=e.getComponent(h.UIGamePlayer);n.init({viewId:t,position:o.headFinalPos[t]}),this.playerItems.push(n)}}},e.prototype.getPlayerItemByUserId=function(t){for(var e=0;e<this.playerItems.length;e++)if(this.playerItems[e]&&this.playerItems[e].getUserId()==t)return this.playerItems[e];return null},e.prototype.getPlayerItemByViewId=function(t){for(var e=0;e<this.playerItems.length;e++)if(this.playerItems[e]&&this.playerItems[e].viewId==t)return this.playerItems[e];return null},e.prototype.moveTo=function(t){for(var e=0;e<this.playerItems.length;e++){var o=this.playerItems[e];o&&(t?o.node.active=!1:o.displayInfo())}},e.prototype.onPlayerNumChange=function(t){var e=this;this.clear(),t.players.forEach(function(t){var o=t.viewId;e.playerItems[o]&&e.playerItems[o].playerEntry({player:t,isPlaying:!0})})},e.prototype.onPlayerEntry=function(t){var e=t.player,o=e.viewId,n=this.getPlayerItemByUserId(e.userId);n&&n.clear(),o>=0&&o<4&&this.playerItems[o]?this.playerItems[o].playerEntry(t):d.Logger.error("onPlayerEntry this player error ",e),this.onPlayerGoldChange({userId:e.userId,gold:e.gold}),this.onPlayerPowerChange({userId:e.userId,power:e.power})},e.prototype.onPlayerStatusChange=function(t){var e=t.userId,o=t.status,n=this.getPlayerItemByUserId(e);n&&n.setPlayerStatus(o,!0)},e.prototype.onPlayerGoldChange=function(t){var e=t.userId,o=t.gold,n=this.getPlayerItemByUserId(e);n&&(0===n.viewId?this.bottomGold.setGoldNum(o):this.topGold.setGoldNum(o)),null==n&&null!=t.viewId&&null!=t.viewId&&(0===t.viewId?this.bottomGold.setGoldNum(o):this.topGold.setGoldNum(o))},e.prototype.onPlayerPowerChange=function(t){cc.log("power: onPlayerPowerChange: data=",t);var e=t.userId,o=t.power,n=this.getPlayerItemByUserId(e);n&&0===n.viewId&&this.bottomPower&&this.bottomPower.setPowerNum(o),null==n&&null!=t.viewId&&null!=t.viewId&&0===t.viewId&&this.bottomPower.setPowerNum(o)},e.prototype.onPlayerTimeoutChange=function(){},e.prototype.displayAllPlayers=function(){for(var t=0;t<this.playerItems.length;t++)this.playerItems[t]&&this.playerItems[t].displayInfo()},e.prototype.onPlayerMove=function(t){var e=t.bRun;null==t.bRun&&(e=!1),this.moveTo(t.bMoveToMid,e)},e.prototype.onPlayerMoveEnd=function(){this.displayAllPlayers(),this.showGold(!0)},e.prototype.showGold=function(t){this.topGold&&(this.topGold.node.active=t),this.bottomGold&&(this.bottomGold.node.active=t),this.bottomPower&&(this.bottomPower.node.active=t)},e.prototype.onUpdateGold=function(t){this.onPlayerGoldChange({userId:t.userId,gold:t.total})},e.prototype.onChangeDeskResult=function(t){t.success&&this.clear()},e.prototype.onGameStart=function(){for(var t=0;t<this.playerItems.length;t++){var e=this.playerItems[t];e&&(e.clearReadyStatus(),e.node.active=!1)}this.showGold(!1)},e.prototype.onScenePlaying=function(t){for(var e=0;e<this.playerItems.length;e++){var o=this.playerItems[e];o&&(o.clearReadyStatus(),0===o.viewId?this.bottomGold.setGoldNum(t.gold):this.topGold.setGoldNum(t.gold))}},e.prototype.onChatMsg=function(t){var e=this.getPlayerItemByUserId(t.userId);e&&(t.uiData=e.getPopUIData(),this.dispatch(u.GameEvent.Chat.DISPLAY_CHAT_POP,t))},e.prototype.onUpdateUserInfo=function(t){if(t){var e=this.getPlayerItemByUserId(t.userId);e&&(e.setNickName(t.name),e.setSex(t.sex),e.updatePlayerHead(t.headURL))}},e.prototype.onSetTimer=function(t){var e=t.viewId,o=this.getPlayerItemByViewId(e);o&&o.setTimer(t.bRun,t.remainTime,t.maxTime),this.playerItems.forEach(function(t){t&&t.viewId!==e&&t.clearTimer()})},e.prototype.onSetTrustStatus=function(t){var e=this.getPlayerItemByUserId(t.userId);e&&e.setTrustStatus(t.isTrust)},e.prototype.onClearReadyStatus=function(t){if(null==t)this.playerItems.forEach(function(t){t&&t.clearReadyStatus()});else{var e=this.getPlayerItemByUserId(t.userId);e&&e.clearReadyStatus()}},e.prototype.onClearAllStatus=function(){this.playerItems.forEach(function(t){t&&t.clearAllStatus()})},e.prototype.playerClear=function(t){if(t)(n=this.getPlayerItemByUserId(t))&&n.clear();else for(var e=0,o=this.playerItems;e<o.length;e++){var n;(n=o[e])&&n.clear()}},e.prototype.onPutAwardPosInfo=function(){this.bottomGold&&this.bottomGold.spIcon&&this.dispatch(f.GuiEvent.Anim.AWARD_PUT_ICON_POS,{tPos:this.bottomGold.spIcon.node.parent.convertToWorldSpaceAR(this.bottomGold.spIcon.node.position),node:this.bottomGold.node})},e.prototype.onPutPowerPosInfo=function(){this.bottomPower&&this.dispatch(f.GuiEvent.Anim.POWER_PUT_ICON_POS,{tPos:this.bottomPower.spIcon.node.parent.convertToWorldSpaceAR(this.bottomPower.spIcon.node.position),node:this.bottomPower.node})},e.prototype.onPutHeadFinishPos=function(){for(var t=[],e=0;e<this.playerItems.length;e++){var o=this.playerItems[e];o&&(t[e]=o.node.convertToWorldSpaceAR(cc.Vec2.ZERO))}this.dispatch(u.GameEvent.Player.PUT_HEADS_POS,t)},e.prototype.onGetTableTabPos=function(){var t=this.getPlayerItemByViewId(0);t&&this.dispatch(f.GuiEvent.Anim.PUT_PACK_UP_TABLE_POS,{worldPos:t.node.convertToWorldSpaceAR(cc.Vec2.ZERO),node:t.node})},e.prototype.onSetBannerOnOff=function(t){if(o.headFinalPos&&t.type===m.BannerType.GAME){var e,n=o.headFinalPos[0].y;if((e=t.isOn?70+l.Display.paddingBottom+l.Display.bannerOffsetY:70+l.Display.paddingBottom)!==n){o.headFinalPos[0].y=e,this.onPutHeadFinishPos();var i=this.getPlayerItemByViewId(0);i&&(i.node.y=e)}}},a([E(cc.Prefab)],e.prototype,"pfPlayerItem",void 0),a([E(r.UIGamePlayerGold)],e.prototype,"topGold",void 0),a([E(r.UIGamePlayerGold)],e.prototype,"bottomGold",void 0),a([E(s.UIGamePlayerPower)],e.prototype,"bottomPower",void 0),o=a([g],e)}(p.CxCompExt);o.default=C,cc._RF.pop()},{"../../../../../script/app/event/GuiEvent":void 0,"../../../../../script/app/event/Notify":void 0,"../../../../../script/app/model/AdDataProxy":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/utils/Display":void 0,"../../../../../script/lib/utils/Logger":void 0,"../../../../../script/lib/utils/ScreenAdapter":void 0,"../../../model/GameEvent":"GameEvent","../widgets/UIGamePlayer":"UIGamePlayer","./../widgets/UIGamePlayerGold":"UIGamePlayerGold","./../widgets/UIGamePlayerPower":"UIGamePlayerPower"}],UIGamePlayer:[function(t,e,o){"use strict";cc._RF.push(e,"bcf39+4i1tP/oD2GrbKrOaL","UIGamePlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGamePlayer=void 0;var r=t("./../../../model/GameInitConfig"),s=t("./UIRobot"),c=t("./../../../../../script/lib/utils/ComUtils"),p=t("./UIGamePlayerCD"),l=t("../../../../../script/lib/base/CxCompExt"),d=t("../../../model/GameEvent"),u=t("../../../model/RoomPlayerInfo"),h=t("../../../../../script/app/const/game/GameConstant"),_=t("../../../../../script/app/view/ComUI"),f=t("../../../../../script/app/module/tables/TableSkinMgr"),m=t("../../../../../script/app/event/Notify"),y=cc._decorator,g=y.ccclass,E=y.property,C=function(t){function e(){var e=t.call(this)||this;return e.spHead=null,e.ndHead=null,e.cd=null,e.labNickName=null,e.spLevelBg=null,e.labLevel=null,e.robot=null,e.sex=0,e.isRobot=!1,e.viewId=-1,e.userId=0,e.chairId=-1,e.playerInfo=new u.RoomPlayerInfo,e.userStatus=h.GameConstant.RoomUserStatus.Free,e.goldNum=0,e.timeout=0,e.isRobot=!1,e}return i(e,t),e.prototype.start=function(){2===this.viewId&&(this.ndHead.y-=30,this.spHead.node.y-=30,this.spLevelBg.node.y-=30),this.changeSkin(f.TableSkinMgr.getCfg())},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(m.Notify.Base.CHANGE_SKIN,this.onChangeSkin),this.bindEvent(d.GameEvent.Player.UPDATE_USERS_INFO,this.onUpdateUserInfo)},e.prototype.changeSkin=function(t){t&&(_.ComUI.changeLabel(this.labNickName,t.nick_name),this.playerInfo.bIsGoldenPass&&_.ComUI.LabelToGolden(this.labNickName),this.ndHead&&(this.ndHead.scale=t.head.scale),this.labLevel&&_.ComUI.changeLabel(this.labLevel,t.font_table_level))},e.prototype.onChangeSkin=function(t){this.changeSkin(t)},e.prototype.clear=function(){this.userId=0,this.userStatus=h.GameConstant.RoomUserStatus.Free,this.chairId=-1,this.goldNum=0,this.timeout=0,this.node.active=!1,this.isRobot=!1,this.setTrustStatus(!1)},e.prototype.init=function(e){t.prototype.init.call(this,e),this.viewId=e.viewId||0,this.setFinalPos(e.position),this.cd&&this.cd.init({maxTime:10,reverse:2==this.viewId}),this.clear()},e.prototype.clearAllStatus=function(){this.clearReadyStatus(),this.clearOfflineStatus(),this.clearTimeoutStatus(),this.clearTimer()},e.prototype.getUserId=function(){return this.userId},e.prototype.getViewId=function(){return this.viewId},e.prototype.setUserLevel=function(t){this.labLevel&&(this.labLevel.string=""+t)},e.prototype.setNickName=function(t,e){void 0===e&&(e=!1),this.labNickName&&(this.labNickName.string=c.ComUtils.subStr(t,6,!0),e&&_.ComUI.LabelToGolden(this.labNickName))},e.prototype.getNickName=function(){return this.labNickName?this.labNickName.string:""},e.prototype.setUserGold=function(t){this.goldNum=t},e.prototype.getUserGold=function(){return this.goldNum},e.prototype.runTimerAni=function(t){this.cd&&(t?this.cd.runTimer(10,0):this.cd.restTimer())},e.prototype.setTimer=function(t,e,o){void 0===o&&(o=0),this.cd&&(t?this.cd.runTimer(e,0):this.cd.restTimer())},e.prototype.clearTimer=function(){this.cd&&this.cd.restTimer()},e.prototype.setPlayerStatus=function(t,e){switch(t){case h.GameConstant.RoomUserStatus.GetOut:0!==this.viewId&&this.clear();break;case h.GameConstant.RoomUserStatus.Ready:this.setReadyStatus(),this.clearTimeoutStatus();break;case h.GameConstant.RoomUserStatus.Playing:this.setOfflineStatus(!1,e),this.clearReadyStatus(),this.clearTimeoutStatus();break;case h.GameConstant.RoomUserStatus.OffLine:this.setOfflineStatus(!0,e),this.clearTimeoutStatus();break;case h.GameConstant.RoomUserStatus.Sit:this.clearTimeoutStatus(),this.clearReadyStatus()}},e.prototype.playerEntry=function(t){var e=this,o=t.player;this.playerInfo=o,this.chairId=o.chairId,this.userId=o.userId,this.isRobot=o.isRobot,this.viewId=o.viewId,this.setNickName(o.name,o.bIsGoldenPass),this.setPlayerStatus(o.status),this.setSex(o.sex),this.initCountDown(this.viewId),this.initNickname(this.viewId),this.setPlayerHead(),this.setUserLevel(o.level),o.isCardPlayer?this.setUserGold(o.score):this.setUserGold(o.gold),this.scheduleOnce(function(){e.node.active=t.isPlaying},.01)},e.prototype.setSex=function(t){this.sex=t},e.prototype.getSex=function(){return this.sex},e.prototype.initNickname=function(t){var e,o,n;0===t?(e=cc.v2(40,0),o=0,n=cc.v2(0,.5)):1===t||3===t?(e=cc.v2(0,-70),o=90,n=cc.v2(.5,1)):2===t&&(e=cc.v2(-15,0),o=0,n=cc.v2(1,.5)),this.labNickName&&(this.labNickName.node.x=e.x,this.labNickName.node.y=e.y,this.labNickName.node.angle=o,this.labNickName.node.anchorX=n.x,this.labNickName.node.anchorY=n.y)},e.prototype.initCountDown=function(t){var e,o,n;0===t?(e=cc.v2(45,0),o=0,n=cc.v2(0,.5)):1===t||3===t?(e=cc.v2(0,-45),o=90,n=cc.v2(.5,1)):2===t&&(e=cc.v2(-40,0),o=0,n=cc.v2(1,.5)),this.cd&&(this.cd.node.x=e.x,this.cd.node.y=e.y,this.cd.node.angle=o,this.cd.node.anchorX=n.x,this.cd.node.anchorY=n.y,this.cd.setReverse(2===t))},e.prototype.setReadyStatus=function(){},e.prototype.clearReadyStatus=function(){},e.prototype.clearTimeoutStatus=function(){},e.prototype.setOfflineStatus=function(){},e.prototype.clearOfflineStatus=function(){},e.prototype.setPlayerHead=function(){this.ndHead.destroyAllChildren(),_.ComUI.createUserHead({parent:this.ndHead,userId:this.userId,sex:this.sex,size:cc.size(129,129),save:!0,robot:this.isRobot,custFaceId:this.playerInfo.custFaceId,faceId:this.playerInfo.sysFaceId,url:this.playerInfo.headURL,showBg:1===r.GameInitConfig.tableId,level:this.playerInfo.level})},e.prototype.updatePlayerHead=function(t){c.ComUtils.isTextEmpty(t)||(this.ndHead.destroyAllChildren(),_.ComUI.createUserHead({parent:this.ndHead,userId:this.userId,sex:this.sex,size:cc.size(129,129),save:!0,url:t,faceId:this.playerInfo.sysFaceId,custFaceId:this.playerInfo.custFaceId,robot:this.isRobot,showBg:1===r.GameInitConfig.tableId,level:this.playerInfo.level}))},e.prototype.getPlayerInfo=function(){return this.playerInfo},e.prototype.moveTo=function(t){this.setFinalPos(t)},e.prototype.setFinalPos=function(t){this.node.position=cc.v3(t)},e.prototype.displayInfo=function(){this.chairId>0&&(this.node.active=!0)},e.prototype.getPopUIData=function(){return{viewId:this.viewId,sex:this.getSex(),pos:this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),size:this.node.getContentSize()}},e.prototype.setOpTimer=function(t,e){this.cd&&(this.cd.setMaxTime(e),this.cd.runTimer(t,e))},e.prototype.onUserClick=function(){this.dispatch(d.GameEvent.Player.ON_USER_CLICK,this.getUserId())},e.prototype.setTrustStatus=function(t){this.viewId>0&&this.robot&&(t?this.robot.show():this.robot.hide())},e.prototype.onUpdateUserInfo=function(t){this.userId==t.userId&&null!=t.level&&null!=t.level&&this.setUserLevel(t.level)},a([E(cc.Sprite)],e.prototype,"spHead",void 0),a([E(cc.Node)],e.prototype,"ndHead",void 0),a([E(p.UIGamePlayerCD)],e.prototype,"cd",void 0),a([E(cc.Label)],e.prototype,"labNickName",void 0),a([E(cc.Sprite)],e.prototype,"spLevelBg",void 0),a([E(cc.Label)],e.prototype,"labLevel",void 0),a([E(s.UIRobot)],e.prototype,"robot",void 0),a([g],e)}(l.CxCompExt);o.UIGamePlayer=C,cc._RF.pop()},{"../../../../../script/app/const/game/GameConstant":void 0,"../../../../../script/app/event/Notify":void 0,"../../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../../script/app/view/ComUI":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../model/GameEvent":"GameEvent","../../../model/RoomPlayerInfo":"RoomPlayerInfo","./../../../../../script/lib/utils/ComUtils":void 0,"./../../../model/GameInitConfig":"GameInitConfig","./UIGamePlayerCD":"UIGamePlayerCD","./UIRobot":"UIRobot"}],UIGamePopupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cfdb1HNXUxCaJu9/w4fS64h","UIGamePopupMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGamePopupMgr=void 0;var r=t("./../../../script/app/base/ComPopupMgr"),s=t("./../../../script/app/const/Global"),c=t("../../../script/app/const/Global"),p=t("../../../script/app/event/Notify"),l=t("../../../script/app/view/ComUI"),d=t("../../../script/lib/manager/SceneManager"),u=t("../model/GameEvent"),h=t("../../../script/lib/utils/ComUtils"),_=t("../../../script/app/language/LanguageCfg"),f=t("../../../script/lib/manager/PrefabItemMgr"),m=t("../../../script/app/event/GuiEvent"),y=t("../../../script/app/base/BasePopupMr"),g=cc._decorator,E=g.ccclass,C=(g.property,g.requireComponent),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(u.GameEvent.Popup.CLOSE_ALL,this.onCloseAll),this.bindEvent(u.GameEvent.Popup.GAME_ONCE_RESULT,this.onGameOnceResult),this.bindEvent(u.GameEvent.Popup.GAME_TOTAL_RESULT,this.onGameTotalResult),this.bindEvent(u.GameEvent.Popup.GAME_USER_INFO,this.onGameUserInfo),this.bindEvent(u.GameEvent.Popup.CHAT,this.onChatLayer),this.bindEvent(u.GameEvent.Popup.SETTING,this.onSettingLayer),this.bindEvent(u.GameEvent.Popup.SETTEBELLO,this.onSettebello),this.bindEvent(u.GameEvent.Popup.REALTIME_SCORE,this.onRealTimeScore),this.bindEvent(u.GameEvent.Popup.EXIT_DLG,this.onExitDialog),this.bindEvent(p.Notify.Gate.GATE_LOGIN_FAILED,this.onGateLoginFailed),this.bindEvent(p.Notify.Gate.USER_KICK_HINT,this.onUserKickHint),this.bindEvent(u.GameEvent.Com.LOGIN_FAILED,this.onGameLoginFailed),this.bindEvent(u.GameEvent.Com.LOADING,this.onLoading),this.bindEvent(m.GuiEvent.PopMsg.BRANKRUPT_DLG,this.onBrankruptDialog),this.bindEvent(p.Notify.Laba.ADD_SPEAK_INFO,this.onNewSpeakInfo)},e.prototype.onCloseAll=function(){this.popupLoader.closeAll()},e.prototype.onLoading=function(t){l.ComUI.rmLoading(),!0===t&&l.ComUI.addLoading({time:5,tipsTxt:h.ComUtils.getLang(_.LangKey.text_connecting),reconnect:!0})},e.prototype.onGameOnceResult=function(t){var e="GameResultView";t.strBeiShu&&(e="GameResultView_2");var o=f.PrefabItemMgr.getInstance().get(e,s.gAssetBundleName.SCOPA_GOLD_RES);this.popupLoader.showPopup(o,s.gAssetBundleName.SCOPA_GOLD_RES,t)},e.prototype.onGameTotalResult=function(){},e.prototype.onGameUserInfo=function(){},e.prototype.onScopa=function(t){var e=f.PrefabItemMgr.getInstance().get("ScopaAnim",s.gAssetBundleName.GAME_BASE_RES);this.popupLoader.showPopup(e,s.gAssetBundleName.GAME_BASE_RES,t)},e.prototype.onSettebello=function(t){var e=f.PrefabItemMgr.getInstance().get("SettebelloAnim",s.gAssetBundleName.SCOPA_GOLD_RES);this.popupLoader.showPopup(e,s.gAssetBundleName.SCOPA_GOLD_RES,t)},e.prototype.onRealTimeScore=function(t){var e=f.PrefabItemMgr.getInstance().get("GameRealTimeScore",s.gAssetBundleName.SCOPA_GOLD_RES);this.popupLoader.showPopup(e,s.gAssetBundleName.SCOPA_GOLD_RES,t)},e.prototype.onChatLayer=function(t){var e=f.PrefabItemMgr.getInstance().get("GameChatView",s.gAssetBundleName.GAME_BASE_RES);this.popupLoader.showPopup(e,s.gAssetBundleName.GAME_BASE_RES,t)},e.prototype.onSettingLayer=function(t){var e=f.PrefabItemMgr.getInstance().get("GameSetting",s.gAssetBundleName.GAME_BASE_RES);this.popupLoader.showPopup(e,s.gAssetBundleName.GAME_BASE_RES,t)},e.prototype.onExitDialog=function(t){var e=f.PrefabItemMgr.getInstance().get("GameExitDlg",s.gAssetBundleName.GAME_BASE_RES);this.popupLoader.showPopup(e,s.gAssetBundleName.GAME_BASE_RES,t)},e.prototype.onGameLoginFailed=function(t){l.ComUI.showDialog({title:h.ComUtils.getLang(_.LangKey.text_prompt),text:t.errTip,close:!1,outClose:!1,tag:"LoginFailed",cb1:function(){this.dispatch(u.GameEvent.Com.GAME_EXIT,c.gExitGameType.exitAndLeftRoom)}})},e.prototype.onGateLoginFailed=function(){l.ComUI.showDialog({title:h.ComUtils.getLang(_.LangKey.text_prompt),text:h.ComUtils.getLang(_.LangKey.text_network_broken),close:!1,outClose:!1,cb1:function(){this.dispatch(u.GameEvent.Com.RECONNECT)}})},e.prototype.onUserKickHint=function(t){l.ComUI.showDialog({title:h.ComUtils.getLang(_.LangKey.text_prompt),text:t.message||"",close:!1,outClose:!1,cb1:function(){d.default.getInstance().gotoLobby()}})},e.prototype.onBrankruptDialog=function(){},e.prototype.onNewSpeakInfo=function(t){t.scene==s.gSceneType.Game&&l.ComUI.showSpeaker(t,this.popupLoader.getLayer(s.gLayerLevel.Popup),cc.v2(0,0))},a([E,C(r.ComPopupMgr)],e)}(y.BasePopupMr);o.UIGamePopupMgr=S,cc._RF.pop()},{"../../../script/app/base/BasePopupMr":void 0,"../../../script/app/const/Global":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/manager/PrefabItemMgr":void 0,"../../../script/lib/manager/SceneManager":void 0,"../../../script/lib/utils/ComUtils":void 0,"../model/GameEvent":"GameEvent","./../../../script/app/base/ComPopupMgr":void 0,"./../../../script/app/const/Global":void 0}],UIGameSetting:[function(t,e,o){"use strict";cc._RF.push(e,"344dao365xOa54ZtiaMuMmk","UIGameSetting");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameSetting=void 0;var r=t("./../../../../../script/lib/utils/Display"),s=t("./../../../../../script/app/model/LocalDataProxy"),c=t("../../../../../script/lib/base/CxCompExt"),p=t("../../../model/GameEvent"),l=t("../../../../../script/app/event/Notify"),d=t("../../../i18n/GameBaseI18n"),u=t("../../../../../script/app/language/LanguageCfg"),h=t("../../../../../script/lib/utils/ComUtils"),_=cc._decorator,f=_.ccclass,m=_.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndBg=null,e.tgSound=null,e.tgMusic=null,e.btnLeave=null,e.labSound=null,e.labMusic=null,e.labLeave=null,e.mLocalSetting=[],e}return i(e,t),e.prototype.init=function(t){if(this.mLocalSetting=[{index:"music",target:this.tgMusic,key:s.LocalStorageProxy.Music,value:s.LocalStorageProxy.On,local:t.music||s.LocalStorageProxy.On},{index:"sound",target:this.tgSound,key:s.LocalStorageProxy.Effect,value:s.LocalStorageProxy.On,local:t.sound||s.LocalStorageProxy.On}],t.worldPos){var e=this.node.convertToNodeSpace(t.worldPos);this.ndBg.x=-r.Display.cx+e.x,this.ndBg.y=e.y/2}this.initView()},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.tgSound&&this.tgSound.node.on("toggle",this.onClickSound,this),this.tgMusic&&this.tgMusic.node.on("toggle",this.onClickMusic,this),this.btnLeave&&this.btnLeave.node.on("click",this.onClickLeave,this)},e.prototype.initView=function(){if(this.mLocalSetting)for(var t=0;t<this.mLocalSetting.length;t++){var e=this.mLocalSetting[t];this.setOptionStatus(e.target,e.local)}h.ComUtils.setLangText(this.labMusic,u.LangKey.setting_music),h.ComUtils.setLangText(this.labSound,u.LangKey.setting_sound),this.labLeave&&(this.labLeave.string=d.GameBaseLan.i18n.txt_leave)},e.prototype.setOptionStatus=function(t,e){if(t){var o=e===s.LocalStorageProxy.On;t.isChecked=o,t.target.active=!o}},e.prototype.onClickSound=function(t){var e="";t.isChecked?(e=s.LocalStorageProxy.On,t.target.active=!1):(e=s.LocalStorageProxy.Off,t.target.active=!0),this.dispatch(l.Notify.Base.SET_LOCAL_STORAG,{key:s.LocalStorageProxy.Effect,value:e})},e.prototype.onClickMusic=function(t){var e="";t.isChecked?(e=s.LocalStorageProxy.On,t.target.active=!1):(e=s.LocalStorageProxy.Off,t.target.active=!0),this.dispatch(l.Notify.Base.SET_LOCAL_STORAG,{key:s.LocalStorageProxy.Music,value:e})},e.prototype.onClickLeave=function(){this.dispatch(p.GameEvent.Popup.EXIT_DLG)},a([m(cc.Node)],e.prototype,"ndBg",void 0),a([m(cc.Toggle)],e.prototype,"tgSound",void 0),a([m(cc.Toggle)],e.prototype,"tgMusic",void 0),a([m(cc.Button)],e.prototype,"btnLeave",void 0),a([m(cc.Label)],e.prototype,"labSound",void 0),a([m(cc.Label)],e.prototype,"labMusic",void 0),a([m(cc.Label)],e.prototype,"labLeave",void 0),a([f],e)}(c.CxCompExt);o.UIGameSetting=y,cc._RF.pop()},{"../../../../../script/app/event/Notify":void 0,"../../../../../script/app/language/LanguageCfg":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/utils/ComUtils":void 0,"../../../i18n/GameBaseI18n":"GameBaseI18n","../../../model/GameEvent":"GameEvent","./../../../../../script/app/model/LocalDataProxy":void 0,"./../../../../../script/lib/utils/Display":void 0}],UIGameTips:[function(t,e,o){"use strict";cc._RF.push(e,"b3ce8IXUndOVrMQouKmqdwv","UIGameTips");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameTips=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=t("../../../model/GameEvent"),c=cc._decorator,p=c.ccclass,l=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spTipsBg=null,e.labTitle=null,e.labDesc=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.clear()},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(s.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(s.GameEvent.GameTips.CLEAR,this.clear),this.bindEvent(s.GameEvent.GameTips.REDEAL,this.onReDealCards)},e.prototype.onReDealCards=function(){this.labTitle&&(this.labTitle.node.active=!0,cc.tween(this.labTitle.node).set({scale:.5,opacity:0}).to(.13,{scale:1.25,opacity:255}).to(.1,{scale:1}).delay(1).to(.14,{scale:1.2,opacity:0}).start()),this.labDesc&&(this.labDesc.node.active=!0,cc.tween(this.labDesc.node).delay(.1).set({opacity:0}).to(.13,{opacity:255}).delay(1).to(.13,{opacity:0}).start()),this.spTipsBg&&(this.spTipsBg.node.active=!0,cc.tween(this.spTipsBg.node).set({opacity:0}).to(.13,{opacity:229.5}).delay(1.07).to(.13,{opacity:0}).start()),this.delayCall(this.clear.bind(this),1.36)},e.prototype.clear=function(){this.spTipsBg&&(this.spTipsBg.node.active=!1),this.labTitle&&(this.labTitle.node.active=!1),this.labDesc&&(this.labDesc.node.active=!1),this.node.stopAllActions()},a([l(cc.Sprite)],e.prototype,"spTipsBg",void 0),a([l(cc.Label)],e.prototype,"labTitle",void 0),a([l(cc.Label)],e.prototype,"labDesc",void 0),a([p],e)}(r.CxCompExt);o.UIGameTips=d,cc._RF.pop()},{"../../../../../script/lib/base/CxCompExt":void 0,"../../../model/GameEvent":"GameEvent"}],UIGameTrustMenu:[function(t,e,o){"use strict";cc._RF.push(e,"4d10eS44oVGlqqcSoRxD5+D","UIGameTrustMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameTrustMenu=void 0;var r=t("../../../../../script/lib/base/CxCompExt"),s=t("../../../../../script/lib/i18n/i18nHelper"),c=t("../../../i18n/GameBaseI18n"),p=t("../../../model/GameEvent"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.thisObj=null,e.btnTrust=null,e.labTips=null,e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initEvent=function(){this.bindEvent(p.GameEvent.Desk.SET_TRUST,this.onSetTrust),this.bindEvent(p.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(p.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(p.GameEvent.Base.GAME_RESULT,this.clear)},e.prototype.start=function(){this.btnTrust&&(this.btnTrust.node.on("click",this.onTrustClick,this),this.btnTrust.getComponentInChildren(cc.Label).language=s.i18nHelper.makeLanguage(c.IGameBaseI18n.k.game_exit_trust,c.GameBaseLan.bundle)),this.thisObj.on(cc.Node.EventType.TOUCH_END,this.onTrustClick,this),this.thisObj.active=!1,this.clear()},e.prototype.onSetTrust=function(t){this.thisObj&&(this.thisObj.active=t,t&&(this.thisObj.stopAllActions(),cc.tween(this.thisObj).set({opacity:100,position:cc.v3(0,-this.thisObj.height)}).to(.2,{position:cc.v3(0,0),opacity:255},{easing:cc.easing.quadOut}).start()))},e.prototype.onTrustClick=function(){this.thisObj&&this.thisObj.active&&(this.dispatch(p.GameEvent.OperateEvent.TRUST,!1),this.clear())},e.prototype.clear=function(){this.thisObj&&this.thisObj.active&&(this.thisObj.stopAllActions(),cc.tween(this.thisObj).to(.2,{position:cc.v3(0,-this.thisObj.height),opacity:100},{easing:cc.easing.quadOut}).set({active:!1}).start())},a([u(cc.Node)],e.prototype,"thisObj",void 0),a([u(cc.Button)],e.prototype,"btnTrust",void 0),a([u(cc.Label)],e.prototype,"labTips",void 0),a([d],e)}(r.CxCompExt);o.UIGameTrustMenu=h,cc._RF.pop()},{"../../../../../script/lib/base/CxCompExt":void 0,"../../../../../script/lib/i18n/i18nHelper":void 0,"../../../i18n/GameBaseI18n":"GameBaseI18n","../../../model/GameEvent":"GameEvent"}],UIGameVSAnim:[function(t,e,o){"use strict";cc._RF.push(e,"3d69ctUVEZBjZHml7kj1hYU","UIGameVSAnim");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIGameVSAnim=void 0;var r=t("../../../../../script/app/const/AudioFile"),s=t("../../../../../script/app/event/Notify"),c=t("../../../../../script/app/view/ComUI"),p=t("../../../../../script/lib/base/CxCompExt"),l=t("../../../model/GameEvent"),d=cc._decorator,u=d.ccclass,h=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.myHead=null,e.topPlayerHead=null,e.ndAnim=null,e.arrHeadFinalPos=[],e.arrHeads=[],e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.clear(),this.moveHeads=[],this.arrHeadMidPos=[cc.v3(207.31,1056.86),cc.v3(0,0),cc.v3(863.58,1608.86),cc.v3(0,0)],this.enableBlockInputEvent(!1)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(l.GameEvent.Effect.VS_ANIM,this.onGameStart),this.bindEvent(l.GameEvent.Effect.CLEAR,this.clear),this.bindEvent(l.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(l.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(l.GameEvent.Player.PUT_HEADS_POS,this.onGetPlayersPos)},e.prototype.onGameStart=function(t){if(this.ndAnim){this.ndAnim.active=!0,this.ndAnim.stopAllActions();var e=this.ndAnim.getComponent(sp.Skeleton);e&&(e.paused=!1,e.animation="vs")}for(var o=0;o<t.players.length;o++){var n=t.players[o];n&&(0==n.viewId?this.createPlayerInfo(this.myHead,n):this.createPlayerInfo(this.topPlayerHead,n))}cc.tween(this.node).delay(1.2).call(this.movePlayerHead.bind(this)).start(),this.enableBlockInputEvent(!0),this.dispatch(s.Notify.Base.PLAY_EFFECT,{path:r.AudioFile.Game.REAYGO})},e.prototype.enableBlockInputEvent=function(t){var e=this.getComponent(cc.BlockInputEvents);e&&(e.enabled=t)},e.prototype.createPlayerInfo=function(t,e){if(t){var o=t.getChildByName("headNode");o.destroyAllChildren(),c.ComUI.createUserHead({parent:o,userId:e.userId,sex:e.sex,size:cc.size(200,208),faceId:e.sysFaceId,robot:e.isRobot,custFaceId:e.custFaceId,url:e.headURL,save:!0,level:e.level}),this.createMoveHead(e),t.getChildByName("name").getComponent(cc.Label).string=e.name,o.active=!0,this.arrHeads[e.viewId]=o}else cc.warn("createPlayerHead node is null")},e.prototype.createMoveHead=function(t){this.moveHeads[t.viewId]&&(this.moveHeads[t.viewId].destroy(),this.moveHeads[t.viewId]=null);var e=new cc.Node;return e.name=""+t.userId,c.ComUI.createUserHead({parent:e,userId:t.userId,sex:t.sex,size:cc.size(200,208),faceId:t.sysFaceId,robot:t.isRobot,custFaceId:t.custFaceId,url:t.headURL,save:!0,level:t.level}),e.parent=this.node,e.active=!1,this.moveHeads[t.viewId]=e,e},e.prototype.movePlayerHead=function(){for(var t=this,e=0,o=this.arrHeads;e<o.length;e++)(i=o[e])&&(i.active=!1);this.arrHeads=[];for(var n=0;n<this.moveHeads.length;n++){var i;(i=this.moveHeads[n])&&(i.active=!0,i.position=this.arrHeadMidPos[n],cc.tween(i).set({scale:1,position:this.arrHeadMidPos[n]}).by(.1,{position:cc.v3(30,0)}).delay(.1).to(.4,{position:cc.v3(this.arrHeadFinalPos[n])}).to(.06,{scale:1.2}).to(.07,{scale:.6}).start())}cc.tween(this.node).delay(.73).call(function(){t.dispatch(l.GameEvent.Player.MOVE_END),t.clear()}).start()},e.prototype.onGetPlayersPos=function(t){t&&(this.arrHeadFinalPos=t)},e.prototype.clear=function(){this.ndAnim&&(this.ndAnim.stopAllActions(),this.ndAnim.active=!1),this.moveHeads&&this.moveHeads.forEach(function(t){t&&(t.active=!1)}),this.enableBlockInputEvent(!1)},a([h(cc.Node)],e.prototype,"myHead",void 0),a([h(cc.Node)],e.prototype,"topPlayerHead",void 0),a([h(cc.Node)],e.prototype,"ndAnim",void 0),a([u],e)}(p.CxCompExt);o.UIGameVSAnim=_,cc._RF.pop()},{"../../../../../script/app/const/AudioFile":void 0,"../../../../../script/app/event/Notify":void 0,"../../../../../script/app/view/ComUI":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../model/GameEvent":"GameEvent"}],UIPositionManager:[function(t,e,o){"use strict";cc._RF.push(e,"818e2G4WVtA17FHYZrHFH3F","UIPositionManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIPositionManager=o.CardMoveInfo=void 0;var n=t("../../model/GameEvent"),i=t("../../../../script/lib/event/EventDispatcher");o.CardMoveInfo=function(){};var a=function(){function t(){this.posMap=new Map}return t.Get=function(){return null==t.$instance&&(t.$instance=new t),t.$instance},t.prototype.addEvent=function(t,e){i.EventDispatcher.getInstance().add(t,e,this,0)},t.prototype.rmEvent=function(){i.EventDispatcher.getInstance().remove(this)},t.prototype.init=function(){this.addEvent(n.GameEvent.EatCard.PUT_POINTS,this.onPutEatCardPos),this.addEvent(n.GameEvent.Desk.BEI_SHU_POS,this.onPutEatBeiShuPos)},t.prototype.getPosition=function(t){return this.posMap.get(t)},t.prototype.setPosition=function(t,e){this.posMap.set(t,e)},t.prototype.onPutEatCardPos=function(t){this.setPosition("eatcard",t)},t.prototype.onPutEatBeiShuPos=function(t){this.setPosition("beishu",t)},t}();o.UIPositionManager=a,cc._RF.pop()},{"../../../../script/lib/event/EventDispatcher":void 0,"../../model/GameEvent":"GameEvent"}],UIPreviewSkinTip:[function(t,e,o){"use strict";cc._RF.push(e,"47061yCAhxED7Tv7gLSP5Ju","UIPreviewSkinTip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIPreviewSkinTip=void 0;var r=t("./../../../i18n/GameBaseI18n"),s=t("../../../../../script/lib/base/CxCompExt"),c=t("../../../model/GameEvent"),p=t("../../../../../script/app/event/Notify"),l=t("../../../../../script/app/const/game/GameConstant"),d=cc._decorator,u=d.ccclass,h=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spTipsBg=null,e.labDesc=null,e.cd=0,e.strDesc="",e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.clear()},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(c.GameEvent.GameTips.CLEAR,this.clear),this.bindEvent(c.GameEvent.Desk.SHOW_SKIN_CD,this.onShowSkinCD)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.stopCountDown()},e.prototype.onShowSkinCD=function(t){this.cd=t.time||0,this.strDesc=r.GameBaseLan.i18n[r.IGameBaseI18n.k.preview_skin_tips],this.cd>0&&(this.stopCountDown(),this.schedule(this.startCountDown,1,this.cd),this.labDesc&&(this.labDesc.node.active=!0,this.labDesc.string=this.strDesc+" "+this.cd),this.spTipsBg&&(this.spTipsBg.node.active=!0,cc.tween(this.spTipsBg.node).set({opacity:0}).to(.13,{opacity:229.5}).start()))},e.prototype.stopCountDown=function(){this.unschedule(this.startCountDown)},e.prototype.startCountDown=function(){var t=this;if(this.cd--,this.cd<=0)return this.stopCountDown(),this.clear(),this.dispatch(p.Notify.Base.REQ_SCREEN_SHOT,l.GameConstant.RoomPlayStatus.playing),void cc.tween(this.node).delay(.5).call(function(){t.dispatch(c.GameEvent.Desk.RESUME_SKIN)}).start();this.labDesc&&(this.labDesc.string=this.strDesc+" "+this.cd)},e.prototype.clear=function(){this.stopCountDown(),this.spTipsBg&&(this.spTipsBg.node.active=!1),this.labDesc&&(this.labDesc.node.active=!1),this.node.stopAllActions()},a([h(cc.Sprite)],e.prototype,"spTipsBg",void 0),a([h(cc.Label)],e.prototype,"labDesc",void 0),a([u],e)}(s.CxCompExt);o.UIPreviewSkinTip=_,cc._RF.pop()},{"../../../../../script/app/const/game/GameConstant":void 0,"../../../../../script/app/event/Notify":void 0,"../../../../../script/lib/base/CxCompExt":void 0,"../../../model/GameEvent":"GameEvent","./../../../i18n/GameBaseI18n":"GameBaseI18n"}],UIRobot:[function(t,e,o){"use strict";cc._RF.push(e,"01f77y9ZclPUZ06mz6SNXOW","UIRobot");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIRobot=void 0;var r=cc._decorator,s=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spkHead=null,e.labTips=null,e}return i(e,t),e.prototype.show=function(){this.node.active=!0,this.spkHead&&(this.spkHead.node.active=!0,this.spkHead.paused=!1,this.spkHead.animation="jiqiren",this.spkHead.loop=!0),cc.tween(this.node).set({opacity:175,scale:.5}).to(.1,{opacity:255,scale:1},{easing:cc.easing.sineInOut}).start()},e.prototype.hide=function(){this.node.active=!0,cc.tween(this.node).to(.1,{opacity:175,scale:.5},{easing:cc.easing.sineInOut}).set({opacity:0}).start()},a([c(sp.Skeleton)],e.prototype,"spkHead",void 0),a([c(cc.Node)],e.prototype,"labTips",void 0),a([s],e)}(cc.Component);o.UIRobot=p,cc._RF.pop()},{}],UISendCardCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"6a8a10QfLJL4omqZAXIzW16","UISendCardCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,o,r):i(e,o))||r);return a>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./../../../../script/lib/utils/Display"),s=t("./../../../../script/lib/utils/Logger"),c=t("../../../../script/lib/base/CxCompExt"),p=t("../../model/GameEvent"),l=t("../../model/GameInitConfig"),d=t("../../model/ScopaConstant"),u=cc._decorator,h=u.ccclass,_=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardStack=null,e.sendPlayerSpaceTime=d.ScopaConstant.SEND_PLAYER_SPACE_TIME,e.curSendViewId=0,e.firstSendViewId=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.sendCardPos=cc.v2(50,r.Display.cy+220),this.cardStack&&(this.cardStack.node.x=this.sendCardPos.x,this.cardStack.node.y=this.sendCardPos.y),this.cardStack.node.active=!1,this.cardStack.node.x=-80},e.prototype.showCardStack=function(t){this.cardStack.node.active=!0,cc.tween(this.cardStack.node).set({x:-80,y:this.sendCardPos.y}).to(.13,{x:50,y:this.sendCardPos.y}).call(t).start()},e.prototype.hideCardStack=function(){this.cardStack.node.active=!0,cc.tween(this.cardStack.node).to(.13,{x:-80,y:this.sendCardPos.y}).start()},e.prototype.clear=function(){this.cardStack.node.active=!1,this.cardStack.node.x=-80},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(p.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(p.GameEvent.HandCard.START_CTL_SEND_CARD,this.onStartSendCard),this.bindEvent(p.GameEvent.HandCard.STOP_CTL_SEND_CARD,this.clear),this.bindEvent(p.GameEvent.Com.REDEAL_CARD,this.onRedealCard)},e.prototype.onStartSendCard=function(t){this.dispatch(p.GameEvent.HandCard.START_SEND_CARD),this.firstSendViewId=t.firstSendViewId||0;for(var e=this,o=0,n=0;n<4;n++)t.allHandCardDatas[n]&&t.allHandCardDatas[n].length>0&&(o+=t.allHandCardDatas[n].length);this.showCardStack(function(){e.sendHandCards(t.allHandCardDatas),cc.tween(e.node).delay(d.ScopaConstant.SEND_CARD_SPACE_TIME*o/2+e.sendPlayerSpaceTime).call(function(){e.sendDeskCards(t.deskOutCardData)}).delay(d.ScopaConstant.SEND_CARD_SPACE_TIME*t.deskOutCardData.length).call(function(){e.sendCardEnd(),e.hideCardStack()}).start()})},e.prototype.getNextSendViewId=function(){return(this.curSendViewId+4-this.firstSendViewId)%4},e.prototype.sendHandCards=function(t){var e=this;if(t){this.node.stopAllActions();var o=function(e){this.dispatch(cc.js.formatStr(p.GameEvent.HandCard.SENDING_CARD,e),{viewId:e,cardDatas:t[e],fromPos:this.sendCardPos,onceNum:1,spaceTime:d.ScopaConstant.SEND_CARD_SPACE_TIME})}.bind(this);if(2===l.GameInitConfig.maxPlayerNum){var n=0===this.firstSendViewId?2:0;cc.tween(this.node).call(function(){o(e.firstSendViewId)}).delay(this.sendPlayerSpaceTime).call(function(){o(n),o=null}).start()}else 3===l.GameInitConfig.maxPlayerNum?cc.tween(this.node).call(function(){o(0)}).delay(this.sendPlayerSpaceTime).call(function(){o(1)}).delay(this.sendPlayerSpaceTime).call(function(){o(3),o=null}).start():cc.tween(this.node).call(function(){o(0)}).delay(this.sendPlayerSpaceTime).call(function(){o(1)}).delay(this.sendPlayerSpaceTime).call(function(){o(2)}).delay(this.sendPlayerSpaceTime).call(function(){o(3),o=null}).start()}else s.Logger.error("[UISendCardCtrl onStartSendCard] ")},e.prototype.sendDeskCards=function(t){t&&0!=t.length&&this.dispatch(p.GameEvent.OutCard.SENDING_CARD,{cardDatas:t,fromPos:this.sendCardPos,onceNum:1,spaceTime:d.ScopaConstant.SEND_CARD_SPACE_TIME})},e.prototype.onRedealCard=function(){var t=function(){this.dispatch(p.GameEvent.HandCard.REDEAL_CARD,{pos:this.sendCardPos}),this.dispatch(p.GameEvent.OutCard.REDEAL_CARD,{pos:this.sendCardPos}),cc.tween(this.node).delay(1.1).call(this.hideCardStack.bind(this)).start()}.bind(this);this.showCardStack(t)},e.prototype.sendCardEnd=function(){this.dispatch(p.GameEvent.HandCard.END_SEND_CARD)},a([_(cc.Sprite)],e.prototype,"cardStack",void 0),a([h],e)}(c.CxCompExt);o.default=f,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../model/GameEvent":"GameEvent","../../model/GameInitConfig":"GameInitConfig","../../model/ScopaConstant":"ScopaConstant","./../../../../script/lib/utils/Display":void 0,"./../../../../script/lib/utils/Logger":void 0}]},{},["IPlayDataDelegate","ScopaAlgTest","ScopaLogic","GameVoice","LogicBaseHandler","BaseGameFlow","BaseGoldGameFlow","GoldDeskHandler","GoldGameMsg","GoldLoginMsgHandler","GameBaseI18n","BaseGameUIConfig","BasePlayData","BaseRoomData","GameChatConfig","GameEvent","GameInitConfig","RoomPlayerInfo","ScopaConstant","BaseGoldRoomData","CMD_GameMsg","PokerCreator","UIGamePopupMgr","BaseHandCardsView","GameEntry","GameScene","UICardMoveCtrl","UIGameLoading","UIPositionManager","UISendCardCtrl","UIGameChatPop","UIGameChatView","UIGameTrustMenu","UIEffectLayer","UIGameTips","UIGameVSAnim","UIPreviewSkinTip","UIGamePlayersView","UIGameMyInfoPanel","UIGamePlayer","UIGamePlayerCD","UIGamePlayerGold","UIGamePlayerPower","UIRobot","GoldGameScene","UIGameExitDlg","UIGameSetting"]);