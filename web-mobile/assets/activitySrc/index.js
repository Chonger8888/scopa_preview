window.__require=function e(t,i,o){function n(r,s){if(!i[r]){if(!t[r]){var p=r.split("/");if(p=p[p.length-1],!t[p]){var c="function"==typeof __require&&__require;if(!s&&c)return c(p,!0);if(a)return a(p,!0);throw new Error("Cannot find module '"+r+"'")}r=p}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){return n(t[r][1][e]||e)},d,d.exports,e,t,i,o)}return i[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({CMD_SubscribeMsg:[function(e,t,i){"use strict";cc._RF.push(t,"ed6adARyeJL5YHD2VLTcfzK","CMD_SubscribeMsg"),Object.defineProperty(i,"__esModule",{value:!0}),i.RewardType=i.SUBSCRIBE_SUB_MSG=i.MSG_SC_RtnGolenDailyReward=i.MSG_SC_RtnGolenDailyInfo=i.MSG_SC_RtnGolenPassInfo=i.MSG_SC_ReceiveAwardUpdate=i.MSG_SC_ReceiveAward=i.SpecificReward=i.ChipItem=i.MSG_CS_ReceiveAward=i.MSG_SC_RtnRewardListXH=i.MSG_SC_RtnRewardList=i.Reward=i.RewardItem=i.RewardGoods=void 0;var o=function(){function e(){this.dwGoodsType=0,this.dwNum=0,this.strExData=protobuf.util.newBuffer([])}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.dwGoodsType&&t.uint32(8).uint32(e.dwGoodsType),null!=e.dwNum&&t.uint32(16).int32(e.dwNum),null!=e.strExData&&t.uint32(26).bytes(e.strExData),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwGoodsType=o.uint32();break;case 2:a.dwNum=o.int32();break;case 3:a.strExData=o.bytes();break;default:o.skipType(7&s)}}return a},e}();i.RewardGoods=o;var n=function(){function e(){this.dwType=0,this.bUnlock=!1,this.bFinish=!1,this.bGetReward=!1,this.tabGoods=void 0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.dwType&&t.uint32(8).uint32(e.dwType),null!=e.bUnlock&&t.uint32(16).bool(e.bUnlock),null!=e.bFinish&&t.uint32(24).bool(e.bFinish),null!=e.bGetReward&&t.uint32(32).bool(e.bGetReward),void 0!==e.tabGoods&&void 0!==e.tabGoods&&null!=e.tabGoods&&o.encode(e.tabGoods,t.uint32(42).fork()).ldelim(),t},e.decode=function(t,i){for(var n=t instanceof Uint8Array?new protobuf.Reader(t):t,a=void 0===i?n.len:n.pos+i,r=new e,s=!1;n.pos<a&&!s;){var p=n.uint32();switch(p>>>3){case 0:s=!0;break;case 1:r.dwType=n.uint32();break;case 2:r.bUnlock=n.bool();break;case 3:r.bFinish=n.bool();break;case 4:r.bGetReward=n.bool();break;case 5:r.tabGoods=o.decode(n,n.uint32());break;default:n.skipType(7&p)}}return r},e}();i.RewardItem=n;var a=function(){function e(){this.dwId=0,this.dwNormalReward=void 0,this.dwSubscribeReward=void 0,this.dwTime=0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.dwId&&t.uint32(8).uint32(e.dwId),void 0!==e.dwNormalReward&&void 0!==e.dwNormalReward&&null!=e.dwNormalReward&&n.encode(e.dwNormalReward,t.uint32(18).fork()).ldelim(),void 0!==e.dwSubscribeReward&&void 0!==e.dwSubscribeReward&&null!=e.dwSubscribeReward&&n.encode(e.dwSubscribeReward,t.uint32(26).fork()).ldelim(),null!=e.dwTime&&t.uint32(32).uint32(e.dwTime),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,a=void 0===i?o.len:o.pos+i,r=new e,s=!1;o.pos<a&&!s;){var p=o.uint32();switch(p>>>3){case 0:s=!0;break;case 1:r.dwId=o.uint32();break;case 2:r.dwNormalReward=n.decode(o,o.uint32());break;case 3:r.dwSubscribeReward=n.decode(o,o.uint32());break;case 4:r.dwTime=o.uint32();break;default:o.skipType(7&p)}}return r},e}();i.Reward=a;var r=function(){function e(){this.bGoldenPass=!1,this.dwTopicalId=0,this.dwMonth=0,this.dwTime=0,this.dwNowCup=0,this.dwNeedCup=0,this.dwLevel=0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.bGoldenPass&&t.uint32(8).bool(e.bGoldenPass),null!=e.dwTopicalId&&t.uint32(16).uint32(e.dwTopicalId),null!=e.dwMonth&&t.uint32(24).uint32(e.dwMonth),null!=e.dwTime&&t.uint32(32).uint32(e.dwTime),null!=e.dwNowCup&&t.uint32(40).uint32(e.dwNowCup),null!=e.dwNeedCup&&t.uint32(48).uint32(e.dwNeedCup),null!=e.dwLevel&&t.uint32(56).uint32(e.dwLevel),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.bGoldenPass=o.bool();break;case 2:a.dwTopicalId=o.uint32();break;case 3:a.dwMonth=o.uint32();break;case 4:a.dwTime=o.uint32();break;case 5:a.dwNowCup=o.uint32();break;case 6:a.dwNeedCup=o.uint32();break;case 7:a.dwLevel=o.uint32();break;default:o.skipType(7&s)}}return a},e}();i.MSG_SC_RtnRewardList=r;var s=function(){function e(){this.bEnd=!1,this.tabReward=void 0}return e.encode=function(e,t){void 0===t&&(t=protobuf.Writer.create()),null!=e.bEnd&&t.uint32(8).bool(e.bEnd);for(var i=0,o=e.tabReward;i<o.length;i++){var n=o[i];null!=n&&a.encode(n,t.uint32(18).fork()).ldelim()}return t},e.decode=function(t,i){var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,r=new e,s=!1;for(r.tabReward=[];o.pos<n&&!s;){var p=o.uint32();switch(p>>>3){case 0:s=!0;break;case 1:r.bEnd=o.bool();break;case 2:r.tabReward.push(a.decode(o,o.uint32()));break;default:o.skipType(7&p)}}return r},e}();i.MSG_SC_RtnRewardListXH=s;var p=function(){function e(){this.dwId=0,this.dwType=0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.dwId&&t.uint32(8).uint32(e.dwId),null!=e.dwType&&t.uint32(16).uint32(e.dwType),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwId=o.uint32();break;case 2:a.dwType=o.uint32();break;default:o.skipType(7&s)}}return a},e}();i.MSG_CS_ReceiveAward=p;var c=function(){function e(){this.dwPieceId=0,this.dwStar=0,this.bNew=!1,this.dwTableId=0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.dwPieceId&&t.uint32(8).uint32(e.dwPieceId),null!=e.dwStar&&t.uint32(16).uint32(e.dwStar),null!=e.bNew&&t.uint32(24).bool(e.bNew),null!=e.dwTableId&&t.uint32(32).uint32(e.dwTableId),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwPieceId=o.uint32();break;case 2:a.dwStar=o.uint32();break;case 3:a.bNew=o.bool();break;case 4:a.dwTableId=o.uint32();break;default:o.skipType(7&s)}}return a},e}();i.ChipItem=c;var d=function(){function e(){this.dwType=0,this.dwNum=0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.dwType&&t.uint32(8).uint32(e.dwType),null!=e.dwNum&&t.uint32(16).int32(e.dwNum),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwType=o.uint32();break;case 2:a.dwNum=o.int32();break;default:o.skipType(7&s)}}return a},e}();i.SpecificReward=d;var l=function(){function e(){this.dwId=0,this.dwType=0,this.bError=!1,this.reward=void 0,this.tabChips=void 0,this.dwNowCup=0,this.dwNeedCup=0}return e.encode=function(e,t){void 0===t&&(t=protobuf.Writer.create()),null!=e.dwId&&t.uint32(8).uint32(e.dwId),null!=e.dwType&&t.uint32(16).uint32(e.dwType),null!=e.bError&&t.uint32(24).bool(e.bError);for(var i=0,o=e.reward;i<o.length;i++)null!=(r=o[i])&&d.encode(r,t.uint32(34).fork()).ldelim();for(var n=0,a=e.tabChips;n<a.length;n++){var r;null!=(r=a[n])&&c.encode(r,t.uint32(42).fork()).ldelim()}return null!=e.dwNowCup&&t.uint32(48).uint32(e.dwNowCup),null!=e.dwNeedCup&&t.uint32(56).uint32(e.dwNeedCup),t},e.decode=function(t,i){var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;for(a.reward=[],a.tabChips=[];o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.dwId=o.uint32();break;case 2:a.dwType=o.uint32();break;case 3:a.bError=o.bool();break;case 4:a.reward.push(d.decode(o,o.uint32()));break;case 5:a.tabChips.push(c.decode(o,o.uint32()));break;case 6:a.dwNowCup=o.uint32();break;case 7:a.dwNeedCup=o.uint32();break;default:o.skipType(7&s)}}return a},e}();i.MSG_SC_ReceiveAward=l;var u=function(){function e(){this.bGet=!1,this.tabReward=void 0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.bGet&&t.uint32(8).bool(e.bGet),void 0!==e.tabReward&&void 0!==e.tabReward&&null!=e.tabReward&&a.encode(e.tabReward,t.uint32(18).fork()).ldelim(),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,r=new e,s=!1;o.pos<n&&!s;){var p=o.uint32();switch(p>>>3){case 0:s=!0;break;case 1:r.bGet=o.bool();break;case 2:r.tabReward=a.decode(o,o.uint32());break;default:o.skipType(7&p)}}return r},e}();i.MSG_SC_ReceiveAwardUpdate=u;var h=function(){function e(){this.bGetReward=!1,this.dwTopicalId=0,this.dwNowCup=0,this.dwNeedCup=0}return e.encode=function(e,t){return void 0===t&&(t=protobuf.Writer.create()),null!=e.bGetReward&&t.uint32(8).bool(e.bGetReward),null!=e.dwTopicalId&&t.uint32(16).uint32(e.dwTopicalId),null!=e.dwNowCup&&t.uint32(24).uint32(e.dwNowCup),null!=e.dwNeedCup&&t.uint32(32).uint32(e.dwNeedCup),t},e.decode=function(t,i){for(var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.bGetReward=o.bool();break;case 2:a.dwTopicalId=o.uint32();break;case 3:a.dwNowCup=o.uint32();break;case 4:a.dwNeedCup=o.uint32();break;default:o.skipType(7&s)}}return a},e}();i.MSG_SC_RtnGolenPassInfo=h;var f=function(){function e(){this.bVip=!1,this.bGet=!1,this.reward=void 0}return e.encode=function(e,t){void 0===t&&(t=protobuf.Writer.create()),null!=e.bVip&&t.uint32(8).bool(e.bVip),null!=e.bGet&&t.uint32(16).bool(e.bGet);for(var i=0,o=e.reward;i<o.length;i++){var n=o[i];null!=n&&d.encode(n,t.uint32(26).fork()).ldelim()}return t},e.decode=function(t,i){var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;for(a.reward=[];o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.bVip=o.bool();break;case 2:a.bGet=o.bool();break;case 3:a.reward.push(d.decode(o,o.uint32()));break;default:o.skipType(7&s)}}return a},e}();i.MSG_SC_RtnGolenDailyInfo=f;var y=function(){function e(){this.bError=!1,this.reward=void 0}return e.encode=function(e,t){void 0===t&&(t=protobuf.Writer.create()),null!=e.bError&&t.uint32(8).bool(e.bError);for(var i=0,o=e.reward;i<o.length;i++){var n=o[i];null!=n&&d.encode(n,t.uint32(18).fork()).ldelim()}return t},e.decode=function(t,i){var o=t instanceof Uint8Array?new protobuf.Reader(t):t,n=void 0===i?o.len:o.pos+i,a=new e,r=!1;for(a.reward=[];o.pos<n&&!r;){var s=o.uint32();switch(s>>>3){case 0:r=!0;break;case 1:a.bError=o.bool();break;case 2:a.reward.push(d.decode(o,o.uint32()));break;default:o.skipType(7&s)}}return a},e}();i.MSG_SC_RtnGolenDailyReward=y,i.SUBSCRIBE_SUB_MSG={MSG_CS_GET_REWARD_LIST:1e3,MSG_SC_RTN_REWARD_LIST:1001,MSG_SC_RTN_REWARD_XH_LIST:1011,MSG_CS_RECEIVE_AWARD:1002,MSG_SC_RECEIVE_AWARD:1003,MSG_SC_RECEIVE_AWARD_UPDATE:1010,MSG_CS_GET_GOLENPASS_INFO:1004,MSG_SC_RTN_GOLENPASS_INFO:1005,MSG_CS_GET_GOLDEN_DAILY_INFO:1006,MSG_SC_RTN_GOLDEN_DAILY_INFO:1007,MSG_CS_GET_GOLDEN_DAILY_REWARD:1008,MSG_SC_RTN_GOLDEN_DAILY_REWARD:1009,UNRECOGNIZED:-1},i.RewardType={NORMAL_TYPE:1,SUBSCRIBE_TYPE:2,UNRECOGNIZED:-1},cc._RF.pop()},{}],GoldenPassDailyReward:[function(e,t,i){"use strict";cc._RF.push(t,"1019fr6131JU61oeSZUAsX2","GoldenPassDailyReward");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r,s=e("../../../../script/app/const/Global"),p=e("../../../../script/app/event/GuiEvent"),c=e("../../../../script/app/event/Notify"),d=e("../../../../script/app/language/LanguageCfg"),l=e("../../../../script/lib/base/BottomBarView"),u=e("../../../../script/lib/base/CxComponent"),h=e("../../../../script/lib/base/PopupView"),f=e("../../../../script/lib/i18n/i18nHelper"),y=e("../../../../script/lib/utils/ComUtils"),v=e("./GoldenPassGrid");(function(e){e[e.MONTH=0]="MONTH",e[e.YEAR=1]="YEAR",e[e.NONE=-1]="NONE"})(r||(r={}));var b=cc._decorator,g=b.ccclass,w=b.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeRewards=null,t.labTips=null,t.powerFrame=null,t.goldFrame=null,t._isVip=!1,t._isRecved=!1,t}return n(t,e),t.prototype.init=function(e){this._isRecved=e.bGet,this._isVip=e.bVip,this.showRewards(e.reward)},t.prototype.listEvent=function(){return new Map([[c.Notify.GoldenPass.RESP_RECV_DAILY_REWARD,this.onRecvReward],[c.Notify.GoldenPass.SUBSCRIBE_SUCC,this.onActiveSucc]])},t.prototype.start=function(){var e=this.getComponent(h.PopupView);if(e){var t=f.i18nHelper.makeLanguage(d.LangKey.goldenpass_daily_reward).toString();e.setTitle(t)}this.showTips(),this.showButton(!this._isRecved)},t.prototype.onConfirmClicked=function(){this._isRecved?cc.log("\u5956\u52b1\u5df2\u9886\u53d6"):this._isVip?this.dispatch(c.Notify.GoldenPass.REQ_RECV_DAILY_REWARD):this.dispatch(p.GuiEvent.PopMsg.DISPLAY_GOLDEN_PASS_SHOP)},t.prototype.onRecvReward=function(e){e.body.bError&&(this._isRecved=!0,this.showButton(!1),this.showTips(),this.playRecvAnimation(e.parseData))},t.prototype.onActiveSucc=function(e){e.succ&&(this._isVip=!0,this.showTips())},t.prototype.showRewards=function(e){var t=this;this.nodeRewards&&e.forEach(function(e,i){var o=t.nodeRewards.getChildByName("NodeReward"+(i+1));o&&(e.dwNum<=0?o.active=!1:(o.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t.getRewardIcon(e.dwType),o.getChildByName("LabelDesc").getComponent(cc.Label).string="x"+e.dwNum))})},t.prototype.showTips=function(){this.labTips&&(this._isRecved?this.labTips.node.active=!1:this._isVip?this.labTips.string="":this.labTips.string=f.i18nHelper.getLanguage(d.LangKey.goldenpass_daily_buy_tips))},t.prototype.showButton=function(e){if(e){var t;t=this._isVip?d.LangKey.text_collect:d.LangKey.goldenpass_get_reward,l.BottomBarView.setBottomBar(this.node,[{style:s.gColorStyle.GREEN,text:y.ComUtils.makeLang(t),callback:this.onConfirmClicked.bind(this)}])}else{var i=this.getComponent(l.BottomBarView);i&&i.hideBottomBar()}},t.prototype.getRewardIcon=function(e){return e==v.eGPRewardType.gold?this.goldFrame:e==v.eGPRewardType.power?this.powerFrame:void 0},t.prototype.playRecvAnimation=function(e){cc.log("\u52a8\u753b\u6570\u636e",e),this.dispatch(p.GuiEvent.PopMsg.SHOW_TABLE_BOX_REWARD,e)},a([w({type:cc.Node,tooltip:"layout\u8282\u70b9"})],t.prototype,"nodeRewards",void 0),a([w({type:cc.Label,tooltip:"\u63d0\u793a\u6587\u5b57"})],t.prototype,"labTips",void 0),a([w({type:cc.SpriteFrame,tooltip:"\u4f53\u529b\u56fe\u7247\u5e27"})],t.prototype,"powerFrame",void 0),a([w({type:cc.SpriteFrame,tooltip:"\u91d1\u5e01\u56fe\u7247\u5e27"})],t.prototype,"goldFrame",void 0),a([g],t)}(u.CxComponent);i.default=_,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/lib/base/BottomBarView":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/base/PopupView":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0,"./GoldenPassGrid":"GoldenPassGrid"}],GoldenPassGrid:[function(e,t,i){"use strict";cc._RF.push(t,"945d0y8acNAX6vu2UF43+mi","GoldenPassGrid");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.GoldenPassGrid=i.eGPGridType=i.eGPRewardType=void 0;var r,s,p=e("../../../../script/app/const/Global"),c=e("../../../../script/app/event/GuiEvent"),d=e("../../../../script/app/event/Notify"),l=e("../../../../script/app/language/LanguageCfg"),u=e("../../../../script/app/view/ComUI"),h=e("../../../../script/lib/base/CxComponent"),f=e("../../../../script/lib/i18n/i18nHelper"),y=e("../../../../script/lib/utils/ComUtils"),v=cc._decorator,b=v.ccclass,g=v.property;(function(e){e[e.gold=p.gShopHBType.GOLD]="gold",e[e.power=p.gShopHBType.POWER]="power",e[e.piece=p.gShopHBType.CHIPS]="piece",e[e.box=p.gShopHBType.BOX]="box"})(r=i.eGPRewardType||(i.eGPRewardType={})),function(e){e[e.silver=0]="silver",e[e.gold=1]="gold"}(s=i.eGPGridType||(i.eGPGridType={}));var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unLock=!1,t._recved=!1,t._finished=!1,t._index=0,t._dwType=0,t._dwId=0,t._isBox=!1,t._extraData=null,t._gridType=s.silver,t._actPlayed=!1,t.spBg=null,t.spLock=null,t.spFinishTag=null,t.spFinishTag1=null,t.spIcon=null,t.spStar=null,t.spStarLayout=null,t.labDesc=null,t.labRecv=null,t.recvedSpFrame=null,t.lockSpFrame=null,t.bgGoldSpFrame=null,t.bgSilverFrame=null,t.iconGold=null,t.iconPower=null,t.iconPiece=null,t.iconBox=[],t.labDefaultPos=cc.v2(0,0),t.labTipsPosOfStar=cc.v2(0,0),t.iconDefault=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.multiLanguage(),this.spBg.node.on("click",this.onClick,this)},t.prototype.start=function(){},t.prototype.listEvent=function(){return new Map([[d.Notify.GoldenPass.RESP_RECV_REWARD,this.onRecvReward],[d.Notify.GoldenPass.RESP_UPDATE_VIEW,this.onUpdateInfo]])},t.prototype.multiLanguage=function(){this.labRecv&&(this.labRecv.language=f.i18nHelper.getLanguage(l.LangKey.goldenpass_recv))},t.prototype.playRecvTagAnimation=function(e,t){null!=e&&null!=t&&(cc.Tween.stopAllByTarget(e),cc.Tween.stopAllByTarget(t),cc.tween(e).repeatForever(cc.tween(e).to(.2,{scale:1.05,position:cc.v3(0,120)},{easing:cc.easing.sineIn}).to(.2,{scale:.95,position:cc.v3(0,105)},{easing:cc.easing.sineIn}).to(.2,{scale:1,position:cc.v3(0,110)},{easing:cc.easing.sineIn}).delay(.4)).start(),t.opacity=0,cc.tween(t).repeatForever(cc.tween(t).to(.2,{opacity:255},{easing:cc.easing.sineIn}).to(.2,{opacity:0},{easing:cc.easing.sineIn}).delay(.6)).start())},t.prototype.setIndex=function(e){this._index=e},t.prototype.setState=function(e,t,i){this._unLock=e,this._finished=t,this._recved=i,!0===this._unLock?i?(this.spFinishTag.node.active=!1,this.spLock.node.active=!0,this.spLock.spriteFrame=this.recvedSpFrame):t?(this.spLock.node.active=!1,this.spFinishTag.node.active=!0,this.playRecvTagAnimation(this.spFinishTag.node,this.spFinishTag1.node)):(this.spLock.node.active=!1,this.spFinishTag.node.active=!1):(this.spFinishTag.node.active=!1,this.spLock.node.active=!0,this.spLock.spriteFrame=this.lockSpFrame)},t.prototype.updateRecvState=function(e){this._recved=e,e&&(this.spFinishTag.node.active=!1,this.spLock.node.active=!0,this.spLock.spriteFrame=this.recvedSpFrame)},t.prototype.setGridGrade=function(e){this._gridType=e,e==s.gold?this.spBg.spriteFrame=this.bgGoldSpFrame:this.spBg.spriteFrame=this.bgSilverFrame},t.prototype.playAction=function(e){this._actPlayed||(cc.Tween.stopAllByTarget(this.node),this.node.setPosition(cc.v2(0,0)),cc.tween(this.node).set({position:cc.v3(e,0)}).by(.25,{position:cc.v3(-e,0)},{easing:cc.easing.sineOut}).start(),this._actPlayed=!0)},t.prototype.setID=function(e){this._dwId=e},t.prototype.setGridType=function(e){this._dwType=e},t.prototype.setReward=function(e,t,i){var o,n="",a=null,r=null;this.node.getChildByName("SpStarBg").active=!1,this._isBox=!1,i&&i.length>0&&(a=JSON.parse(y.ComUtils.u8ToUTF8Str(i)),this._extraData=a,a.level&&(r=a.level,this._isBox=!0)),o=this.getRewardIconFrame(e,r),t>0&&(n="x"+t);var s=!1;if(a&&(a.endnum&&a.upunm&&(n=a.endnum+"-"+a.upunm),a.star)){this.spStarLayout.removeAllChildren(),this.spStar.node.active=!1;for(var p=a.star,c=0;c<p;++c){var d=cc.instantiate(this.spStar.node);d.parent=this.spStarLayout,d.active=!0}this.node.getChildByName("SpStarBg").active=!0,s=!0}this.setRewardIcon(o),this.setRewardDescription(n,s)},t.prototype.getRewardIconFrame=function(e,t){var i=null;switch(e){case r.gold:i=this.iconGold;break;case r.power:i=this.iconPower;break;case r.piece:i=this.iconPiece}return t&&(i=this.iconBox[t-1]),i},t.prototype.setRewardIcon=function(e){if(e){this.spIcon.node.active=!0;var t=Math.max(this.iconDefault.getOriginalSize().width,this.iconDefault.getOriginalSize().height);this.spIcon.spriteFrame=e;var i=t/Math.max(this.spIcon.node.getContentSize().width,this.spIcon.node.getContentSize().height);this.spIcon.node.scale=i}else this.spIcon.node.active=!1},t.prototype.setRewardDescription=function(e,t){this.labDesc.string=e,t?(this.labDesc.node.anchorX=1,this.labDesc.node.setPosition(this.labTipsPosOfStar)):(this.labDesc.node.anchorX=.5,this.labDesc.node.setPosition(this.labDefaultPos))},t.prototype.onClick=function(){cc.log("\u70b9\u51fb\u4e86"+this._dwId+"-"+this._dwType+"\u7c7b\u578b\u683c\u5b50"),cc.log("\u72b6\u6001: unlock = "+this._unLock+", recvd = "+this._recved+", finished = "+this._finished),this._unLock?this._recved||(this._finished?this.dispatch(d.Notify.GoldenPass.REQ_RECV_REWARD,{id:this._dwId,tp:this._dwType}):this._isBox?this.openBuyLayer():u.ComUI.showToast(f.i18nHelper.getLanguage(l.LangKey.goldenpass_crown_to_unlock).toString(),3,2)):this._isBox?this.openBuyLayer():u.ComUI.showToast(f.i18nHelper.getLanguage(l.LangKey.goldenpass_buy_to_unlock).toString(),3,2)},t.prototype.openBuyLayer=function(){cc.log("\u989d\u5916\u6570\u636e",this._extraData),this.dispatch(c.GuiEvent.PopMsg.DISPLAY_GOLDEN_PASS_REWARD_PREVIEW,{extraData:this._extraData,gridType:this._gridType,gridIndex:this._index})},t.prototype.onRecvReward=function(e){var t=e.body;t.bError&&this._dwType==t.dwType&&this._dwId==t.dwId&&this.updateRecvState(!0)},t.prototype.onUpdateInfo=function(e){var t=e;if(t.bGet&&t.tabReward.dwId==this._dwId){var i=t.tabReward.dwNormalReward;i.dwType==this._dwType?this.updateGridState(i):(i=t.tabReward.dwSubscribeReward).dwType==this._dwType&&this.updateGridState(i)}},t.prototype.updateGridState=function(e){e.dwType==this._dwType&&this.setState(e.bUnlock,e.bFinish,e.bGetReward)},a([g(cc.Sprite)],t.prototype,"spBg",void 0),a([g(cc.Sprite)],t.prototype,"spLock",void 0),a([g(cc.Sprite)],t.prototype,"spFinishTag",void 0),a([g(cc.Sprite)],t.prototype,"spFinishTag1",void 0),a([g(cc.Sprite)],t.prototype,"spIcon",void 0),a([g(cc.Sprite)],t.prototype,"spStar",void 0),a([g(cc.Node)],t.prototype,"spStarLayout",void 0),a([g(cc.Label)],t.prototype,"labDesc",void 0),a([g(cc.Label)],t.prototype,"labRecv",void 0),a([g(cc.SpriteFrame)],t.prototype,"recvedSpFrame",void 0),a([g(cc.SpriteFrame)],t.prototype,"lockSpFrame",void 0),a([g(cc.SpriteFrame)],t.prototype,"bgGoldSpFrame",void 0),a([g(cc.SpriteFrame)],t.prototype,"bgSilverFrame",void 0),a([g(cc.SpriteFrame)],t.prototype,"iconGold",void 0),a([g(cc.SpriteFrame)],t.prototype,"iconPower",void 0),a([g(cc.SpriteFrame)],t.prototype,"iconPiece",void 0),a([g(cc.SpriteFrame)],t.prototype,"iconBox",void 0),a([g(cc.Vec2)],t.prototype,"labDefaultPos",void 0),a([g(cc.Vec2)],t.prototype,"labTipsPosOfStar",void 0),a([g(cc.SpriteFrame)],t.prototype,"iconDefault",void 0),a([b],t)}(h.CxComponent);i.GoldenPassGrid=w,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0}],GoldenPassItem:[function(e,t,i){"use strict";cc._RF.push(t,"ab30et2WUVPU6SXig6txLbY","GoldenPassItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../../script/app/event/Notify"),s=e("../../../../script/app/model/DataProxy"),p=e("../../../../script/lib/base/CxComponent"),c=e("./GoldenPassGrid"),d=cc._decorator,l=d.ccclass,u=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._index=0,t._gridArr=[],t._maxItemCount=9,t.pfGrid=null,t.gridNode=[],t.spIndex=null,t.labIndex=null,t.frameGoldIndex=null,t.frameSilverIndex=null,t.spTagLight=null,t.spItemLight=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.listEvent=function(){return new Map([[r.Notify.GoldenPass.RESP_UPDATE_VIEW,this.onUpdateInfo]])},t.prototype.initItem=function(e,t,i,o){this.setIndex(e);var n=this.createGrid(c.eGPGridType.silver,t.dwNormalReward,t.dwId,!0),a=this.createGrid(c.eGPGridType.gold,t.dwSubscribeReward,t.dwId,i);this.spTagLight.node.active=!1,this.spItemLight.node.active=!1,o-1==e&&(t.dwNormalReward.bFinish&&!t.dwNormalReward.bGetReward||t.dwSubscribeReward.bFinish&&!t.dwSubscribeReward.bGetReward)&&this.playAnimation(),a.getComponent(c.GoldenPassGrid).playAction(-500),n.getComponent(c.GoldenPassGrid).playAction(500)},t.prototype.playAnimation=function(){if(this.spTagLight&&(this.spTagLight.node.active=!0,cc.tween(this.spTagLight.node).repeatForever(cc.tween(this.spTagLight.node).to(.5,{opacity:106}).to(.5,{opacity:255})).start()),this.spItemLight){this.spItemLight.node.active=!0;var e=this.spItemLight.node.getContentSize().width+cc.winSize.width,t=.5*e,i=cc.v3(-t,0,0);cc.tween(this.spItemLight.node).repeatForever(cc.tween(this.spItemLight.node).set({position:i}).by(1.5,{position:cc.v3(e,0)},{easing:cc.easing.sineInOut})).start()}},t.prototype.stopAnimation=function(){this.spTagLight&&(this.spTagLight.node.active=!1,cc.Tween.stopAllByTarget(this.spTagLight.node)),this.spItemLight&&(this.spItemLight.node.active=!1,cc.Tween.stopAllByTarget(this.spItemLight.node))},t.prototype.createGrid=function(e,t,i,o){var n=this._gridArr[e];n||((n=cc.instantiate(this.pfGrid)).parent=this.gridNode[e],this._gridArr.push(n));var a=n.getComponent(c.GoldenPassGrid);return a.setIndex(this._index),a.setGridGrade(e),a.setGridType(t.dwType),a.setID(i),a.setState(o,t.bFinish,t.bGetReward),a.setReward(t.tabGoods.dwGoodsType,t.tabGoods.dwNum,t.tabGoods.strExData),n},t.prototype.setIndex=function(e){this._index=e,this.labIndex.string=(e+1).toString()},t.prototype.updateItem=function(e,t,i){this.initItem(e,t,s.DataProxy.getInstance().glodenPassData.isVip(),i.curRecvLvl)},t.prototype.onUpdateInfo=function(e){var t=e;t.bGet&&t.tabReward.dwId==this._index+1?this.playAnimation():this.stopAnimation()},a([u(cc.Prefab)],t.prototype,"pfGrid",void 0),a([u(cc.Node)],t.prototype,"gridNode",void 0),a([u(cc.Sprite)],t.prototype,"spIndex",void 0),a([u(cc.Label)],t.prototype,"labIndex",void 0),a([u(cc.SpriteFrame)],t.prototype,"frameGoldIndex",void 0),a([u(cc.SpriteFrame)],t.prototype,"frameSilverIndex",void 0),a([u(cc.Sprite)],t.prototype,"spTagLight",void 0),a([u(cc.Sprite)],t.prototype,"spItemLight",void 0),a([l],t)}(p.CxComponent);i.default=h,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/lib/base/CxComponent":void 0,"./GoldenPassGrid":"GoldenPassGrid"}],GoldenPassListView:[function(e,t,i){"use strict";cc._RF.push(t,"6feb5r9LadHfq+xGWU6Pgn+","GoldenPassListView");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.GoldenPassListView=void 0;var r=e("../../../../script/app/base/component/ComListView"),s=e("../../../../script/app/event/Notify"),p=e("../../../../script/app/language/LanguageCfg"),c=e("../../../../script/lib/base/CxComponent"),d=e("../../../../script/lib/i18n/i18nHelper"),l=e("./GoldenPassItem"),u=cc._decorator,h=u.ccclass,f=u.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollview=null,t.pfItem=null,t.spLineH=null,t.nodeNextLvl=null,t.labTitleGoldenPass=null,t.labTitleFree=null,t._listData=null,t}var i;return n(t,e),i=t,t.prototype.listEvent=function(){return new Map([[s.Notify.GoldenPass.RESP_RECV_REWARD,this.onRecvReward],[s.Notify.GoldenPass.RESP_UPDATE_VIEW,this.onUpdateScrollView]])},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.multiLang()},t.prototype.initScrollView=function(e,t,i){this._listData=e.slice();var o={curRecvLvl:t},n={scrollView:this.scrollview,content:this.scrollview.content,itemPrefab:this.pfItem,itemClass:l.default,dataList:e,dataEx:o,space:0,top:30,bottom:0,createInterval:.05,scrollToIndex:t},a=this.node.getComponent(r.ComListView);null==a&&(a=this.node.addComponent(r.ComListView)),a.initParams(n),a.initScrollView(),this.spLineH.node.getChildByName("SpGray").height=this.scrollview.content.getContentSize().height,this.spLineH.node.zIndex=e.length+10,this.setListMaskPos(this.pfItem.data.height,i,-n.top);var s=this.getLvlNextTime(e,i+1);this.setLevelLeftTimeTips(i,s,e.length)},t.prototype.multiLang=function(){this.labTitleGoldenPass&&(this.labTitleGoldenPass.string=d.i18nHelper.getLanguage(p.LangKey.goldenpass_golden_pass)),this.labTitleFree&&(this.labTitleFree.string=d.i18nHelper.getLanguage(p.LangKey.goldenpass_free))},t.prototype.setListMaskPos=function(e,t,i){this.spLineH.node.y=-e*t+i},t.prototype.setLevelLeftTimeTips=function(e,t,o){if(o!=e){var n=this.nodeNextLvl.getChildByName("LabelPart1"),a=this.nodeNextLvl.getChildByName("LabelPart2");n.getComponent(cc.Label).string=d.i18nHelper.getLanguage([p.LangKey.goldenpass_unlock_next_lvl,e+1]),a.getComponent(cc.Label).string=i.getFormatTime(t)}else this.nodeNextLvl.active=!1},t.prototype.onUpdateScrollView=function(e){var t=e;if(t.bGet){var i=this.node.getComponent(r.ComListView);if(i){for(var o=0;o<this._listData.length;o++){var n=this._listData[o];if(n.dwId==t.tabReward.dwId){n.dwNormalReward=t.tabReward.dwNormalReward,n.dwSubscribeReward=t.tabReward.dwSubscribeReward;break}}i.resetExterndData({curRecvLvl:t.tabReward.dwId}),i.resetListData(this._listData),i.ScrollTo(t.tabReward.dwId)}}},t.prototype.onRecvReward=function(e){var t=e.body;if(t.bError){var i=this.node.getComponent(r.ComListView);if(i){for(var o=0;o<this._listData.length;o++){var n=this._listData[o];if(n.dwId==t.dwId){n.dwNormalReward.dwType==t.dwType&&(n.dwNormalReward.bGetReward=!0),n.dwSubscribeReward.dwType==t.dwType&&(n.dwSubscribeReward.bGetReward=!0);break}}i.resetListData(this._listData)}}},t.getFormatTime=function(e){var t=Math.floor(e/86400),i=Math.floor(e%86400/3600);return t>0?t+"d "+i+"h":i+"h"},t.prototype.getLvlNextTime=function(e,t){for(var i=0;i<e.length;i++){var o=e[i];if(o.dwId==t)return o.dwTime}return 0},a([f(cc.ScrollView)],t.prototype,"scrollview",void 0),a([f(cc.Prefab)],t.prototype,"pfItem",void 0),a([f(cc.Sprite)],t.prototype,"spLineH",void 0),a([f(cc.Node)],t.prototype,"nodeNextLvl",void 0),a([f(cc.Label)],t.prototype,"labTitleGoldenPass",void 0),a([f(cc.Label)],t.prototype,"labTitleFree",void 0),i=a([h],t)}(c.CxComponent);i.GoldenPassListView=y,cc._RF.pop()},{"../../../../script/app/base/component/ComListView":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"./GoldenPassItem":"GoldenPassItem"}],GoldenPassMainView:[function(e,t,i){"use strict";cc._RF.push(t,"a13a8d3x2RH6IUFCJ+kJWBg","GoldenPassMainView");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.GoldenPassMainView=void 0;var r=e("../../../../script/app/const/AudioFile"),s=e("../../../../script/app/event/GuiEvent"),p=e("../../../../script/app/event/Notify"),c=e("../../../../script/lib/base/CxCompExt"),d=e("./GoldenPassTheme"),l=e("../../../../script/lib/i18n/i18nHelper"),u=e("../../../../script/app/language/LanguageCfg"),h=e("../../../../script/app/view/ComFunctions"),f=e("../../../../script/lib/utils/ScreenAdapter"),y=e("../../../../script/app/model/DataProxy"),v=e("./GoldenPassListView"),b=e("../../../../script/app/view/ComUI"),g=new Map([["SpTheme",cc.v2(0,2e3)],["SpMask",cc.v2(0,2e3)],["NodeListView",cc.v2(0,-2e3)],["SpriteProgress",cc.v2(0,-2e3)],["SpriteBottom",cc.v2(0,-2e3)]]),w=cc._decorator,_=w.ccclass,R=w.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pfListView=null,t.spActive=null,t.progressBar=null,t.titleBg=null,t.bigBg=null,t.nodeListView=null,t.btnActive=null,t.btnDailyReward=null,t.labMonth=null,t.labSeason=null,t.labLeftTime=null,t.labProgress=null,t.labCurUnlockLvl=null,t.labGetCup=null,t.labPlayNow=null,t.labActive=null,t.labActiveTitle=null,t.labDailyReward=null,t._vipState=!1,t._isFromGame=!1,t._themeId=null,t}return n(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),t&&(this._isFromGame=t.isFromGame)},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.dispatch(p.Notify.Base.HIDE_LOBBY_SOME_LAYER,!0),this.refreshLabel(),this.btnActive.node.on("click",this.onClickActive,this),this.btnDailyReward.node.on("click",this.onClickDailyReward,this),f.ScreenAdapter.paddingTop(this.labMonth.node),f.ScreenAdapter.paddingTop(this.btnDailyReward.node),this.adaptScreen(this.titleBg,!0),this.adaptScreen(this.bigBg,!1),this.multiLang()},t.prototype.start=function(){this.dispatch(p.Notify.AD.HIDE_BANNER);var e=y.DataProxy.getInstance().glodenPassData.getBaseInfo(),t=y.DataProxy.getInstance().glodenPassData.getCompleteData();!this._isFromGame&&e&&t?(this.onRespInfo(e),this.onRespListInfo(t)):this.dispatch(p.Notify.GoldenPass.REQ_INFO)},t.prototype.initEvent=function(){this.bindEvent(p.Notify.GoldenPass.RESP_INFO,this.onRespInfo),this.bindEvent(p.Notify.GoldenPass.RESP_LIST_INFO,this.onRespListInfo),this.bindEvent(p.Notify.GoldenPass.RESP_RECV_REWARD,this.onRecvReward),this.bindEvent(p.Notify.GoldenPass.SUBSCRIBE_SUCC,this.onActiveSucc)},t.prototype.displayLabelBatch=function(e,t){var i=this,o=e.getComponent(cc.LabelOutline);o&&(o.enabled=t),e.children.forEach(function(e){i.displayLabelBatch(e,t)})},t.prototype.refreshLabel=function(){var e=this;h.ComFunctions.performWithDelay(this.node,function(){e.displayLabelBatch(e.node,!0)},.25)},t.prototype.multiLang=function(){this.labSeason&&(this.labSeason.string=l.i18nHelper.getLanguage(u.LangKey.goldenpass_season_left_time)),this.labGetCup&&(this.labGetCup.string=l.i18nHelper.getLanguage(u.LangKey.goldenpass_play_scopa)),this.labPlayNow&&(this.labPlayNow.string=l.i18nHelper.getLanguage(u.LangKey.text_play_now)),this.labActive&&(this.labActive.string=l.i18nHelper.getLanguage(u.LangKey.goldenpass_active)),this.labActiveTitle&&(this.labActiveTitle.string=l.i18nHelper.getLanguage(u.LangKey.goldenpass_golden_pass)),this.labDailyReward&&(this.labDailyReward.string=l.i18nHelper.getLanguage(u.LangKey.goldenpass_daily_reward))},t.prototype.onRespInfo=function(e){e||(e=y.DataProxy.getInstance().glodenPassData.getBaseInfo()),console.log("\u5c55\u793a\u9875\u9762\u4fe1\u606f");var t=e;this._themeId=t.dwTopicalId,this.themeMonth(t.dwMonth),this.setProgress(t.dwNowCup,t.dwNeedCup),this.setVipStatus(t.bGoldenPass),this.setThemeLeftTime(t.dwTime),this.setCurUnLock(t.dwLevel)},t.prototype.onRespListInfo=function(e){var t=this;e||(e=y.DataProxy.getInstance().glodenPassData.getCompleteData()),console.log("\u5c55\u793a\u5217\u8868");var i=this.getUnlockLvlIndex(e),o=this.getCurRecvLvl(e);this.addScrollView(e,o,i),b.ComUI.rmLoading(),h.ComFunctions.performWithDelay(this.node,function(){t.applyTheme(t._themeId)},.1)},t.prototype.addScrollView=function(e,t,i){if(this.pfListView){this.nodeListView.removeAllChildren();var o=cc.instantiate(this.pfListView),n=o.getComponent(v.GoldenPassListView);n||(n=o.addComponent(v.GoldenPassListView)),this.nodeListView.addChild(o),h.ComFunctions.performWithDelay(this.node,function(){n.initScrollView(e,t,i)},0)}},t.prototype.adaptScreen=function(e,t){var i=e.getContentSize(),o=cc.winSize.width/i.width,n=cc.winSize.height/i.height;t?e.setScale(Math.min(o,n)):e.setScale(Math.max(o,n))},t.prototype.hideNodes=function(){var e=this;g.forEach(function(t,i){var o=e.node.getChildByName(i);o&&(o.active=!1)})},t.prototype.playNodeAction=function(e,t){e.active=!0,cc.tween(e).set({position:cc.v3(t.x,t.y),active:!0}).to(.75,{position:cc.v3(e.getPosition().x,e.getPosition().y)},{easing:cc.easing.sineOut}).start()},t.prototype.applyTheme=function(e){(new d.GoldenPassTheme).apply(this.node,e)},t.prototype.getUnlockLvlIndex=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!i.dwNormalReward.bUnlock)return i.dwId-1}return e.length},t.prototype.getCurRecvLvl=function(e){for(var t=-1,i=-1,o=0;o<e.length;o++){var n=e[o];if((n.dwNormalReward.bGetReward||n.dwSubscribeReward.bGetReward)&&n.dwId>i&&(i=n.dwId),n.dwNormalReward.bFinish&&!n.dwNormalReward.bGetReward){t=n.dwId;break}if(n.dwSubscribeReward.bUnlock&&n.dwSubscribeReward.bFinish&&!n.dwSubscribeReward.bGetReward){t=n.dwId;break}}return-1==t&&(t=-1!=i?i:1),t},t.prototype.themeMonth=function(e){this.labMonth.string=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e-1]||"--"},t.prototype.setVipStatus=function(e){this._vipState=e,this.spActive.node.active=e},t.prototype.setThemeLeftTime=function(e){this.labLeftTime.string=v.GoldenPassListView.getFormatTime(e)},t.prototype.setProgress=function(e,t){this.labProgress.string=e+"/"+t,this.progressBar.progress=e/t},t.prototype.setCurUnLock=function(e){this.labCurUnlockLvl.string=e.toString()},t.prototype.onRecvReward=function(e){var t=e.body;t.bError&&(this.playRecvAnimation(e.parseData),this.setProgress(t.dwNowCup,t.dwNeedCup),this.dispatch(p.Notify.GoldenPass.REQ_ACT_ENTRY_INFO))},t.prototype.onClickBack=function(){this._isFromGame&&this.dispatch(p.Notify.Game.EXIT_SCENE),this.node.destroy()},t.prototype.onClickQuickGame=function(){this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:r.AudioFile.Com.GO}),this.dispatch(p.Notify.MatchGame.MATCH_QUICK_GAME),this.node.destroy()},t.prototype.onClickDailyReward=function(){this.dispatch(p.Notify.GoldenPass.REQ_DAILY_REWARD)},t.prototype.onClickActive=function(){this._vipState||this.dispatch(s.GuiEvent.PopMsg.DISPLAY_GOLDEN_PASS_SHOP)},t.prototype.onActiveSucc=function(e){e.succ&&(this.dispatch(p.Notify.GoldenPass.REQ_INFO),this.refreshLabel())},t.prototype.playRecvAnimation=function(e){this.dispatch(s.GuiEvent.PopMsg.SHOW_TABLE_BOX_REWARD,e)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.dispatch(p.Notify.AD.RESHOW_BANNER),this.dispatch(p.Notify.Base.HIDE_LOBBY_SOME_LAYER,!1)},a([R(cc.Prefab)],t.prototype,"pfListView",void 0),a([R(cc.Sprite)],t.prototype,"spActive",void 0),a([R(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([R(cc.Node)],t.prototype,"titleBg",void 0),a([R(cc.Node)],t.prototype,"bigBg",void 0),a([R(cc.Node)],t.prototype,"nodeListView",void 0),a([R(cc.Button)],t.prototype,"btnActive",void 0),a([R(cc.Button)],t.prototype,"btnDailyReward",void 0),a([R(cc.Label)],t.prototype,"labMonth",void 0),a([R(cc.Label)],t.prototype,"labSeason",void 0),a([R(cc.Label)],t.prototype,"labLeftTime",void 0),a([R(cc.Label)],t.prototype,"labProgress",void 0),a([R(cc.Label)],t.prototype,"labCurUnlockLvl",void 0),a([R(cc.Label)],t.prototype,"labGetCup",void 0),a([R(cc.Label)],t.prototype,"labPlayNow",void 0),a([R(cc.Label)],t.prototype,"labActive",void 0),a([R(cc.Label)],t.prototype,"labActiveTitle",void 0),a([R(cc.Label)],t.prototype,"labDailyReward",void 0),a([_],t)}(c.CxCompExt);i.GoldenPassMainView=S,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/view/ComFunctions":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"./GoldenPassListView":"GoldenPassListView","./GoldenPassTheme":"GoldenPassTheme"}],GoldenPassRewardPreview:[function(e,t,i){"use strict";cc._RF.push(t,"ab52a7ohCpBqrFAspYnFP8t","GoldenPassRewardPreview");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.GoldenPassRewardPreview=void 0;var r=e("../../../../script/app/event/GuiEvent"),s=e("../../../../script/app/language/LanguageCfg"),p=e("../../../../script/app/model/DataProxy"),c=e("../../../../script/lib/base/CxCompExt"),d=e("../../../../script/lib/i18n/i18nHelper"),l=e("./GoldenPassGrid"),u=e("../../../../script/app/event/Notify"),h=e("../../../../script/lib/base/Language"),f=cc._decorator,y=f.ccclass,v=f.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spIcon=null,t.ndNormalRwd=null,t.ndExtraRwd=null,t.ndBottom=null,t.btnBuy=null,t.labBuy=null,t.labPower=null,t.labPiece=null,t.labGold=null,t.labTips=null,t.labAtleast=null,t.iconBox=[],t._gridType=l.eGPGridType.silver,t._gridIndex=0,t}return n(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this._gridType=t.gridType,this._gridIndex=t.gridIndex;var i=t.extraData,o=i.boxreward;this.setRewardIcon(i.level);var n=this.analyseNormalRewardDesc(o);this.setNormalRewards(n[l.eGPRewardType.power],n[l.eGPRewardType.piece],n[l.eGPRewardType.gold]);var a=this.analyseExtraRewardDesc(o);this.setExtarRewards(a),this.showButtonAndTips(),this.adaptViewSize()},t.prototype.initEvent=function(){this.bindEvent(u.Notify.GoldenPass.SUBSCRIBE_SUCC,this.onActiveSucc)},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.multiLanguage(),this.btnBuy&&this.btnBuy.node.on("click",this.onClickActive,this)},t.prototype.multiLanguage=function(){this.labBuy&&(this.labBuy.language=d.i18nHelper.getLanguage(s.LangKey.goldenpass_btn_get_goldenPass)),this.labAtleast&&(this.labAtleast.language=d.i18nHelper.getLanguage(s.LangKey.shopBox_at_least_txt)),this._gridType==l.eGPGridType.silver?this.labTips&&(this.labTips.language=d.i18nHelper.getLanguage(s.LangKey.goldenpass_tips_to_finish)):p.DataProxy.getInstance().glodenPassData.isVip()?this.labTips&&(this.labTips.language=d.i18nHelper.getLanguage(s.LangKey.goldenpass_tips_to_finish)):this.labTips&&(this.labTips.language=d.i18nHelper.getLanguage(s.LangKey.goldenpass_tips_active))},t.prototype.setRewardIcon=function(e){if(e){var t=this.iconBox[e-1];t&&(this.spIcon.spriteFrame=t)}},t.prototype.setNormalRewards=function(e,t,i){void 0===i&&(i=null),this.labPower.string=e,this.labPiece.string=t,i?this.labGold.string=i:this.labGold.node.parent.active=!1},t.prototype.setExtarRewards=function(e){var t=this;if(null!=e&&0!=e.length){this.ndExtraRwd.active=!0;for(var i=this.ndExtraRwd.getChildByName("nd_label"),o=1;o<=2;++o)this.ndExtraRwd.getChildByName("ndLayout").getChildByName("piece_"+o).active=!1,i.getChildByName("info"+o).active=!1;e.forEach(function(e,o){for(var n=0;n<e.num&&t.showOnePiece(o+1,e.star,e.num);++n);var a=i.getChildByName("info"+(o+1)).getComponent(cc.Label);a.node.active=!0,t.setPieceLabel(a,e)})}else this.ndExtraRwd.active=!1},t.prototype.showOnePiece=function(e,t,i){var o=!1,n=this.ndExtraRwd.getChildByName("ndLayout").getChildByName("piece_"+e);if(n){o=!0,n.active=!0;for(var a=n.getChildByName("star_bg").getChildByName("layout"),r=0;r<5;++r){a.getChildByName("star"+(r+1)).active=r<t}n.getChildByName("lab_num").getComponent(cc.Label).string="x"+i}return o},t.prototype.showButtonAndTips=function(){this._gridType==l.eGPGridType.silver?this.btnBuy.node.active=!1:p.DataProxy.getInstance().glodenPassData.isVip()?this.btnBuy.node.active=!1:this.btnBuy.node.active=!0,this._gridIndex<p.DataProxy.getInstance().glodenPassData.getBaseInfo().dwLevel-1&&(this.labTips.node.active=!1)},t.prototype.adaptViewSize=function(){var e=0;if(!this.labGold.node.parent.active){var t=this.ndNormalRwd.getChildByName("nodeLayout");this.ndExtraRwd.y+=.5*t.height,e+=.5*t.height}this.ndExtraRwd.active||(e+=this.ndExtraRwd.height),this.node.height-=e,this.ndBottom.y+=.5*e},t.prototype.setPieceLabel=function(e,t){if(e&&t){var i=t.num,o=t.star;if(i>0&&o>0){var n={en:["","one","two","three","four","five"],it:["","uno","due","tre","quattro","cinque"],zh:["","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94"]}[h.Language.getInstance().getLanguage()][o];n&&(e.language=d.i18nHelper.makeLanguage([s.LangKey.shopBox_min_piece_txt,i,n]))}}},t.prototype.analyseNormalRewardDesc=function(e){var t=[];return e.forEach(function(e){var i=null,o=e.exdata;switch(e.type){case l.eGPRewardType.gold:case l.eGPRewardType.power:i=0==o.num?o.num.toString():o.endnum+"-"+o.upunm;break;case l.eGPRewardType.piece:i=""+e.num}t[e.type]=i}),t},t.prototype.analyseExtraRewardDesc=function(e){var t=null;return e.some(function(e){if(e.type==l.eGPRewardType.piece)return t=e.bichu,!0}),t},t.prototype.onClickActive=function(){p.DataProxy.getInstance().glodenPassData.isVip()||this.dispatch(r.GuiEvent.PopMsg.DISPLAY_GOLDEN_PASS_SHOP)},t.prototype.onActiveSucc=function(e){e.succ&&(console.log("\u5566\u5566\u5566\uff0c\u6fc0\u6d3b\u6210\u529f"),this.btnBuy.node.active=!1,this.labTips.node.active=!1)},t.prototype.hideExtarReward=function(){this.ndExtraRwd.active=!1},a([v(cc.Sprite)],t.prototype,"spIcon",void 0),a([v(cc.Node)],t.prototype,"ndNormalRwd",void 0),a([v(cc.Node)],t.prototype,"ndExtraRwd",void 0),a([v(cc.Node)],t.prototype,"ndBottom",void 0),a([v(cc.Button)],t.prototype,"btnBuy",void 0),a([v(cc.Label)],t.prototype,"labBuy",void 0),a([v(cc.Label)],t.prototype,"labPower",void 0),a([v(cc.Label)],t.prototype,"labPiece",void 0),a([v(cc.Label)],t.prototype,"labGold",void 0),a([v(cc.Label)],t.prototype,"labTips",void 0),a([v(cc.Label)],t.prototype,"labAtleast",void 0),a([v(cc.SpriteFrame)],t.prototype,"iconBox",void 0),a([y],t)}(c.CxCompExt);i.GoldenPassRewardPreview=b,cc._RF.pop()},{"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/base/Language":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"./GoldenPassGrid":"GoldenPassGrid"}],GoldenPassShop:[function(e,t,i){"use strict";cc._RF.push(t,"d48aejWDftLm4DPpdwyEqvK","GoldenPassShop");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r,s=e("../../../../script/app/const/Global"),p=e("../../../../script/app/event/Notify"),c=e("../../../../script/app/language/LanguageCfg"),d=e("../../../../script/lib/base/BottomBarView"),l=e("../../../../script/lib/base/CxComponent"),u=e("../../../../script/lib/base/Language"),h=e("../../../../script/lib/base/PopupView"),f=e("../../../../script/lib/i18n/i18nHelper"),y=e("../../../../script/lib/utils/ComUtils");(function(e){e[e.MONTH=0]="MONTH",e[e.YEAR=1]="YEAR",e[e.NONE=-1]="NONE"})(r||(r={}));var v=cc._decorator,b=v.ccclass,g=v.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labRights=[],t.tgSubByMonth=null,t.tgSubByYear=null,t.labMonthPrice=[],t.labYearPrice=[],t.mSubscType=r.MONTH,t.mViewData=null,t.delayLock=!0,t}return n(t,e),t.prototype.init=function(e){this.onUpdateViewData(e)},t.prototype.listEvent=function(){return new Map([[p.Notify.Shop.RTN_GOLDEN_PASS_INFO,this.onUpdateViewData],[p.Notify.GoldenPass.SUBSCRIBE_SUCC,this.onActiveSucc]])},t.prototype.start=function(){var e=this.getComponent(h.PopupView);if(e){var t=f.i18nHelper.makeLanguage(c.LangKey.goldenpass_golden_pass).toString();e.setTitle(t)}d.BottomBarView.setBottomBar(this.node,[{style:s.gColorStyle.GREEN,text:y.ComUtils.makeLang(c.LangKey.text_confirm),callback:this.onConfirmClicked.bind(this)}]),this.tgSubByMonth&&this.tgSubByMonth.node.on("click",this.onSubscriptionByMonthClicked,this),this.tgSubByYear&&this.tgSubByYear.node.on("click",this.onSubscriptionByYearClicked,this)},t.prototype.refreshText=function(e){if(this.mViewData&&this.mViewData[e]){var t=this.mViewData[e],i=u.Language.getInstance().getLanguage(),o=JSON.parse(t.strInfo);console.log("jsonStrInfo:",o);for(var n=0;n<this.labRights.length;n++){var a=this.labRights[n],r=o["vip"+(n+1)];a&&r&&(a.language=r[i])}}},t.prototype.monthPrice=function(){var e=this;this.labMonthPrice.forEach(function(t){t.string="Month "+e.getPrice(r.MONTH)})},t.prototype.yearPrice=function(){var e=this;this.labYearPrice.forEach(function(t){t.string="Year "+e.getPrice(r.YEAR)})},t.prototype.getPrice=function(e){if(!this.mViewData||!this.mViewData[e])return"";var t=this.mViewData[e].goodsInfo,i=t.dwSrcNum/100;return y.ComUtils.getCurrencySymbol(t.dwCurrencyType)+""+i},t.prototype.onConfirmClicked=function(){this.delayLock&&(y.ComUtils.delayLimit(this,2e3),this.dispatch(p.Notify.Shop.REQ_BUY_GOLDEN_PASS,this.mSubscType))},t.prototype.onSubscriptionByMonthClicked=function(){this.mSubscType=r.MONTH,this.refreshText(this.mSubscType)},t.prototype.onSubscriptionByYearClicked=function(){this.mSubscType=r.YEAR,this.refreshText(this.mSubscType)},t.prototype.onUpdateViewData=function(e){e.goldenPassList&&e.goldenPassList.length>0&&(this.mViewData=e.goldenPassList),this.refreshText(this.mSubscType),this.monthPrice(),this.yearPrice()},t.prototype.onActiveSucc=function(e){e.succ&&this.node.destroy()},a([g({type:cc.Label,tooltip:"\u7279\u6743"})],t.prototype,"labRights",void 0),a([g({type:cc.Toggle,tooltip:"\u6309\u6708\u8ba2\u9605"})],t.prototype,"tgSubByMonth",void 0),a([g({type:cc.Toggle,tooltip:"\u6309\u5e74\u8ba2\u9605"})],t.prototype,"tgSubByYear",void 0),a([g({type:cc.Label,tooltip:"\u6708\u4ef7\u683c"})],t.prototype,"labMonthPrice",void 0),a([g({type:cc.Label,tooltip:"\u5e74\u4ef7\u683c"})],t.prototype,"labYearPrice",void 0),a([b],t)}(l.CxComponent);i.default=w,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/lib/base/BottomBarView":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/base/Language":void 0,"../../../../script/lib/base/PopupView":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0}],GoldenPassTheme:[function(e,t,i){"use strict";var o;cc._RF.push(t,"6153bw2lDlAAoGIavr+ykRI","GoldenPassTheme"),Object.defineProperty(i,"__esModule",{value:!0}),i.GoldenPassTheme=i.eTheme=void 0;var n,a=e("../../../../script/app/const/Global"),r=e("../../../../script/app/model/GoldenPassDataProxy"),s=e("../../../../script/lib/utils/Logger");(function(e){e[e.default=1]="default",e[e.dining=2]="dining",e[e.olympic=3]="olympic",e[e.max=4]="max"})(n=i.eTheme||(i.eTheme={}));var p=((o={})[n.default]="altas/themeDefault/",o[n.dining]="altas/themeDining/",o[n.olympic]="altas/themeOlympic/",o),c=function(){function e(){this.themeDefaultName="theme",this.init()}return e.prototype.init=function(){},e.prototype.resetSprite=function(e,t,i){var o=this;this.loadSpriteFrameWithAtlas(e,t)||this.loadSpriteFrameWithImage(e,i);var n=e.children;n&&n.length>0&&n.forEach(function(e){o.resetSprite(e,t,i)})},e.prototype.loadSpriteFrameWithAtlas=function(e,t){var i=!1,o=this.getSpriteFrame(e);if(o){var n=o.name,a=t.getSpriteFrame(n);a&&(e.getComponent(cc.Sprite).spriteFrame=a,i=!0)}return i},e.prototype.loadSpriteFrameWithImage=function(e,t){var i=this.getSpriteFrame(e);if(i){var o=i.name;cc.assetManager.loadBundle(a.gAssetBundleName.ACTIVITY_RES,function(i,n){if(i)return console.error(i);var a=""+t+o;n.load(a,cc.SpriteFrame,function(t,i){i&&cc.isValid(e)&&(console.log(o+"=======> \u4f7f\u7528\u6563\u56fe"),e.getComponent(cc.Sprite).spriteFrame=i)})})}},e.prototype.getSpriteFrame=function(e){var t=e.getComponent(cc.Sprite);return t&&t.spriteFrame?t.spriteFrame:null},e.prototype.apply=function(e,t,i){if(void 0===i&&(i=this.themeDefaultName),r.GoldenPassDataProxy.startTime("\u52a0\u8f7d\u4e3b\u9898"),t<n.default||t>=n.max)s.Logger.error("\u672a\u627e\u5230\u76f8\u5e94\u7684\u4e3b\u9898\uff1a"+t);else{var o=p[t],c=""+o+i;console.log("\u6b63\u5728\u5e94\u7528\u4e3b\u9898"+c);var d=this;cc.assetManager.loadBundle(a.gAssetBundleName.ACTIVITY_RES,function(t,i){if(t)return console.error(t);i.load(c,cc.SpriteAtlas,function(t,i){i&&cc.isValid(e)?(d.resetSprite(e,i,o),r.GoldenPassDataProxy.endTime("\u52a0\u8f7d\u4e3b\u9898"),console.log("\u5e94\u7528\u4e3b\u9898"+c+"\u6210\u529f")):s.Logger.error("[\u52a0\u8f7datlas\u5931\u8d25] atlasPath = "+c)})})}},e}();i.GoldenPassTheme=c,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/model/GoldenPassDataProxy":void 0,"../../../../script/lib/utils/Logger":void 0}],MainActUIConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6e2c3K34gBNZp0CSkzrtoaf","MainActUIConfig");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.MainActResConfig=i.MainActUIConfig=void 0;var a=e("../../../script/app/config/ResConfig"),r=e("../../../script/app/const/Global"),s=e("../../../script/lib/manager/ResManager");i.MainActUIConfig={prefab:{},popup:{GoldenPassShop:new a.PrefabItem("GoldenPassShop","goldenPass/prefabs/GoldenPassShop",r.gLayerLevel.Popup,0),GoldenPassMainView:new a.PrefabItem("GoldenPassMainView","goldenPass/prefabs/GoldenPassMainView",r.gLayerLevel.Popup,0),GoldenPassDailyReward:new a.PrefabItem("GoldenPassDailyReward","goldenPass/prefabs/GoldenPassDailyReward",r.gLayerLevel.Popup,0),GoldenPassRewardPreview:new a.PrefabItem("GoldenPassRewardPreview","goldenPass/prefabs/GoldenPassRewardPreview",r.gLayerLevel.Popup,0)},altas:[]};var p=function(e){function t(){var t=e.call(this)||this;return t.name=r.gAssetBundleName.ACTIVITY_RES,t.tips="\u6d3b\u52a8",t.dependency=[],t}return n(t,e),t.prototype.getRes=function(){return i.MainActUIConfig},t}(s.BundleConfig);i.MainActResConfig=p,s.default.getInstance().addBundleCfg(new p),cc._RF.pop()},{"../../../script/app/config/ResConfig":void 0,"../../../script/app/const/Global":void 0,"../../../script/lib/manager/ResManager":void 0}],MianActHandler:[function(e,t){"use strict";cc._RF.push(t,"4a3eaSIbiBODqh0MxuoZ8Mj","MianActHandler"),cc._RF.pop()},{}],SubScribeHandler:[function(e,t,i){"use strict";cc._RF.push(t,"f566c8SKiBI3IKkLbMLGHjb","SubScribeHandler");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.SubScribeHandler=void 0;var a=e("../../../../script/app/base/handler/ProxyHandler"),r=e("../model/CMD_SubscribeMsg"),s=e("../../../../script/plugin/pb/protofile/GlobalMsgDef"),p=e("../../../../script/app/event/Notify"),c=e("../../../../script/app/event/GuiEvent"),d=e("../../../../script/app/base/handler/HandlerMgr"),l=e("../../../../script/app/model/DataProxy"),u=e("../../../../script/app/model/GoldenPassDataProxy"),h=e("../../../../script/app/view/ComFunctions"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SERVER_ID=190,t._isRecvFinish=!0,t}return n(t,e),t.prototype.getName=function(){return"SubScribeHandler"},t.prototype.protocolConfig=function(){return[{protocol:r.MSG_SC_RtnRewardList,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RTN_REWARD_LIST,cb:this.onRtnBaseInfo},{protocol:r.MSG_SC_RtnRewardListXH,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RTN_REWARD_XH_LIST,cb:this.onRtnRewardList},{protocol:r.MSG_SC_ReceiveAward,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RECEIVE_AWARD,cb:this.onRtnRecvReward},{protocol:r.MSG_SC_ReceiveAwardUpdate,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RECEIVE_AWARD_UPDATE,cb:this.onRtnUpdateView},{protocol:r.MSG_SC_RtnGolenDailyInfo,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RTN_GOLDEN_DAILY_INFO,cb:this.onRtnGoldenDailyInfo},{protocol:r.MSG_SC_RtnGolenDailyReward,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RTN_GOLDEN_DAILY_REWARD,cb:this.onRtnRecvDailyReward},{protocol:r.MSG_SC_RtnGolenPassInfo,subid:r.SUBSCRIBE_SUB_MSG.MSG_SC_RTN_GOLENPASS_INFO,cb:this.onRtnCupInfo}]},t.prototype.initEvent=function(){e.prototype.initEvent.call(this),this.addEvent(p.Notify.GoldenPass.REQ_INFO,this.sendReqInfo),this.addEvent(p.Notify.GoldenPass.REQ_RECV_REWARD,this.sendRecvReward),this.addEvent(p.Notify.GoldenPass.REQ_DAILY_REWARD,this.sendGetDailyRewardInfo),this.addEvent(p.Notify.GoldenPass.REQ_RECV_DAILY_REWARD,this.sendRecvDailyReward),this.addEvent(p.Notify.GoldenPass.REQ_ACT_ENTRY_INFO,this.sendEntryInfo)},t.prototype.getMainID=function(){return s.MAIN_MSG_ID.MAIN_MSG_SUBSCRIBE_ID},t.prototype.clear=function(){this.removeEvent()},t.prototype.getOtherHead=function(e,t){var i=e,o=void 0===t?i:t,n=new s.Msg_OtherServerHead;return n.dwGameID=i,n.dwGameTypeID=o,n.strUUID=this.userData.sessionId,n},t.prototype.sendReqInfo=function(){cc.log("\u8bf7\u6c42 golden pass \u4fe1\u606f"),u.GoldenPassDataProxy.startTime("\u8bf7\u6c42\u6570\u636e"),this.sendRequest(null,this.getMainID(),r.SUBSCRIBE_SUB_MSG.MSG_CS_GET_REWARD_LIST,this.getOtherHead(this.SERVER_ID))},t.prototype.sendRecvReward=function(e){if(this._isRecvFinish){this._isRecvFinish=!1;var t=new r.MSG_CS_ReceiveAward;t.dwId=e.id,t.dwType=e.tp,cc.log("\u8bf7\u6c42\u9886\u53d6\u5956\u52b1",t),this.sendRequest(t,this.getMainID(),r.SUBSCRIBE_SUB_MSG.MSG_CS_RECEIVE_AWARD,this.getOtherHead(this.SERVER_ID))}},t.prototype.sendRecvDailyReward=function(){this.sendRequest(null,this.getMainID(),r.SUBSCRIBE_SUB_MSG.MSG_CS_GET_GOLDEN_DAILY_REWARD,this.getOtherHead(this.SERVER_ID))},t.prototype.sendGetDailyRewardInfo=function(){this.sendRequest(null,this.getMainID(),r.SUBSCRIBE_SUB_MSG.MSG_CS_GET_GOLDEN_DAILY_INFO,this.getOtherHead(this.SERVER_ID))},t.prototype.sendEntryInfo=function(){this.sendRequest(null,this.getMainID(),r.SUBSCRIBE_SUB_MSG.MSG_CS_GET_GOLENPASS_INFO,this.getOtherHead(this.SERVER_ID))},t.prototype.onRtnBaseInfo=function(e){var t=e.data;cc.log("goldpass \u57fa\u672c\u6570\u636e",t),l.DataProxy.getInstance().glodenPassData.setBaseInfo(t),this.dispatch(p.Notify.GoldenPass.RESP_INFO,t)},t.prototype.onRtnRewardList=function(e){var t=e.data;if(cc.log("goldpass \u5217\u8868\u6570\u636e",t),t.tabReward.forEach(function(e){l.DataProxy.getInstance().glodenPassData.pushTempData(e)}),t.bEnd){var i=l.DataProxy.getInstance().glodenPassData.toCompleteData();u.GoldenPassDataProxy.endTime("\u8bf7\u6c42\u6570\u636e"),this.dispatch(p.Notify.GoldenPass.RESP_LIST_INFO,i)}},t.prototype.onRtnRecvReward=function(e){this._isRecvFinish=!0;var t=e.data;cc.log("goldpass \u9886\u53d6\u6570\u636e",t);var i={};i.dwError=t.bError,i.rewardList=h.ComFunctions.parseTableReward(t.reward),i.chipList=h.ComFunctions.parseChipArray(t.tabChips),this.dispatch(p.Notify.GoldenPass.RESP_RECV_REWARD,{body:t,parseData:i})},t.prototype.onRtnUpdateView=function(e){var t=e.data;cc.log("goldpass \u66f4\u65b0\u6570\u636e",t),this.dispatch(p.Notify.GoldenPass.RESP_UPDATE_VIEW,t)},t.prototype.onRtnGoldenDailyInfo=function(e){var t=e.data;cc.log("\u6bcf\u65e5\u5956\u52b1\u4fe1\u606f",t),this.dispatch(c.GuiEvent.PopMsg.DISPLAY_GOLDEN_PASS_DAILY_REWARD,t)},t.prototype.onRtnRecvDailyReward=function(e){var t=e.data;cc.log("\u9886\u53d6\u6bcf\u65e5\u5956\u52b1",t);var i={};i.dwError=t.bError,i.rewardList=h.ComFunctions.parseTableReward(t.reward),this.dispatch(p.Notify.GoldenPass.RESP_RECV_DAILY_REWARD,{body:t,parseData:i})},t.prototype.onRtnCupInfo=function(e){var t=e.data;cc.log("\u5165\u53e3\u4fe1\u606f",t),l.DataProxy.getInstance().glodenPassData.setEntryData(t),this.dispatch(p.Notify.GoldenPass.RESP_GOLDENPASS_ENTRY_INFO,t)},t}(a.ProxyHandler);i.SubScribeHandler=f,d.HandlerMgr.getInstance().addSubHandler(new f),cc._RF.pop()},{"../../../../script/app/base/handler/HandlerMgr":void 0,"../../../../script/app/base/handler/ProxyHandler":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/model/GoldenPassDataProxy":void 0,"../../../../script/app/view/ComFunctions":void 0,"../../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../model/CMD_SubscribeMsg":"CMD_SubscribeMsg"}]},{},["MianActHandler","MainActUIConfig","SubScribeHandler","CMD_SubscribeMsg","GoldenPassDailyReward","GoldenPassGrid","GoldenPassItem","GoldenPassListView","GoldenPassMainView","GoldenPassRewardPreview","GoldenPassShop","GoldenPassTheme"]);