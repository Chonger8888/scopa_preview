window.__require=function t(e,i,o){function s(r,a){if(!i[r]){if(!e[r]){var p=r.split("/");if(p=p[p.length-1],!e[p]){var c="function"==typeof __require&&__require;if(!a&&c)return c(p,!0);if(n)return n(p,!0);throw new Error("Cannot find module '"+r+"'")}r=p}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){return s(e[r][1][t]||t)},l,l.exports,t,e,i,o)}return i[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<o.length;r++)s(o[r]);return s}({IMChooseChipView:[function(t,e,i){"use strict";cc._RF.push(e,"175a0jvCEVOc5D/NpvNdznG","IMChooseChipView");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMChooseChipView=void 0;var r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/module/tables/TableSkinMgr"),p=t("../../../../script/lib/base/Callback"),c=t("../../../../script/lib/base/ComPopup"),l=t("../../../../script/lib/base/CxComponent"),h=t("../../../../script/lib/base/PopupView"),d=t("../../../../script/lib/manager/ResManager"),u=t("../../../../script/lib/utils/ComUtils"),g=t("../../i18n/IMI18n"),f=t("../../model/IMEvent"),I=t("./IMTablePiece"),y=cc._decorator,M=y.ccclass,m=y.property,_=y.requireComponent,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndContainer=null,e.spTable=null,e.spScopa=null,e.labTips=null,e.btnReturn=null,e.delayLock=!0,e}return s(e,t),e.prototype.init=function(t){this._tableData=u.ComUtils.clone(t)||{}},e.prototype.start=function(){var t=this;if(this.btnReturn&&this.btnReturn.node.on("click",this.onReturnBack,this),this.initTable(),h.PopupView.setTitle(this.node,g.IMI18n.i18n.request_chip),this.spTable&&this._tableData){var e=a.TableSkinMgr.getTableCfgById(this._tableData.dwTableId);if(e){var i=this;d.default.getInstance().loadImg(e.bg,r.gAssetBundleName.TABLES_RES,function(t,e){e&&(i.spTable.spriteFrame=e)}),d.default.getInstance().loadAtlas(e.skin,r.gAssetBundleName.TABLES_RES,function(e,i){i&&cc.isValid(t.spTable)&&(t.spScopa.spriteFrame=i.getSpriteFrame("table_scopa"))})}}},e.prototype.initTable=function(){for(var t=this.ndContainer.children,e=0;e<t.length;e++){var i=t[e].getComponent(I.IMTablePiece);if(i){var o=void 0;this._tableData.pieceList&&(o=this._tableData.pieceList[e]),o?(i.init(o),i.callback=new p.Callback(this,this.onChooseChip,o)):i.clearStar(),i.iPieceId=e+1}}},e.prototype.onChooseChip=function(t){this.delayLock&&(u.ComUtils.delayLimit(this),t&&this._tableData&&(this.dispatch(f.IMEvent.Opt.CHOOSED_CHIP,{tableId:this._tableData.dwTableId,pieceId:t.dwPieceId,star:t.dwStar}),this.close()))},e.prototype.onReturnBack=function(){this.close()},n([m({type:cc.Node,tooltip:"\u788e\u7247\u5217\u8868"})],e.prototype,"ndContainer",void 0),n([m({type:cc.Sprite,tooltip:"\u788e\u7247\u5217\u8868"})],e.prototype,"spTable",void 0),n([m({type:cc.Sprite,tooltip:"Scopa"})],e.prototype,"spScopa",void 0),n([m({type:cc.Label,tooltip:"\u63d0\u793a"})],e.prototype,"labTips",void 0),n([m({type:cc.Button,tooltip:"\u8fd4\u56de\u6309\u94ae"})],e.prototype,"btnReturn",void 0),n([M,_(c.ComPopup),_(h.PopupView)],e)}(l.CxComponent);i.IMChooseChipView=b,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/lib/base/Callback":void 0,"../../../../script/lib/base/ComPopup":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/base/PopupView":void 0,"../../../../script/lib/manager/ResManager":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../i18n/IMI18n":"IMI18n","../../model/IMEvent":"IMEvent","./IMTablePiece":"IMTablePiece"}],IMChooseTableView:[function(t,e,i){"use strict";cc._RF.push(e,"090b7n3S0hMtaUNVTa/ZzjB","IMChooseTableView");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMChooseTableView=void 0;var r=t("../../../../script/app/base/component/ComListView"),a=t("../../../../script/app/event/Notify"),p=t("../../../../script/lib/base/Callback"),c=t("../../../../script/lib/base/ComPopup"),l=t("../../../../script/lib/base/CxComponent"),h=t("../../../../script/lib/base/PopupView"),d=t("../../../../script/lib/utils/ComUtils"),u=t("../../i18n/IMI18n"),g=t("../../model/IMEvent"),f=t("./IMTableCell"),I=cc._decorator,y=I.ccclass,M=I.property,m=I.requireComponent,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.svTableList=null,e.pfListCell=null,e.labTips=null,e.mListData=null,e.delayLock=!0,e}return s(e,t),e.prototype.init=function(t){this.mListData=t},e.prototype.start=function(){this.labTips&&(this.labTips.string=u.IMI18n.i18n.choose_unfinish_table),null==this.mListData||0==this.mListData.length?this.dispatch(a.Notify.Tables.REQ_TABLES_LIST):this.initListView(),h.PopupView.setTitle(this.node,u.IMI18n.i18n.request_chip)},e.prototype.listEvent=function(){return new Map([[a.Notify.Tables.RTN_TABLES_LIST,this.onUpdateTables],[g.IMEvent.Opt.CHOOSED_CHIP,this.close]])},e.prototype.initListView=function(){for(var t=[],e=0;e<this.mListData.length;++e){var i=this.mListData[e],o=Math.floor(e/3);t[o]||(t[o]=[]),t[o].push(i)}var s={scrollView:this.svTableList,content:this.svTableList.content,itemPrefab:this.pfListCell,itemClass:f.IMTableCell,dataList:t,dataEx:new p.Callback(this,this.onChooseTable),space:0,top:0,bottom:0,createInterval:.075,scrollToIndex:0},n=this.node.getComponent(r.ComListView);null==n&&(n=this.node.addComponent(r.ComListView)),n.initParams(s),n.initScrollView()},e.prototype.onUpdateTables=function(t){t&&(this.mListData=t,this.initListView())},e.prototype.onChooseTable=function(t){this.delayLock&&(d.ComUtils.delayLimit(this),t&&this.dispatch(a.Notify.IM.POP_CHOOSE_CHIP,t))},n([M({type:cc.ScrollView,tooltip:"\u684c\u5b50\u5217\u8868"})],e.prototype,"svTableList",void 0),n([M({type:cc.Node,tooltip:"\u5217\u8868\u5b50\u9879\u9884\u7f6e"})],e.prototype,"pfListCell",void 0),n([M({type:cc.Label,tooltip:"\u63d0\u793a"})],e.prototype,"labTips",void 0),n([y,m(c.ComPopup),m(h.PopupView)],e)}(l.CxComponent);i.IMChooseTableView=_,cc._RF.pop()},{"../../../../script/app/base/component/ComListView":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/Callback":void 0,"../../../../script/lib/base/ComPopup":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/base/PopupView":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../i18n/IMI18n":"IMI18n","../../model/IMEvent":"IMEvent","./IMTableCell":"IMTableCell"}],IMDB:[function(t,e,i){"use strict";cc._RF.push(e,"3b5eeYbcmFOOJZ8Slt+2e1l","IMDB"),Object.defineProperty(i,"__esModule",{value:!0}),i.IMDB=void 0;var o=t("../../../script/app/model/DataProxy"),s=t("../../../script/app/module/sql/MySqlite3"),n=t("./IMDef"),r=function(){function t(){}return t.init=function(){!t.sqlite&&s.MySqlite3.isSupport()&&(t.sqlite=new s.MySqlite3("immsg"))},t.createTable=function(e){if(e!==this.clubId&&e&&t.sqlite){this.clubId=e;var i=cc.js.formatStr("CREATE TABLE IF NOT EXISTS t_msg_%d(id          INTEGER  PRIMARY KEY AUTOINCREMENT,msgtime     int    NOT NULL,msgid       int     NOT NULL,msgtype     int     NOT NULL,content     char(400),userinfo    char(400),readst      tinyint); ",e);cc.log("[IMDB createTable] "+i),t.sqlite.run(i)}else cc.log("[IMDB createTable] fail "+e)},t.close=function(){cc.log("[IMDB close]"),t.sqlite&&t.sqlite.closeDB(),t.sqlite=null},t.getMsgBody=function(t){var e=n.IMDef.MsgType,i=null;switch(t.dwType){case e.TEXT:i=t.txtMsg;break;case e.HELP_TOKEN:case e.HELP_GOLD:case e.HELP_CHIP:i=t.helpMsg;break;case e.SYSTEM:i=t.sysMsg;break;case e.EMOJ:i=t.emojMsg;break;case e.VOICE:i=t.voiceMsg}return i},t.convertBody=function(t,e){var i=n.IMDef.MsgType;switch(t.dwType){case i.TEXT:t.txtMsg=e;break;case i.HELP_TOKEN:case i.HELP_GOLD:case i.HELP_CHIP:t.helpMsg=e,t.helpMsg.dwHelpType=t.dwType;break;case i.SYSTEM:t.sysMsg=e;break;case i.EMOJ:t.emojMsg=e;break;case i.VOICE:t.voiceMsg=e;break;default:cc.log("[IMDB convertBody] break")}},t.convertMsgData=function(t){cc.log("[IMDB convertMsgData]",JSON.stringify(t));var e=new n.IMDef.IMMsgData;return e.dwTime=parseInt(t.msgtime),e.dwMsgId=t.msgid,e.dwType=t.msgtype,e.hasRead=1==t.readst,e.isMeSend=!1,e.dwClubId=this.clubId,t.userinfo&&"undefined"!=t.userinfo&&(e.userInfo=JSON.parse(t.userinfo),e.isMeSend=e.userInfo&&e.userInfo.dwUserID===o.DataProxy.getInstance().userData.userId),t.content&&"undefined"!=t.content?this.convertBody(e,JSON.parse(t.content)):cc.log("[IMDB convertMsgData] content is undefined type:"+t.msgtype),e},t.insert=function(e,i){e&&i&&t.sqlite&&(i.sysMsg&&i.sysMsg.dwSysType===n.IMDef.SysMsgType.TIME||(cc.log("[IMDB insert] "+e),t.queryByMsgId(e,i.dwMsgId,function(o,s){s?t.update(e,i):(i.dwTime.toString(),t.sqlite.run("INSERT INTO t_msg_?(msgtime, msgid, msgtype, content, userinfo, readst) values(?, ?, ?, '?','?',?)",[e,i.dwTime,i.dwMsgId,i.dwType,JSON.stringify(t.getMsgBody(i)),JSON.stringify(i.userInfo||""),0],function(){t.queryByMsgId(e,i.dwMsgId,function(t,e){cc.log("[IMDB insert] after "+JSON.stringify(e))})}))})))},t.queryAll=function(e,i){if(t.sqlite){var o=cc.js.formatStr("SELECT * FROM t_msg_%d ORDER BY msgtime ASC;",e);t.sqlite.get(o,i)}},t.queryByMsgId=function(e,i,o){if(t.sqlite){var s=cc.js.formatStr("SELECT * FROM t_msg_%d WHERE msgid=%d;",e,i);t.sqlite.get(s,null,function(t,e){cc.js.isEmptyObject(e)?o&&o(t,null):o&&o(t,e)})}},t.update=function(e,i){if(t.sqlite){cc.log("[IMDB update] "+e);var o=JSON.stringify(t.getMsgBody(i));o?t.sqlite.run("UPDATE t_msg_? SET content='?' where msgid=?;",[e,o,i.dwMsgId]):cc.log("[IMDB update] "+e+" msg="+JSON.stringify(i))}},t.updateReadSt=function(e,i){t.sqlite&&(cc.log("[IMDB update] "+e),JSON.stringify(t.getMsgBody(i))?t.sqlite.run("UPDATE t_msg_? SET readst=? where msgid=?;",[e,i.hasRead?1:0,i.dwMsgId]):cc.log("[IMDB update] "+e+" msg="+JSON.stringify(i)))},t.queryHistory=function(e,i,o,s,n){var r;void 0===s&&(s=10),t.sqlite&&(cc.log("[IMDB queryHistory] "+e),r=o?"SELECT * FROM t_msg_? WHERE msgid<? ORDER BY msgtime DESC, msgid DESC LIMIT ?;":"SELECT * FROM t_msg_? WHERE msgid>? ORDER BY msgtime DESC, msgid DESC LIMIT ?;",t.sqlite.all(r,[e,i,s],n))},t.query3dayHistory=function(e,i){if(t.sqlite){cc.log("[IMDB query3dayHistory] "+e);var o=Math.floor(Date.now()/1e3-259200);t.sqlite.all("SELECT * FROM t_msg_? WHERE msgtime>? ORDER BY msgtime DESC, msgid DESC;",[e,o],i)}},t.delMsgById=function(e,i){t.sqlite&&t.sqlite.run("DELETE FROM t_msg_? WHERE msgid=?;",[e,i])},t.del3DayAgoMsg=function(e){if(t.sqlite){cc.log("[IMDB del3DayAgoMsg] "+e);var i=Math.floor(Date.now()/1e3-259200);t.sqlite.run("DELETE FROM t_msg_? WHERE msgtime<?;",[e,i])}},t.drapTable=function(e){t.sqlite&&t.sqlite.run("DROP TABLE t_msg_?;",[e])},t.findMsgById=function(e,i,o){t.sqlite&&t.sqlite.run("SELECT * FROM t_msg_? WHERE msgid=?;",[e,i],o)},t.getFirstMsg=function(e,i){t.sqlite&&t.sqlite.get("SELECT * FROM t_msg_? ORDER BY msgtime ASC, msgid ASC LIMIT 1;",[e],i)},t.getLastMsg=function(e,i){t.sqlite&&t.sqlite.get("SELECT * FROM t_msg_? ORDER BY msgtime DESC, msgid DESC LIMIT 1;",[e],i)},t}();i.IMDB=r,cc._RF.pop()},{"../../../script/app/model/DataProxy":void 0,"../../../script/app/module/sql/MySqlite3":void 0,"./IMDef":"IMDef"}],IMData:[function(t,e,i){"use strict";cc._RF.push(e,"a229aCcTPBHapJuuWg3n0DB","IMData"),Object.defineProperty(i,"__esModule",{value:!0}),i.IMData=i.IMHistory=void 0;var o=t("../../../script/app/const/Global"),s=t("../../../script/app/model/DataProxy"),n=t("../../../script/lib/utils/ComUtils"),r=t("../../../script/plugin/pb/protofile/CMD_ClubMsg"),a=t("./IMDB"),p=t("./IMDef"),c=function(){function t(t){this.msgList=[],this.clear(),this.clubId=t}return t.prototype.clear=function(){this.clubId=0,this.msgList=[]},t.prototype.getMsgList=function(){return this.msgList},t.prototype.findMsgByIdWithTime=function(t,e){return this.msgList.find(function(i){return i.dwMsgId===t&&i.dwTime===e})},t.prototype.isNewMsg=function(t){return!this.findMsgByIdWithTime(t.dwMsgId,t.dwTime)},t.prototype.addMsg=function(t){this.findMsgByIdWithTime(t.dwMsgId,t.dwTime)?cc.log("\u91cd\u590d\u7684:"+t.dwMsgId+" "+t.dwTime):this.msgList.push(t)},t.prototype.updateMsg=function(t){var e=this.findMsgByIdWithTime(t.dwMsgId,t.dwTime);if(e){var i=e.hasRead;e.update(t),e.hasRead=i}a.IMDB.update(this.clubId,t)},t.prototype.filterMsgById=function(t){return this.msgList.filter(function(e){return e.dwMsgId===t})},t.prototype.delMsg=function(t){var e=this,i=this.filterMsgById(t.dwMsgId);i&&i.forEach(function(t){if(t){var i=e.msgList.indexOf(t);e.msgList.splice(i,0)}}),a.IMDB.delMsgById(this.clubId,t.dwMsgId)},t.prototype.getLastMsg=function(){var t;return a.IMDB.getLastMsg(this.clubId,function(e,i){i&&(t=a.IMDB.convertMsgData(i),cc.log("getLastMsg",t.dwMsgId))}),t||this.msgList[this.msgList.length-1]},t.prototype.getFirstMsg=function(){var t;return a.IMDB.getFirstMsg(this.clubId,function(e,i){i&&(t=a.IMDB.convertMsgData(i),cc.log("getFirstMsg",t.dwMsgId))}),t||this.msgList[0]},t.prototype.sortMsg=function(){this.msgList.sort(function(t,e){return t.dwTime===e.dwTime?t.dwMsgId===e.dwMsgId?t.sysMsg&&t.sysMsg.dwSysType===p.IMDef.SysMsgType.TIME?1:e.sysMsg&&e.sysMsg.dwSysType===p.IMDef.SysMsgType.TIME?-1:0:t.dwMsgId-e.dwMsgId:t.dwTime-e.dwTime})},t.getLocalTime=function(t){return new Date(parseInt(t)).toLocaleString()},t}();i.IMHistory=c;var l=function(){function t(){this.curClubId=0,this.mHasNew=!1,this.mapHisMsg=new Map,this.helpBtnCD=[]}return t.prototype.setHasNew=function(t){this.mHasNew=t},t.prototype.hasNew=function(){return this.mHasNew},t.prototype.clear=function(){this.mapHisMsg.forEach(function(t){return t.clear()}),this.mapHisMsg.clear(),this.helpBtnCD.length=0,a.IMDB.close()},t.prototype.history=function(t){var e=this.mapHisMsg.get(t);return e||(cc.log("history init "+t),a.IMDB.init(),a.IMDB.createTable(t),e=new c(t),this.mapHisMsg.set(t,e),a.IMDB.del3DayAgoMsg(t),a.IMDB.queryHistory(t,0,!1,10,function(t,i){i&&i.forEach(function(t){cc.log("history row "+t.msgid),e.addMsg(a.IMDB.convertMsgData(t))})}),e.sortMsg(),e)},t.prototype.addOneMsg=function(t,e){a.IMDB.insert(t,e),this.history(t).addMsg(e)},t.prototype.addTimeMsg=function(t){var e=Math.floor(Date.now()/1e3),i=0,o=this.history(t);if(o.sortMsg(),o){for(var s=!1,n=o.getMsgList().slice(),r=n.length,a=r-1;a>=0;a--){var c=n[a];if(c){var l=!0;if(a==r-1&&e-c.dwTime<p.IMDef.T_3_MINUTES)i=e;else{c.dwType==p.IMDef.MsgType.SYSTEM&&c.sysMsg&&c.sysMsg.dwSysType==p.IMDef.SysMsgType.TIME&&(l=!1,i=c.dwTime);var h=p.IMDef.T_3_MINUTES;if(l&&i>0&&(e-c.dwTime>p.IMDef.T_6_HOURS||(h=p.IMDef.T_30_MINUTES),i-c.dwTime<h&&(l=!1)),l){var d=n[a-1],u=0;do{d&&d.dwType===p.IMDef.MsgType.SYSTEM&&d.sysMsg&&d.sysMsg.dwSysType===p.IMDef.SysMsgType.TIME&&(d.dwTime<i&&(i=d.dwTime),l=!1),d=n[a+1],u++}while(u<2)}if(l){s=!0;var g=new p.IMDef.IMSysMsg;g.dwSysType=p.IMDef.SysMsgType.TIME,g.strMsg="";var f=new p.IMDef.IMMsgData;f.dwType=p.IMDef.MsgType.SYSTEM,f.dwMsgId=c.dwMsgId,f.dwTime=c.dwTime-1,f.isMeSend=!1,f.hasRead=!0,f.sysMsg=g,o.addMsg(f),i=f.dwTime}}}}return s&&o.sortMsg(),s}return!1},t.prototype.printHistory=function(t){for(var e=this.history(t).getMsgList(),i=e.length-1;i>=0;i--){var o=e[i];if(o){var s="\u6d88\u606f:"+o.dwMsgId+", \u65f6\u95f4\u6233:"+o.dwTime+", \u65f6\u95f4:"+c.getLocalTime(o.dwTime)+", \u7c7b\u578b:"+o.dwType;o.sysMsg&&(s+=", \u5b50\u7c7b\u578b:"+o.sysMsg.dwSysType),cc.log(s)}else cc.log("\u7a7a\u6d88\u606f",i)}},t.prototype.getCloserMsg=function(t,e,i,o){void 0===o&&(o=10);var s=[];return a.IMDB.queryHistory(t,e,i,o,function(t,e){e?Array.isArray(e)&&e.forEach(function(t){s.push(a.IMDB.convertMsgData(t))}):cc.log("queryHistory error")}),s},t.prototype.parseMsg=function(t,e){var i=new p.IMDef.IMMsgData;i.dwTime=t.dwtime,i.dwMsgId=t.dwNewsID,i.dwType=t.dwType,i.dwClubId=e,i.userInfo=this.parseUserInfo(t.tabUserInfo),i.isMeSend=i.userInfo&&i.userInfo.dwUserID==this.userId;var o=t.tabNewsInfo,s=r.NEWS_TYPE;switch(t.dwType){case s.NEWS_WORLD:i.txtMsg=this.parseTextMsg(o.tabWorldmMsg);break;case s.NEWS_VOICE:i.voiceMsg=this.parseVoiceMsg(o.tabVoicemMsg);break;case s.NEWS_GOLD_HELP:case s.NEWS_TATTER_HELP:case s.NEWS_PHYSICL_HELP:i.helpMsg=this.parseHelpMsg(o.tabHelpmMsg,t.dwType),i.helpMsg.dwHelpType=t.dwType;break;case s.NEWS_SYSTEM:i.sysMsg=this.parseSysMsg(o.tabSystemMsg);break;case s.NEWS_PHIZ:i.emojMsg=this.parseEmojMsg(o.tabPhizmMsg)}return i},t.prototype.parseUserInfo=function(t){var e=new p.IMDef.IMMsgUserInfo;return e.dwUserID=t.dwUserID,e.strNickName=n.ComUtils.u8ToUTF8Str(t.chUserNickName),e.sysFaceId=t.faceId,e.custFaceId=t.custFaceId,e.headURL=n.ComUtils.u8ToUTF8Str(t.url),e.level=t.dwExpLevel,e.ranklevel=t.dwDan1,e.rankstarlevel=t.dwDan2,e},t.prototype.parseSysMsg=function(t){var e=new p.IMDef.IMSysMsg;return t&&(e.dwSysType=t.dwSystemMsgType,e.strMsg=n.ComUtils.u8ToUTF8Str(t.chMsgInfo),e.strNickName=n.ComUtils.u8ToUTF8Str(t.chUserNickName),e.strMsg&&(e.msgJson=JSON.parse(e.strMsg))),e},t.prototype.parseHelpMsg=function(t,e){var i=new p.IMDef.IMHelpMsg;return t&&(i.dwCurHelpCount=t.dwNowCount,i.dwMaxHelpCount=t.dwMaxCount,i.dwNeedNum=t.dwRewardData,i.dwHelpType=e,i.arrHelpUserIds=n.ComUtils.clone(t.dwUserIDInfo),i.strHelpInfo=t.dwRewardData+" "+(e===p.IMDef.MsgType.HELP_GOLD?"gold":e===p.IMDef.MsgType.HELP_TOKEN?"tokens":"chips"),t.tabChipsData&&(i.chipItem={dwPieceId:t.tabChipsData.dwPieceId,dwStar:t.tabChipsData.dwStar,bNew:t.tabChipsData.bNew,dwTableId:t.tabChipsData.dwTableId})),i},t.prototype.parseTextMsg=function(t){var e=new p.IMDef.IMTextMsg;return t&&(e.strContent=n.ComUtils.u8ToUTF8Str(t.chMsgInfo)),e},t.prototype.parseEmojMsg=function(t){var e=new p.IMDef.IMEmjoMsg;return t&&(e.dwIndex=t.dwPhizID),e},t.prototype.parseVoiceMsg=function(t){var e=new p.IMDef.IMVoiceMsg;return t&&(e.dwVoiceTime=t.dwTimeLong,e.strVoiceUrl=n.ComUtils.u8ToUTF8Str(t.chLinkAddress)),e},t.prototype.parseHelpReward=function(t){if(t){var e="",i=0;t.dwType===p.IMDef.MsgType.HELP_GOLD?(e=t.dwRewardData+" coins",i=o.gShopHBType.GOLD):t.dwType===p.IMDef.MsgType.HELP_TOKEN?(e=t.dwRewardData+" tokens",i=o.gShopHBType.POWER):t.dwType===p.IMDef.MsgType.HELP_CHIP&&(e=t.dwRewardData+" chip",i=o.gShopHBType.CHIPS);var s={dwRewardNum:t.dwRewardData,dwHelpType:t.dwType,dwRewardType:i,chipsData:t.tabChipsData,strRewardTips:e,userInfo:this.parseUserInfo(t.tabUserInfo),dwMsgId:t.dwNewsID};return this.helpRewardList.push(s),s}},t.prototype.parseHelpCD=function(t){var e=this;return t&&t.tabCDData&&(this.helpBtnCD.length=0,t.tabCDData.forEach(function(t){e.helpBtnCD.push({dwBeginTime:t.dwBeginTime,dwEndTime:t.dwEndTime,strInfo:n.ComUtils.u8ToUTF8Str(t.chHelpInfo)})})),this.helpBtnCD},t.prototype.getLastMsg=function(t){return this.history(t).getLastMsg()},t.prototype.getFirstMsg=function(t){return this.history(t).getFirstMsg()},t.prototype.quitClub=function(t){this.history(t).clear(),a.IMDB.drapTable(t)},t.prototype.updateReadSt=function(t,e){a.IMDB.updateReadSt(t,e)},t}();i.IMData=l,s.DataProxy.getInstance().imData||(s.DataProxy.getInstance().imData=new l),cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/utils/ComUtils":void 0,"../../../script/plugin/pb/protofile/CMD_ClubMsg":void 0,"./IMDB":"IMDB","./IMDef":"IMDef"}],IMDef:[function(t,e,i){"use strict";cc._RF.push(e,"e3f4dgdeO5H6ryL0y0UOdUw","IMDef"),Object.defineProperty(i,"__esModule",{value:!0}),i.updateObj=i.IMDef=void 0;var o=t("../../../script/lib/utils/ComUtils");(function(t){t.T_3_MINUTES=180,t.T_30_MINUTES=1800,t.T_6_HOURS=21600,t.T_2_HOURS=7200,function(t){t[t.NONE=0]="NONE",t[t.SYSTEM=1]="SYSTEM",t[t.TEXT=2]="TEXT",t[t.VOICE=3]="VOICE",t[t.EMOJ=4]="EMOJ",t[t.HELP_GOLD=5]="HELP_GOLD",t[t.HELP_TOKEN=6]="HELP_TOKEN",t[t.HELP_CHIP=7]="HELP_CHIP"}(t.MsgType||(t.MsgType={})),function(t){t[t.TIME=0]="TIME",t[t.USER_JOIN_CLUB=1]="USER_JOIN_CLUB",t[t.USER_OUT_CLUB=2]="USER_OUT_CLUB",t[t.USER_RECEIVE_DRAW=3]="USER_RECEIVE_DRAW",t[t.USER_LEVER_VL=4]="USER_LEVER_VL"}(t.SysMsgType||(t.SysMsgType={}));var e=function(){function t(){this.hasRead=!1}return t.prototype.update=function(t){i.updateObj(this,t)},t}();t.IMMsgData=e;t.IMTextMsg=function(){};t.IMEmjoMsg=function(){};t.IMVoiceMsg=function(){};t.IMMsgUserInfo=function(){};t.IMSysMsg=function(){};t.IMHelpMsg=function(){}})(i.IMDef||(i.IMDef={})),i.updateObj=function(t,e){for(var i in e)if(t.hasOwnProperty(i)){var s=e[i];"object"==typeof s?t[i]=o.ComUtils.clone(s):null!=s&&(t[i]=s)}},cc._RF.pop()},{"../../../script/lib/utils/ComUtils":void 0}],IMEvent:[function(t,e,i){"use strict";cc._RF.push(e,"ca5bavJXKJJtIKoKPCajxEU","IMEvent"),Object.defineProperty(i,"__esModule",{value:!0}),i.IMEvent=void 0,function(t){(function(t){t.SEND_CHAT_MSG="im_msg_sendchatmsg",t.SEND_HELP_MSG="im_msg_sendhelpmsg"})(t.Msg||(t.Msg={})),function(t){t.PLAY_VOICE="im_opt_playvoice",t.CLICK_VOICE="im_opt_clickvoice",t.CLICK_EMOJ="im_opt_clickemoj",t.CLICK_HELP_GOLD="im_opt_clickhelpgold",t.CLICK_HELP_TOKEN="im_opt_clickhelptoken",t.CLICK_HELP_CHIP="im_opt_clickhelpchip",t.CLICK_HELP_MSG="im_opt_clickhelpmsg",t.CHOOSED_CHIP="im_opt_choosedchip",t.RECORD_TIMEOUT="im_opt_recordtimeout",t.STOP_RECORD="im_opt_stoprecord",t.SEND_RECORD="im_opt_sendrecord",t.CANCEL_RECORD="im_opt_cancelrecord",t.PULL_HISTORY="im_opt_pullhistory",t.INPUT_UP="im_opt_inputup",t.INPUT_DOWN="im_opt_inputdown"}(t.Opt||(t.Opt={})),function(t){t.UPDATE_MSG_LIST="im_chtv_updatemsglist",t.ADD_MSG="im_chtv_addmsg",t.UPDATE_MSG="im_chtv_updatemsg",t.DEL_MSG="im_chtv_delmsg",t.INSERT_MSG="im_chtv_insertmsg",t.HELP_CD="im_chtv_helpcd",t.CLEAR="im_chtv_clear"}(t.ChatView||(t.ChatView={})),function(t){t.SELECT_EMOJ="im_pop_selectemoj",t.RECORD_VOICE="im_pop_recordvoice",t.SELECT_CHIPS="im_pop_selectchips"}(t.Popup||(t.Popup={}))}(i.IMEvent||(i.IMEvent={})),cc._RF.pop()},{}],IMHandler:[function(t,e,i){"use strict";cc._RF.push(e,"80de4O6+CZLmphX0xs6+siZ","IMHandler");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.IMHandler=void 0;var n=t("../../../script/app/base/handler/HandlerMgr"),r=t("../../../script/app/base/handler/ProxyHandler"),a=t("../../../script/app/event/Notify"),p=t("../../../script/app/model/DataProxy"),c=t("../../../script/lib/utils/ComUtils"),l=t("../../../script/plugin/pb/protofile/CMD_ClubMsg"),h=t("../model/IMDef"),d=t("../model/IMEvent"),u=t("../../../script/plugin/pb/protofile/GlobalMsgDef"),g=t("../../../script/app/const/Global"),f=t("./IMHelper"),I=l.CLUB_GAME_SUB_MSG,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SERVER_ID=192,e}return s(e,t),e.prototype.getName=function(){return"IMHandler"},e.prototype.regProto=function(t,e,i){return{protocol:t,subid:e,cb:i}},e.prototype.protocolConfig=function(){return[this.regProto(l.Msg_SC_NEWS_INFO,I.MSG_SC_SEND_CLUB_NEWS_DATA,this.onRtnHistoryMsg),this.regProto(l.Msg_SC_NEWS_INFO,I.MSG_SC_SEND_ONLINEUSER_NEWS_DATA,this.onRecvNewMsg),this.regProto(l.MSG_SC_NEWS_RESULT,I.MSG_SC_SEND_NEWS_STATUS_RESULT,this.onRtnHelpMsgResult),this.regProto(l.MSG_GET_USER_DWAR_REWARD,I.MSG_SC_SEND_USER_REWARD_DATA,this.onNoticeHelpReward),this.regProto(l.MSG_SC_SEND_REWARD,I.MSG_SC_SEND_RECEIVE_REWARD_DATA,this.onRtnHelpRewardResult),this.regProto(l.MSG_SC_SEND_UPDATE_HELP,I.MSG_SC_SEND_UPDATE_HELP_DATA,this.onRtnUpdateHelpMsg),this.regProto(l.MSG_SC_HELP_CD,I.MSG_SC_HELP_CD_RESULT,this.onRtnHelpCD)]},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(a.Notify.IM.REQ_HIS_LIST,this.ReqHistoryMsg),this.addEvent(a.Notify.IM.SEND_NEW_MSG,this.SendChatMsg),this.addEvent(a.Notify.IM.SEND_HELP,this.SendClickHelpMsg),this.addEvent(a.Notify.IM.REQ_GET_REWARD,this.SendGetHelpReward),this.addEvent(a.Notify.IM.REQ_UPDATE_MSG,this.ReqUpdateHelpMsg),this.addEvent(a.Notify.IM.REQ_HELP_CD,this.ReqHelpBtnCD),this.addEvent(a.Notify.IM.QUERY_HELP_REWARD,this.QueryHelpReward),this.addEvent(a.Notify.Club.RESP_MY_CLUB,this.onGetClubInfo),this.addEvent(d.IMEvent.Opt.CLICK_HELP_MSG,this.onClickHelpMsg),this.addEvent(d.IMEvent.Opt.PULL_HISTORY,this.onPullHistory),this.addEvent(a.Notify.Club.RESP_LEAVE,this.onQuitClub)},Object.defineProperty(e.prototype,"imData",{get:function(){return p.DataProxy.getInstance().imData},enumerable:!1,configurable:!0}),e.prototype.getMainID=function(){return u.MAIN_MSG_ID.MAIN_MSG_CLUB_SERVER_ID},e.prototype.getMsgHead=function(t,e){var i=t,o=void 0===e?i:e,s=new u.Msg_OtherServerHead;return s.dwGameID=i,s.dwGameTypeID=o,s.strUUID=this.userData.sessionId,s},e.prototype.ReqHistoryMsg=function(t){var e=new l.MSG_GET_HISTORY_NEWS;e.dwClubID=t.clubId,e.dwNewsID=t.lastMsgId||0,e.dwTime=t.dwTime||0,this.sendRequest(e,this.getMainID(),I.MSG_CS_GET_CLUB_NEWS_DATA,this.getMsgHead(this.SERVER_ID))},e.prototype.SendChatMsg=function(t){var e=new l.MSG_CS_NEWS_DATA;e.dwClubID=t.clubId,e.dwType=t.type,e.dwUserID=this.userData.userId;var i=new l.MSG_SC_NEWS_TYPE;switch(t.type){case l.NEWS_TYPE.NEWS_WORLD:var o=new l.WORLD_MSG;o.chMsgInfo=c.ComUtils.utf8StrToU8(t.text),i.tabWorldmMsg=o;break;case l.NEWS_TYPE.NEWS_VOICE:var s=new l.VOICE_MSG;s.chLinkAddress=c.ComUtils.utf8StrToU8(t.voiceUrl),s.dwTimeLong=t.voiceTime,i.tabVoicemMsg=s;break;case l.NEWS_TYPE.NEWS_PHIZ:var n=new l.PHIZ_MSG;n.dwPhizID=t.emojIdx,i.tabPhizmMsg=n;break;case l.NEWS_TYPE.NEWS_GOLD_HELP:case l.NEWS_TYPE.NEWS_PHYSICL_HELP:break;case l.NEWS_TYPE.NEWS_TATTER_HELP:var r=new l.ChipItem1;r.dwPieceId=t.chipsId,r.dwTableId=t.tableId,r.dwStar=t.star;var a=new l.MHELP_MSG;a.tabChipsData=r,i.tabHelpmMsg=a}e.tabDataInfo=i,this.sendRequest(e,this.getMainID(),I.MSG_CS_GET_USER_NEWS_DATA,this.getMsgHead(this.SERVER_ID)),t.type!==h.IMDef.MsgType.HELP_CHIP&&t.type!==h.IMDef.MsgType.HELP_GOLD&&t.type!==h.IMDef.MsgType.HELP_TOKEN||this.ReqHelpBtnCD(null)},e.prototype.SendClickHelpMsg=function(t){var e=new l.MSG_GET_NEWS_ID;e.dwClubID=t.clubId,e.dwHelpType=t.helpType,e.dwNewsID=t.msgId,e.dwTableId=t.tableId,e.dwChipId=t.chipsId,e.dwUserID=this.userData.userId,e.dwTime=t.dwTime,this.sendRequest(e,this.getMainID(),I.MSG_CS_GET_USER_REWARD_DATA,this.getMsgHead(this.SERVER_ID))},e.prototype.SendGetHelpReward=function(t){var e=new l.MSG_CS_GET_REWARD;if(e.dwType=t.dwHelpType,e.dwNewsID=t.dwMsgId,e.dwUserID=t.userInfo.dwUserID,t.chipsData){var i=t.chipsData,o=new l.ChipItem1;o.bNew=!0,o.dwPieceId=i.dwPieceId,o.dwStar=i.dwStar,o.dwTableId=i.dwTableId,e.tabChipsData=o}this.sendRequest(e,this.getMainID(),I.MSG_CS_GET_RECEIVE_REWARD_DATA,this.getMsgHead(this.SERVER_ID))},e.prototype.ReqUpdateHelpMsg=function(t){var e=new l.MSG_CS_GET_UPDATE_HELP;e.dwClubID=t.clubId,e.tabNewsID=t.msgId,e.dwTime=t.dwTime,this.sendRequest(e,this.getMainID(),I.MSG_CS_GET_UPDATE_HELP_DATA,this.getMsgHead(this.SERVER_ID))},e.prototype.ReqHelpBtnCD=function(){this.sendRequest(null,this.getMainID(),I.MSG_CS_GET_HELP_CD_DATA,this.getMsgHead(this.SERVER_ID))},e.prototype.QueryHelpReward=function(){this.sendRequest(null,this.getMainID(),I.MSG_CS_GET_HELP_REWARD_DATA,this.getMsgHead(this.SERVER_ID))},e.prototype.onRtnHistoryMsg=function(t){var e=this,i=t.data;if(0!==i.dwClubID){var o=i.dwClubID,s=i.tabNewsData,n=this.imData,r=n.history(o);s.length>0&&(s.forEach(function(t){var i=n.parseMsg(t,o);r.findMsgByIdWithTime(i.dwMsgId,i.dwTime)?r.updateMsg(i):(e.imData.setHasNew(!0),n.addOneMsg(o,i))}),n.addTimeMsg(o)),this.dispatch(d.IMEvent.ChatView.UPDATE_MSG_LIST,{list:r.getMsgList(),num:s.length})}},e.prototype.onRecvNewMsg=function(t){var e=this,i=t.data,o=i.dwClubID,s=i.tabNewsData,n=this.imData,r=n.history(o);s.forEach(function(t){var i=n.parseMsg(t,o);n.addOneMsg(o,i),n.addTimeMsg(o),e.dispatch(d.IMEvent.ChatView.ADD_MSG,{list:r.getMsgList(),num:s.length,newMsg:i})})},e.prototype.onRtnHelpMsgResult=function(t){var e=this,i=t.data,o=f.IMHelper.getClubID(),s=this.imData.history(o),n=s.filterMsgById(i.dwNewsID),r=null;n.forEach(function(t){t.helpMsg&&(r=t)}),i.tabNeswStatus&&r&&r.helpMsg&&(r.helpMsg.dwCurHelpCount=i.tabNeswStatus.dwNowCount,r.helpMsg.dwMaxHelpCount=i.tabNeswStatus.dwMaxCount,r.helpMsg.arrHelpUserIds=r.helpMsg.arrHelpUserIds||[],r.helpMsg.arrHelpUserIds.push(this.userData.userId),r.dwType===h.IMDef.MsgType.HELP_CHIP?(p.DataProxy.getInstance().tablesData.decreaseTableChip(r.helpMsg.chipItem.dwTableId,r.helpMsg.chipItem.dwPieceId),s.getMsgList().forEach(function(t){t.dwType===h.IMDef.MsgType.HELP_CHIP&&e.dispatch(d.IMEvent.ChatView.UPDATE_MSG,t)}),r.helpMsg.chipItem&&this.dispatch(a.Notify.Tables.REQ_TABLE_CHIPS_INFO,{tableId:r.helpMsg.chipItem.dwTableId,pieceId:r.helpMsg.chipItem.dwPieceId})):this.dispatch(d.IMEvent.ChatView.UPDATE_MSG,r))},e.prototype.onNoticeHelpReward=function(t){var e=this,i=t.data;i.tabRewardData&&i.tabRewardData.length>0&&(this.imData.helpRewardList=[],i.tabRewardData.forEach(function(t){e.imData.parseHelpReward(t)}),p.DataProxy.getInstance().comData.getLobbySubView()===g.gLobbySubView.Club?this.dispatch(a.Notify.IM.POP_HELP_REWARD,this.imData.helpRewardList):this.dispatch(a.Notify.IM.POP_REWARD_TIPS,f.IMHelper.getTipsReward()))},e.prototype.onRtnHelpRewardResult=function(t){var e=t.data;if(e.bIsSuc&&e.dwType===h.IMDef.MsgType.HELP_CHIP&&e.tabChipsData){var i=e.tabChipsData.dwTableId,o=e.tabChipsData.dwPieceId,s=p.DataProxy.getInstance().tablesData.tableList.find(function(t){return t.dwTableId===i});if(s){s.dwFinishNum++;var n=s.pieceList.find(function(t){return t.dwPieceId===o});n&&n.dwNum++}}},e.prototype.onRtnUpdateHelpMsg=function(t){var e=t.data,i=p.DataProxy.getInstance().club.getClubData().getMyClub(),o=this.imData.history(i.ID);if(e.tabNewsInfo&&o){var s=o.filterMsgById(e.tabNewsInfo.dwNewsID),n=null;s.forEach(function(t){t.helpMsg&&(n=t)}),n&&(n.helpMsg.dwCurHelpCount=e.tabNewsInfo.dwUserIDInfo.length,n.helpMsg.arrHelpUserIds=c.ComUtils.clone(e.tabNewsInfo.dwUserIDInfo),this.dispatch(d.IMEvent.ChatView.UPDATE_MSG,n))}},e.prototype.onRtnHelpCD=function(t){var e=t.data,i=this.imData.parseHelpCD(e);this.dispatch(d.IMEvent.ChatView.HELP_CD,i)},e.prototype.onGetClubInfo=function(t){t&&(this.imData.curClubId=t.ID,this.imData.userId=this.userData.userId)},e.prototype.onClickHelpMsg=function(t){if(t&&t.helpMsg){var e=t.helpMsg.chipItem&&t.helpMsg.chipItem.dwTableId,i=t.helpMsg.chipItem&&t.helpMsg.chipItem.dwPieceId;this.dispatch(a.Notify.IM.SEND_HELP,{msgId:t.dwMsgId,helpType:t.helpMsg.dwHelpType,clubId:t.dwClubId,tableId:e,chipsId:i,dwTime:t.dwTime})}},e.prototype.onGetLastMsg=function(){var t=p.DataProxy.getInstance().club.getClubData();if(t&&t.getMyClub()){var e=t.getMyClub().ID,i=this.imData.getLastMsg(e);if(i)return i}return null},e.prototype.getFirstMsg=function(){var t=p.DataProxy.getInstance().club.getClubData();if(t&&t.getMyClub()){var e=t.getMyClub().ID,i=this.imData.getFirstMsg(e);if(i)return i}return null},e.prototype.onPullHistory=function(t){var e=p.DataProxy.getInstance().club.getClubData();if(e&&e.getMyClub()){var i=e.getMyClub().ID,o=t.msgId||0;if(i){var s=this.imData.history(i),n=this.imData.getCloserMsg(i,o,!0,20);n.length>0&&(o=n[0].dwMsgId,this.imData.setHasNew(!0),n.forEach(function(t){s.addMsg(t)}),this.imData.addTimeMsg(i)),n.length>=10?this.dispatch(d.IMEvent.ChatView.UPDATE_MSG_LIST,{list:s.getMsgList(),num:n.length}):this.dispatch(a.Notify.IM.REQ_HIS_LIST,{clubId:i,lastMsgId:o,dwTime:t.dwTime})}}},e.prototype.onQuitClub=function(t){this.imData.quitClub(t),this.dispatch(d.IMEvent.ChatView.CLEAR)},e}(r.ProxyHandler);i.IMHandler=y,n.HandlerMgr.getInstance().addSubHandler(new y),cc._RF.pop()},{"../../../script/app/base/handler/HandlerMgr":void 0,"../../../script/app/base/handler/ProxyHandler":void 0,"../../../script/app/const/Global":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/utils/ComUtils":void 0,"../../../script/plugin/pb/protofile/CMD_ClubMsg":void 0,"../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../model/IMDef":"IMDef","../model/IMEvent":"IMEvent","./IMHelper":"IMHelper"}],IMHelpRewardDlg:[function(t,e,i){"use strict";cc._RF.push(e,"2e5d6jHPDpAX4qJXGtv/NG2","IMHelpRewardDlg");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMHelpRewardDlg=void 0;var r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/event/Notify"),p=t("../../../../script/app/language/LanguageCfg"),c=t("../../../../script/app/language/LanguageImpl"),l=t("../../../../script/lib/base/BottomBarView"),h=t("../../../../script/lib/base/CxComponent"),d=t("../../../../script/lib/i18n/i18nHelper"),u=t("../../i18n/IMI18n"),g=cc._decorator,f=g.ccclass,I=g.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndHead=null,e.labNickName=null,e.labTips=null,e.labReward=null,e}return s(e,t),e.prototype.init=function(t){this.mRewardList=t},e.prototype.start=function(){var t=this;this.labTips&&(this.labTips.language=d.i18nHelper.makeLanguage(u.IMI18n.k.help_result_donate_you,r.gAssetBundleName.IM_SRC)),this.openNext(),l.BottomBarView.setBottomBar(this.node,[{style:r.gColorStyle.GREEN,text:c.LanguageImpl.i18n[p.LangKey.text_collect],callback:function(){t.mCurReward&&(t.dispatch(a.Notify.IM.REQ_GET_REWARD,t.mCurReward),t.openNext())}}])},e.prototype.setUserInfo=function(t){t&&(this.dispatch(a.Notify.Head.CREATE_HEAD,{parent:this.ndHead,userId:t.dwUserID,size:this.ndHead.getContentSize(),faceId:t.sysFaceId,robot:!1,custFaceId:t.custFaceId,url:t.headURL,save:!1,level:t.level,rankLever:t.ranklevel||0,rankStartLever:t.rankstarlevel||0}),this.labNickName&&(this.labNickName.string=t.strNickName))},e.prototype.setReward=function(t){this.labReward&&(this.labReward.string=t)},e.prototype.initView=function(t){this.node.scale=.7,this.node.opacity=115,cc.tween(this.node).to(.25,{opacity:255,scale:1},{easing:cc.easing.sineOut}).start(),this.setUserInfo(t.userInfo),this.setReward(t.strRewardTips)},e.prototype.openNext=function(){var t=this.mRewardList.shift();this.mCurReward=t,t?this.initView(t):this.close()},n([I(cc.Node)],e.prototype,"ndHead",void 0),n([I(cc.Label)],e.prototype,"labNickName",void 0),n([I(cc.Label)],e.prototype,"labTips",void 0),n([I(cc.Label)],e.prototype,"labReward",void 0),n([f],e)}(h.CxComponent);i.IMHelpRewardDlg=y,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/language/LanguageImpl":void 0,"../../../../script/lib/base/BottomBarView":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../i18n/IMI18n":"IMI18n"}],IMHelper:[function(t,e,i){"use strict";cc._RF.push(e,"ca9adNa4MxCWo4sdhzfns6d","IMHelper"),Object.defineProperty(i,"__esModule",{value:!0}),i.IMHelper=void 0;var o=t("../../../script/app/const/Global"),s=t("../../../script/app/event/Notify"),n=t("../../../script/app/model/DataProxy"),r=t("../../../script/app/platform/MediaUtils"),a=t("../../../script/app/view/ComUI"),p=t("../../../script/lib/base/Callback"),c=t("../../../script/lib/event/EventDispatcher"),l=t("../../../script/lib/utils/ComUtils"),h=t("../../../script/lib/utils/Logger"),d=t("../../../script/lib/utils/VoiceHelper"),u=t("../i18n/IMI18n"),g=t("../model/IMDef"),f=function(){function t(){}return t.getClubID=function(){var t=n.DataProxy.getInstance().club.getClubData().getMyClub();return t&&t.ID||0},t.getTipsReward=function(){var t=[o.gShopHBType.BOX,o.gShopHBType.CHIPS,o.gShopHBType.GOLD,o.gShopHBType.POWER],e=n.DataProxy.getInstance().club;if(e){var i=e.getClubChestFirstCanRecv();if(i)return{num:e.getClubChestListData().dwGetRewardNum,type:o.gShopHBType.BOX,index:i.dwBoxId}}var s=n.DataProxy.getInstance().imData;if(s){var r=s.helpRewardList;if(r)for(var a=t.shift();a;){var p=r.find(function(t){return t.dwRewardType===a});if(p)return{num:p.dwRewardNum,type:a};a=t.shift()}return null}},t.isShowHelpBtn=function(t){if(!t)return!1;var e=!t.isMeSend,i=n.DataProxy.getInstance().userData.userId,o=t.helpMsg;return(o&&o.arrHelpUserIds.includes(i)||o.dwCurHelpCount>=o.dwMaxHelpCount)&&(e=!1),!!e&&this.isCanHelp(t)},t.isNeedUpdate=function(t){var e=t&&t.dwMsgId||0,i=t&&t.helpMsg,o=i&&i.dwCurHelpCount>=i.dwMaxHelpCount;return cc.log("\u662f\u5426\u9700\u8981\u66f4\u65b0",e,o),e>0&&!o&&(c.EventDispatcher.getInstance().dispatch(s.Notify.IM.REQ_UPDATE_MSG,{clubId:this.getClubID(),msgId:e,dwTime:t.dwTime}),!0)},t.formatTime=function(t){var e=new Date,i=new Date(t);return e.getDate()==i.getDate()?i.getHours()+":"+l.ComUtils.pad(i.getMinutes(),2):l.ComUtils.pad(i.getMonth()+1,2)+"/"+l.ComUtils.pad(i.getDate(),2)+" "+i.getHours()+":"+l.ComUtils.pad(i.getMinutes(),2)},t.playVoice=function(e,i){var o=this;if(r.MediaUtils.isSupport()){if(e&&e.voiceMsg&&e.voiceMsg.strVoiceUrl){var l=e.dwMsgId,g=e.dwTime;d.VoiceHelper.download(e.voiceMsg.strVoiceUrl).then(function(a){cc.log("[playVoice] "+a),r.MediaUtils.startPlayVoice(a,new p.Callback(o,function(t){c.EventDispatcher.getInstance().dispatch(s.Notify.Base.RESUME_MUSIC),platform.deleteFile(a),t.isSucc?cc.log("[playVoice] startPlayVoice isSucc"+a):cc.log("[playVoice] error",JSON.stringify(t))})),c.EventDispatcher.getInstance().dispatch(s.Notify.Base.PAUSE_MUSIC),e.hasRead=!0,e=null;var h=t.getClubID(),d=n.DataProxy.getInstance().imData.history(h);if(d){var u=d.findMsgByIdWithTime(l,g);u&&(u.hasRead=!0,n.DataProxy.getInstance().imData.updateReadSt(h,u))}i&&i()}).catch(function(t){h.Logger.info(t)})}}else a.ComUI.showToast(u.IMI18n.i18n.not_support,.5,2)},t.stopPlay=function(){c.EventDispatcher.getInstance().dispatch(s.Notify.Base.RESUME_MUSIC),r.MediaUtils.isSupport()&&r.MediaUtils.stopPlayVoice()},t.isCanHelp=function(t){if(!t||!t.helpMsg)return!1;if(t.dwType===g.IMDef.MsgType.HELP_GOLD||t.dwType===g.IMDef.MsgType.HELP_TOKEN)return!0;if(t.dwType===g.IMDef.MsgType.HELP_CHIP){var e=t.helpMsg.chipItem;if(e){var i=n.DataProxy.getInstance().tablesData.getTableChip(e.dwTableId,e.dwPieceId);if(i&&i.dwNum>1)return!0}}return!1},t}();i.IMHelper=f,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/platform/MediaUtils":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/Callback":void 0,"../../../script/lib/event/EventDispatcher":void 0,"../../../script/lib/utils/ComUtils":void 0,"../../../script/lib/utils/Logger":void 0,"../../../script/lib/utils/VoiceHelper":void 0,"../i18n/IMI18n":"IMI18n","../model/IMDef":"IMDef"}],IMI18n:[function(t,e,i){"use strict";cc._RF.push(e,"00827MHza9NiJuYac09I/Hb","IMI18n"),Object.defineProperty(i,"__esModule",{value:!0}),i.IMI18IT=i.IMI18EN=i.IMI18ZH=i.IMI18n=void 0;var o=t("../../../script/app/const/Global"),s=t("../../../script/app/language/LanguageImpl"),n=t("../../../script/lib/base/Language"),r=function(){function t(){}return t.setLan=function(e){return t.setLanguage(e)},Object.defineProperty(t,"bundle",{get:function(){return o.gAssetBundleName.IM_SRC},enumerable:!1,configurable:!0}),t.setLanguage=function(t){if(!this.lan||this.lan.language!==t){switch(this.lan=null,t){case cc.sys.LANGUAGE_ENGLISH:this.lan=new p;break;case cc.sys.LANGUAGE_ITALIAN:this.lan=new c;break;case cc.sys.LANGUAGE_CHINESE:this.lan=new a;break;default:this.lan=new p}return s.i18n[""+this.bundle]={},s.i18n[""+this.bundle]=this.lan,s.i18n}},Object.defineProperty(t,"i18n",{get:function(){return this.lan},enumerable:!1,configurable:!0}),t.k={input_placeholder:"input_placeholder",choose_unfinish_table:"choose_unfinish_table",choose_notget_chip:"choose_notget_chip",request_chip:"request_chip",record_tips:"record_tips",record_cd:"record_cd",request_title:"request_title",help_result_donate_you:"help_result_donate_you",help_cd_tips:"help_cd_tips",not_support:"not_support"},t}();i.IMI18n=r;var a=function(){this.language=cc.sys.LANGUAGE_CHINESE,this.input_placeholder="\u6700\u591a\u8f93\u5165200\u4e2a\u5b57",this.choose_unfinish_table="\u9009\u62e9\u672a\u5b8c\u6210\u7684\u684c\u5b50",this.choose_notget_chip="\u9009\u62e9\u672a\u83b7\u5f97\u7684\u788e\u7247",this.request_chip="\u6c42\u788e\u7247",this.record_tips="\u5411\u4e0a\u6ed1\u52a8\u53d6\u6d88\u5f55\u5236",this.record_cd="\u6b63\u5728\u5f55\u97f3 (%ss)",this.record_too_short="\u8bed\u97f3\u65f6\u95f4\u8fc7\u77ed",this.help_result_donate_you="\u8d60\u9001\u7ed9\u4f60",this.request_title="\u6c42 {0}",this.help_cd_tips="Request ? after ",this.not_support="\u5f53\u524d\u7248\u672c\u4e0d\u652f\u6301\uff0c\u8bf7\u4e0b\u8f7d\u6700\u65b0\u7248\u672c",this.hold_to_talk="\u6309\u4f4f\u5f55\u97f3",this.release_to_send="\u677e\u5f00\u53d1\u9001"};i.IMI18ZH=a;var p=function(){this.language=cc.sys.LANGUAGE_ENGLISH,this.input_placeholder="No more than 200 Characters",this.choose_unfinish_table="Please select an unfinished table",this.choose_notget_chip="Please select the chip you don't have",this.request_chip="Requst a chip",this.record_tips="Slide up to cancel",this.record_cd="Talking(%ss)",this.record_too_short="Message too short",this.help_result_donate_you="Donate to you",this.request_title="requesting {0}",this.help_cd_tips="Request ? after ",this.not_support="Your version is too low, please update to the latest version",this.hold_to_talk="Hold to Talk",this.release_to_send="Release to Send"};i.IMI18EN=p;var c=function(){this.language=cc.sys.LANGUAGE_ITALIAN,this.input_placeholder="Non pi\xf9 di 200 caratteri",this.choose_unfinish_table="Seleziona una tabella incompiuta",this.choose_notget_chip="Seleziona il chip che non possiedi",this.request_chip="Richiedi un chip",this.record_tips="Scorri verso l'alto per annullare",this.record_cd="Parlando (%ss)",this.record_too_short="Messaggio troppo corto",this.help_result_donate_you="Dona a te",this.request_title="chiedendo {0}",this.help_cd_tips="Richiedi ? dopo ",this.not_support="La tua versione \xe8 troppo bassa, aggiorna all'ultima versione",this.hold_to_talk="Tieni premuto per parlare",this.release_to_send="Aspetta per parlare"};i.IMI18IT=c,n.Language.getInstance().addI18n(r),cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/language/LanguageImpl":void 0,"../../../script/lib/base/Language":void 0}],IMInputArea:[function(t,e,i){"use strict";cc._RF.push(e,"1f1b9SolLVCjZnaOJ4fmArN","IMInputArea");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMInputArea=void 0;var r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/event/Notify"),p=t("../../../../script/app/view/ComUI"),c=t("../../../../script/lib/base/Binder"),l=t("../../../../script/lib/base/Callback"),h=t("../../../../script/lib/i18n/i18nHelper"),d=t("../../../../script/lib/utils/ComUtils"),u=t("../../i18n/IMI18n"),g=t("../../model/IMEvent"),f=t("./IMTouchListenter"),I=cc._decorator,y=I.ccclass,M=I.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.svEmoj=null,e.ndMainPanel=null,e.editBox=null,e.btnVoice=null,e.tgVoice=null,e.tgEmoj=null,e.btnHelpGold=null,e.btnHelpToken=null,e.btnHelpChip=null,e.sfYellowBtn=null,e.sfGreyBtn=null,e.sfYellowCenterBtn=null,e.sfGreyCenterBtn=null,e.delayLock=!0,e.mDefEmojY=0,e}return s(e,t),e.prototype.getLogicName=function(){return"LIMInputArea"},Object.defineProperty(e.prototype,"logic",{get:function(){return this._logic},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.ndMainPanel&&(this.mDefEmojY=this.ndMainPanel.y)},e.prototype.start=function(){if(t.prototype.start.call(this),this.editBox&&(this.editBox.node.on("editing-did-began",this.onEditingDidBegan,this),this.editBox.node.on("editing-did-ended",this.onEditingDidEnded,this),this.editBox.node.on("editing-return",this.onEditingReturn,this),this.editBox.placeholderLabel.language=h.i18nHelper.makeLanguage(u.IMI18n.k.input_placeholder,r.gAssetBundleName.IM_SRC)),this.tgVoice&&this.tgVoice.node.on("toggle",this.onToggleVoiceClicked,this),this.tgEmoj&&this.tgEmoj.node.on("toggle",this.onToggleEmojClicked,this),this.btnHelpGold&&this.btnHelpGold.node.on("click",this.onBtnHelpGoldClicked,this),this.btnHelpToken&&this.btnHelpToken.node.on("click",this.onBtnHelpTokenClicked,this),this.btnHelpChip&&this.btnHelpChip.node.on("click",this.onBtnHelpChipClicked,this),this.svEmoj)for(var e=this.svEmoj.content.children,i=0;i<e.length;i++){var o=e[i];o.on("click",this.onEmojClick,this),o.name=""+(i+1)}if(this.btnVoice){var s=this.btnVoice.getComponent(f.IMTouchListenter)||this.btnVoice.node.addComponent(f.IMTouchListenter);s&&s.setCallback(this.onBtnVoiceClicked.bind(this)),this.btnVoice&&(this.btnVoice.node.active=!1)}},e.prototype.onEnable=function(){this.dispatch(a.Notify.IM.REQ_HELP_CD),this.displayEmojPanel(!1,!1)},e.prototype.onEditingDidBegan=function(){},e.prototype.onEditingDidEnded=function(t){this.strInputContent=t.string.trim(),this.onSendBtnClick(),t.string=""},e.prototype.onEditingReturn=function(t){this.strInputContent=t.string.trim(),this.onSendBtnClick(),t.string=""},e.prototype.onSendBtnClick=function(){this.strInputContent.length>0&&(this.logic.sendInputText(this.strInputContent),this.strInputContent="")},e.prototype.onToggleVoiceClicked=function(t){this.btnVoice&&(this.btnVoice.node.active=t.isChecked)},e.prototype.onBtnVoiceClicked=function(t){cc.log("onBtnVoiceClicked "+t),t===f.TouchState.BEGIN?(this.btnVoice&&(this.btnVoice.getComponentInChildren(cc.Label).string=u.IMI18n.i18n.release_to_send),this.logic.startRecordVoice()):t===f.TouchState.END?this.btnVoice&&(this.btnVoice.getComponentInChildren(cc.Label).string=u.IMI18n.i18n.hold_to_talk):t===f.TouchState.CANCELED?this.btnVoice&&(this.btnVoice.getComponentInChildren(cc.Label).string=u.IMI18n.i18n.hold_to_talk):t===f.TouchState.OUTSIDE?this.btnVoice&&(this.btnVoice.getComponentInChildren(cc.Label).string=u.IMI18n.i18n.release_to_send):t===f.TouchState.INSIDE&&this.btnVoice&&(this.btnVoice.getComponentInChildren(cc.Label).string=u.IMI18n.i18n.release_to_send)},e.prototype.onToggleEmojClicked=function(t){this.displayEmojPanel(t.isChecked,!0)},e.prototype.onBtnHelpGoldClicked=function(){!0===this.delayLock&&(d.ComUtils.delayLimit(this,200),this.logic.reqGoldHelp())},e.prototype.onBtnHelpTokenClicked=function(){!0===this.delayLock&&(d.ComUtils.delayLimit(this,200),this.logic.reqTokenHelp())},e.prototype.onBtnHelpChipClicked=function(){!0===this.delayLock&&(d.ComUtils.delayLimit(this,200),this.logic.reqChipHelp())},e.prototype.onEmojClick=function(t){this.logic.sendEmoj(parseInt(t.name))},e.prototype.displayEmojPanel=function(t,e){var i=this;if(this.tgEmoj&&(this.tgEmoj.isChecked=t),this.ndMainPanel){var o=this.ndMainPanel.getChildByName("sp_bg");if(e)if(t){p.ComUI.addMask(this.node,this.ndMainPanel,!1,new l.Callback(this,function(){i.displayEmojPanel(!1,!0)}));var s=this.ndMainPanel.height-this.node.height+30;cc.tween(this.ndMainPanel).to(.25,{y:s},{easing:cc.easing.sineIn}).start(),cc.tween(o).to(.25,{opacity:255}).start(),this.dispatch(g.IMEvent.Opt.INPUT_UP,s)}else{var n;(n=this.node.getChildByName("Mask"))&&this.node.removeChild(n),cc.tween(this.ndMainPanel).to(.25,{y:this.mDefEmojY},{easing:cc.easing.sineOut}).start(),cc.tween(o).to(.25,{opacity:0}).start(),this.dispatch(g.IMEvent.Opt.INPUT_DOWN)}else(n=this.node.getChildByName("Mask"))&&this.node.removeChild(n),this.ndMainPanel.y=this.mDefEmojY,o.opacity=0,this.dispatch(g.IMEvent.Opt.INPUT_DOWN)}},e.prototype.updateBtnCD=function(t,e){var i,o,s=Date.now()/1e3-e>0;switch(t){case 0:o=this.btnHelpGold.node,i=s?this.sfYellowBtn:this.sfGreyBtn;break;case 1:o=this.btnHelpToken.node,i=s?this.sfYellowCenterBtn:this.sfGreyCenterBtn;break;case 2:o=this.btnHelpChip.node,i=s?this.sfYellowBtn:this.sfGreyBtn}var n=o.getChildByName("Background");if(n&&i){var r=n.getComponent(cc.Sprite);r&&(r.spriteFrame=i)}},n([M(cc.ScrollView)],e.prototype,"svEmoj",void 0),n([M(cc.Node)],e.prototype,"ndMainPanel",void 0),n([M(cc.EditBox)],e.prototype,"editBox",void 0),n([M(cc.Button)],e.prototype,"btnVoice",void 0),n([M(cc.Toggle)],e.prototype,"tgVoice",void 0),n([M(cc.Toggle)],e.prototype,"tgEmoj",void 0),n([M(cc.Button)],e.prototype,"btnHelpGold",void 0),n([M(cc.Button)],e.prototype,"btnHelpToken",void 0),n([M(cc.Button)],e.prototype,"btnHelpChip",void 0),n([M(cc.SpriteFrame)],e.prototype,"sfYellowBtn",void 0),n([M(cc.SpriteFrame)],e.prototype,"sfGreyBtn",void 0),n([M(cc.SpriteFrame)],e.prototype,"sfYellowCenterBtn",void 0),n([M(cc.SpriteFrame)],e.prototype,"sfGreyCenterBtn",void 0),n([y],e)}(c.BaseUI);i.IMInputArea=m,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/Binder":void 0,"../../../../script/lib/base/Callback":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../i18n/IMI18n":"IMI18n","../../model/IMEvent":"IMEvent","./IMTouchListenter":"IMTouchListenter"}],IMRewardTips:[function(t,e,i){"use strict";cc._RF.push(e,"5fa6dETKClK7aYSuh/Ha5P8","IMRewardTips");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../script/app/const/Global"),a=t("../../../script/app/event/Notify"),p=t("../../../script/lib/base/CxComponent"),c=t("../controller/IMHelper"),l=cc._decorator,h=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spBg=null,e.spReward=null,e.sfBgYellow=null,e.sfBgBlue=null,e.sfBgNormal=null,e.sfGold=null,e.sfToken=null,e.sfChip=null,e.boxSpriteAtlas=null,e.mBoxScale=.75,e.mViewType=r.gLobbySubView.Scopa,e}return s(e,t),e.prototype.init=function(t){this.mAwardData=t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.active=!1,this.dispatch(a.Notify.IM.QUERY_HELP_REWARD),this.initView()},e.prototype.listEvent=function(){return new Map([[a.Notify.IM.POP_REWARD_TIPS,this.onGetRewards],[a.Notify.Lobby.SWICTH_VIEW,this.onSwitchView],[a.Notify.Club.RESP_CLUB_REWARD_INFO,this.onGetClubBoxRewardsInfo]])},e.prototype.start=function(){this.getComponent(cc.Button)||this.addComponent(cc.Button),this.node.on("click",this.onClick,this)},e.prototype.initView=function(){if(this.mAwardData=c.IMHelper.getTipsReward(),this.mAwardData){this.node.active=!0;var t=void 0,e=void 0,i=1;switch(this.mAwardData.type){case r.gShopHBType.GOLD:t=this.sfBgYellow,e=this.sfGold;break;case r.gShopHBType.POWER:t=this.sfBgBlue,e=this.sfToken;break;case r.gShopHBType.CHIPS:t=this.sfBgNormal,e=this.sfChip;break;case r.gShopHBType.BOX:t=this.sfBgNormal,i=this.mBoxScale,this.boxSpriteAtlas&&(e=this.boxSpriteAtlas.getSpriteFrame("box"+this.mAwardData.index+"_1"))}this.spBg&&t&&(this.spBg.spriteFrame=t),this.spReward&&e&&(this.spReward.spriteFrame=e,this.spReward.node.scale=i),this.spBg.node.stopAllActions(),cc.tween(this.spBg.node).repeatForever(cc.tween(this.spBg.node).to(.6,{scale:.7},{easing:cc.easing.sineIn}).to(.4,{scale:1},{easing:cc.easing.sineIn})).start()}},e.prototype.onClick=function(){this.mAwardData=null,this.dispatch(a.Notify.Club.ENTER_CLUB_MAIN_VIEW),this.clear()},e.prototype.clear=function(){this.node.active=!1,this.node.stopAllActions()},e.prototype.onSwitchView=function(t){this.mViewType=t,t==r.gLobbySubView.Club?this.clear():this.initView()},e.prototype.onGetRewards=function(t){t&&(this.mAwardData=t,this.node.active=!0,this.initView())},e.prototype.onGetClubBoxRewardsInfo=function(){this.mViewType==r.gLobbySubView.Club?this.clear():this.initView()},n([d({type:cc.Sprite,tooltip:"\u80cc\u666f"})],e.prototype,"spBg",void 0),n([d({type:cc.Sprite,tooltip:"\u5956\u54c1\u56fe\u7247"})],e.prototype,"spReward",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u9ec4\u8272\uff0c\u91d1\u5e01\u80cc\u666f"})],e.prototype,"sfBgYellow",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u84dd\u8272\uff0c\u80fd\u91cf\u80cc\u666f"})],e.prototype,"sfBgBlue",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u5b9d\u7bb1\uff0c\u788e\u7247\u80cc\u666f"})],e.prototype,"sfBgNormal",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u91d1\u5e01"})],e.prototype,"sfGold",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u80fd\u91cf"})],e.prototype,"sfToken",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u788e\u7247"})],e.prototype,"sfChip",void 0),n([d({type:cc.SpriteAtlas,tooltip:"\u5956\u54c1\u56fe\u7247"})],e.prototype,"boxSpriteAtlas",void 0),n([h],e)}(p.CxComponent);i.default=u,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/event/Notify":void 0,"../../../script/lib/base/CxComponent":void 0,"../controller/IMHelper":"IMHelper"}],IMTableCell:[function(t,e,i){"use strict";cc._RF.push(e,"7d1de49DJxL7pNtBZYZRGhv","IMTableCell");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMTableCell=void 0;var r=t("../../../../script/lib/base/CxComponent"),a=t("./IMTableItem"),p=cc._decorator,c=p.ccclass,l=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfTableItem=null,e._cellIndex=0,e._actPlayed=!1,e}return s(e,t),e.prototype.onLoad=function(){},e.prototype.updateItem=function(t,e,i){if(this._cellIndex=t,e&&this.pfTableItem)for(var o=0;o<3;++o){var s=this.node.getChildByName(o.toString()),n=e[o];n?(s||(s=cc.instantiate(this.pfTableItem),this.node.addChild(s,0,o.toString())),s.getComponent(a.IMTableItem).init(o,n,i),s.active=!0):s&&(s.active=!1)}this._actPlayed||(this._actPlayed=!0)},n([l({type:cc.Node,tooltip:"cell\u7684\u5185\u5bb9"})],e.prototype,"pfTableItem",void 0),n([c],e)}(r.CxComponent);i.IMTableCell=h,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"./IMTableItem":"IMTableItem"}],IMTableChip:[function(t,e,i){"use strict";cc._RF.push(e,"ac2f0DxJSZMY7z2/ZSBpliG","IMTableChip");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMTableChip=void 0;var r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/module/tables/TableSkinMgr"),p=t("../../../../script/app/view/ComUI"),c=t("../../../../script/lib/base/CxComponent"),l=cc._decorator,h=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spPieceBg=null,e.layoutStars=null,e.labInfo=null,e.tableId=0,e.pieceId=0,e.bNew=!1,e.mChipsInfo=null,e.mbCanClick=!1,e}return s(e,t),e.prototype.init=function(t){this.mChipsInfo=t,this.mbCanClick=!1,t&&(this.tableId=t.dwTableId||0,this.pieceId=t.dwPieceId||0,this.bNew=t.bNew||0),this.clear(),this.initView()},e.prototype.clear=function(){for(var t=this.layoutStars.node.children,e=0;e<t.length;e++)t[e].active=!1},e.prototype.initView=function(){if(this.spPieceBg){this.spPieceBg.node.active=!0;var t=a.TableSkinMgr.getTableCfgById(this.tableId);t&&p.ComUI.setSprite(this.spPieceBg.node,t.smlbg,r.gAssetBundleName.TABLES_RES)}for(var e=this.layoutStars.node.children,i=0;i<e.length;i++)i<this.mChipsInfo.dwStar?e[i].active=!0:e[i].active=!1;this.labInfo&&(this.labInfo.node.active=!0,this.labInfo.string=this.tableId+"-"+this.pieceId)},n([d({type:cc.Sprite,tooltip:"\u788e\u7247\u80cc\u666f"})],e.prototype,"spPieceBg",void 0),n([d({type:cc.Layout,tooltip:"\u661f\u661f\u5217\u8868"})],e.prototype,"layoutStars",void 0),n([d({type:cc.Label,tooltip:"\u788e\u7247\u4fe1\u606f\uff0c\u684c\u5b50ID-\u788e\u7247ID"})],e.prototype,"labInfo",void 0),n([h],e)}(c.CxComponent);i.IMTableChip=u,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0}],IMTableItem:[function(t,e,i){"use strict";cc._RF.push(e,"56b012pgs5HLqTsl0YJQ+Ij","IMTableItem");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMTableItem=void 0;var r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/model/DataProxy"),p=t("../../../../script/app/module/tables/TableSkinMgr"),c=t("../../../../script/app/view/ComUI"),l=t("../../../../script/lib/base/CxComponent"),h=cc._decorator,d=h.ccclass,u=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pMainIcon=null,e.pNameLabel=null,e.pProgressBar=null,e.pProgressLabel=null,e.pStarNode=null,e.labTableNum=null,e.mActPlayed=!1,e.mIndex=0,e}return s(e,t),e.prototype.init=function(t,e,i){this.mIndex=t,this.callback=i,e&&(this.mItemData=e,this.mTableCfg=p.TableSkinMgr.getTableCfgById(this.mItemData.dwTableId),this.initLayer())},e.prototype.start=function(){this.node.on("click",this.onClick,this)},e.prototype.playAction=function(){this.mActPlayed||(this.node.opacity=0,this.node.scale=.8,cc.tween(this.node).delay(.025*this.mIndex).parallel(cc.tween(this.node).to(.15,{scale:1},{easing:cc.easing.backOut}),cc.tween(this.node).to(.2,{opacity:255},{easing:cc.easing.sineInOut})).start())},e.prototype.initLayer=function(){this.mItemData&&this.mTableCfg&&(this.initMainIcon(),this.initStar(),this.initName(),this.initProgressBar(),this.initFinishLabel())},e.prototype.initMainIcon=function(){if(this.pMainIcon){var t="table_icon_"+this.mTableCfg.id;c.ComUI.setSprite(this.pMainIcon.node,t,r.gAssetBundleName.TABLES_RES)}this.labTableNum&&(this.labTableNum.string=""+this.mItemData.dwTableId)},e.prototype.initStar=function(){for(var t=this.mItemData.dwStar,e=this.pStarNode.children,i=0;i<e.length;i++)e[i].active=i<t},e.prototype.initName=function(){if(this.pNameLabel){var t=a.DataProxy.getInstance().tablesData.getTableName(this.mItemData.dwTableId);this.pNameLabel.string=t}},e.prototype.initProgressBar=function(){if(this.pProgressBar&&this.pProgressLabel)if(this.mItemData.bFinish)this.pProgressBar.node.active=!1;else{this.pProgressBar.node.active=!0;var t=this.mItemData.dwTotal>0?this.mItemData.dwFinishNum/this.mItemData.dwTotal:0;this.pProgressBar.progress=t,this.pProgressLabel.string=this.mItemData.dwFinishNum+"/"+this.mItemData.dwTotal}},e.prototype.initFinishLabel=function(){this.pProgressLabel&&(this.pProgressLabel.node.active=!this.mItemData.bFinish)},e.prototype.onClick=function(){this.mItemData.dwPreTableId>0||this.callback&&this.callback.call(this.mItemData)},n([u(cc.Sprite)],e.prototype,"pMainIcon",void 0),n([u(cc.Label)],e.prototype,"pNameLabel",void 0),n([u(cc.ProgressBar)],e.prototype,"pProgressBar",void 0),n([u(cc.Label)],e.prototype,"pProgressLabel",void 0),n([u(cc.Node)],e.prototype,"pStarNode",void 0),n([u({type:cc.Label,tooltip:"\u684c\u5b50\u7f16\u53f7"})],e.prototype,"labTableNum",void 0),n([d],e)}(l.CxComponent);i.IMTableItem=g,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0}],IMTablePiece:[function(t,e,i){"use strict";cc._RF.push(e,"44891LxcwVMuYuqxuzND4lB","IMTablePiece");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMTablePiece=void 0;var r=t("../../../../script/lib/base/CxComponent"),a=cc._decorator,p=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spPic=null,e.spStarBg=null,e.layoutStars=null,e.labNum=null,e.iNum=0,e}return s(e,t),e.prototype.init=function(t){this.iPieceId=t.dwPieceId||0,this.iNum=t.dwNum,this.setPeiceNum(t.dwNum),this.setPeiceStar(t.dwStar),this.setBgState(t.dwNum)},e.prototype.setCallback=function(t){this.callback=t},e.prototype.start=function(){0===this.iNum&&(this.node.getComponent(cc.Button)||this.node.addComponent(cc.Button),this.node.on("click",this.onClick,this))},e.prototype.setPeiceNum=function(t){this.labNum&&(this.iNum=t,t--,this.labNum.node.parent.active=t>=1,t>=1&&(this.labNum.string="+"+t))},e.prototype.setPeiceStar=function(t){if(this.layoutStars){for(var e=this.layoutStars.node.children,i=0;i<e.length;i++)e[i].active=i<t;this.layoutStars.updateLayout()}},e.prototype.clearStar=function(){this.layoutStars&&this.layoutStars.node.children.forEach(function(t){t.active=!1})},e.prototype.setBgState=function(t){this.spPic&&(this.spPic.node.active=t<=0)},e.prototype.updateView=function(t){this.setPeiceNum(t.dwNum),this.setPeiceStar(t.dwStar),this.setBgState(t.dwNum)},e.prototype.clear=function(){this.clearStar(),this.setPeiceNum(0),this.setBgState(0)},e.prototype.setFinish=function(){this.clearStar(),this.setPeiceNum(0),this.spStarBg&&(this.spStarBg.node.active=!1),this.setBgState(1)},e.prototype.onClick=function(){this.callback&&this.callback.call()},e.NAME="IMTablePiece",n([c({type:cc.Sprite,tooltip:"\u788e\u7247\u9ed8\u8ba4\u7684\u56fe"})],e.prototype,"spPic",void 0),n([c({type:cc.Sprite,tooltip:"\u7b49\u7ea7\u7684\u80cc\u666f"})],e.prototype,"spStarBg",void 0),n([c({type:cc.Layout,tooltip:"\u661f\u661flayout"})],e.prototype,"layoutStars",void 0),n([c({type:cc.Label,tooltip:"\u6570\u91cf"})],e.prototype,"labNum",void 0),n([p],e)}(r.CxComponent);i.IMTablePiece=l,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0}],IMTouchListenter:[function(t,e,i){"use strict";cc._RF.push(e,"b5227HS6sZP9o9WsA1OTZlK","IMTouchListenter");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.IMTouchListenter=i.TouchState=void 0;var r,a=t("../../../../script/app/event/Notify"),p=t("../../../../script/lib/base/CxComponent");(function(t){t[t.BEGIN=1]="BEGIN",t[t.LONG_BEGIN=2]="LONG_BEGIN",t[t.END=3]="END",t[t.OUTSIDE=4]="OUTSIDE",t[t.INSIDE=5]="INSIDE",t[t.CANCELED=6]="CANCELED"})(r=i.TouchState||(i.TouchState={}));var c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.longtime=200,e.bLongTouch=!0,e._touchStartTime=0,e._touchID=-1,e._touchIn=!1,e._touchCancel=!1,e._touchOutSide=!1,e}return s(e,t),e.prototype.setCallback=function(t){this.cb=t},e.prototype.onEnable=function(){this._touchIn=!1,this._touchStartTime=0,this._touchID=-1,this._touchOutSide=!1,this.addTouchEvent()},e.prototype.onDisable=function(){this._touchStartTime=0,this._touchID=-1,this.rmTouchEvent()},e.prototype.addTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},e.prototype.rmTouchEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},e.prototype.onTouchBegin=function(t){var e=this;this._touchID>=0||(this._touchOutSide=!1,this._touchID=t.getID(),this._touchStartTime=Date.now(),this._box=this.node.getBoundingBoxToWorld(),this.dispatch(a.Notify.Touch.TOUCH_START,t),this.cb&&this.cb(r.BEGIN),this.bLongTouch&&setTimeout(function(){e.cb&&e.cb(r.LONG_BEGIN)},this.longtime),this._touchIn=!0)},e.prototype.onTouchMove=function(t){this.dispatch(a.Notify.Touch.TOUCH_MOVE,t);var e=this._box.contains(t.getLocation());e||this._touchOutSide?e&&this._touchOutSide&&(this._touchOutSide=!1,this.cb&&this.cb(r.INSIDE)):(this.cb&&this.cb(r.OUTSIDE),this._touchOutSide=!0)},e.prototype.onTouchEnd=function(t){this.dispatch(a.Notify.Touch.TOUCH_END,t),this.cb&&this.cb(r.END),this._touchStartTime=0,this._touchID=-1},e.prototype.onTouchCanceled=function(t){this.dispatch(a.Notify.Touch.TOUCH_CANCEL,t),this._touchCancel=!0,this.cb&&this.cb(r.CANCELED),this._touchStartTime=0,this._touchID=-1},n([l],e)}(p.CxComponent));i.IMTouchListenter=h,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/CxComponent":void 0}],IMUIConfig:[function(t,e,i){"use strict";cc._RF.push(e,"3c38d2ufjtKB4Szke3wKLpM","IMUIConfig");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.IMBundleConfig=i.IMUIConfig=void 0;var n=t("../../../script/app/config/ResConfig"),r=t("../../../script/app/const/Global"),a=t("../../../script/lib/manager/ResManager");i.IMUIConfig={bunldleName:r.gAssetBundleName.IM_RES,prefab:{IMTxtMsg:new n.PrefabItem("UIIMTextMsg","prefabs/msg/IMTxtMsg",r.gLayerLevel.None,0),IMSysMsg:new n.PrefabItem("UIIMSysMsg","prefabs/msg/IMSysMsg",r.gLayerLevel.None,0),IMVoiceMsg:new n.PrefabItem("UIIMVoiceMsg","prefabs/msg/IMVoiceMsg",r.gLayerLevel.None,0),IMHelpMsg:new n.PrefabItem("UIIMHelpMsg","prefabs/msg/IMHelpMsg",r.gLayerLevel.None,0),IMEmojMsg:new n.PrefabItem("UIIMEmojMsg","prefabs/msg/IMEmojMsg",r.gLayerLevel.None,0),IMLayer:new n.PrefabItem("","prefabs/IMLayer",r.gLayerLevel.None,0)},altas:[],popup:{IMHelpRewardDlg:new n.PrefabItem("IMHelpRewardDlg","prefabs/help/IMHelpRewardDlg",r.gLayerLevel.Popup,0),IMChooseTableView:new n.PrefabItem("IMChooseTableView","prefabs/help/IMChooseTable",r.gLayerLevel.Popup,0),IMChooseChipView:new n.PrefabItem("IMChooseChipView","prefabs/help/IMChooseChip",r.gLayerLevel.Popup,0),IMRecordVoice:new n.PrefabItem("UIIMAudioRecorder","prefabs/recorder/IMRecord",r.gLayerLevel.Popup,0)}};var p=function(t){function e(){var e=t.call(this)||this;return e.name=i.IMUIConfig.bunldleName,e.tips="\u804a\u5929",e}return s(e,t),e.prototype.getRes=function(){return i.IMUIConfig},e}(a.BundleConfig);i.IMBundleConfig=p,a.default.getInstance().addBundleCfg(new p),cc._RF.pop()},{"../../../script/app/config/ResConfig":void 0,"../../../script/app/const/Global":void 0,"../../../script/lib/manager/ResManager":void 0}],LIMInputArea:[function(t,e,i){"use strict";cc._RF.push(e,"d89c2sHIDdL6bh/PtaWE260","LIMInputArea");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.LIMInputArea=void 0;var n=t("../../../script/plugin/pb/protofile/CMD_ClubMsg"),r=t("../../../script/app/event/Notify"),a=t("../../../script/app/model/DataProxy"),p=t("../../../script/lib/base/Binder"),c=t("../model/IMDef"),l=t("../model/IMEvent"),h=t("../../../script/lib/event/EventDispatcher"),d=t("../../../script/app/view/ComUI"),u=t("../../clubSrc/logic/ClubHelper"),g=t("../i18n/IMI18n"),f=t("../controller/IMHelper"),I=t("../../../script/app/platform/MediaUtils"),y=t("../../../script/app/config/GameConfig"),M=t("../../../script/lib/utils/VoiceHelper"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.voiceFilePath="",e}return s(e,t),e.prototype.initUI=function(){},Object.defineProperty(e.prototype,"ui",{get:function(){return this._ui},enumerable:!1,configurable:!0}),e.prototype.listEvent=function(){return this.mergeEvent(t.prototype.listEvent.call(this),new Map([[l.IMEvent.ChatView.HELP_CD,this.onUpdateHelpBtnCD],[l.IMEvent.Opt.CHOOSED_CHIP,this.onChooseHelpChip],[l.IMEvent.Opt.RECORD_TIMEOUT,this.stopRecordVoice],[l.IMEvent.Opt.SEND_RECORD,this.sendRecordVoice],[l.IMEvent.Opt.STOP_RECORD,this.stopRecordVoice],[l.IMEvent.Opt.CANCEL_RECORD,this.cancelRecordVoice]]))},e.prototype.sendInputText=function(t){this.dispatch(r.Notify.IM.SEND_NEW_MSG,{clubId:f.IMHelper.getClubID(),type:n.NEWS_TYPE.NEWS_WORLD,text:t})},e.prototype.sendEmoj=function(t){this.dispatch(r.Notify.IM.SEND_NEW_MSG,{clubId:f.IMHelper.getClubID(),type:n.NEWS_TYPE.NEWS_PHIZ,emojIdx:t})},e.prototype.startRecordVoice=function(){if(cc.log("[startRecordVoice]"),this.voiceFilePath="",cc.sys.isBrowser||I.MediaUtils.isSupport()){if(h.EventDispatcher.getInstance().dispatch(r.Notify.Base.PAUSE_MUSIC),e.bRecording)return this.stopRecordVoice();e.bRecording=!0,this.dispatch(r.Notify.IM.POP_RECORDER,{cdtime:30,clubId:f.IMHelper.getClubID()}),I.MediaUtils.startRecordVoice()}else d.ComUI.showToast(g.IMI18n.i18n.not_support,.5,2)},e.prototype.cancelRecordVoice=function(){cc.log("[cancelRecordVoice]"),e.bRecording=!1,this.dispatch(r.Notify.IM.POP_RECORDER,{rmthis:!0});var t=I.MediaUtils.stopRecordVoice();platform.deleteFile(t)},e.prototype.stopRecordVoice=function(){cc.log("[stopRecordVoice]"),h.EventDispatcher.getInstance().dispatch(r.Notify.Base.RESUME_MUSIC),this.dispatch(r.Notify.IM.POP_RECORDER,{rmthis:!0}),e.bRecording&&(e.bRecording=!1,this.voiceFilePath=I.MediaUtils.stopRecordVoice())},e.prototype.sendRecordVoice=function(){var t=this;if(cc.log("[sendRecordVoice] "+this.voiceFilePath),e.bRecording=!1,this.voiceFilePath){var i=this.voiceFilePath,o=Math.ceil(I.MediaUtils.getAudioDuration(i)/1e3);if(o<2)return void d.ComUI.showToast(g.IMI18n.i18n.record_too_short,.5,2);if(i){var s=y.GameConfig.getInstance().getVoiceUploadUrl();M.VoiceHelper.upload(s,i).then(function(e){t.dispatch(r.Notify.IM.SEND_NEW_MSG,{clubId:f.IMHelper.getClubID(),type:c.IMDef.MsgType.VOICE,voiceTime:o,voiceUrl:e}),console.log("stopRecordVoice "+e,o)}).catch(function(t){cc.warn("stopRecordVoice",t)}),platform.deleteFile(i)}this.voiceFilePath=""}},e.prototype.reqGoldHelp=function(){0!=this.canClickBtn(0,c.IMDef.MsgType.HELP_GOLD)&&this.dispatch(r.Notify.IM.SEND_NEW_MSG,{clubId:f.IMHelper.getClubID(),type:n.NEWS_TYPE.NEWS_GOLD_HELP})},e.prototype.reqTokenHelp=function(){0!=this.canClickBtn(1,c.IMDef.MsgType.HELP_TOKEN)&&this.dispatch(r.Notify.IM.SEND_NEW_MSG,{clubId:f.IMHelper.getClubID(),type:n.NEWS_TYPE.NEWS_PHYSICL_HELP})},e.prototype.reqChipHelp=function(){if(0!=this.canClickBtn(2,c.IMDef.MsgType.HELP_CHIP)){var t=a.DataProxy.getInstance().tablesData.tableList,e=[];t.forEach(function(t){t.bFinish||0!==t.dwPreTableId||e.push(t)}),this.dispatch(r.Notify.IM.POP_CHOOSE_TABLE,e)}},e.prototype.canClickBtn=function(t,e){var i="",o=a.DataProxy.getInstance().imData.helpBtnCD;if(o&&o[t]){var s=Date.now()/1e3,n=o[t];if(s-n.dwEndTime>0)return!0;i=u.ClubHelper.getOffLineFormat(n.dwEndTime-s).replace("\n"," ")}var r=e===c.IMDef.MsgType.HELP_GOLD?"gold":e===c.IMDef.MsgType.HELP_TOKEN?"tokens":"chips",p=g.IMI18n.i18n.help_cd_tips.replace("?",r)+i;return d.ComUI.showToast(p,.5,2),!1},e.prototype.onUpdateHelpBtnCD=function(t){if(t)for(var e=0;e<t.length;e++){var i=t[e];i&&this.ui.updateBtnCD(e,i.dwEndTime)}},e.prototype.onChooseHelpChip=function(t){t&&this.dispatch(r.Notify.IM.SEND_NEW_MSG,{type:n.NEWS_TYPE.NEWS_TATTER_HELP,clubId:f.IMHelper.getClubID(),tableId:t.tableId,chipsId:t.pieceId,star:t.star})},e.NAME="LIMInputArea",e.bRecording=!1,e}(p.BaseLogic);i.LIMInputArea=m,cc._RF.pop()},{"../../../script/app/config/GameConfig":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/platform/MediaUtils":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/Binder":void 0,"../../../script/lib/event/EventDispatcher":void 0,"../../../script/lib/utils/VoiceHelper":void 0,"../../../script/plugin/pb/protofile/CMD_ClubMsg":void 0,"../../clubSrc/logic/ClubHelper":void 0,"../controller/IMHelper":"IMHelper","../i18n/IMI18n":"IMI18n","../model/IMDef":"IMDef","../model/IMEvent":"IMEvent"}],LIMMsgList:[function(t,e,i){"use strict";cc._RF.push(e,"4262deEryVB5oB9wkTLfnCr","LIMMsgList");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.LIMMsgList=void 0;var n=t("../../../script/app/event/Notify"),r=t("../../../script/app/model/DataProxy"),a=t("../../../script/app/view/ComUI"),p=t("../../../script/lib/base/Binder"),c=t("../controller/IMHelper"),l=t("../model/IMEvent"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastRequestTime=0,e}return s(e,t),e.prototype.listEvent=function(){return this.mergeEvent(t.prototype.listEvent.call(this),new Map([[l.IMEvent.ChatView.ADD_MSG,this.onRecvOneMsg],[l.IMEvent.ChatView.UPDATE_MSG_LIST,this.onUpdateView],[n.Notify.IM.REQ_LATEST_MSG_LIST,this.reqMsgList],[n.Notify.Club.RESP_MY_CLUB,this.onGetClubInfo],[l.IMEvent.ChatView.CLEAR,this.onClear]]))},Object.defineProperty(e.prototype,"ui",{get:function(){return this._ui},enumerable:!1,configurable:!0}),e.prototype.initUI=function(){var t=this,e=r.DataProxy.getInstance().imData.history(c.IMHelper.getClubID());if(e){var i=e.getMsgList();i.length>0&&this.ui.delayCall(function(){t.ui.updateData({list:i,num:i.length}),t.ui.updateView(!0)})}else a.ComUI.addLoading({time:2});this.reqHistory(!0)},e.prototype.reqHistory=function(t){if(!(Date.now()-this.lastRequestTime<1e3)){this.lastRequestTime=Date.now();var e=c.IMHelper.getClubID();if(e>0){var i=0,o=0;if(!t){var s=r.DataProxy.getInstance().imData.getFirstMsg(e);i=s?s.dwMsgId:0,o=s?s.dwTime:0}this.dispatch(n.Notify.IM.REQ_HIS_LIST,{clubId:e,lastMsgId:i,dwTime:o})}}},e.prototype.onGetClubInfo=function(){this.reqHistory(!0)},e.prototype.reqMsgList=function(){this.reqHistory(!1)},e.prototype.onUpdateView=function(t){this.ui.updateData(t),this.ui.updateView()},e.prototype.onRecvOneMsg=function(t){t&&(this.ui.updateData(t),this.ui.addMsgItem(t.newMsg,!0))},e.prototype.onClear=function(){this.ui.clear()},e.prototype.clear=function(){t.prototype.clear.call(this),r.DataProxy.getInstance().imData.clear()},e}(p.BaseLogic);i.LIMMsgList=h,cc._RF.pop()},{"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/Binder":void 0,"../controller/IMHelper":"IMHelper","../model/IMEvent":"IMEvent"}],UIIMAudioRecorder:[function(t,e,i){"use strict";cc._RF.push(e,"74553a0ZQBBgLZZxF3XTXt/","UIIMAudioRecorder");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMAudioRecorder=void 0;var r=t("../../../../script/app/event/Notify"),a=t("../../../../script/app/view/ComUI"),p=t("../../../../script/lib/base/CxComponent"),c=t("../../i18n/IMI18n"),l=t("../../model/IMEvent"),h=cc._decorator,d=h.ccclass,u=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spBg=null,e.sfCancelBg=null,e.sfNormalBg=null,e.spVoiceIcon=null,e.sfCancelIcon=null,e.sfNormalIcon=null,e.labRecordCD=null,e.labCancelTips=null,e.labSendTips=null,e.spCancelArea=null,e.spRecordingBg=null,e.sfCancelRecordBg=null,e.sfRecordingBg=null,e.spAnim=null,e.cancelColor=(new cc.Color).fromHEX("#a40505"),e.normalColor=(new cc.Color).fromHEX("#417137"),e.mCD=30,e.mRecordTime=0,e._touchID=-1,e._bReadySend=!0,e}return s(e,t),e.prototype.init=function(t){this.mClubId=t.clubId||0,this.mCD=t.cdtime||0,a.ComUI.StartCountDown(this.labRecordCD,c.IMI18n.i18n.record_cd,this.mCD,this.timeout,"")},e.prototype.listEvent=function(){return new Map([[r.Notify.Touch.TOUCH_MOVE,this.onTouchMove],[r.Notify.Touch.TOUCH_END,this.onTouchEnd],[r.Notify.Touch.TOUCH_CANCEL,this.onTouchCanceled]])},e.prototype.start=function(){var t=this;this.labRecordCD&&(this.labRecordCD.string=cc.js.formatStr(c.IMI18n.i18n.record_cd,this.mCD)),this.labCancelTips&&(this.labCancelTips.node.active=!1,this.labCancelTips.string=c.IMI18n.i18n.record_tips),this.labSendTips&&(this.labSendTips.node.active=!1,this.labSendTips.string=c.IMI18n.i18n.release_to_send),this.spAnim&&this.normalColor&&(this.spAnim.node.color=this.normalColor),this.scheduleOnce(this.timeout.bind(this),this.mCD),cc.tween(this.node).repeat(this.mCD,cc.tween().delay(1).call(function(){t.mRecordTime++})).start()},e.prototype.onEnable=function(){this.addTouchEvent()},e.prototype.onDisable=function(){this.rmTouchEvent()},e.prototype.addTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},e.prototype.rmTouchEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},e.prototype.onTouchBegin=function(t){if(!(this._touchID>=0))return this._bReadySend=!0,this._touchID=t.getID(),t.stopPropagation(),!0},e.prototype.isTouchInCancelArea=function(t){return!(!this.spCancelArea||!this.spCancelArea.node.getBoundingBoxToWorld().contains(t.getLocation()))},e.prototype.onTouchMove=function(t){var e=this.isTouchInCancelArea(t);e||this._bReadySend?e&&this._bReadySend&&(this.handleMoveInCancelArea(),this._bReadySend=!1):(this._bReadySend=!0,this.handleMoveOutCancelArea())},e.prototype.onTouchEnd=function(t){this._touchID=-1,this.isTouchInCancelArea(t)?this.cancelSend():this.sendVoice(),this.close()},e.prototype.onTouchCanceled=function(t){this.onTouchEnd(t)},e.prototype.handleMoveInCancelArea=function(){this.spRecordingBg&&this.sfCancelRecordBg&&(this.spRecordingBg.spriteFrame=this.sfCancelRecordBg),this.spBg&&this.sfCancelBg&&(this.spBg.spriteFrame=this.sfCancelBg),this.labCancelTips&&(this.labCancelTips.node.active=!0),this.spCancelArea&&(this.spCancelArea.node.stopAllActions(),cc.tween(this.spCancelArea.node).set({scale:1}).to(.2,{scale:1.1}).start()),this.spAnim&&this.cancelColor&&(this.spAnim.node.color=this.cancelColor)},e.prototype.handleMoveOutCancelArea=function(){this.spRecordingBg&&this.sfRecordingBg&&(this.spRecordingBg.spriteFrame=this.sfRecordingBg),this.spBg&&this.sfNormalBg&&(this.spBg.spriteFrame=this.sfNormalBg),this.labCancelTips&&(this.labCancelTips.node.active=!1),this.spCancelArea&&(this.spCancelArea.node.stopAllActions(),cc.tween(this.spCancelArea.node).set({scale:1.1}).to(.2,{scale:1}).start()),this.spAnim&&this.normalColor&&(this.spAnim.node.color=this.normalColor)},e.prototype.timeout=function(){this.stopRecord(),this.dispatch(l.IMEvent.Opt.RECORD_TIMEOUT,this.mRecordTime)},e.prototype.stopRecord=function(){this.dispatch(l.IMEvent.Opt.STOP_RECORD,{duration:this.mRecordTime})},e.prototype.sendVoice=function(){this.stopRecord(),this.dispatch(l.IMEvent.Opt.SEND_RECORD,{duration:this.mRecordTime})},e.prototype.cancelSend=function(){this.dispatch(l.IMEvent.Opt.CANCEL_RECORD)},n([u({type:cc.Sprite,tooltip:"\u5f55\u5236\u7684\u80cc\u666f"})],e.prototype,"spBg",void 0),n([u({type:cc.SpriteFrame,tooltip:"\u51c6\u5907\u53d6\u6d88\u80cc\u666f"})],e.prototype,"sfCancelBg",void 0),n([u({type:cc.SpriteFrame,tooltip:"\u5f55\u5236\u80cc\u666f"})],e.prototype,"sfNormalBg",void 0),n([u({type:cc.Sprite,tooltip:"\u5f55\u5236\u7684\u56fe\u6807"})],e.prototype,"spVoiceIcon",void 0),n([u({type:cc.SpriteFrame,tooltip:"\u51c6\u5907\u53d6\u6d88\u56fe\u6807"})],e.prototype,"sfCancelIcon",void 0),n([u({type:cc.SpriteFrame,tooltip:"\u5f55\u5236\u56fe\u6807"})],e.prototype,"sfNormalIcon",void 0),n([u({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6"})],e.prototype,"labRecordCD",void 0),n([u({type:cc.Label,tooltip:"\u53d6\u6d88\u63d0\u793a"})],e.prototype,"labCancelTips",void 0),n([u({type:cc.Label,tooltip:"\u53d1\u9001\u63d0\u793a"})],e.prototype,"labSendTips",void 0),n([u({type:cc.Sprite,tooltip:"\u53d6\u6d88\u533a\u57df"})],e.prototype,"spCancelArea",void 0),n([u({type:cc.Sprite,tooltip:"\u5f55\u5236\u52a8\u753b"})],e.prototype,"spRecordingBg",void 0),n([u({type:cc.SpriteFrame,tooltip:"\u51c6\u5907\u53d6\u6d88\u52a8\u753b\u80cc\u666f"})],e.prototype,"sfCancelRecordBg",void 0),n([u({type:cc.SpriteFrame,tooltip:"\u5f55\u5236\u52a8\u753b\u80cc\u666f"})],e.prototype,"sfRecordingBg",void 0),n([u({type:cc.Sprite,tooltip:"\u5f55\u5236\u52a8\u753b"})],e.prototype,"spAnim",void 0),n([u({tooltip:"\u51c6\u5907\u53d6\u6d88\u989c\u8272"})],e.prototype,"cancelColor",void 0),n([u({tooltip:"\u5f55\u5236\u989c\u8272"})],e.prototype,"normalColor",void 0),n([d],e)}(p.CxComponent);i.UIIMAudioRecorder=g,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../i18n/IMI18n":"IMI18n","../../model/IMEvent":"IMEvent"}],UIIMEmojMsg:[function(t,e,i){"use strict";cc._RF.push(e,"22618NFJL1Lnr1O4/zSFtw1","UIIMEmojMsg");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMEmojMsg=void 0;var r=t("./UIIMsgBase"),a=cc._decorator,p=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spEmoj=null,e.emojAtlas=null,e}return s(e,t),e.prototype.clear=function(){t.prototype.clear.call(this)},e.prototype.start=function(){t.prototype.start.call(this),this.getComponent(cc.Button)||this.addComponent(cc.Button),this.node.on("click",this.onClicked,this)},e.prototype.getMsgBodySize=function(){return this.spEmoj.node.getContentSize()},e.prototype.updateView=function(){var t=this.mMsgData&&this.mMsgData.emojMsg;t&&this.setEmoj(t.dwIndex,!this.isInit)},e.prototype.setEmoj=function(t,e){this.spEmoj&&(this.spEmoj.spriteFrame=this.emojAtlas.getSpriteFrame("game_chat_emoj_0"+t),e&&this.playAnim())},e.prototype.alignLOrR=function(e){t.prototype.alignLOrR.call(this,e);var i=this.spEmoj.getComponent(cc.Widget)||this.spEmoj.addComponent(cc.Widget);i&&(i.enabled=!1,i.enabled=!0,this.isLeft?(i.isAlignRight=!0,i.isAlignLeft=!1,i.right=this.paddingL):(i.isAlignLeft=!0,i.isAlignRight=!1,i.left=this.paddingL))},e.prototype.playAnim=function(){this.spEmoj&&(this.spEmoj.node.stopAllActions(),cc.tween(this.spEmoj.node).set({x:0,y:0}).by(.18,{position:cc.v3(0,-6)}).by(.18,{position:cc.v3(0,14)}).by(.18,{position:cc.v3(0,-14)}).by(.18,{position:cc.v3(0,6)}).delay(1).start())},e.prototype.onClicked=function(){this.playAnim()},n([c(cc.Sprite)],e.prototype,"spEmoj",void 0),n([c(cc.SpriteAtlas)],e.prototype,"emojAtlas",void 0),n([p],e)}(r.UIIMsgBase);i.UIIMEmojMsg=l,cc._RF.pop()},{"./UIIMsgBase":"UIIMsgBase"}],UIIMHelpMsg:[function(t,e,i){"use strict";cc._RF.push(e,"46964TWnSpIRohvbOQGrCmv","UIIMHelpMsg");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMHelpMsg=void 0;var r=t("../../../../script/app/language/LanguageCfg"),a=t("../../../../script/lib/i18n/i18nHelper"),p=t("../../../../script/lib/utils/ComUtils"),c=t("../../controller/IMHelper"),l=t("../../i18n/IMI18n"),h=t("../../model/IMDef"),d=t("../../model/IMEvent"),u=t("../help/IMTableChip"),g=t("./UIIMsgBase"),f=cc._decorator,I=f.ccclass,y=f.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labRequest=null,e.pbHelp=null,e.btnHelp=null,e.ndChipIcon=null,e.spHelpIconBg=null,e.spHelpIcon=null,e.sfYellowIconBg=null,e.sfBlueIconBg=null,e.sfGold=null,e.sfToken=null,e.sfChip=null,e.delayLock=!0,e}return s(e,t),e.prototype.clear=function(){t.prototype.clear.call(this)},e.prototype.getMsgBodySize=function(){var t=this.mMsgData&&this.mMsgData.helpMsg;return t&&t.dwHelpType==h.IMDef.MsgType.HELP_CHIP?{width:700,height:298}:{width:700,height:228}},e.prototype.updateView=function(){var t=this.mMsgData&&this.mMsgData.helpMsg;t&&(this.setHelpIcon(t.dwHelpType,t.chipItem),this.setRequestInfo(t.strHelpInfo),this.setProcess(t.dwCurHelpCount,t.dwMaxHelpCount),this.setHelpButton(c.IMHelper.isShowHelpBtn(this.mMsgData)))},e.prototype.start=function(){t.prototype.start.call(this),this.btnHelp&&this.btnHelp.node.on("click",this.onHelpBtnClick,this)},e.prototype.onEnable=function(){c.IMHelper.isNeedUpdate(this.mMsgData)},e.prototype.setRequestInfo=function(t){if(this.labRequest&&(this.labRequest.language=a.i18nHelper.makeLanguage([l.IMI18n.k.request_title,t],l.IMI18n.bundle)),this.btnHelp){var e=this.btnHelp.getComponentInChildren(cc.Label);e&&(e.language=a.i18nHelper.makeLanguage(r.LangKey.text_help))}},e.prototype.setHelpIcon=function(t,e){var i=null,o=null;switch(t){case h.IMDef.MsgType.HELP_GOLD:i=this.sfGold,o=this.sfYellowIconBg;break;case h.IMDef.MsgType.HELP_TOKEN:i=this.sfToken,o=this.sfBlueIconBg;break;case h.IMDef.MsgType.HELP_CHIP:}if(t!=h.IMDef.MsgType.HELP_CHIP)this.ndChipIcon&&(this.ndChipIcon.active=!1),this.spHelpIconBg&&(this.spHelpIconBg.node.active=!0),this.spHelpIconBg&&o&&(this.spHelpIconBg.spriteFrame=o),this.spHelpIcon&&i&&(this.spHelpIcon.spriteFrame=i);else if(this.spHelpIconBg&&(this.spHelpIconBg.node.active=!1),this.ndChipIcon){this.ndChipIcon.active=!0;var s=this.ndChipIcon.getComponent(u.IMTableChip);if(s){var n={dwTableId:e.dwTableId,dwStar:e.dwStar,bNew:!1,dwPieceId:e.dwPieceId};s.init(n)}}},e.prototype.setProcess=function(t,e){if(this.pbHelp){var i=this.pbHelp.getComponentInChildren(cc.Label);i&&(i.string=t+"/"+e),this.pbHelp.progress=t/e}},e.prototype.setHelpButton=function(t){this.btnHelp&&(this.btnHelp.node.active=t)},e.prototype.onHelpBtnClick=function(){this.delayLock&&(p.ComUtils.delayLimit(this),this.btnHelp&&(this.btnHelp.node.active=!1),this.dispatch(d.IMEvent.Opt.CLICK_HELP_MSG,this.mMsgData))},e.prototype.alignLOrR=function(e){t.prototype.alignLOrR.call(this,e),this.spMsgBg&&(this.spMsgBg.node.scaleX=e?1:-1)},n([y(cc.Label)],e.prototype,"labRequest",void 0),n([y(cc.ProgressBar)],e.prototype,"pbHelp",void 0),n([y(cc.Button)],e.prototype,"btnHelp",void 0),n([y(cc.Node)],e.prototype,"ndChipIcon",void 0),n([y(cc.Sprite)],e.prototype,"spHelpIconBg",void 0),n([y(cc.Sprite)],e.prototype,"spHelpIcon",void 0),n([y(cc.SpriteFrame)],e.prototype,"sfYellowIconBg",void 0),n([y(cc.SpriteFrame)],e.prototype,"sfBlueIconBg",void 0),n([y(cc.SpriteFrame)],e.prototype,"sfGold",void 0),n([y(cc.SpriteFrame)],e.prototype,"sfToken",void 0),n([y(cc.SpriteFrame)],e.prototype,"sfChip",void 0),n([I],e)}(g.UIIMsgBase);i.UIIMHelpMsg=M,cc._RF.pop()},{"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../controller/IMHelper":"IMHelper","../../i18n/IMI18n":"IMI18n","../../model/IMDef":"IMDef","../../model/IMEvent":"IMEvent","../help/IMTableChip":"IMTableChip","./UIIMsgBase":"UIIMsgBase"}],UIIMMsgFactory:[function(t,e,i){"use strict";cc._RF.push(e,"e8e3bu6q2VBCIOQgBZNnM/w","UIIMMsgFactory");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMMsgFactory=void 0;var r=t("../../../../script/lib/base/CxComponent"),a=t("../../model/IMDef"),p=t("./UIIMEmojMsg"),c=t("./UIIMHelpMsg"),l=t("./UIIMSysMsg"),h=t("./UIIMTextMsg"),d=t("./UIIMVoiceMsg"),u=cc._decorator,g=u.ccclass,f=u.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfTextItem=null,e.pfSysItem=null,e.pfVoiceItem=null,e.pfEmojItem=null,e.pfHelpItem=null,e}return s(e,t),e.prototype.createMsg=function(t,e){if(t)if(e){var i=this.getItemPrefab(e.dwType);if(!i||i.prefab){var o=i.prefab,s=i.script;if(s&&(n=t.ndMsg.getComponentInChildren(s)))return n;if(o){var n,r=cc.instantiate(o);if(r.parent=t.ndMsg,n=r.getComponent(s))return n}return null}cc.warn("[UIIMMsgFactory] that type not exist: "+e.dwType)}else cc.warn("[UIIMMsgFactory] msgData is null ");else cc.warn("[UIIMMsgFactory] wrapper is null ")},e.prototype.getItemPrefab=function(t){var e,i;switch(t){case a.IMDef.MsgType.TEXT:e=this.pfTextItem,i=h.UIIMTextMsg;break;case a.IMDef.MsgType.VOICE:e=this.pfVoiceItem,i=d.UIIMVoiceMsg;break;case a.IMDef.MsgType.SYSTEM:e=this.pfSysItem,i=l.UIIMSysMsg;break;case a.IMDef.MsgType.EMOJ:e=this.pfEmojItem,i=p.UIIMEmojMsg;break;case a.IMDef.MsgType.HELP_CHIP:case a.IMDef.MsgType.HELP_GOLD:case a.IMDef.MsgType.HELP_TOKEN:e=this.pfHelpItem,i=c.UIIMHelpMsg}return{prefab:e,script:i}},n([f(cc.Prefab)],e.prototype,"pfTextItem",void 0),n([f(cc.Prefab)],e.prototype,"pfSysItem",void 0),n([f(cc.Prefab)],e.prototype,"pfVoiceItem",void 0),n([f(cc.Prefab)],e.prototype,"pfEmojItem",void 0),n([f(cc.Prefab)],e.prototype,"pfHelpItem",void 0),n([g],e)}(r.CxComponent);i.UIIMMsgFactory=I,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../model/IMDef":"IMDef","./UIIMEmojMsg":"UIIMEmojMsg","./UIIMHelpMsg":"UIIMHelpMsg","./UIIMSysMsg":"UIIMSysMsg","./UIIMTextMsg":"UIIMTextMsg","./UIIMVoiceMsg":"UIIMVoiceMsg"}],UIIMMsgList:[function(t,e,i){"use strict";cc._RF.push(e,"00161OPj9xNj4rnNDClCrfX","UIIMMsgList");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMMsgList=void 0;var r=t("../../../../script/app/base/component/ComTableView"),a=t("../../../../script/app/event/Notify"),p=t("../../../../script/app/model/DataProxy"),c=t("../../../../script/app/view/ComUI"),l=t("../../../../script/lib/base/Binder"),h=t("../../../../script/lib/utils/ComUtils"),d=t("../../model/IMDef"),u=t("../../model/IMEvent"),g=t("./UIIMWrapper"),f=cc._decorator,I=f.ccclass,y=f.property,M=function(t){function e(){var e=t.call(this)||this;return e.svMsgList=null,e.listMask=null,e.ndLoading=null,e.ndNewMsgTip=null,e.pfMsgItem=null,e.mTableView=null,e.iListDefPosY=0,e.mScorllInTop=!1,e.mHasNews=!1,e.mTouchIn=!1,e.mbGetAllHistory=!1,e.mNewsCount=0,e.clear(),e}return s(e,t),e.prototype.clear=function(){this.mNewsCount=0,this.mMsgList=[],this.mMapMsgSize=new Map,this.mScorllInTop=!1,this.mTouchIn=!1,this.mbGetAllHistory=!1,this.mHasNews=!1},e.prototype.onDestroy=function(){this.clear(),t.prototype.onDestroy.call(this)},e.prototype.tableCellSizeForIndex=function(t,e){var i=this.mMsgList[e];if(i){var o=i.dwTime+"_"+i.dwMsgId+" ";if(this.mMapMsgSize.get(o))return this.mMapMsgSize.get(o);if(!this.mMeasure){var s=cc.instantiate(this.pfMsgItem);s.zIndex=-1e3,s.opacity=0,s.parent=this.node.parent,this.mMeasure=s.getComponent(g.UIIMWrapper)}if(this.mMeasure){this.mMeasure.init(i),this.mMeasure.isInit||this.mMeasure.updateView();var n=this.mMeasure.node.height;return this.mMapMsgSize.set(o,n),n}}return 0},e.prototype.tableCellAtIndex=function(t,e){var i=t.dequeueCell(),o=this.mMsgList[e];return o&&(i?(i.active=!0,i.idx=e,i.getComponent(g.UIIMWrapper).init(o)):i=this.initMsgItem(o).node),i},e.prototype.numberOfCellsInTableView=function(){return this.mMsgList.length},e.prototype.tableCellTouched=function(){},e.prototype.tableTouchUp=function(){this.mTouchIn=!1,this.mScorllInTop&&this.pullHistory(),this.mScorllInTop=!1},e.prototype.listEvent=function(){return new Map([[u.IMEvent.Opt.INPUT_UP,this.onInputUp],[u.IMEvent.Opt.INPUT_DOWN,this.onInputDown],[a.Notify.IM.SEND_NEW_MSG,this.onSendMsg],[u.IMEvent.ChatView.UPDATE_MSG,this.onUpdateOneMsg]])},e.prototype.toLatestMsg=function(){this.mTableView&&(cc.log("========= onEnable reloadToEnd"),this.mTableView.reloadToEnd(),this.mTableView.node.y=this.iListDefPosY),this.displayLoading(!1,0)},e.prototype.onEnable=function(){this.toLatestMsg()},e.prototype.start=function(){t.prototype.start.call(this),this.toLatestMsg(),this.svMsgList&&(this.svMsgList.node.on("scrolling",this.onScrolling,this),this.svMsgList.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.svMsgList.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.mTableView=this.svMsgList.getComponent(r.default),this.mTableView.setDataSource(this),this.mTableView.setDelegate(this),this.iListDefPosY=this.svMsgList.node.y)},e.prototype.getLogicName=function(){return"LIMMsgList"},e.prototype.displayLoading=function(t,e){if(this.ndLoading){var i=2*this.ndLoading.height;if(this.ndLoading.active=t&&!this.mbGetAllHistory,t){var o=1;(e=-e)<i&&(o=e/i),this.ndLoading.scale=o,this.ndLoading.angle=-e}}},e.prototype.displayNewMsgTip=function(t){if(this.ndNewMsgTip){var e=this.svMsgList.getScrollOffset().y,i=this.svMsgList.content.height-this.svMsgList.node.height-e<200;this.ndNewMsgTip.active=t&&!i}},e.prototype.onScrolling=function(){if(this.svMsgList){var t=this.svMsgList.getScrollOffset().y;if(t<-30)this.mScorllInTop=!0,this.displayLoading(!0,t);else{if(this.mScorllInTop=!1,this.displayLoading(!1,t),!this.mHasNews)return;this.updateView(!1);var e=this.svMsgList.node.height;this.svMsgList.content.height-e-t<100&&this.mHasNews&&this.displayNewMsgTip(!1)}}},e.prototype.onTouchStart=function(){this.mTouchIn=!0},e.prototype.onTouchEnd=function(){},e.prototype.pullHistory=function(){var t=this.mMsgList[0],e={msgId:t&&t.dwMsgId||0,dwTime:t&&t.dwTime||0};this.dispatch(u.IMEvent.Opt.PULL_HISTORY,e)},e.prototype.updateData=function(t){0!==t.num?(this.mNewsCount=t.num,this.mbGetAllHistory=!1,this.mMsgList=[],this.mMsgList=h.ComUtils.clone(t.list),this.mHasNews=!0):this.mbGetAllHistory=!0},e.prototype.updateView=function(t){if(void 0===t&&(t=!0),!this.mTouchIn&&!this.mScorllInTop){if(this.displayLoading(!1,0),this.displayNewMsgTip(!1),this.mTableView&&(cc.log("========= updateView\uff1a reloadToBegin",t),t)){var e=p.DataProxy.getInstance().imData.hasNew();p.DataProxy.getInstance().imData.setHasNew(!1),e?this.mTableView.reloadToBegin():this.mTableView.reloadToEnd()}c.ComUI.rmLoading(),this.mHasNews=!1,this.mNewsCount=0}},e.prototype.initMsgItem=function(t){var e=cc.instantiate(this.pfMsgItem);e.parent=this.svMsgList.content,e.active=!0;var i=e.getComponent(g.UIIMWrapper);return i&&i.init(t),i},e.prototype.addMsgItem=function(t,e){this.displayNewMsgTip(!0),this.mTouchIn||e&&this.mTableView&&this.mTableView.insert(1)},e.prototype.updateMsgItem=function(t){var e=this.svMsgList.content.getComponentsInChildren(g.UIIMWrapper);if(e){var i=e.find(function(e){return e.msgId===t.dwMsgId});i&&(i.init(t),i.updateView())}},e.prototype.onSendMsg=function(){this.mTouchIn=!1},e.prototype.enableListMask=function(){this.listMask&&(this.listMask.enabled=!0)},e.prototype.onInputUp=function(t){if(this.svMsgList){this.enableListMask(!0);var e=t;this.mTableView&&this.mTableView.lastCellY<=t&&(e=0),this.svMsgList.node.stopAllActions(),cc.tween(this.svMsgList.node).to(.25,{y:this.iListDefPosY+e}).start()}},e.prototype.onInputDown=function(){var t=this;this.svMsgList&&(this.svMsgList.node.stopAllActions(),cc.tween(this.svMsgList.node).to(.25,{y:this.iListDefPosY}).call(function(){t.enableListMask(!1)}).start())},e.prototype.onUpdateOneMsg=function(t){var e=t,i=this.mMsgList.find(function(t){return t.dwMsgId==e.dwMsgId&&t.dwTime==e.dwTime});i&&d.updateObj(i,e);var o=this.svMsgList.content.getComponentsInChildren(g.UIIMWrapper);if(o){var s=o.find(function(t){return t.msgId==e.dwMsgId&&t.msgTime===e.dwTime});s&&s.initMsgBody(e)}},e.prototype.onDraging=function(t){this.displayLoading(!0,t)},n([y(cc.ScrollView)],e.prototype,"svMsgList",void 0),n([y(cc.Mask)],e.prototype,"listMask",void 0),n([y(cc.Node)],e.prototype,"ndLoading",void 0),n([y(cc.Node)],e.prototype,"ndNewMsgTip",void 0),n([y(cc.Prefab)],e.prototype,"pfMsgItem",void 0),n([I],e)}(l.BaseUI);i.UIIMMsgList=M,cc._RF.pop()},{"../../../../script/app/base/component/ComTableView":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/Binder":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../model/IMDef":"IMDef","../../model/IMEvent":"IMEvent","./UIIMWrapper":"UIIMWrapper"}],UIIMSysMsg:[function(t,e,i){"use strict";cc._RF.push(e,"36654YDUV1FEbWP1lS+/d1e","UIIMSysMsg");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMSysMsg=void 0;var r=t("../../../../script/lib/base/Language"),a=t("../../controller/IMHelper"),p=t("../../model/IMDef"),c=t("./UIIMsgBase"),l=cc._decorator,h=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.richText=null,e.colorGreen=(new cc.Color).fromHEX("#41DB50"),e.colorGray=(new cc.Color).fromHEX("#8EB6FF"),e._text1="",e._text2="",e}return s(e,t),Object.defineProperty(e.prototype,"text1",{get:function(){return this._text1},set:function(t){this._text1=t,this.setText(t,this.text2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text2",{get:function(){return this._text2},set:function(t){this._text2=t,this.setText(this.text1,this.text2)},enumerable:!1,configurable:!0}),e.prototype.setText=function(t,e){if(this.richText){if(this._text1=t,this._text2=e,this.richText.maxWidth=0,t&&e){var i="<color="+this.colorGreen.toHEX("#rrggbb")+">"+t+"</color> <color=#"+this.colorGray.toHEX("#rrggbb")+">"+e+"</color>";this.richText.string=i,this.richText.node.color=cc.Color.WHITE,this.richText.node.opacity=255}else this.richText.string=t,this.richText.node.color=this.colorGray;this.richText.node.width>this.maxWidth&&(this.richText.maxWidth=this.maxWidth,this.richText.node.width=this.maxWidth,this.richText.forceDoLayout())}},e.prototype.clear=function(){t.prototype.clear.call(this),this._text1="",this._text2="",this.richText&&(this.richText.string="")},e.prototype.getMsgBodySize=function(){return this.richText.node.getContentSize()},e.prototype.updateView=function(){var t=this.mMsgData&&this.mMsgData.sysMsg;if(t)if(t.dwSysType===p.IMDef.SysMsgType.TIME)this.setText(a.IMHelper.formatTime(1e3*this.mMsgData.dwTime));else{var e=r.Language.getInstance().getLanguage();t.strNickName?this.setText(t.strNickName,t.msgJson[e]):this.setText(t.msgJson[e])}},n([d({type:cc.RichText,tooltip:"\u6587\u672c\u5185\u5bb9"})],e.prototype,"richText",void 0),n([d],e.prototype,"colorGreen",void 0),n([d],e.prototype,"colorGray",void 0),n([d],e.prototype,"_text1",void 0),n([d(cc.String)],e.prototype,"text1",null),n([d],e.prototype,"_text2",void 0),n([d(cc.String)],e.prototype,"text2",null),n([h],e)}(c.UIIMsgBase);i.UIIMSysMsg=u,cc._RF.pop()},{"../../../../script/lib/base/Language":void 0,"../../controller/IMHelper":"IMHelper","../../model/IMDef":"IMDef","./UIIMsgBase":"UIIMsgBase"}],UIIMTextMsg:[function(t,e,i){"use strict";cc._RF.push(e,"b51e9flCxlALYy0+vwcUJP0","UIIMTextMsg");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMTextMsg=void 0;var r=t("./UIIMsgBase"),a=cc._decorator,p=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftTxtColor=(new cc.Color).fromHEX("#314C7B"),e.rightTxtColor=(new cc.Color).fromHEX("#1F6C07"),e.richText=null,e.label=null,e._text="",e.isRichText=!1,e}return s(e,t),Object.defineProperty(e.prototype,"text1",{get:function(){return this._text},set:function(t){this._text=t,this.setText(t)},enumerable:!1,configurable:!0}),e.prototype.setText=function(t){this._text=t,this.richText&&this.isRichText?(this.richText.node.x=this.isLeft?this.paddingL:this.paddingR,this.richText.maxWidth=0,this.richText.string=t,this.richText.node.width>this.maxWidth&&(this.richText.maxWidth=this.maxWidth,this.richText.forceDoLayout())):(this.label.overflow=cc.Label.Overflow.NONE,this.label.node.x=this.isLeft?this.paddingL:this.paddingR,this.label.string=t,this.label.forceDoLayout(),this.label.node.width>this.maxWidth&&(this.label.node.width=this.maxWidth,this.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.label.forceDoLayout()))},e.prototype.clear=function(){t.prototype.clear.call(this),this.label&&(this.label.string=""),this.richText&&(this.richText.string="")},e.prototype.getMsgBodySize=function(){return this.isRichText?this.richText.node.getContentSize():this.label.node.getContentSize()},e.prototype.updateView=function(){this.mMsgData&&this.mMsgData.txtMsg&&this.setText(this.mMsgData.txtMsg.strContent)},e.prototype.alignLOrR=function(e){t.prototype.alignLOrR.call(this,e);var i=e?this.leftTxtColor:this.rightTxtColor,o=e?this.paddingL:this.paddingR;this.richText&&this.isRichText?(this.richText.node.color=i,this.richText.node.x=o):(this.label.node.color=i,this.label.node.x=o)},n([c],e.prototype,"leftTxtColor",void 0),n([c],e.prototype,"rightTxtColor",void 0),n([c({type:cc.RichText,tooltip:"\u5bcc\u6587\u672c\u5185\u5bb9"})],e.prototype,"richText",void 0),n([c({type:cc.Label,tooltip:"\u6587\u672c\u5185\u5bb9"})],e.prototype,"label",void 0),n([c],e.prototype,"_text",void 0),n([c(cc.String)],e.prototype,"text1",null),n([p],e)}(r.UIIMsgBase);i.UIIMTextMsg=l,cc._RF.pop()},{"./UIIMsgBase":"UIIMsgBase"}],UIIMVoiceMsg:[function(t,e,i){"use strict";cc._RF.push(e,"542bdpp4xRI6JARdKxxf/ev","UIIMVoiceMsg");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMVoiceMsg=void 0;var r=t("../../../../script/app/view/ComUI"),a=t("../../controller/IMHelper"),p=t("../../model/IMEvent"),c=t("./UIIMsgBase"),l=cc._decorator,h=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sfLeftVoice=null,e.sfRightVoice=null,e.leftTxtColor=(new cc.Color).fromHEX("#314C7B"),e.rightTxtColor=(new cc.Color).fromHEX("#1F6C07"),e.arrLVoiceImg=[],e.arrRVoiceImg=[],e.ndVoiceImg=null,e.spVoiceImg=null,e.labVoiceTime=null,e.spReddot=null,e.mVoiceUrl="",e.mDuration=0,e.mVoiceIdx=0,e.mPlaying=!1,e}return s(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.mVoiceUrl="",this.mDuration=0,this.mDuration=0,this.mPlaying=!1,this.mVoiceIdx=0},e.prototype.listEvent=function(){return new Map([[p.IMEvent.Opt.PLAY_VOICE,this.onPlayVoice]])},e.prototype.start=function(){t.prototype.start.call(this),this.node.getComponent(cc.Button)||this.node.addComponent(cc.Button),this.node.on("click",this.play,this)},e.prototype.setVoice=function(t,e){this.mVoiceUrl=t,this.setMsgTime(e)},e.prototype.setMsgTime=function(t){this.mDuration=t,this.labVoiceTime&&(this.labVoiceTime.string=t+'"',this.labVoiceTime.forceDoLayout())},e.prototype.setReddot=function(t){this.spReddot&&(this.spReddot.node.active=t)},e.prototype.onPlayVoice=function(t){this.mMsgData&&this.mMsgData.dwMsgId===t||this.stopAnim()},e.prototype.play=function(){var t=this;if(this.mPlaying)return this.stopPlay();this.setReddot(!1),this.mMsgData&&this.dispatch(p.IMEvent.Opt.PLAY_VOICE,this.mMsgData.dwMsgId);var e=this.spVoiceImg.node.getComponent(cc.Widget);e&&(e.enabled=!1,e.enabled=!0,this.isLeft?(e.isAlignRight=!1,e.isAlignLeft=!0,e.right=0):(e.isAlignRight=!0,e.isAlignLeft=!1,e.right=0));var i=this;a.IMHelper.playVoice(this.mMsgData,function(){cc.isValid(i)&&(cc.tween(i.spVoiceImg.node).repeatForever(cc.tween().call(i.playAnim.bind(i)).delay(.4)).start(),cc.tween(i.spVoiceImg.node).delay(i.mDuration).call(i.stopAnim.bind(t)).start())})},e.prototype.stopPlay=function(){this.mPlaying=!1,a.IMHelper.stopPlay(),this.stopAnim()},e.prototype.playAnim=function(){this.mPlaying=!0,this.mVoiceIdx++;var t=this.isLeft?this.arrLVoiceImg:this.arrRVoiceImg;if(this.spVoiceImg&&t){this.mVoiceIdx>=t.length&&(this.mVoiceIdx=0);var e=t[this.mVoiceIdx];e&&(this.spVoiceImg.spriteFrame=e)}},e.prototype.stopAnim=function(){this.mPlaying=!1;var t=this.isLeft?this.arrLVoiceImg:this.arrRVoiceImg;if(this.spVoiceImg&&t){this.spVoiceImg.node.stopAllActions();var e=t[t.length-1];e&&(this.spVoiceImg.spriteFrame=e)}},e.prototype.getMsgBodySize=function(){var t=200;return this.spVoiceImg.node&&(t+=this.spVoiceImg.node.width),this.labVoiceTime&&(t+=r.ComUI.getLabelSize(this.labVoiceTime).width),t<200?t=200:t>650&&(t=650),new cc.Size(t,96)},e.prototype.updateView=function(){var t=this.mMsgData&&this.mMsgData.voiceMsg;if(t){this.setVoice(t.strVoiceUrl,t.dwVoiceTime);var e=!this.mMsgData.hasRead&&!this.mMsgData.isMeSend;cc.log("\u7ea2\u70b9\u523b\u5ea6\u72b6\u6001\uff1a"+this.mMsgData.dwMsgId+", \u8bfb\u53d6\u72b6\u6001: "+this.mMsgData.hasRead+", \u6211\u53d1\u7684\uff1f:"+this.mMsgData.isMeSend+", \u7ed3\u679c: "+e),this.setReddot(e),370===this.mMsgData.dwMsgId&&cc.log(" UIIMVoiceMsg "+JSON.stringify(this.mMsgData))}},e.prototype.alignLOrR=function(e){if(t.prototype.alignLOrR.call(this,e),this.spVoiceImg){var i=e?this.sfLeftVoice:this.sfRightVoice;i&&(this.spVoiceImg.spriteFrame=i),(s=this.ndVoiceImg.getComponent(cc.Widget))&&(s.enabled=!1,s.enabled=!0,e?(s.isAlignRight=!1,s.isAlignLeft=!0,s.right=s.left):(s.isAlignRight=!0,s.isAlignLeft=!1,s.right=s.left))}if(this.labVoiceTime){var o=e?this.leftTxtColor:this.rightTxtColor;o&&(this.labVoiceTime.node.color=o),(s=this.labVoiceTime.getComponent(cc.Widget))&&(s.enabled=!1,s.enabled=!0,e?(s.isAlignRight=!1,s.isAlignLeft=!0,s.right=s.left):(s.isAlignRight=!0,s.isAlignLeft=!1,s.right=s.left))}var s;this.spReddot&&(s=this.spReddot.getComponent(cc.Widget))&&(s.enabled=!1,s.enabled=!0,e?(s.left=s.right,s.isAlignRight=!0,s.isAlignLeft=!1):(s.right=s.left,s.isAlignRight=!1,s.isAlignLeft=!0))},n([d({type:cc.SpriteFrame,tooltip:"\u5de6\u8fb9\u8bed\u97f3\u56fe\u7247"})],e.prototype,"sfLeftVoice",void 0),n([d({type:cc.SpriteFrame,tooltip:"\u53f3\u8fb9\u8bed\u97f3\u56fe\u7247"})],e.prototype,"sfRightVoice",void 0),n([d],e.prototype,"leftTxtColor",void 0),n([d],e.prototype,"rightTxtColor",void 0),n([d({type:[cc.SpriteFrame],tooltip:"\u8bed\u97f3\u52a8\u753b\u7ec4"})],e.prototype,"arrLVoiceImg",void 0),n([d({type:[cc.SpriteFrame],tooltip:"\u8bed\u97f3\u52a8\u753b\u7ec4"})],e.prototype,"arrRVoiceImg",void 0),n([d({type:cc.Node,tooltip:"\u8282\u70b9"})],e.prototype,"ndVoiceImg",void 0),n([d({type:cc.Sprite,tooltip:"\u8bed\u97f3\u56fe\u7247"})],e.prototype,"spVoiceImg",void 0),n([d({type:cc.Label,tooltip:"\u8bed\u97f3\u65f6\u957f"})],e.prototype,"labVoiceTime",void 0),n([d({type:cc.Sprite,tooltip:"\u7ea2\u70b9"})],e.prototype,"spReddot",void 0),n([h],e)}(c.UIIMsgBase);i.UIIMVoiceMsg=u,cc._RF.pop()},{"../../../../script/app/view/ComUI":void 0,"../../controller/IMHelper":"IMHelper","../../model/IMEvent":"IMEvent","./UIIMsgBase":"UIIMsgBase"}],UIIMWrapper:[function(t,e,i){"use strict";cc._RF.push(e,"161900/UzNM3L+/0+E3o84V","UIIMWrapper");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMWrapper=void 0;var r=t("../../../../script/app/event/Notify"),a=t("../../../../script/lib/base/CxComponent"),p=t("../../model/IMDef"),c=t("./UIIMMsgFactory"),l=cc._decorator,h=l.ccclass,d=l.property,u=l.requireComponent,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndHead=null,e.labNickName=null,e.ndMsg=null,e.labMsgInfo=null,e._isRight=!0,e._isSys=!1,e.pMsgFactory=null,e.pMsgBody=null,e.msgId=0,e.msgTime=0,e.headMarigin=25.8,e.nameMarigin=203,e.msgMarigin=184,e.padingLT=61.52,e.padingRT=20,e.sysMinHeight=74,e.normalMinHeight=150,e.msgGap=30,e.msgOffsetY=51,e.isDirty=!0,e._isInit=!1,e}return s(e,t),e.prototype.getCellSize=function(){return 0},Object.defineProperty(e.prototype,"isRight",{get:function(){return this._isRight},set:function(t){this._isRight!=t&&(this._isRight=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSys",{get:function(){return this._isSys},set:function(t){this._isSys!=t&&(this._isSys=t)},enumerable:!1,configurable:!0}),e.prototype.getContentSize=function(){var t=cc.Size.ZERO;return this.pMsgBody&&(t=this.pMsgBody.getBoxSize()),t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.pMsgFactory=this.getComponent(c.UIIMMsgFactory)},e.prototype.init=function(t){this.clear(),this.node.active=!0,this.isDirty=!0,this.mMsgData=t;var e=this.mMsgData;e&&(this.isRight=e.isMeSend,this.msgId=e.dwMsgId,this.msgTime=e.dwTime,this.isSys=e.dwType==p.IMDef.MsgType.SYSTEM),this.initMsgBody(e),this.updateView()},Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._isInit=!0},e.prototype.onDisable=function(){this.clear()},e.prototype.clear=function(){this.msgId=0,this.isDirty=!0,this.isSys=!1,this.isRight=!1,this.msgTime=0,this.mMsgData=null,this.pMsgBody&&(this.pMsgBody.clear(),this.pMsgBody.node.active=!1,this.pMsgBody=null),this.ndHead&&(this.ndHead.active=!1),this.labNickName&&(this.labNickName.string=""),this.pMsgBody=null},e.prototype.initMsgBody=function(t){this.pMsgFactory&&(this.pMsgBody=this.pMsgFactory.createMsg(this,t),this.pMsgBody&&(this.pMsgBody.clear(),this.pMsgBody.init(t)))},e.prototype.onUpdate=function(t){t&&this.mMsgData&&this.mMsgData.dwTime==t.dwTime&&this.mMsgData.dwTime==t.dwTime&&this.pMsgBody&&(this.mMsgData=t,this.initMsgBody(t))},e.prototype.updateSize=function(){var t=cc.Size.ZERO;this.pMsgBody&&(t=this.pMsgBody.getBoxSize());var e=0;this.isSys?e=Math.max(t.height,this.sysMinHeight):(e=Math.max(t.height,this.normalMinHeight),t.height>this.normalMinHeight&&(e+=this.msgOffsetY)),e+=this.msgGap,this.node.height=e},e.prototype.updateView=function(){this.isDirty&&(this.isDirty=!1,this.updateSize(),this.isSys?(this.initSysView(),this.pMsgBody&&this.pMsgBody.alignCenter()):(this.initUserInfo(),this.initNormalView()))},e.prototype.initSysView=function(){if(this.ndHead&&(this.ndHead.active=!1),this.labNickName&&(this.labNickName.node.active=!1),this.ndMsg){this.ndMsg.anchorX=.5;var t=this.ndMsg.getComponent(cc.Widget)||this.ndMsg.addComponent(cc.Widget);t&&(t.enabled=!1,t.enabled=!0,t.verticalCenter=0,t.horizontalCenter=0,t.isAlignRight=!1,t.isAlignLeft=!1,t.isAlignHorizontalCenter=!0,t.isAlignVerticalCenter=!0,t.isAlignTop=!1)}},e.prototype.initNormalView=function(){var t;if(this.ndHead&&(this.ndHead.active=!0,(t=this.ndHead.getComponent(cc.Widget)||this.ndHead.addComponent(cc.Widget))&&(t.enabled=!1,t.enabled=!0,this.isRight?(t.isAlignLeft=!1,t.isAlignRight=!0,t.right=this.headMarigin):(t.isAlignLeft=!0,t.isAlignRight=!1,t.left=this.headMarigin))),this.ndMsg&&((t=this.ndMsg.getComponent(cc.Widget)||this.ndMsg.addComponent(cc.Widget))&&(t.enabled=!1,t.enabled=!0,t.isAlignTop=!0,this.isRight?(t.isAlignRight=!0,t.isAlignLeft=!1,t.right=this.msgMarigin,t.top=this.padingRT):(t.left=this.msgMarigin,t.top=this.padingLT,t.isAlignLeft=!0,t.isAlignRight=!1)),this.pMsgBody)){var e=this.pMsgBody.getComponent(cc.Widget)||this.pMsgBody.addComponent(cc.Widget);e&&(e.enabled=!1,e.enabled=!0,this.isRight?(e.isAlignRight=!0,e.isAlignLeft=!1,e.right=0):(e.isAlignLeft=!0,e.isAlignRight=!1,e.left=0)),this.pMsgBody.alignLOrR(!this.isRight)}this.labNickName&&(this.labNickName.node.active=!this.isRight,this.isRight||(this.labNickName.node.x=this.nameMarigin))},e.prototype.initUserInfo=function(){var t=this.mMsgData.userInfo;this.dispatch(r.Notify.Head.CREATE_HEAD,{parent:this.ndHead,userId:t&&t.dwUserID||0,size:cc.size(149,149),faceId:t.sysFaceId,robot:!1,custFaceId:t.custFaceId,url:t.headURL,save:!0,level:t.level,rankLever:t.ranklevel||0,rankStartLever:t.rankstarlevel||0}),this.labNickName&&(this.labNickName.string=t&&t.strNickName||"")},n([d(cc.Node)],e.prototype,"ndHead",void 0),n([d(cc.Label)],e.prototype,"labNickName",void 0),n([d(cc.Node)],e.prototype,"ndMsg",void 0),n([d(cc.Label)],e.prototype,"labMsgInfo",void 0),n([d],e.prototype,"_isRight",void 0),n([d({tooltip:"\u662f\u5426\u662f\u53f3\u8fb9"})],e.prototype,"isRight",null),n([d],e.prototype,"_isSys",void 0),n([d({tooltip:"\u662f\u5426\u662f\u7cfb\u7edf\u6d88\u606f"})],e.prototype,"isSys",null),n([h,u(c.UIIMMsgFactory)],e)}(a.CxComponent);i.UIIMWrapper=g,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../model/IMDef":"IMDef","./UIIMMsgFactory":"UIIMMsgFactory"}],UIIMsgBase:[function(t,e,i){"use strict";cc._RF.push(e,"e5dbeXkjDVBK6UMvkGVovZM","UIIMsgBase");var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIIMsgBase=void 0;var r=t("../../../../script/lib/base/CxComponent"),a=cc._decorator,p=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spMsgBg=null,e.sfLeftBg=null,e.sfRightBg=null,e.minWidth=313,e.maxWidth=650.3,e.paddingT=30,e.paddingR=30,e.paddingB=30,e.paddingL=30,e.isLeft=!0,e.isInit=!1,e.isDirty=!0,e}return s(e,t),e.prototype.start=function(){this.isInit=!0},e.prototype.init=function(t){this.isDirty=!0,this.mMsgData=t,this.node.active=!0,this.updateView()},e.prototype.getBoxSize=function(){return this.updateSize(),this.node.parent?this.node.parent.getContentSize():new cc.Size(this.minWidth[0],74)},e.prototype.updateSize=function(){if(this.node.parent){this.isDirty=!1;var t=this.getMsgBodySize(),e=this.paddingL+this.paddingR+t.width,i=this.paddingT+this.paddingB+t.height;this.node.width=e,this.node.height=i,this.spMsgBg&&(this.spMsgBg.node.width=e,this.spMsgBg.node.height=i),this.node.parent.width=e,this.node.parent.height=i}else cc.log("updateSize uuid="+this.node.uuid)},e.prototype.setBg=function(){if(this.spMsgBg){var t=this.isLeft?this.sfLeftBg:this.sfRightBg;t&&(this.spMsgBg.spriteFrame=t)}},e.prototype.alignLOrR=function(t){this.isLeft!==t&&(this.isLeft=t,this.setBg())},e.prototype.alignCenter=function(){},e.prototype.clear=function(){this.mMsgData=null,this.isDirty=!0},n([c({type:cc.Sprite,tooltip:"\u5185\u5bb9\u80cc\u666f"})],e.prototype,"spMsgBg",void 0),n([c({type:cc.SpriteFrame,tooltip:"\u5de6\u8fb9\u80cc\u666f"})],e.prototype,"sfLeftBg",void 0),n([c({type:cc.SpriteFrame,tooltip:"\u53f3\u8fb9\u80cc\u666f"})],e.prototype,"sfRightBg",void 0),n([c({type:cc.Float})],e.prototype,"minWidth",void 0),n([c({type:cc.Float})],e.prototype,"maxWidth",void 0),n([c({type:cc.Float,tooltip:"\u4e0a\u8fb9\u8ddd"})],e.prototype,"paddingT",void 0),n([c({type:cc.Float,tooltip:"\u53f3\u8fb9\u8ddd"})],e.prototype,"paddingR",void 0),n([c({type:cc.Float,tooltip:"\u4e0b\u8fb9\u8ddd"})],e.prototype,"paddingB",void 0),n([c({type:cc.Float,tooltip:"\u5de6\u8fb9\u8ddd"})],e.prototype,"paddingL",void 0),n([p],e)}(r.CxComponent);i.UIIMsgBase=l,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0}]},{},["LIMInputArea","LIMMsgList","IMHandler","IMHelper","IMI18n","IMDB","IMData","IMDef","IMEvent","IMUIConfig","IMRewardTips","IMChooseChipView","IMChooseTableView","IMHelpRewardDlg","IMTableCell","IMTableChip","IMTableItem","IMTablePiece","IMInputArea","IMTouchListenter","UIIMEmojMsg","UIIMHelpMsg","UIIMMsgFactory","UIIMMsgList","UIIMSysMsg","UIIMTextMsg","UIIMVoiceMsg","UIIMWrapper","UIIMsgBase","UIIMAudioRecorder"]);