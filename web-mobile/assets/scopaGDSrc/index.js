window.__require=function t(e,a,o){function i(n,s){if(!a[n]){if(!e[n]){var c=n.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var l=a[n]={exports:{}};e[n][0].call(l.exports,function(t){return i(e[n][1][t]||t)},l,l.exports,t,e,a,o)}return a[n].exports}for(var r="function"==typeof __require&&__require,n=0;n<o.length;n++)i(o[n]);return i}({CMD_ScopaCrazyMsgDefine:[function(t,e,a){"use strict";cc._RF.push(e,"fd60aWUUsFHVJaAtlKG6FLN","CMD_ScopaCrazyMsgDefine"),Object.defineProperty(a,"__esModule",{value:!0}),a.SCOPA_GAME_STATUS=a.SCOPA_ACTION_TYPE=a.SCOPA_SETTLE_GOLD_TYPE=a.SCOPA_CONST=a.MESSAGE_CS_SCOPA_SUB_ID=a.MESSAGE_SC_SCOPA_SUB_ID=a.LOGIC_MAIN_MSG=a.MSG_SC_ChangeCard=a.MSG_SC_OPWanFaRtn=a.MSG_CS_OPWanFa=a.MSG_SC_UserButtonShow=a.MSG_SC_UserGold=a.MSG_SC_GOLD_ITEM=a.MSG_SC_OPPC=a.MSG_CS_OPPC=a.MSG_CS_SCOPA_UserEat=a.MSG_CS_SCOPA_UserPlay=a.MSG_SC_SCOPA_PCTip=a.MSG_SC_SCOPA_ScopaWinList=a.ScopaWinItem=a.MSG_SC_SCOPA_GamePlay=a.MSG_SCOPAUserGameInfo=a.MSG_SC_SCOPA_GameResult=a.MSG_SCOPAUserSettleInfo=a.MSG_SC_SCOPA_GetSurplusCard=a.MSG_SC_SCOPA_EatCardList=a.MSG_SC_SCOPA_OPResult=a.MSG_SC_SCOPA_PlayResult=a.MSG_SC_SCOPA_InformUserOP=a.MSG_CARDS=a.MSG_SC_SCOPA_SendHandCard=a.MSG_SC_SCOPA_GameStartData=void 0;var o=function(){function t(){this.dwCardNum=0,this.tabAttackMultiple=protobuf.util.emptyArray,this.bClearAttack=!1,this.bHavePot=!1}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwCardNum&&e.uint32(8).uint32(t.dwCardNum),void 0!==t.tabAttackMultiple&&t.tabAttackMultiple.length)for(var a=0,o=t.tabAttackMultiple;a<o.length;a++){var i=o[a];e.uint32(16).uint32(i)}return null!=t.bClearAttack&&e.uint32(24).bool(t.bClearAttack),null!=t.bHavePot&&e.uint32(32).bool(t.bHavePot),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.tabAttackMultiple=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwCardNum=o.uint32();break;case 2:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.tabAttackMultiple.push(o.uint32());else r.tabAttackMultiple.push(o.uint32());break;case 3:r.bClearAttack=o.bool();break;case 4:r.bHavePot=o.bool();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GameStartData=o;var i=function(){function t(){this.dwChairID=0,this.dwCardNum=0,this.dwCardData=protobuf.util.emptyArray,this.dwTableCardNum=0,this.dwTableCardData=protobuf.util.emptyArray,this.dwSurplusNum=0}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwCardNum&&e.uint32(16).uint32(t.dwCardNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}if(null!=t.dwTableCardNum&&e.uint32(32).uint32(t.dwTableCardNum),void 0!==t.dwTableCardData&&t.dwTableCardData.length)for(var r=0,n=t.dwTableCardData;r<n.length;r++)i=n[r],e.uint32(40).uint32(i);return null!=t.dwSurplusNum&&e.uint32(48).uint32(t.dwSurplusNum),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[],r.dwTableCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwCardNum=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;case 4:r.dwTableCardNum=o.uint32();break;case 5:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.dwTableCardData.push(o.uint32());else r.dwTableCardData.push(o.uint32());break;case 6:r.dwSurplusNum=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_SendHandCard=i;var r=function(){function t(){this.dwCardNum=0,this.dwCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwCardNum&&e.uint32(8).uint32(t.dwCardNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(16).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwCardNum=o.uint32();break;case 2:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_CARDS=r;var n=function(){function t(){this.dwChairID=0,this.dwOppTime=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOppTime&&e.uint32(16).uint32(t.dwOppTime),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOppTime=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_InformUserOP=n;var s=function(){function t(){this.dwError=0,this.dwChairID=0,this.dwOutCard=0,this.dwGetCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError),null!=t.dwChairID&&e.uint32(16).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(24).uint32(t.dwOutCard),void 0!==t.dwGetCardData&&t.dwGetCardData.length)for(var a=0,o=t.dwGetCardData;a<o.length;a++){var i=o[a];e.uint32(32).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwGetCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwError=o.uint32();break;case 2:r.dwChairID=o.uint32();break;case 3:r.dwOutCard=o.uint32();break;case 4:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwGetCardData.push(o.uint32());else r.dwGetCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_PlayResult=s;var c=function(){function t(){this.dwChairID=0,this.dwOutCard=0,this.dwGetCardData=protobuf.util.emptyArray,this.bScopa=!1,this.dwMultiplyNum=0,this.dwCoinSumTotal=0,this.tabCoinCards=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(16).uint32(t.dwOutCard),void 0!==t.dwGetCardData&&t.dwGetCardData.length)for(var a=0,o=t.dwGetCardData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}if(null!=t.bScopa&&e.uint32(32).bool(t.bScopa),null!=t.dwMultiplyNum&&e.uint32(40).uint32(t.dwMultiplyNum),null!=t.dwCoinSumTotal&&e.uint32(48).int32(t.dwCoinSumTotal),void 0!==t.tabCoinCards&&t.tabCoinCards.length)for(var r=0,n=t.tabCoinCards;r<n.length;r++)i=n[r],e.uint32(56).uint32(i);return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwGetCardData=[],r.tabCoinCards=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOutCard=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwGetCardData.push(o.uint32());else r.dwGetCardData.push(o.uint32());break;case 4:r.bScopa=o.bool();break;case 5:r.dwMultiplyNum=o.uint32();break;case 6:r.dwCoinSumTotal=o.int32();break;case 7:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.tabCoinCards.push(o.uint32());else r.tabCoinCards.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_OPResult=c;var d=function(){function t(){this.dwOutCard=0,this.dwEatCardData=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwOutCard&&e.uint32(8).uint32(t.dwOutCard);for(var a=0,o=t.dwEatCardData;a<o.length;a++){var i=o[a];null!=i&&r.encode(i,e.uint32(18).fork()).ldelim()}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,n=new t,s=!1;for(n.dwEatCardData=[];o.pos<i&&!s;){var c=o.uint32();switch(c>>>3){case 0:s=!0;break;case 1:n.dwOutCard=o.uint32();break;case 2:n.dwEatCardData.push(r.decode(o,o.uint32()));break;default:o.skipType(7&c)}}return n},t}();a.MSG_SC_SCOPA_EatCardList=d;var l=function(){function t(){this.dwChairID=0,this.dwCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(16).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GetSurplusCard=l;var p=function(){function t(){this.dwChairID=0,this.dwGold=0,this.dwScore=0,this.dwCardnum=0,this.dwColorFen=0,this.bHaveCoins7=!1,this.dwCoinsNum=0,this.dwScopaNum=0,this.dwCardData=protobuf.util.emptyArray,this.bPC=!1,this.dwCupNum=0,this.dwExpLevel=0,this.dwDanRank=0,this.dwChange=0,this.dwScopaAttackGold=0,this.dwGoldPool=0,this.bUseHD=!1}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwGold&&e.uint32(16).int32(t.dwGold),null!=t.dwScore&&e.uint32(24).uint32(t.dwScore),null!=t.dwCardnum&&e.uint32(32).uint32(t.dwCardnum),null!=t.dwColorFen&&e.uint32(40).uint32(t.dwColorFen),null!=t.bHaveCoins7&&e.uint32(48).bool(t.bHaveCoins7),null!=t.dwCoinsNum&&e.uint32(56).uint32(t.dwCoinsNum),null!=t.dwScopaNum&&e.uint32(64).uint32(t.dwScopaNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(72).uint32(i)}return null!=t.bPC&&e.uint32(80).bool(t.bPC),null!=t.dwCupNum&&e.uint32(88).uint32(t.dwCupNum),null!=t.dwExpLevel&&e.uint32(96).uint32(t.dwExpLevel),null!=t.dwDanRank&&e.uint32(104).uint32(t.dwDanRank),null!=t.dwChange&&e.uint32(112).int32(t.dwChange),null!=t.dwScopaAttackGold&&e.uint32(120).int32(t.dwScopaAttackGold),null!=t.dwGoldPool&&e.uint32(128).uint32(t.dwGoldPool),null!=t.bUseHD&&e.uint32(136).bool(t.bUseHD),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwGold=o.int32();break;case 3:r.dwScore=o.uint32();break;case 4:r.dwCardnum=o.uint32();break;case 5:r.dwColorFen=o.uint32();break;case 6:r.bHaveCoins7=o.bool();break;case 7:r.dwCoinsNum=o.uint32();break;case 8:r.dwScopaNum=o.uint32();break;case 9:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;case 10:r.bPC=o.bool();break;case 11:r.dwCupNum=o.uint32();break;case 12:r.dwExpLevel=o.uint32();break;case 13:r.dwDanRank=o.uint32();break;case 14:r.dwChange=o.int32();break;case 15:r.dwScopaAttackGold=o.int32();break;case 16:r.dwGoldPool=o.uint32();break;case 17:r.bUseHD=o.bool();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SCOPAUserSettleInfo=p;var u=function(){function t(){this.dwWinnerChairID=0,this.dwRematchTime=0,this.tabUserSettleInfoList=void 0,this.dwMultiplyNum=0,this.dwCappingChairID=0,this.dwKOChairID=0,this.bDanSettle=!1,this.bHavePot=!1}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwWinnerChairID&&e.uint32(8).uint32(t.dwWinnerChairID),null!=t.dwRematchTime&&e.uint32(16).uint32(t.dwRematchTime);for(var a=0,o=t.tabUserSettleInfoList;a<o.length;a++){var i=o[a];null!=i&&p.encode(i,e.uint32(26).fork()).ldelim()}return null!=t.dwMultiplyNum&&e.uint32(32).uint32(t.dwMultiplyNum),null!=t.dwCappingChairID&&e.uint32(40).uint32(t.dwCappingChairID),null!=t.dwKOChairID&&e.uint32(48).uint32(t.dwKOChairID),null!=t.bDanSettle&&e.uint32(56).bool(t.bDanSettle),null!=t.bHavePot&&e.uint32(64).bool(t.bHavePot),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.tabUserSettleInfoList=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwWinnerChairID=o.uint32();break;case 2:r.dwRematchTime=o.uint32();break;case 3:r.tabUserSettleInfoList.push(p.decode(o,o.uint32()));break;case 4:r.dwMultiplyNum=o.uint32();break;case 5:r.dwCappingChairID=o.uint32();break;case 6:r.dwKOChairID=o.uint32();break;case 7:r.bDanSettle=o.bool();break;case 8:r.bHavePot=o.bool();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GameResult=u;var h=function(){function t(){this.dwChairID=0,this.dwScopaNum=0,this.dwScopaData=protobuf.util.emptyArray,this.dwGetCardNum=0,this.dwGetCardData=protobuf.util.emptyArray,this.bHaveCoins7=!1,this.dwCardnum=0,this.tabHandCardData=protobuf.util.emptyArray,this.dwCoinSumTotal=0,this.tabCoinCards=protobuf.util.emptyArray,this.dwAttackMultiple=0,this.bJiaBei=!1,this.bHuanPai=!1,this.dwJiaBeiGold=0,this.dwHuanPaiGold=0,this.dwHuanPaiTili=0}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwScopaNum&&e.uint32(16).uint32(t.dwScopaNum),void 0!==t.dwScopaData&&t.dwScopaData.length)for(var a=0,o=t.dwScopaData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}if(null!=t.dwGetCardNum&&e.uint32(32).uint32(t.dwGetCardNum),void 0!==t.dwGetCardData&&t.dwGetCardData.length)for(var r=0,n=t.dwGetCardData;r<n.length;r++)i=n[r],e.uint32(40).uint32(i);if(null!=t.bHaveCoins7&&e.uint32(48).bool(t.bHaveCoins7),null!=t.dwCardnum&&e.uint32(56).uint32(t.dwCardnum),void 0!==t.tabHandCardData&&t.tabHandCardData.length)for(var s=0,c=t.tabHandCardData;s<c.length;s++)i=c[s],e.uint32(64).uint32(i);if(null!=t.dwCoinSumTotal&&e.uint32(72).int32(t.dwCoinSumTotal),void 0!==t.tabCoinCards&&t.tabCoinCards.length)for(var d=0,l=t.tabCoinCards;d<l.length;d++)i=l[d],e.uint32(80).uint32(i);return null!=t.dwAttackMultiple&&e.uint32(88).uint32(t.dwAttackMultiple),null!=t.bJiaBei&&e.uint32(96).bool(t.bJiaBei),null!=t.bHuanPai&&e.uint32(104).bool(t.bHuanPai),null!=t.dwJiaBeiGold&&e.uint32(112).uint32(t.dwJiaBeiGold),null!=t.dwHuanPaiGold&&e.uint32(120).uint32(t.dwHuanPaiGold),null!=t.dwHuanPaiTili&&e.uint32(128).uint32(t.dwHuanPaiTili),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwScopaData=[],r.dwGetCardData=[],r.tabHandCardData=[],r.tabCoinCards=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwScopaNum=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwScopaData.push(o.uint32());else r.dwScopaData.push(o.uint32());break;case 4:r.dwGetCardNum=o.uint32();break;case 5:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.dwGetCardData.push(o.uint32());else r.dwGetCardData.push(o.uint32());break;case 6:r.bHaveCoins7=o.bool();break;case 7:r.dwCardnum=o.uint32();break;case 8:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.tabHandCardData.push(o.uint32());else r.tabHandCardData.push(o.uint32());break;case 9:r.dwCoinSumTotal=o.int32();break;case 10:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.tabCoinCards.push(o.uint32());else r.tabCoinCards.push(o.uint32());break;case 11:r.dwAttackMultiple=o.uint32();break;case 12:r.bJiaBei=o.bool();break;case 13:r.bHuanPai=o.bool();break;case 14:r.dwJiaBeiGold=o.uint32();break;case 15:r.dwHuanPaiGold=o.uint32();break;case 16:r.dwHuanPaiTili=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SCOPAUserGameInfo=h;var C=function(){function t(){this.dwCurrentChairID=0,this.dwOppTime=0,this.dwCardnum=0,this.dwCardData=protobuf.util.emptyArray,this.dwSurplusNum=0,this.tabUserGameInfoList=void 0,this.dwMultiplyNum=0,this.dwPCChairID=0,this.dwPCTime=0,this.bClearAttack=!1,this.dwGoldPool=0,this.dwManualDoubelCount=0,this.bHavePot=!1}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwCurrentChairID&&e.uint32(8).uint32(t.dwCurrentChairID),null!=t.dwOppTime&&e.uint32(16).uint32(t.dwOppTime),null!=t.dwCardnum&&e.uint32(24).uint32(t.dwCardnum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(32).uint32(i)}null!=t.dwSurplusNum&&e.uint32(40).uint32(t.dwSurplusNum);for(var r=0,n=t.tabUserGameInfoList;r<n.length;r++)null!=(i=n[r])&&h.encode(i,e.uint32(50).fork()).ldelim();return null!=t.dwMultiplyNum&&e.uint32(56).uint32(t.dwMultiplyNum),null!=t.dwPCChairID&&e.uint32(64).uint32(t.dwPCChairID),null!=t.dwPCTime&&e.uint32(72).uint32(t.dwPCTime),null!=t.bClearAttack&&e.uint32(80).bool(t.bClearAttack),null!=t.dwGoldPool&&e.uint32(88).uint32(t.dwGoldPool),null!=t.dwManualDoubelCount&&e.uint32(96).uint32(t.dwManualDoubelCount),null!=t.bHavePot&&e.uint32(104).bool(t.bHavePot),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[],r.tabUserGameInfoList=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwCurrentChairID=o.uint32();break;case 2:r.dwOppTime=o.uint32();break;case 3:r.dwCardnum=o.uint32();break;case 4:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;case 5:r.dwSurplusNum=o.uint32();break;case 6:r.tabUserGameInfoList.push(h.decode(o,o.uint32()));break;case 7:r.dwMultiplyNum=o.uint32();break;case 8:r.dwPCChairID=o.uint32();break;case 9:r.dwPCTime=o.uint32();break;case 10:r.bClearAttack=o.bool();break;case 11:r.dwGoldPool=o.uint32();break;case 12:r.dwManualDoubelCount=o.uint32();break;case 13:r.bHavePot=o.bool();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GamePlay=C;var f=function(){function t(){this.dwChairID=0,this.tabScopaWin=0,this.tabCard=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.tabScopaWin&&e.uint32(16).int32(t.tabScopaWin),void 0!==t.tabCard&&t.tabCard.length)for(var a=0,o=t.tabCard;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.tabCard=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.tabScopaWin=o.int32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.tabCard.push(o.uint32());else r.tabCard.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.ScopaWinItem=f;var S=function(){function t(){this.list=void 0,this.iTotal=0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create());for(var a=0,o=t.list;a<o.length;a++){var i=o[a];null!=i&&f.encode(i,e.uint32(10).fork()).ldelim()}return null!=t.iTotal&&e.uint32(16).int32(t.iTotal),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.list=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.list.push(f.decode(o,o.uint32()));break;case 2:r.iTotal=o.int32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_ScopaWinList=S;var y=function(){function t(){this.dwChairID=0,this.dwTime=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwTime&&e.uint32(16).uint32(t.dwTime),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwTime=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_PCTip=y;var m=function(){function t(){this.dwChairID=0,this.dwOutCard=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(16).uint32(t.dwOutCard),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOutCard=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_CS_SCOPA_UserPlay=m;var v=function(){function t(){this.dwChairID=0,this.dwOutCard=0,this.chEatCardData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(16).uint32(t.dwOutCard),null!=t.chEatCardData&&e.uint32(26).bytes(t.chEatCardData),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOutCard=o.uint32();break;case 3:r.chEatCardData=o.bytes();break;default:o.skipType(7&s)}}return r},t}();a.MSG_CS_SCOPA_UserEat=v;var _=function(){function t(){this.dwChairID=0,this.dwType=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwType&&e.uint32(16).uint32(t.dwType),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwType=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_CS_OPPC=_;var g=function(){function t(){this.dwChairID=0,this.dwType=0,this.dwCurGold=protobuf.util.Long?protobuf.util.LongBits.from(0).toLong():0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwType&&e.uint32(16).uint32(t.dwType),null!=t.dwCurGold&&e.uint32(24).uint64(t.dwCurGold),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwType=o.uint32();break;case 3:r.dwCurGold=o.uint64();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_OPPC=g;var b=function(){function t(){this.dwChairID=0,this.dwCurGold=protobuf.util.Long?protobuf.util.LongBits.from(0).toLong():0,this.iChangeGold=0,this.dwTag=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwCurGold&&e.uint32(16).uint64(t.dwCurGold),null!=t.iChangeGold&&e.uint32(24).int32(t.iChangeGold),null!=t.dwTag&&e.uint32(32).uint32(t.dwTag),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwCurGold=o.uint64();break;case 3:r.iChangeGold=o.int32();break;case 4:r.dwTag=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_GOLD_ITEM=b;var E=function(){function t(){this.tabGoldItem=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create());for(var a=0,o=t.tabGoldItem;a<o.length;a++){var i=o[a];null!=i&&b.encode(i,e.uint32(10).fork()).ldelim()}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.tabGoldItem=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.tabGoldItem.push(b.decode(o,o.uint32()));break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_UserGold=E;var I=function(){function t(){this.bJiaBei=!1,this.bHuanPai=!1,this.dwJiaBeiGold=0,this.dwHuanPaiGold=0,this.dwHuanPaiTili=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.bJiaBei&&e.uint32(8).bool(t.bJiaBei),null!=t.bHuanPai&&e.uint32(16).bool(t.bHuanPai),null!=t.dwJiaBeiGold&&e.uint32(24).uint32(t.dwJiaBeiGold),null!=t.dwHuanPaiGold&&e.uint32(32).uint32(t.dwHuanPaiGold),null!=t.dwHuanPaiTili&&e.uint32(40).uint32(t.dwHuanPaiTili),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.bJiaBei=o.bool();break;case 2:r.bHuanPai=o.bool();break;case 3:r.dwJiaBeiGold=o.uint32();break;case 4:r.dwHuanPaiGold=o.uint32();break;case 5:r.dwHuanPaiTili=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_UserButtonShow=I;var D=function(){function t(){this.dwOpType=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwOpType&&e.uint32(8).uint32(t.dwOpType),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwOpType=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_CS_OPWanFa=D;var w=function(){function t(){this.dwChairID=0,this.bJiaBei=!1,this.bHuanPai=!1,this.dwJiaBeiGold=0,this.dwHuanPaiGold=0,this.dwHuanPaiTili=0,this.dwCurPS=0,this.llCurGold=protobuf.util.Long?protobuf.util.LongBits.from(0).toLong():0,this.dwGoldPool=0,this.dwMultiplyNum=0,this.dwError=0,this.dwOpType=0,this.dwChangeGold=0,this.dwChangPS=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.bJiaBei&&e.uint32(16).bool(t.bJiaBei),null!=t.bHuanPai&&e.uint32(24).bool(t.bHuanPai),null!=t.dwJiaBeiGold&&e.uint32(32).uint32(t.dwJiaBeiGold),null!=t.dwHuanPaiGold&&e.uint32(40).uint32(t.dwHuanPaiGold),null!=t.dwHuanPaiTili&&e.uint32(48).uint32(t.dwHuanPaiTili),null!=t.dwCurPS&&e.uint32(56).uint32(t.dwCurPS),null!=t.llCurGold&&e.uint32(64).uint64(t.llCurGold),null!=t.dwGoldPool&&e.uint32(72).uint32(t.dwGoldPool),null!=t.dwMultiplyNum&&e.uint32(80).uint32(t.dwMultiplyNum),null!=t.dwError&&e.uint32(88).uint32(t.dwError),null!=t.dwOpType&&e.uint32(96).uint32(t.dwOpType),null!=t.dwChangeGold&&e.uint32(104).uint32(t.dwChangeGold),null!=t.dwChangPS&&e.uint32(112).uint32(t.dwChangPS),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.bJiaBei=o.bool();break;case 3:r.bHuanPai=o.bool();break;case 4:r.dwJiaBeiGold=o.uint32();break;case 5:r.dwHuanPaiGold=o.uint32();break;case 6:r.dwHuanPaiTili=o.uint32();break;case 7:r.dwCurPS=o.uint32();break;case 8:r.llCurGold=o.uint64();break;case 9:r.dwGoldPool=o.uint32();break;case 10:r.dwMultiplyNum=o.uint32();break;case 11:r.dwError=o.uint32();break;case 12:r.dwOpType=o.uint32();break;case 13:r.dwChangeGold=o.uint32();break;case 14:r.dwChangPS=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_OPWanFaRtn=w;var P=function(){function t(){this.dwChairID=0,this.dwCardNum=0,this.dwCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwCardNum&&e.uint32(16).uint32(t.dwCardNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwCardNum=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_ChangeCard=P,a.LOGIC_MAIN_MSG={MSG_GAMELOGIC_MAIN_ID:0,UNRECOGNIZED:-1},a.MESSAGE_SC_SCOPA_SUB_ID={MSGID_SC_SCOPA_GAME_START_DATA:1e3,MSGID_SC_SCOPA_SEND_HAND_CARD:1001,MSGID_SC_SCOPA_GAME_RESET_CARD:1002,MSGID_SC_SCOPA_INFORM_USEROP:1003,MSGID_SC_SCOPA_PLAY_RESULT:1004,MSGID_SC_SCOPA_OP_RESULT:1005,MSGID_SC_SCOPA_EATCARD_LIST:1006,MSGID_SC_SCOPA_GET_SURPLUS_CARD:1007,MSGID_SC_SCOPA_GAME_RESULT:1008,MSGID_SC_SCOPA_GAMESCENCE_PLAY:1009,MSGID_SC_SCOPA_GAMESCENCE_FREE:1010,MSGID_SC_SCOPA_SCOPAWIN_LIST:1011,MSGID_SC_SCOPA_PC:1012,MSGID_SC_OP_PC:1013,MSGID_SC_USER_GOLD:1014,MSGID_SC_USER_BUTTON_SHOW:1015,MSGID_SC_OP_WANFA_RTN:1016,MSGID_SC_SCOPA_CHANGE_CARD:1017,UNRECOGNIZED:-1},a.MESSAGE_CS_SCOPA_SUB_ID={MSGID_CS_SCOPA_USER_PLAY:2001,MSGID_CS_SCOPA_USER_EAT:2002,MSGID_CS_SCOPA_SCOPAWIN_LIST:2003,MSGID_CS_OP_PC:2004,MSGID_CS_OP_WANFA:2005,UNRECOGNIZED:-1},a.SCOPA_CONST={SCOPA_GAME_PLAYER:2,SCOPA_SEND_TABLE_CARD_COUNT:4,SCOPA_SEND_HAND_CARD_COUNT:3,SCOPA_PLAY_ALL_ROUND:6,SCOPA_CARD_NUM:40,UNRECOGNIZED:-1},a.SCOPA_SETTLE_GOLD_TYPE={SCOPA_FIXATION_TYPE:1,SCOPA_D_VALUE_TYPE:2,UNRECOGNIZED:-1},a.SCOPA_ACTION_TYPE={MSG_SCOPA_ACTION_OUTCARD:1,MSG_SCOPA_ACTION_GETCARD:2,UNRECOGNIZED:-1},a.SCOPA_GAME_STATUS={MSG_SCOPA_GAME_STATUS_FREE:1,MSG_SCOPA_GAME_STATUS_SEND_CARD:2,MSG_SCOPA_GAME_STATUS_OUT_CARD:3,UNRECOGNIZED:-1},cc._RF.pop()},{}],CMD_ScopaMsgDefine:[function(t,e,a){"use strict";cc._RF.push(e,"bc4bcm9rdpPt6SIMa2hFwNt","CMD_ScopaMsgDefine"),Object.defineProperty(a,"__esModule",{value:!0}),a.SCOPA_GAME_STATUS=a.SCOPA_ACTION_TYPE=a.SCOPA_SETTLE_GOLD_TYPE=a.SCOPA_CONST=a.MESSAGE_CS_SCOPA_SUB_ID=a.MESSAGE_SC_SCOPA_SUB_ID=a.LOGIC_MAIN_MSG=a.MSG_CS_SCOPA_UserEat=a.MSG_CS_SCOPA_UserPlay=a.MSG_SC_SCOPA_GamePlay=a.MSG_SCOPAUserGameInfo=a.MSG_SC_SCOPA_GameResult=a.MSG_SCOPAUserSettleInfo=a.MSG_SC_SCOPA_GetSurplusCard=a.MSG_SC_SCOPA_EatCardList=a.MSG_SC_SCOPA_OPResult=a.MSG_SC_SCOPA_PlayResult=a.MSG_SC_SCOPA_InformUserOP=a.MSG_CARDS=a.MSG_SC_SCOPA_SendHandCard=a.MSG_SC_SCOPA_GameStartData=void 0;var o=function(){function t(){this.dwCardNum=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwCardNum&&e.uint32(8).uint32(t.dwCardNum),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwCardNum=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GameStartData=o;var i=function(){function t(){this.dwChairID=0,this.dwCardNum=0,this.dwCardData=protobuf.util.emptyArray,this.dwTableCardNum=0,this.dwTableCardData=protobuf.util.emptyArray,this.dwSurplusNum=0}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwCardNum&&e.uint32(16).uint32(t.dwCardNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}if(null!=t.dwTableCardNum&&e.uint32(32).uint32(t.dwTableCardNum),void 0!==t.dwTableCardData&&t.dwTableCardData.length)for(var r=0,n=t.dwTableCardData;r<n.length;r++)i=n[r],e.uint32(40).uint32(i);return null!=t.dwSurplusNum&&e.uint32(48).uint32(t.dwSurplusNum),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[],r.dwTableCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwCardNum=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;case 4:r.dwTableCardNum=o.uint32();break;case 5:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.dwTableCardData.push(o.uint32());else r.dwTableCardData.push(o.uint32());break;case 6:r.dwSurplusNum=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_SendHandCard=i;var r=function(){function t(){this.dwCardNum=0,this.dwCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwCardNum&&e.uint32(8).uint32(t.dwCardNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(16).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwCardNum=o.uint32();break;case 2:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_CARDS=r;var n=function(){function t(){this.dwChairID=0,this.dwOppTime=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOppTime&&e.uint32(16).uint32(t.dwOppTime),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOppTime=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_InformUserOP=n;var s=function(){function t(){this.dwError=0,this.dwChairID=0,this.dwOutCard=0,this.dwGetCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError),null!=t.dwChairID&&e.uint32(16).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(24).uint32(t.dwOutCard),void 0!==t.dwGetCardData&&t.dwGetCardData.length)for(var a=0,o=t.dwGetCardData;a<o.length;a++){var i=o[a];e.uint32(32).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwGetCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwError=o.uint32();break;case 2:r.dwChairID=o.uint32();break;case 3:r.dwOutCard=o.uint32();break;case 4:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwGetCardData.push(o.uint32());else r.dwGetCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_PlayResult=s;var c=function(){function t(){this.dwChairID=0,this.dwOutCard=0,this.dwGetCardData=protobuf.util.emptyArray,this.bScopa=!1,this.dwMultiplyNum=0}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(16).uint32(t.dwOutCard),void 0!==t.dwGetCardData&&t.dwGetCardData.length)for(var a=0,o=t.dwGetCardData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}return null!=t.bScopa&&e.uint32(32).bool(t.bScopa),null!=t.dwMultiplyNum&&e.uint32(40).uint32(t.dwMultiplyNum),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwGetCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOutCard=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwGetCardData.push(o.uint32());else r.dwGetCardData.push(o.uint32());break;case 4:r.bScopa=o.bool();break;case 5:r.dwMultiplyNum=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_OPResult=c;var d=function(){function t(){this.dwOutCard=0,this.dwEatCardData=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwOutCard&&e.uint32(8).uint32(t.dwOutCard);for(var a=0,o=t.dwEatCardData;a<o.length;a++){var i=o[a];null!=i&&r.encode(i,e.uint32(18).fork()).ldelim()}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,n=new t,s=!1;for(n.dwEatCardData=[];o.pos<i&&!s;){var c=o.uint32();switch(c>>>3){case 0:s=!0;break;case 1:n.dwOutCard=o.uint32();break;case 2:n.dwEatCardData.push(r.decode(o,o.uint32()));break;default:o.skipType(7&c)}}return n},t}();a.MSG_SC_SCOPA_EatCardList=d;var l=function(){function t(){this.dwChairID=0,this.dwCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(16).uint32(i)}return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GetSurplusCard=l;var p=function(){function t(){this.dwChairID=0,this.dwGold=0,this.dwScore=0,this.dwCardnum=0,this.dwColorFen=0,this.bHaveCoins7=!1,this.dwCoinsNum=0,this.dwScopaNum=0,this.dwCardData=protobuf.util.emptyArray,this.bPC=!1,this.dwCupNum=0,this.dwExpLevel=0,this.dwDanRank=0,this.dwChange=0,this.bUseHD=!1}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwGold&&e.uint32(16).int32(t.dwGold),null!=t.dwScore&&e.uint32(24).uint32(t.dwScore),null!=t.dwCardnum&&e.uint32(32).uint32(t.dwCardnum),null!=t.dwColorFen&&e.uint32(40).uint32(t.dwColorFen),null!=t.bHaveCoins7&&e.uint32(48).bool(t.bHaveCoins7),null!=t.dwCoinsNum&&e.uint32(56).uint32(t.dwCoinsNum),null!=t.dwScopaNum&&e.uint32(64).uint32(t.dwScopaNum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(72).uint32(i)}return null!=t.bPC&&e.uint32(80).bool(t.bPC),null!=t.dwCupNum&&e.uint32(88).uint32(t.dwCupNum),null!=t.dwExpLevel&&e.uint32(96).uint32(t.dwExpLevel),null!=t.dwDanRank&&e.uint32(104).uint32(t.dwDanRank),null!=t.dwChange&&e.uint32(112).int32(t.dwChange),null!=t.bUseHD&&e.uint32(120).bool(t.bUseHD),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwGold=o.int32();break;case 3:r.dwScore=o.uint32();break;case 4:r.dwCardnum=o.uint32();break;case 5:r.dwColorFen=o.uint32();break;case 6:r.bHaveCoins7=o.bool();break;case 7:r.dwCoinsNum=o.uint32();break;case 8:r.dwScopaNum=o.uint32();break;case 9:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;case 10:r.bPC=o.bool();break;case 11:r.dwCupNum=o.uint32();break;case 12:r.dwExpLevel=o.uint32();break;case 13:r.dwDanRank=o.uint32();break;case 14:r.dwChange=o.int32();break;case 15:r.bUseHD=o.bool();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SCOPAUserSettleInfo=p;var u=function(){function t(){this.dwWinnerChairID=0,this.dwRematchTime=0,this.tabUserSettleInfoList=void 0,this.dwMultiplyNum=0,this.dwCappingChairID=0,this.bDanSettle=!1}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwWinnerChairID&&e.uint32(8).uint32(t.dwWinnerChairID),null!=t.dwRematchTime&&e.uint32(16).uint32(t.dwRematchTime);for(var a=0,o=t.tabUserSettleInfoList;a<o.length;a++){var i=o[a];null!=i&&p.encode(i,e.uint32(26).fork()).ldelim()}return null!=t.dwMultiplyNum&&e.uint32(32).uint32(t.dwMultiplyNum),null!=t.dwCappingChairID&&e.uint32(40).uint32(t.dwCappingChairID),null!=t.bDanSettle&&e.uint32(48).bool(t.bDanSettle),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.tabUserSettleInfoList=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwWinnerChairID=o.uint32();break;case 2:r.dwRematchTime=o.uint32();break;case 3:r.tabUserSettleInfoList.push(p.decode(o,o.uint32()));break;case 4:r.dwMultiplyNum=o.uint32();break;case 5:r.dwCappingChairID=o.uint32();break;case 6:r.bDanSettle=o.bool();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GameResult=u;var h=function(){function t(){this.dwChairID=0,this.dwScopaNum=0,this.dwScopaData=protobuf.util.emptyArray,this.dwGetCardNum=0,this.dwGetCardData=protobuf.util.emptyArray,this.bHaveCoins7=!1,this.dwCardnum=0,this.tabHandCardData=protobuf.util.emptyArray}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwScopaNum&&e.uint32(16).uint32(t.dwScopaNum),void 0!==t.dwScopaData&&t.dwScopaData.length)for(var a=0,o=t.dwScopaData;a<o.length;a++){var i=o[a];e.uint32(24).uint32(i)}if(null!=t.dwGetCardNum&&e.uint32(32).uint32(t.dwGetCardNum),void 0!==t.dwGetCardData&&t.dwGetCardData.length)for(var r=0,n=t.dwGetCardData;r<n.length;r++)i=n[r],e.uint32(40).uint32(i);if(null!=t.bHaveCoins7&&e.uint32(48).bool(t.bHaveCoins7),null!=t.dwCardnum&&e.uint32(56).uint32(t.dwCardnum),void 0!==t.tabHandCardData&&t.tabHandCardData.length)for(var s=0,c=t.tabHandCardData;s<c.length;s++)i=c[s],e.uint32(64).uint32(i);return e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwScopaData=[],r.dwGetCardData=[],r.tabHandCardData=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwScopaNum=o.uint32();break;case 3:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwScopaData.push(o.uint32());else r.dwScopaData.push(o.uint32());break;case 4:r.dwGetCardNum=o.uint32();break;case 5:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.dwGetCardData.push(o.uint32());else r.dwGetCardData.push(o.uint32());break;case 6:r.bHaveCoins7=o.bool();break;case 7:r.dwCardnum=o.uint32();break;case 8:if(2==(7&s))for(c=o.uint32()+o.pos;o.pos<c;)r.tabHandCardData.push(o.uint32());else r.tabHandCardData.push(o.uint32());break;default:o.skipType(7&s)}}return r},t}();a.MSG_SCOPAUserGameInfo=h;var C=function(){function t(){this.dwCurrentChairID=0,this.dwOppTime=0,this.dwCardnum=0,this.dwCardData=protobuf.util.emptyArray,this.dwSurplusNum=0,this.tabUserGameInfoList=void 0,this.dwMultiplyNum=0}return t.encode=function(t,e){if(void 0===e&&(e=protobuf.Writer.create()),null!=t.dwCurrentChairID&&e.uint32(8).uint32(t.dwCurrentChairID),null!=t.dwOppTime&&e.uint32(16).uint32(t.dwOppTime),null!=t.dwCardnum&&e.uint32(24).uint32(t.dwCardnum),void 0!==t.dwCardData&&t.dwCardData.length)for(var a=0,o=t.dwCardData;a<o.length;a++){var i=o[a];e.uint32(32).uint32(i)}null!=t.dwSurplusNum&&e.uint32(40).uint32(t.dwSurplusNum);for(var r=0,n=t.tabUserGameInfoList;r<n.length;r++)null!=(i=n[r])&&h.encode(i,e.uint32(50).fork()).ldelim();return null!=t.dwMultiplyNum&&e.uint32(56).uint32(t.dwMultiplyNum),e},t.decode=function(e,a){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;for(r.dwCardData=[],r.tabUserGameInfoList=[];o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwCurrentChairID=o.uint32();break;case 2:r.dwOppTime=o.uint32();break;case 3:r.dwCardnum=o.uint32();break;case 4:if(2==(7&s))for(var c=o.uint32()+o.pos;o.pos<c;)r.dwCardData.push(o.uint32());else r.dwCardData.push(o.uint32());break;case 5:r.dwSurplusNum=o.uint32();break;case 6:r.tabUserGameInfoList.push(h.decode(o,o.uint32()));break;case 7:r.dwMultiplyNum=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_SC_SCOPA_GamePlay=C;var f=function(){function t(){this.dwChairID=0,this.dwOutCard=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(16).uint32(t.dwOutCard),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOutCard=o.uint32();break;default:o.skipType(7&s)}}return r},t}();a.MSG_CS_SCOPA_UserPlay=f;var S=function(){function t(){this.dwChairID=0,this.dwOutCard=0,this.chEatCardData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChairID&&e.uint32(8).uint32(t.dwChairID),null!=t.dwOutCard&&e.uint32(16).uint32(t.dwOutCard),null!=t.chEatCardData&&e.uint32(26).bytes(t.chEatCardData),e},t.decode=function(e,a){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,i=void 0===a?o.len:o.pos+a,r=new t,n=!1;o.pos<i&&!n;){var s=o.uint32();switch(s>>>3){case 0:n=!0;break;case 1:r.dwChairID=o.uint32();break;case 2:r.dwOutCard=o.uint32();break;case 3:r.chEatCardData=o.bytes();break;default:o.skipType(7&s)}}return r},t}();a.MSG_CS_SCOPA_UserEat=S,a.LOGIC_MAIN_MSG={MSG_GAMELOGIC_MAIN_ID:0,UNRECOGNIZED:-1},a.MESSAGE_SC_SCOPA_SUB_ID={MSGID_SC_SCOPA_GAME_START_DATA:1e3,MSGID_SC_SCOPA_SEND_HAND_CARD:1001,MSGID_SC_SCOPA_GAME_RESET_CARD:1002,MSGID_SC_SCOPA_INFORM_USEROP:1003,MSGID_SC_SCOPA_PLAY_RESULT:1004,MSGID_SC_SCOPA_OP_RESULT:1005,MSGID_SC_SCOPA_EATCARD_LIST:1006,MSGID_SC_SCOPA_GET_SURPLUS_CARD:1007,MSGID_SC_SCOPA_GAME_RESULT:1008,MSGID_SC_SCOPA_GAMESCENCE_PLAY:1009,MSGID_SC_SCOPA_GAMESCENCE_FREE:1010,UNRECOGNIZED:-1},a.MESSAGE_CS_SCOPA_SUB_ID={MSGID_CS_SCOPA_USER_PLAY:2001,MSGID_CS_SCOPA_USER_EAT:2002,UNRECOGNIZED:-1},a.SCOPA_CONST={SCOPA_GAME_PLAYER:2,SCOPA_SEND_TABLE_CARD_COUNT:4,SCOPA_SEND_HAND_CARD_COUNT:3,SCOPA_PLAY_ALL_ROUND:6,SCOPA_CARD_NUM:40,UNRECOGNIZED:-1},a.SCOPA_SETTLE_GOLD_TYPE={SCOPA_FIXATION_TYPE:1,SCOPA_D_VALUE_TYPE:2,UNRECOGNIZED:-1},a.SCOPA_ACTION_TYPE={MSG_SCOPA_ACTION_OUTCARD:1,MSG_SCOPA_ACTION_GETCARD:2,UNRECOGNIZED:-1},a.SCOPA_GAME_STATUS={MSG_SCOPA_GAME_STATUS_FREE:1,MSG_SCOPA_GAME_STATUS_SEND_CARD:2,MSG_SCOPA_GAME_STATUS_OUT_CARD:3,UNRECOGNIZED:-1},cc._RF.pop()},{}],ScopaDefine:[function(t,e,a){"use strict";cc._RF.push(e,"34feeJIggFPs4KSoQdRsVK0","ScopaDefine");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaAttackInfo=a.ScopaListItem=a.ScopaGameResult=a.eResultGameViewType=a.ScopaPlayerInfo=a.ScopaPlayerScoreDetail=a.ScopaOpEatCard=void 0;var r=t("../../gameBaseSrc/model/BasePlayData"),n=t("../../gameBaseSrc/model/RoomPlayerInfo"),s=function(){function t(){}return t.prototype.clear=function(){this.viewId=0,this.deleteCards=[],this.outCardData=0,this.bScopa=!1,this.bSurplus=!1,this.scopaCount=0,this.bOurSide=!1,this.bSettebello=!1,this.delayTime=0,this.iMultpNum=0,this.attackInfo=null},t.prototype.equals=function(t){if(!t)return!1;if(this.viewId!=t.viewId)return!1;if(this.deleteCards.length!=t.deleteCards.length)return!1;if(this.deleteCards.length===t.deleteCards.length){this.deleteCards.sort(),t.deleteCards.sort();for(var e=0;e<this.deleteCards.length;e++)if(this.deleteCards[e]!==t.deleteCards[e])return!1}return this.outCardData==t.outCardData&&this.bScopa==t.bScopa&&this.bSurplus==t.bSurplus&&this.scopaCount==t.scopaCount&&this.bOurSide==t.bOurSide&&this.bSettebello==t.bSettebello},t}();a.ScopaOpEatCard=s;var c=function(){function t(){this.viewId=-1,this.userGold=0,this.score=0,this.cardNum=0,this.ColorFenMax=0,this.coins7=0,this.coinsNum=0,this.scopaCount=0,this.cardDatas=[],this.fbScore=0,this.dwCupNum=0,this.dwDanRank=0,this.dwChange=0,this.dwCardGold=0,this.dwAttackScore=0,this.hasPot=!1,this.goldPot=0,this.bUseHD=!1}return t.prototype.clear=function(){this.viewId=0,this.userGold=0,this.cardNum=0,this.score=0,this.ColorFenMax=0,this.coins7=0,this.coinsNum=0,this.scopaCount=0,this.cardDatas=[],this.dwCupNum=0,this.dwDanRank=0,this.dwChange=0,this.dwCardGold=0,this.dwAttackScore=0,this.hasPot=!1,this.goldPot=0,this.bUseHD=!1},t}();a.ScopaPlayerScoreDetail=c;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bPC=!1,e.beKO=!1,e}return i(e,t),e}(n.RoomPlayerInfo);a.ScopaPlayerInfo=d,function(t){t.GameResultView="GameResultView",t.GameResultView_2="GameResultView_2",t.ScopaGDCrazyResultView="ScopaGDCrazyResultView"}(a.eResultGameViewType||(a.eResultGameViewType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ourSidePlayers=[],e.otherSidePlayers=[],e.cupNum=0,e}return i(e,t),e}(r.BaseGameResult);a.ScopaGameResult=l;var p=function(){function t(){this.clear()}return t.prototype.clear=function(){this.tabScopaWin=0,this.tabCards=[],this.dwViewId=-1},t}();a.ScopaListItem=p;var u=function(){function t(){this.clear()}return t.prototype.clear=function(){this.dwViewId=0,this.dwCoinCards=[],this.dwCoinTotalSum=0},t}();a.ScopaAttackInfo=u,cc._RF.pop()},{"../../gameBaseSrc/model/BasePlayData":void 0,"../../gameBaseSrc/model/RoomPlayerInfo":void 0}],ScopaGDCrazyLogicHandler:[function(t,e,a){"use strict";cc._RF.push(e,"fd2adwXB4lPVq8iYEJ4toxE","ScopaGDCrazyLogicHandler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDCrazyLogicHandler=void 0;var r=t("./../../../script/lib/utils/ComUtils"),n=t("../model/CMD_ScopaCrazyMsgDefine"),s=t("../../../script/app/const/Global"),c=t("../model/ScopaGDCrazyPlayData"),d=t("../model/ScopaRoomData"),l=t("./ScopaGDLogicHandler"),p=t("../../../script/lib/utils/Logger"),u=t("../../gameBaseSrc/model/GameEvent"),h=t("../../../script/app/const/game/GameConstant"),C=t("../../../script/app/event/Notify"),f=t("../../gameBaseSrc/alg/ScopaLogic"),S=t("../../../script/lib/base/TaskFlow"),y=t("../../../script/app/const/AudioFile"),m=t("../../../script/app/model/DataProxy"),v=t("../../../script/app/event/GuiEvent"),_=function(t){function e(){var e=t.call(this)||this;e.playData=new c.ScopaGDCrazyPlayData(e);var a=m.DataProxy.getInstance().gameData.enterGameId;return e.roomData=new d.ScopaGDRoomData(s.Global.getHuskyGameInfo(a).name),e}return i(e,t),e.prototype.getName=function(){return"ScopaGDCrazyLogicHandler"},e.prototype.protocolConfig=function(){return[{protocol:n.MSG_SC_SCOPA_GameStartData,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_START_DATA,cb:this.onGameStartData},{protocol:n.MSG_SC_SCOPA_SendHandCard,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_SEND_HAND_CARD,cb:this.onSendHandCard},{protocol:null,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_RESET_CARD,cb:this.onResetCard},{protocol:n.MSG_SC_SCOPA_InformUserOP,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_INFORM_USEROP,cb:this.onInformUserOp},{protocol:n.MSG_SC_SCOPA_PlayResult,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_PLAY_RESULT,cb:this.onOutCardResult},{protocol:n.MSG_SC_SCOPA_OPResult,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_OP_RESULT,cb:this.onOpertateResult},{protocol:n.MSG_SC_SCOPA_EatCardList,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_EATCARD_LIST,cb:this.onInformPlayerChooseEatCard},{protocol:n.MSG_SC_SCOPA_GetSurplusCard,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GET_SURPLUS_CARD,cb:this.onGetSurplusCard},{protocol:n.MSG_SC_SCOPA_GameResult,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_RESULT,cb:this.onGameOnceResult},{protocol:n.MSG_SC_SCOPA_GamePlay,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAMESCENCE_PLAY,cb:this.onGameScenePlay},{protocol:n.MSG_SC_SCOPA_ScopaWinList,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_SCOPAWIN_LIST,cb:this.onScopaRecordList},{protocol:n.MSG_SC_SCOPA_PCTip,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_PC,cb:this.onPlayerBankrupt},{protocol:n.MSG_SC_OPPC,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_OP_PC,cb:this.onPlayerBankruptResult},{protocol:n.MSG_SC_UserGold,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_USER_GOLD,cb:this.onUserGoldChange},{protocol:n.MSG_SC_UserButtonShow,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_USER_BUTTON_SHOW,cb:this.onShowGameOpeBtns},{protocol:n.MSG_SC_OPWanFaRtn,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_OP_WANFA_RTN,cb:this.onChangeCardsOrDoubleOpeRet},{protocol:n.MSG_SC_ChangeCard,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_CHANGE_CARD,cb:this.onChangeCards}]},e.prototype.getPlayData=function(){return this.playData},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(u.GameEvent.Msg.SEND_RECORD_LIST,this.sendRecordListReq),this.addEvent(u.GameEvent.Msg.SEND_PC_OPREATION,this.sendUserPCOp),this.addEvent(u.GameEvent.Msg.SEND_DOUBLE,this.sendDouble),this.addEvent(u.GameEvent.Msg.SEND_CHANGE_CARDS,this.sendChangeCards),this.addEvent(u.GameEvent.OperateEvent.CLICK_SCOPA_ATTACK_VIEW,this.openScopaAttackView),this.addEvent(u.GameEvent.OperateEvent.CLICK_RESULT_SCORE,this.openCrzayResultScore),this.addEvent(u.GameEvent.OperateEvent.CLICK_RECORD,this.openRecordList),this.addEvent(C.Notify.Base.ON_APP_RESUME,this.onAppResume)},e.prototype.sendRecordListReq=function(){this.sendMsg(null,n.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_SCOPA_SCOPAWIN_LIST),p.Logger.info("\u8bf7\u6c42scopa\u8bb0\u5f55 =========>")},e.prototype.sendUserPCOp=function(t){p.Logger.info("\u73a9\u5bb6\u7834\u4ea7\u64cd\u4f5c 0 =========>",t,this.playData.bankruptInfo);var e=new n.MSG_CS_OPPC;e.dwType=t,e.dwChairID=this.getRoomData().myBaseInfo.chairId,this.sendMsg(e,n.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_OP_PC),p.Logger.info("\u73a9\u5bb6\u7834\u4ea7\u64cd\u4f5c 1 =========>",t)},e.prototype.sendDouble=function(){p.Logger.info("\u8bf7\u6c42\u52a0\u500d =========>");var t=new n.MSG_CS_OPWanFa;t.dwOpType=s.GameOpeType.DOUBLE,this.sendMsg(t,n.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_OP_WANFA)},e.prototype.sendChangeCards=function(){p.Logger.info("\u8bf7\u6c42\u6362\u724c =========>"),this.dispatch(u.GameEvent.HandCard.SET_CAN_TOUCH,!1);var t=new n.MSG_CS_OPWanFa;t.dwOpType=s.GameOpeType.CHANGE_CARDS,this.sendMsg(t,n.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_OP_WANFA)},e.prototype.onGameStartData=function(e,a){if(void 0===a&&(a=!0),t.prototype.onGameStartData.call(this,e,a),a){var o=e.data;this.dispatch(u.GameEvent.Desk.SHOW_GOLD_POT,o.bHavePot)}},e.prototype.onScopaRecordList=function(t,e){void 0===e&&(e=!0);var a=t.data,o=this.getPlayData();o.scopaRecordList(a),e&&this.dispatch(u.GameEvent.Popup.SCOPA_RECORD_UPDATE_LIST,{recordListData:o.scopaAttackList,totalScore:o.scopaAttackTotalScore})},e.prototype.onPlayerBankrupt=function(t,e){var a=this;void 0===e&&(e=!0);var o=t.data,i=this.getPlayData();if(i.playerBankrupt(o),e){0===i.bankruptInfo.dwViewId&&(this.userData.gold=0);var r={viewId:i.bankruptInfo.dwViewId,time:i.bankruptInfo.dwTime};this.subTaskFlow.addDelayTask(.5),this.subTaskFlow.addTask(function(t){return a.dispatch(u.GameEvent.Player.BANKRUPT,t),0},this,r)}},e.prototype.onPlayerBankruptResult=function(t,e){void 0===e&&(e=!0);var a=t.data;if(this.getPlayData().playerBankruptResult(a),e){if(2==a.dwType){var o=this.getRoomData().getViewIdByChairId(a.dwChairID);this.dispatch(u.GameEvent.Player.GOLD_CHANGE,{viewId:o,gold:a.dwCurGold})}this.dispatch(u.GameEvent.GameTips.CLEAR)}},e.prototype.onUserGoldChange=function(t,e){var a=this;void 0===e&&(e=!0);var o=t.data,i=this.getPlayData(),r=i.onUserGoldChange(o);if(e){var n=this,s=new S.Task(function(){if(cc.isValid(n)){a.dispatch(C.Notify.Base.PLAY_EFFECT,{path:y.AudioFile.Game.SCOPA_ATTACK}),n.dispatch(u.GameEvent.Effect.CHANGE_SCORE,r);var t=r.find(function(t){return 3===t.tag});return t&&a.dispatch(u.GameEvent.Popup.SHIELD,{type:1,viewId:t.viewId,delayTime:0}),1e3}},n),c=new S.Task(function(){if(cc.isValid(n)){for(var t=n.getRoomData(),e=0;e<h.GameConstant.MaxPlayerNum;e++){var a=e+1,o=t.getViewIdByChairId(a),r=t.getPlayerByViewId(o);r&&n.dispatch(u.GameEvent.Player.GOLD_CHANGE,{userId:r.userId,gold:i.userGold[o]})}return 0}},n),d=2,l=i.curOpEatCard;l&&l.delayTime&&(d=0==l.viewId?l.delayTime-.4:2,l.viewId),this.subTaskFlow.addDelayTask(d),this.subTaskFlow.addTask2(s),this.subTaskFlow.addTask2(c)}},e.prototype.onOutCardResult=function(e,a){void 0===a&&(a=!0),t.prototype.onOutCardResult.call(this,e,a);var o=e.data;0==this.getRoomData().getViewIdByChairId(o.dwChairID)&&(this.dispatch(u.GameEvent.Desk.SHOW_CHANGE_OPE_BTN_ST),this.dispatch(u.GameEvent.Desk.RESET_DESKINO_POS,!0))},e.prototype.onOpertateResult=function(t,e){var a=this;void 0===e&&(e=!0);var o=t.data,i=this.getPlayData();if(i.playerOperateResult(o),e){var n=i.curOperateViewId;0==n&&(this.dispatch(u.GameEvent.Desk.SHOW_CHANGE_OPE_BTN_ST),this.dispatch(u.GameEvent.Desk.RESET_DESKINO_POS,!0)),this.dispatch(u.GameEvent.Player.OP_TIMEOUT,{viewId:n,time:0}),this.dispatch(u.GameEvent.Player.SET_TIMER,{viewId:n,remainTime:0,maxTime:i.opTimeMax,bRun:!1});var s=!1;0===n&&i.selfOpEatCards&&i.selfOpEatCards.outCardData>0&&(i.curOpEatCard&&i.curOpEatCard.equals(i.selfOpEatCards)?s=!0:(this.getGameFlow().stop(),this.dispatch(u.GameEvent.HandCard.UPDATE_DATA,{viewId:n,handCardDatas:i.allHandCardDatas[n],throwCardIndex:i.throwCardIndex}),this.dispatch(cc.js.formatStr(u.GameEvent.HandCard.REFREASH,n),n),this.dispatch(u.GameEvent.OutCard.SCENE_PLAYING,i.outCardDatas))),o.dwGetCardData.length>0&&!s&&this.getGameFlow().addEatCardFlow(i.curOpEatCard);var c=i.curOpEatCard.attackInfo;if(c&&0===c.dwViewId){var d=this.roomData.iScopaAttackScore,l=new S.Task(function(t){return a.dispatch(u.GameEvent.Desk.SCOPA_CHANGE_SCORE,{viewId:t.dwViewId,cards:t.dwCoinCards,coinsSum:t.dwCoinTotalSum,multp:i.myScopaAckMultp,baseScore:d}),1e3},this,r.ComUtils.clone(c));this.subTaskFlow.addDelayTask(1),this.subTaskFlow.addTask2(l)}i.selfOpEatCards.clear()}},e.prototype.onGameOnceResult=function(t,e){var a=this;void 0===e&&(e=!0);var o=t.data,i=this.getPlayData(),r=i.gameResult(o);if(e){this.getRoomData().roomPlayStatus=h.GameConstant.RoomPlayStatus.gameEnd,this.gameData.exsitGameInfo={gameID:0,gameType:0,queryTime:0},r&&this.dispatch(C.Notify.Other.REQ_BRANKRUPT_INFO),this.dispatch(u.GameEvent.GameTips.CLEAR),this.dispatch(u.GameEvent.Desk.DESK_CLEAR_TIMER),this.dispatch(u.GameEvent.Player.SET_TIMER,{viewId:i.curOperateViewId,remainTime:0,maxTime:i.opTimeMax,bRun:!1}),this.dispatch(u.GameEvent.Base.GAME_RESULT),this.dispatch(u.GameEvent.Voice.STOP_MUSIC_BG),this.dispatch(u.GameEvent.Chat.CLEAR);var n=this.getPlayData().curResult;n.ourSidePlayers.forEach(function(t){t&&a.dispatch(u.GameEvent.Player.UPDATE_USERS_INFO,{userId:t.userId,level:t.level,ranklevel:t.ranklevel,rankstarlevel:t.rankstarlevel})}),n.otherSidePlayers.forEach(function(t){t&&a.dispatch(u.GameEvent.Player.UPDATE_USERS_INFO,{userId:t.userId,level:t.level,ranklevel:t.ranklevel,rankstarlevel:t.rankstarlevel})}),1==this.getRoomData().loginFinish?this.getGameFlow().addGameEndFlow():(this.dispatch(u.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:i.allHandCardDatas}),this.dispatch(u.GameEvent.EatCard.SCENE_PLAYING,i.getEatCardInfo()),this.dispatch(u.GameEvent.Popup.GAME_ONCE_RESULT,this.getPlayData().curResult))}},e.prototype.onGameScenePlay=function(t,e){void 0===e&&(e=!0);var a=t.data;this.getGameFlow().stop();var o=this.getRoomData();f.ScopaLogic.isAScopa=o.isAScopa,f.ScopaLogic.isA2Scopa=o.isA2Scopa;var i=this.getPlayData();if(i.gameScenePlaying(a),e){o.setPlayStatus(h.GameConstant.RoomPlayStatus.playing),this.dispatch(u.GameEvent.GameTips.PLAYER_STATUS_CLEAR),this.dispatch(u.GameEvent.GameTips.CLEAR),this.dispatch(u.GameEvent.Desk.WAIT_MENU_CLEAR),this.dispatch(u.GameEvent.Desk.DESKINFO_TRANSPARENT,!0),this.dispatch(u.GameEvent.Desk.UPDATE_DESKINFO,{deskCfg:o.getDeskInfo(),roomCfg:o.getRoomInfo(),iMultpNum:a.dwMultiplyNum}),this.dispatch(u.GameEvent.Desk.DESKINFO_TRANSPARENT,!0),this.dispatch(u.GameEvent.Desk.REMAIN_CARD_NUM_CHANGE,i.curCardStackNum),this.dispatch(u.GameEvent.Desk.DESK_REMAIN_TIME_RESET,i.curOpRemainTime),this.dispatch(u.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:i.allHandCardDatas,curDisplayMode:o.getCardDisplayMode()}),this.dispatch(u.GameEvent.OutCard.SCENE_PLAYING,i.outCardDatas),this.dispatch(u.GameEvent.EatCard.SCENE_PLAYING,i.getEatCardInfo());var r=i.curOperateViewId;this.dispatch(u.GameEvent.HandCard.SET_CAN_TOUCH,0===r),r>-1&&(this.dispatch(u.GameEvent.HandCard.INFORM_PLAYER_OP,{curOperateViewId:r}),this.dispatch(u.GameEvent.Player.SET_TIMER,{viewId:r,remainTime:i.curOpRemainTime,maxTime:i.opTimeMax,bRun:!0})),i.bankruptInfo&&i.bankruptInfo.dwViewId>=0&&this.dispatch(u.GameEvent.Player.BANKRUPT,{viewId:i.bankruptInfo.dwViewId,time:i.bankruptInfo.dwTime});for(var n=0;n<o.maxPlayerNum;n++){var s=n+1,c=o.getViewIdByChairId(s),d=i.playerScopaScoreInfo[c];d&&this.dispatch(u.GameEvent.Desk.UPDATE_SCOPA_SCORE,{viewId:c,multp:i.myScopaAckMultp,baseScore:o.iScopaAttackScore,cards:d.dwCoinCards,coinsSum:d.dwCoinTotalSum})}this.dispatch(u.GameEvent.Msg.SEND_RECORD_LIST),this.dispatch(u.GameEvent.Desk.SHOW_DOUBLE_CHANGECARDS_BTN,{doubleInfo:i.doubleInfo}),this.dispatch(u.GameEvent.Desk.SHOW_GOLD_POT,a.bHavePot),this.dispatch(u.GameEvent.Desk.UPDATE_GOLD_POT,{goldPot:a.dwGoldPool,action:!1})}},e.prototype.openScopaAttackView=function(t){var e=[],a=0,o=this.getPlayData().playerScopaScoreInfo[t&&t.viewId||0];o&&(e=[].concat(o.dwCoinCards),a=o.dwCoinTotalSum),this.dispatch(u.GameEvent.Popup.SCOPA_ATTACK_VIEW,{cards:e,coinsSum:a,baseScore:this.roomData.iScopaAttackScore,multp:this.getPlayData().myScopaAckMultp,bankBeiShu:this.getPlayData().scopaAckMultp})},e.prototype.openCrzayResultScore=function(t){var e=!1;s.Global.convertGameType(this.getRoomData().gameID)===s.gHuskyGameType.SCOPA_GOLD_CRAZY_V3&&(e=!0);var a=this.getPlayData().curResult.ourGameResult;if(a){var o=a.dwAttackScore+a.userGold;this.dispatch(u.GameEvent.Popup.CRAZY_RESULT_SCORE,{recordListData:this.getPlayData().scopaAttackList,strBeiShu:this.getPlayData().curResult.strBeiShu,attackScore:a.dwAttackScore,score:a.userGold,totalScore:o,worldPos:t,goldOfPot:a.goldPot,isCrazy:e,hasPot:this.getPlayData().curResult.hasPot})}},e.prototype.openRecordList=function(t){var e={recordListData:this.getPlayData().scopaAttackList,totalScore:this.getPlayData().scopaAttackTotalScore,worldPos:t};this.dispatch(u.GameEvent.Popup.SCOPA_RECORD_LIST,e)},e.prototype.onShowGameOpeBtns=function(t){var e=t.data;cc.log("\u663e\u793a\u64cd\u4f5c\u6309\u94ae\u7ec4",e),this.dispatch(u.GameEvent.Desk.SHOW_CHANGE_OPE_BTN_ST,{forceChange:!0,msg:e})},e.prototype.onChangeCardsOrDoubleOpeRet=function(t){var e=t.data;cc.log("\u52a0\u500d\u6216\u6362\u724c\u7ed3\u679c",e);var a=this.getRoomData().getViewIdByChairId(e.dwChairID);if(0==a){this.dispatch(u.GameEvent.HandCard.SET_CAN_TOUCH,!0);var o=6==e.dwError||7==e.dwError;this.dispatch(u.GameEvent.Desk.SHOW_CHANGE_OPE_BTN_ST,{forceChange:o,msg:e}),this.dispatch(u.GameEvent.OpView.CLEAR)}if(0==e.dwError){cc.log("\u4e3b\u52a8\u52a0\u500d\u6b21\u6570",this.playData.mManualDoubbleCount);var i={viewId:a,opeType:e.dwOpType,dwCurPS:e.dwCurPS,dwChangPS:e.dwChangPS,dwChangeGold:e.dwChangeGold};this.dispatch(u.GameEvent.Player.ON_DOUBLE_OR_CHANGE_CARDS,i),this.dispatch(u.GameEvent.Desk.UPDATE_GOLD_POT,{goldPot:e.dwGoldPool,potChange:e.dwChangeGold,action:!0}),e.dwOpType==s.GameOpeType.DOUBLE&&(this.dispatch(u.GameEvent.Desk.BEI_SHU_CHANGE,{iMultpNum:e.dwMultiplyNum,newAction:!0}),this.playData.manualDouble())}else 6==e.dwError?this.dispatch(v.GuiEvent.PopMsg.DSIPLAY_BOOST_GIFT,{leftTime:this.getPlayData().getLeftOpeTime(),boosType:s.eBoostType.gold}):7==e.dwError?this.dispatch(v.GuiEvent.PopMsg.DSIPLAY_BOOST_GIFT,{leftTime:this.getPlayData().getLeftOpeTime(),boosType:s.eBoostType.power}):cc.log("\u64cd\u4f5c\u5931\u8d25\uff0c\u65e0\u6548\u64cd\u4f5c")},e.prototype.onChangeCards=function(t,e){void 0===e&&(e=!0);var a=t.data;this.getPlayData().changeCards(a),e&&this.getGameFlow().addChangeCardsFolw(a)},e.prototype.onAppResume=function(){this.dispatch(v.GuiEvent.PopMsg.REFRESH_BOOST_GIFT,{leftTime:this.getPlayData().getLeftOpeTime()})},e}(l.ScopaGDLogicHandler);a.ScopaGDCrazyLogicHandler=_,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/const/Global":void 0,"../../../script/app/const/game/GameConstant":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/base/TaskFlow":void 0,"../../../script/lib/utils/Logger":void 0,"../../gameBaseSrc/alg/ScopaLogic":void 0,"../../gameBaseSrc/model/GameEvent":void 0,"../model/CMD_ScopaCrazyMsgDefine":"CMD_ScopaCrazyMsgDefine","../model/ScopaGDCrazyPlayData":"ScopaGDCrazyPlayData","../model/ScopaRoomData":"ScopaRoomData","./../../../script/lib/utils/ComUtils":void 0,"./ScopaGDLogicHandler":"ScopaGDLogicHandler"}],ScopaGDCrazyPlayData:[function(t,e,a){"use strict";cc._RF.push(e,"e9c6chkr5NJP6BQWuQsvi7Q","ScopaGDCrazyPlayData");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDCrazyPlayData=void 0;var r=t("./ScopaGDPlayData"),n=t("../../../script/app/const/game/GameConstant"),s=t("./ScopaDefine"),c=function(t){function e(e){var a=t.call(this,e)||this;return a.logic=e,a.scopaAttackList=[],a.scopaAttackTotalScore=0,a.scopaAckMultp=1,a.myScopaAckMultp=1,a.bClearAttack=!1,a.playerScopaScoreInfo=[],a.doubleInfo=null,a.gameName="ScopaGDCrazy",a.clear(),a}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.scopaAttackTotalScore=0,this.scopaAttackList?this.scopaAttackList.length=0:this.scopaAttackList=[],this.playerScopaScoreInfo?this.playerScopaScoreInfo.forEach(function(t){t&&t.clear()}):this.playerScopaScoreInfo=[],this.bClearAttack=!1,this.myScopaAckMultp=1,this.scopaAckMultp=1,this.doubleInfo=null},e.prototype.isViewIdCanOutCard=function(t){return this.curOperateViewId==t},e.prototype.scopaRecordList=function(t){var e=this;this.scopaAttackList.length=0,this.scopaAttackTotalScore=t.iTotal;var a=this.logic.getRoomData();t.list&&t.list.forEach(function(t){if(t){var o=a.getViewIdByChairId(t.dwChairID),i=new s.ScopaListItem;i.tabCards=[].concat(t.tabCard),i.tabScopaWin=t.tabScopaWin,i.dwViewId=o,e.scopaAttackList.push(i)}})},e.prototype.playerBankrupt=function(t){this.bankruptInfo.clear(),this.bankruptInfo.dwTime=t.dwTime,this.bankruptInfo.dwViewId=this.logic.getRoomData().getViewIdByChairId(t.dwChairID)},e.prototype.playerBankruptResult=function(t){if(this.bankruptInfo.clear(),2==t.dwType){var e=this.logic.getRoomData().getViewIdByChairId(t.dwChairID);this.userGold[e]=t.dwCurGold}return t.dwType},e.prototype.onUserGoldChange=function(t){var e=this,a=[],o=this.logic.getRoomData();return t.tabGoldItem&&t.tabGoldItem.forEach(function(t){if(t){var i=o.getViewIdByChairId(t.dwChairID),r=o.getPlayerByChairId(t.dwChairID);r&&(r.gold=t.dwCurGold,e.userGold[i]=t.dwCurGold,a.push({viewId:i,tag:t.dwTag,changeScore:t.iChangeGold}))}}),a},e.prototype.gameStart=function(e){if(t.prototype.gameStart.call(this,e),this.myScopaAckMultp=1,this.myScopaAckMultp=1,e.tabAttackMultiple)for(var a=0;a<e.tabAttackMultiple.length;a++){var o=e.tabAttackMultiple[a]||1;0===this.logic.getRoomData().getViewIdByChairId(a+1)&&(this.myScopaAckMultp=o),this.scopaAckMultp<o&&(this.scopaAckMultp=o)}this.bClearAttack=e.bClearAttack},e.prototype.playerOperateResult=function(e){t.prototype.playerOperateResult.call(this,e);var a=this.logic.getRoomData().getViewIdByChairId(e.dwChairID),o=new s.ScopaAttackInfo;if(o.dwViewId=a,o.dwCoinCards=[].concat(e.tabCoinCards),o.dwCoinTotalSum=e.dwCoinSumTotal,this.curOpEatCard.attackInfo=o,this.playerScopaScoreInfo[a])e.tabCoinCards.length>0&&(this.playerScopaScoreInfo[a].dwCoinCards=this.playerScopaScoreInfo[a].dwCoinCards.concat(e.tabCoinCards));else{var i=new s.ScopaAttackInfo;i.dwViewId=a,i.dwCoinCards=[].concat(e.tabCoinCards),i.dwCoinTotalSum=e.dwCoinSumTotal,this.playerScopaScoreInfo[a]=i}this.playerScopaScoreInfo[a].dwViewId=a,this.playerScopaScoreInfo[a].dwCoinTotalSum=e.dwCoinSumTotal,this.curOpEatCard.bScopa&&this.bClearAttack&&(this.playerScopaScoreInfo[a].dwCoinCards=[],this.playerScopaScoreInfo[a].dwCoinTotalSum=0,this.curOpEatCard.attackInfo.dwCoinCards=[],this.curOpEatCard.attackInfo.dwCoinTotalSum=0)},e.prototype.gameResult=function(t){var e=this.logic.getRoomData(),a=e.getViewIdByChairId.bind(e);this.winerViewId=a(t.dwWinnerChairID);var o=new s.ScopaGameResult;o.rematchTime=t.dwRematchTime,o.hasPot=t.bHavePot,this.curResult=o,-1===this.winerViewId?o.endStatus=n.GameConstant.GameEndStatus.DRAW:0===this.winerViewId?o.endStatus=n.GameConstant.GameEndStatus.WIN:o.endStatus=n.GameConstant.GameEndStatus.LOST;for(var i=0,r=0,c=t.tabUserSettleInfoList,d=e.getMaxPlayerNum(),l=!1,p=e.getViewIdByChairId(t.dwKOChairID),u=0;u<d;u++){var h=c[u];if(h){var C=a(h.dwChairID);0===C&&h.bPC&&(l=!0);var f=new s.ScopaPlayerScoreDetail;f.viewId=C,f.score=h.dwScore,f.cardNum=h.dwCardnum,f.ColorFenMax=h.dwColorFen,f.coins7=h.bHaveCoins7?1:0,f.coinsNum=h.dwCoinsNum,f.scopaCount=h.dwScopaNum,f.userGold=h.dwGold,f.cardDatas=h.dwCardData,f.dwCupNum=h.dwCupNum,f.dwDanRank=h.dwDanRank,f.dwChange=h.dwChange,f.dwAttackScore=h.dwScopaAttackGold,f.goldPot=h.dwGoldPool,f.bUseHD=h.bUseHD;var S=e.getPlayerByViewId(C);S.bPC=h.bPC,S.level=h.dwExpLevel,S.beKO=p==C&&p>=0,0===C?(o.ourGameResult=f,o.ourSidePlayers.push(S)):(o.otherGameResult=f,o.otherSidePlayers.push(S)),this.isViewIdIsOurSide(C)?i+=h.dwScore:r+=h.dwScore}}var y=e.isWild(),m=t.dwMultiplyNum,v=e.isSettleNormal();return 0==y&&v?o.strBeiShu="":y&&v?o.strBeiShu=m>1?"BET "+e.getBaseScore()+" X"+m:"BET "+e.getBaseScore():!1===y&&!1===v?o.strBeiShu=i!=r?"BET "+e.getBaseScore()+" X("+i+"-"+r+")":"BET "+e.getBaseScore():y&&!1===v&&(o.strBeiShu=m>1?"BET "+e.getBaseScore()+" X("+i+"-"+r+")X"+m:"BET "+e.getBaseScore()+" X("+i+"-"+r+")"),o.beKOViewId=p,o.cappedViewId=e.getViewIdByChairId(t.dwCappingChairID),o.viewName=s.eResultGameViewType.ScopaGDCrazyResultView,l},e.prototype.gameScenePlaying=function(e){t.prototype.gameScenePlaying.call(this,e),cc.log("\u4e3b\u52a8\u52a0\u500d\u6b21\u6570",e.dwManualDoubelCount),this.setManualDoubleCount(e.dwManualDoubelCount);for(var a=this.logic.getRoomData(),o=e.tabUserGameInfoList.length,i=0;i<o;i++){var r=e.tabUserGameInfoList[i];if(r){var n=a.getViewIdByChairId(r.dwChairID),c=new s.ScopaAttackInfo;c.dwCoinCards=[].concat(r.tabCoinCards),c.dwCoinTotalSum=r.dwCoinSumTotal,c.dwViewId=n,this.playerScopaScoreInfo[n]=c,0===n&&(this.myScopaAckMultp=r.dwAttackMultiple||1,this.doubleInfo={bHuanPai:r.bHuanPai,bJiaBei:r.bJiaBei,dwJiaBeiGold:r.dwJiaBeiGold,dwHuanPaiGold:r.dwHuanPaiGold,dwHuanPaiTili:r.dwHuanPaiTili})}}this.bankruptInfo.clear(),this.bankruptInfo.dwTime=e.dwPCTime,this.bankruptInfo.dwViewId=a.getViewIdByChairId(e.dwPCChairID),this.bClearAttack=e.bClearAttack},e.prototype.changeCards=function(t){var e=this.logic.getRoomData().getViewIdByChairId(t.dwChairID);0==e?(this.handCardDisplayMode[0]=n.GameConstant.HandCardMode.DISPLAY,this.setHandCardData(0,t.dwCardData,t.dwCardNum),this.sortHandCardDatas(e)):(this.handCardDisplayMode[e]=n.GameConstant.HandCardMode.NORMAL,this.initHandCardData0(e,t.dwCardNum))},e}(r.ScopaGDPlayData);a.ScopaGDCrazyPlayData=c,cc._RF.pop()},{"../../../script/app/const/game/GameConstant":void 0,"./ScopaDefine":"ScopaDefine","./ScopaGDPlayData":"ScopaGDPlayData"}],ScopaGDCrazyScene:[function(t,e,a){"use strict";cc._RF.push(e,"b0a03tDTNZOXrD97JAH078/","ScopaGDCrazyScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDCrazyScene=void 0;var n=t("../../../script/app/event/Notify"),s=t("../../gameBaseSrc/controller/goldGame/GoldDeskHandler"),c=t("../../gameBaseSrc/controller/goldGame/GoldLoginMsgHandler"),d=t("../../gameBaseSrc/model/GameEvent"),l=t("../../gameBaseSrc/view/goldGame/GoldGameScene"),p=t("../controller/ScopaGDCrazyLogicHandler"),u=t("../controller/ScopaVoice"),h=cc._decorator,C=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onDestroy=function(){this.goldDeskHandler&&(this.dispatch(n.Notify.Gate.RM_HANDLER,this.goldDeskHandler),this.goldDeskHandler.destory(),this.goldDeskHandler=null),this.loginMsgHandler&&(this.dispatch(n.Notify.Gate.RM_HANDLER,this.loginMsgHandler),this.loginMsgHandler.clear(),this.loginMsgHandler=null),t.prototype.onDestroy.call(this)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.getSceneName=function(){return"ScopaGDCrazyScene"},e.prototype.initHandler=function(){t.prototype.initHandler.call(this),this.logicHandler=new p.ScopaGDCrazyLogicHandler,this.goldDeskHandler=new s.GoldDeskHandler(this.logicHandler),this.loginMsgHandler=new c.GoldLoginMsgHandler(this.logicHandler),this.dispatch(n.Notify.Gate.ADD_HANDLER,this.goldDeskHandler),this.dispatch(n.Notify.Gate.ADD_HANDLER,this.loginMsgHandler),this.initHandlerFinished=!0,this.tryLoginGame()},e.prototype.initVoice=function(){this.gameVoice=new u.ScopaVoice,t.prototype.initVoice.call(this)},e.prototype.onChangeDeskEvent=function(){this.dispatch(d.GameEvent.Msg.SEND_CHANGE_DESK)},r([C],e)}(l.GoldGameScene));a.ScopaGDCrazyScene=f,cc._RF.pop()},{"../../../script/app/event/Notify":void 0,"../../gameBaseSrc/controller/goldGame/GoldDeskHandler":void 0,"../../gameBaseSrc/controller/goldGame/GoldLoginMsgHandler":void 0,"../../gameBaseSrc/model/GameEvent":void 0,"../../gameBaseSrc/view/goldGame/GoldGameScene":void 0,"../controller/ScopaGDCrazyLogicHandler":"ScopaGDCrazyLogicHandler","../controller/ScopaVoice":"ScopaVoice"}],ScopaGDFlow:[function(t,e,a){"use strict";cc._RF.push(e,"a59e5GWWKZHOYUjggqt0xqe","ScopaGDFlow");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDFlow=void 0;var r=t("./../../../script/app/module/tables/TableSkinMgr"),n=t("./../../../script/lib/utils/ComUtils"),s=t("../../gameBaseSrc/controller/goldGame/BaseGoldGameFlow"),c=t("../../gameBaseSrc/model/GameEvent"),d=t("../../gameBaseSrc/model/ScopaConstant"),l=t("../../../script/app/const/AudioFile"),p=t("../../../script/app/event/Notify"),u=t("../../../script/app/const/game/GameConstant"),h=t("../../../script/app/model/AdDataProxy"),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.addSendCardFlow=function(t){this.taskFlow.addTask(this.processSendCard,this,t),this.taskFlow.addTask(this.processSendCardEnd,this)},e.prototype.processSendCardEnd=function(){return this.dispatch(c.GameEvent.Desk.REMAIN_CARD_NUM_CHANGE,this.logicHander.getPlayData().curCardStackNum),500},e.prototype.handleScopa=function(t,e,a){this.dispatch(c.GameEvent.GameTips.SCOPA,{playScopa:!0,beishu:e,tableId:a}),1==t?this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.SCOPA_1}):2==t?this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.SCOPA_2}):this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.SCOPA_3})},e.prototype.addSettebelloFlow=function(){this.taskFlow.addTask(this.processSettebello,this)},e.prototype.processSettebello=function(){return this.dispatch(c.GameEvent.Popup.SETTEBELLO,{settebello:!0}),833.3},e.prototype.addInformOpFlow=function(){var t=this.logicHander.getPlayData(),e={curOpViewId:t.curOperateViewId,remainTime:t.curOpRemainTime,maxTime:t.opTimeMax,bRun:!0};this.taskFlow.addTask(this.processInformOp,this,e)},e.prototype.processInformOp=function(t){return this.dispatch(c.GameEvent.HandCard.INFORM_PLAYER_OP,{curOperateViewId:t.curOpViewId}),this.dispatch(c.GameEvent.Player.SET_TIMER,{viewId:t.curOpViewId,remainTime:t.remainTime,maxTime:t.maxTime,bRun:!0}),0},e.prototype.addOutCardFlow=function(){var t=this.logicHander.getPlayData(),e=t.curProvideViewId,a={viewId:t.curProvideViewId,outCardData:t.curProvideCard,handCardDatas:n.ComUtils.clone(t.allHandCardDatas[e]),throwCardIndex:t.throwCardIndex};this.taskFlow.addTask(this.processOutCard,this,a)},e.prototype.processOutCard=function(t){return this.dispatch(c.GameEvent.HandCard.PLAYER_OUT_CARD_RESULT,t),0===t.viewId?1e3*(d.ScopaConstant.UP_OUT_CARD_TIME+d.ScopaConstant.THROW_OUT_CARD_TIME):1e3*d.ScopaConstant.THROW_OUT_CARD_TIME},e.prototype.addEatCardFlow=function(t,e){void 0===e&&(e=0);var a=n.ComUtils.clone(t);this.taskFlow.addTask(this.processDelayTime,this,e),this.taskFlow.addTask(this.processRmEatCards,this,a),this.taskFlow.addTask(this.processAddEatCards,this,a)},e.prototype.processRmEatCards=function(t){var e=this.logicHander.getPlayData();this.dispatch(c.GameEvent.OutCard.UPDATE_DATA,e.outCardDatas),this.dispatch(c.GameEvent.OutCard.DELELE_EAT_CARDS,t);var a=r.TableSkinMgr.getTableId();return t.bScopa&&(this.handleScopa(e.playerScopaCount[e.curOperateViewId],t.iMultpNum,a),this.dispatch(c.GameEvent.Desk.BEI_SHU_CHANGE,t)),t.bSettebello&&(this.dispatch(c.GameEvent.Popup.SETTEBELLO,{settebello:!0,bScopa:t.bScopa,tableId:a}),this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.SETTEBELLO})),1e3*(t.delayTime+d.ScopaConstant.EAT_CARD_RUN_TIME)||0},e.prototype.processAddEatCards=function(t){return this.dispatch(c.GameEvent.EatCard.MOVE_TO_DESK,t),0},e.prototype.processUpdateEatCard=function(){var t=this.logicHander.getPlayData();return this.dispatch(c.GameEvent.EatCard.SCENE_PLAYING,t.getEatCardInfo()),0},e.prototype.addEatSurplusCardFlow=function(t){t.bSurplus=!0;var e=n.ComUtils.clone(t);this.taskFlow.addTask(this.processRmSurplusCards,this,e),this.taskFlow.addTask(this.processAddEatCards,this,e)},e.prototype.processRmSurplusCards=function(t){return this.dispatch(c.GameEvent.OutCard.DELELE_EAT_CARDS,t),t.bSettebello&&(this.dispatch(c.GameEvent.Popup.SETTEBELLO,{settebello:!0,bScopa:!1}),this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.SETTEBELLO})),1e3*d.ScopaConstant.EAT_CARD_RUN_TIME},e.prototype.addGameEndFlow=function(){this.taskFlow.clear(),this.logicHander.getPlayData().curResult.beKOViewId>=0&&this.taskFlow.addTask(this.processKO,this),this.taskFlow.addTask(this.processBeforeShowResultView,this),this.taskFlow.addTask(this.processShowAllEatCard,this),this.taskFlow.addTask(this.processScreenShot,this),this.taskFlow.addTask(this.processShowGameResult,this),this.taskFlow.addTask(this.processAfterShowResultView,this)},e.prototype.processShowAllEatCard=function(){var t=this.logicHander.getPlayData();return this.dispatch(c.GameEvent.OutCard.SHOW_EAT_CARDS,t.getAllEatCards()),1280},e.prototype.processScreenShot=function(){return this.dispatch(p.Notify.Base.REQ_SCREEN_SHOT,u.GameConstant.RoomPlayStatus.gameEnd),500},e.prototype.processShowGameResult=function(){var t=this.logicHander.getPlayData();return this.dispatch(c.GameEvent.Popup.GAME_ONCE_RESULT,t.curResult),this.dispatch(p.Notify.AD.SHOW_BANNER,h.BannerType.SETTLE),this.dispatch(p.Notify.AD.OPEN_CP_GG,h.ChaPingType.GAME_SETTLE),3e3},e.prototype.processKO=function(){return this.dispatch(c.GameEvent.Popup.CLOSE_ALL),this.dispatch(c.GameEvent.GameTips.KO),1e3},e.prototype.addResetCardFlow=function(){this.taskFlow.addTask(this.processResetCards,this)},e.prototype.processResetCards=function(){return this.dispatch(c.GameEvent.Com.REDEAL_CARD),this.dispatch(c.GameEvent.GameTips.REDEAL),1230},e.prototype.addChangeScoreFlow=function(t){this.taskFlow.addTask(this.processChangeScore,this,n.ComUtils.clone(t))},e.prototype.processChangeScore=function(t){return t&&t.dwCoinCards.length>0?(this.dispatch(c.GameEvent.Desk.SCOPA_CHANGE_SCORE,{viewId:t.dwViewId,cards:t.dwCoinCards,coinsSum:t.dwCoinTotalSum,baseScore:this.logicHander.getRoomData().iScopaAttackScore,multp:this.logicHander.getPlayData().attackMultiple}),1e3):0},e.prototype.addChangeCardsFolw=function(t){this.taskFlow.addTask(this.processChangeCards,this,t),this.taskFlow.addTask(this.processChangeCardsEnd,this,t)},e.prototype.processChangeCards=function(t){var e=this.logicHander.getPlayData(),a={viewId:this.logicHander.getRoomData().getViewIdByChairId(t.dwChairID),allHandCardDatas:e.allHandCardDatas,sendCardCount:t.dwCardNum};return this.dispatch(c.GameEvent.HandCard.START_CTL_CHANGE_CARDS,a),0},e.prototype.processChangeCardsEnd=function(){return 0},e}(s.BaseGoldGameFlow);a.ScopaGDFlow=C,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/const/game/GameConstant":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/AdDataProxy":void 0,"../../gameBaseSrc/controller/goldGame/BaseGoldGameFlow":void 0,"../../gameBaseSrc/model/GameEvent":void 0,"../../gameBaseSrc/model/ScopaConstant":void 0,"./../../../script/app/module/tables/TableSkinMgr":void 0,"./../../../script/lib/utils/ComUtils":void 0}],ScopaGDGameMsg:[function(t,e,a){"use strict";cc._RF.push(e,"e9888vJXgdEWJ+k8nzyCKoq","ScopaGDGameMsg");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDGameMsg=void 0;var r=t("./CMD_ScopaMsgDefine"),n=t("../../../script/plugin/pb/protofile/GlobalMsgDef"),s=t("../../gameBaseSrc/model/goldGame/CMD_GameMsg"),c=t("../../../script/lib/network/struct/StructProtocol"),d=t("../../../script/lib/external/ByteArray");(function(t){t.logicMainId=r.LOGIC_MAIN_MSG.MSG_GAMELOGIC_MAIN_ID,t.gameMainId=n.MAIN_MSG_ID.MAIN_MSG_GAME_MSG_ID;var e=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_GameStartData.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_START_DATA,a}(c.StructProtocol);t.MSG_SC_SCOPA_GameStartData=e;var a=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_SendHandCard.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_SEND_HAND_CARD,a}(c.StructProtocol);t.MSG_SC_SCOPA_SendHandCard=a;var o=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_RESET_CARD,a}(c.StructProtocol);t.MSG_SC_SCOPA_ResetCard=o;var l=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_InformUserOP.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_INFORM_USEROP,a}(c.StructProtocol);t.MSG_SC_SCOPA_InformUserOP=l;var p=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_PlayResult.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_PLAY_RESULT,a}(c.StructProtocol);t.MSG_SC_SCOPA_OutResult=p;var u=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_OPResult.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_OP_RESULT,a}(c.StructProtocol);t.MSG_SC_SCOPA_OPResult=u;var h=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_EatCardList.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_EATCARD_LIST,a}(c.StructProtocol);t.MSG_SC_SCOPA_EatCardList=h;var C=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_GetSurplusCard.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GET_SURPLUS_CARD,a}(c.StructProtocol);t.MSG_SC_SCOPA_GetSurplusCard=C;var f=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_GameResult.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_RESULT,a}(c.StructProtocol);t.MSG_SC_SCOPA_GameResult=f;var S=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.decodeRaw=function(t){e.prototype.decodeRaw.call(this,t),this.data=r.MSG_SC_SCOPA_GamePlay.decode(t)},a.ProtocolId=t.logicMainId+"-"+r.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAMESCENCE_PLAY,a}(c.StructProtocol);t.MSG_SC_SCOPA_GamePlay=S;var y=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.encode=function(){var t=e.prototype.encode.call(this),a=r.MSG_CS_SCOPA_UserPlay.encode(this.data).finish();return null!=this.head&&(this.head.byGameData=a,this.head.dwSubID=r.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_SCOPA_USER_PLAY,a=s.MSG_CS_GameData.encode(this.head).finish()),null!=this.head1&&(this.head1.byGameData=a,a=n.Msg_GameHead.encode(this.head1).finish()),t.writeBytes(new d.ByteArray(a)),t},a.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SCS_DESK_GAMEDATA,a}(c.StructProtocol);t.MSG_CS_SCOPA_UserPlay=y;var m=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return i(a,e),a.prototype.getID=function(){return a.ProtocolId},a.prototype.encode=function(){var t=e.prototype.encode.call(this),a=r.MSG_CS_SCOPA_UserEat.encode(this.data).finish();return null!=this.head&&(this.head.byGameData=a,this.head.dwSubID=r.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_SCOPA_USER_EAT,a=s.MSG_CS_GameData.encode(this.head).finish()),null!=this.head1&&(this.head1.byGameData=a,a=n.Msg_GameHead.encode(this.head1).finish()),t.writeBytes(new d.ByteArray(a)),t},a.ProtocolId=t.gameMainId+"-"+s.GAME_SUB_MSG.MSGID_SCS_DESK_GAMEDATA,a}(c.StructProtocol);t.MSG_CS_SCOPA_UserEat=m})(a.ScopaGDGameMsg||(a.ScopaGDGameMsg={})),cc._RF.pop()},{"../../../script/lib/external/ByteArray":void 0,"../../../script/lib/network/struct/StructProtocol":void 0,"../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../../gameBaseSrc/model/goldGame/CMD_GameMsg":void 0,"./CMD_ScopaMsgDefine":"CMD_ScopaMsgDefine"}],ScopaGDLogicHandler:[function(t,e,a){"use strict";cc._RF.push(e,"3aa99CZcJ1MLLQsbOrYzc7s","ScopaGDLogicHandler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDLogicHandler=void 0;var r=t("../../../script/plugin/pb/protofile/GlobalMsgDef"),n=t("../model/CMD_ScopaMsgDefine"),s=t("../../gameBaseSrc/model/goldGame/CMD_GameMsg"),c=t("./../model/ScopaRoomData"),d=t("./../../../script/lib/utils/ComUtils"),l=t("./../../../script/app/const/Global"),p=t("../../../script/app/const/game/GameConstant"),u=t("../../../script/app/event/Notify"),h=t("../../../script/lib/utils/Logger"),C=t("../../gameBaseSrc/controller/LogicBaseHandler"),f=t("../../gameBaseSrc/model/GameEvent"),S=t("./ScopaGDFlow"),y=t("../../../script/app/module/buryPoint/BuryPointUtils"),m=t("../../../script/app/module/buryPoint/BuryPoint"),v=t("../../gameBaseSrc/model/ScopaConstant"),_=t("../../gameBaseSrc/alg/ScopaLogic"),g=t("../../../script/app/event/GuiEvent"),b=t("../model/ScopaGDPlayData"),E=function(t){function e(){var e=t.call(this)||this;return e.gameFlow=new S.ScopaGDFlow(e),e.playData=new b.ScopaGDPlayData(e),e.roomData=new c.ScopaGDRoomData(l.Global.getHuskyGameInfo(l.gHuskyGameType.SCOPA_GOLD).name),e}return i(e,t),e.prototype.getName=function(){return"ScopaGDLogicHandler"},e.prototype.destory=function(){this.handler.clear(),this.removeEvent(null),t.prototype.destory.call(this)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(f.GameEvent.Msg.SEND_OUTCARD,this.sendGameOutCardMsg),this.addEvent(f.GameEvent.Msg.SEND_OPERATTION,this.sendGameOperateMsg),this.addEvent(u.Notify.Base.UPDATE_USERINFO,this.onUpdateUserInfo),this.addEvent(f.GameEvent.OperateEvent.NEXT_GAME,this.onNextGame),this.addEvent(f.GameEvent.OperateEvent.CLICK_EATCARD,this.onClickEatCard),this.addEvent(f.GameEvent.OperateEvent.TRUST,this.onTrust),this.addEvent(f.GameEvent.OperateEvent.OUT_CARD_SELF,this.onOutCardSelf),this.addEvent(f.GameEvent.OperateEvent.CLICK_RULE_HELP,this.onClickRuleHelp),this.addEvent(f.GameEvent.JPQ.OPEN_JPQ,this.onReqJPQData)},e.prototype.protocolConfig=function(){return[{protocol:n.MSG_SC_SCOPA_GameStartData,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_START_DATA,cb:this.onGameStartData},{protocol:n.MSG_SC_SCOPA_SendHandCard,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_SEND_HAND_CARD,cb:this.onSendHandCard},{protocol:null,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_RESET_CARD,cb:this.onResetCard},{protocol:n.MSG_SC_SCOPA_InformUserOP,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_INFORM_USEROP,cb:this.onInformUserOp},{protocol:n.MSG_SC_SCOPA_PlayResult,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_PLAY_RESULT,cb:this.onOutCardResult},{protocol:n.MSG_SC_SCOPA_OPResult,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_OP_RESULT,cb:this.onOpertateResult},{protocol:n.MSG_SC_SCOPA_EatCardList,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_EATCARD_LIST,cb:this.onInformPlayerChooseEatCard},{protocol:n.MSG_SC_SCOPA_GetSurplusCard,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GET_SURPLUS_CARD,cb:this.onGetSurplusCard},{protocol:n.MSG_SC_SCOPA_GameResult,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAME_RESULT,cb:this.onGameOnceResult},{protocol:n.MSG_SC_SCOPA_GamePlay,subid:n.MESSAGE_SC_SCOPA_SUB_ID.MSGID_SC_SCOPA_GAMESCENCE_PLAY,cb:this.onGameScenePlay}]},e.prototype.getMainID=function(){return n.LOGIC_MAIN_MSG.MSG_GAMELOGIC_MAIN_ID},e.prototype.getSendSubId=function(){return s.GAME_SUB_MSG.MSGID_SCS_DESK_GAMEDATA},e.prototype.getSendMainId=function(){return r.MAIN_MSG_ID.MAIN_MSG_GAME_MSG_ID},e.prototype.getGameMsgHead=function(){var t=new r.Msg_GameHead;return t.strUUID=this.userData.sessionId,t},e.prototype.getGameLogicHead=function(){var t=new s.MSG_CS_GameData;return t.dwMainID=n.LOGIC_MAIN_MSG.MSG_GAMELOGIC_MAIN_ID,t},e.prototype.sendGameOutCardMsg=function(t){var e=new n.MSG_CS_SCOPA_UserPlay;e.dwChairID=this.roomData.getMyBaseInfo().chairId,e.dwOutCard=t.outCard,this.sendMsg(e,n.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_SCOPA_USER_PLAY),h.Logger.info("\u53d1\u9001\u51fa\u724c\u6d88\u606f =========>",t.outCard)},e.prototype.sendGameOperateMsg=function(t){var e=new n.MSG_CS_SCOPA_UserEat;e.dwChairID=this.roomData.getMyBaseInfo().chairId,e.dwOutCard=t.outCard,e.chEatCardData=d.ComUtils.objToU8(t.eatCards||[]),this.sendMsg(e,n.MESSAGE_CS_SCOPA_SUB_ID.MSGID_CS_SCOPA_USER_EAT),h.Logger.info("\u53d1\u9001\u64cd\u4f5c\u6d88\u606f =========>",JSON.stringify(e))},e.prototype.onGameReplayMsg=function(t){var e=t.id,a=t.body;e&&a&&this.handle(e,a)},e.prototype.onGameStartData=function(t,e){void 0===e&&(e=!0);var a=t.data;this.getPlayData().gameStart(a),e&&(_.ScopaLogic.isAScopa=this.roomData.isAScopa,_.ScopaLogic.isA2Scopa=this.roomData.isA2Scopa,y.BuryPointUtils.send(m.BuryPoint.Debug.Game.GameStart),this.getGameFlow().addGameStartFlow())},e.prototype.onSendHandCard=function(t,e){void 0===e&&(e=!0);var a=t.data,o=this.getRoomData(),i=o.getViewIdByChairId(a.dwChairID);o.bankerViewId=i,o.setPlayStatus(p.GameConstant.RoomPlayStatus.playing),this.getPlayData().sendCard(a),e&&(this.getGameFlow().addSendCardFlow(i),this.dispatch(f.GameEvent.JPQ.UPDATE_CARDS,this.getPlayData().remainCardDatas),this.dispatch(f.GameEvent.JPQ.UPDATE_SCORE,{ourScoreDetail:this.getPlayData().ourScoreDetail,otherScoreDetail:this.getPlayData().otherScoreDetail}))},e.prototype.onResetCard=function(t,e){void 0===e&&(e=!0),this.getPlayData().resetCard(),e&&this.getGameFlow().addResetCardFlow()},e.prototype.onChageCardsAndDouble=function(t,e){void 0===e&&(e=!0),this.getPlayData().resetCard(),e&&this.getGameFlow().addResetCardFlow()},e.prototype.onInformUserOp=function(t,e){void 0===e&&(e=!0);var a=t.data;this.getPlayData().informPlayerOperate(a),e&&this.getGameFlow().addInformOpFlow()},e.prototype.onOutCardResult=function(t,e){void 0===e&&(e=!0);var a=t.data,o=this.getPlayData();if(o.playerOutCardResult(a),e){var i=this.getRoomData().getViewIdByChairId(a.dwChairID);0===a.dwError?(this.getGameFlow().addOutCardFlow(),this.dispatch(f.GameEvent.Player.SET_TIMER,{viewId:i,remainTime:0,maxTime:o.opTimeMax,bRun:!1})):(h.Logger.info("onOutCardResult \u51fa\u724c\u7ed3\u679c  \u91cd\u7f6e\u4e4b\u524d\u51fa\u53bb\u7684\u724c",a),y.BuryPointUtils.send(m.BuryPoint.Debug.Game.OutCardError,""+JSON.stringify(a)),this.dispatch(f.GameEvent.HandCard.UPDATE_DATA,{viewId:i,handCardDatas:o.allHandCardDatas[i],throwCardIndex:o.throwCardIndex}),this.dispatch(cc.js.formatStr(f.GameEvent.HandCard.REFREASH,i),i),this.dispatch(f.GameEvent.OutCard.SCENE_PLAYING,o.outCardDatas),2!==a.dwError&&this.dispatch(f.GameEvent.HandCard.INFORM_PLAYER_OP,{curOperateViewId:i})),this.dispatch(f.GameEvent.JPQ.UPDATE_CARDS,o.remainCardDatas),this.dispatch(f.GameEvent.JPQ.UPDATE_SCORE,{ourScoreDetail:o.ourScoreDetail,otherScoreDetail:o.otherScoreDetail})}},e.prototype.onOpertateResult=function(t,e){void 0===e&&(e=!0);var a=t.data,o=this.getPlayData();if(o.playerOperateResult(a),e){var i=o.curOperateViewId;this.dispatch(f.GameEvent.Player.OP_TIMEOUT,{viewId:i,time:0}),this.dispatch(f.GameEvent.Player.SET_TIMER,{viewId:i,remainTime:0,maxTime:o.opTimeMax,bRun:!1});var r=!1;0===i&&o.selfOpEatCards&&o.selfOpEatCards.outCardData>0&&(o.curOpEatCard&&o.curOpEatCard.equals(o.selfOpEatCards)?r=!0:(this.getGameFlow().stop(),this.dispatch(f.GameEvent.HandCard.UPDATE_DATA,{viewId:i,handCardDatas:o.allHandCardDatas[i],throwCardIndex:o.throwCardIndex}),this.dispatch(cc.js.formatStr(f.GameEvent.HandCard.REFREASH,i),i),this.dispatch(f.GameEvent.OutCard.SCENE_PLAYING,o.outCardDatas))),a.dwGetCardData.length>0&&!r&&this.getGameFlow().addEatCardFlow(o.curOpEatCard),o.selfOpEatCards.clear()}},e.prototype.onInformPlayerChooseEatCard=function(t,e){void 0===e&&(e=!0);var a=t.data,o=this.getPlayData();o.informPlayerChooseEatCard(a),e&&(this.dispatch(f.GameEvent.OpView.CHOOSE_CARD,{outCardData:o.curProvideCard,eatOptions:o.chooseEatGroup}),this.dispatch(f.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:o.allHandCardDatas}),this.dispatch(f.GameEvent.OutCard.SCENE_PLAYING,o.outCardDatas))},e.prototype.onGetSurplusCard=function(t,e){void 0===e&&(e=!0);var a=t.data,o=this.getPlayData();o.playerGetSurplusCard(a),e&&this.getGameFlow().addEatSurplusCardFlow(o.curOpEatCard)},e.prototype.onGameOnceResult=function(t,e){var a=this;void 0===e&&(e=!0);var o=t.data,i=this.getPlayData(),r=i.gameResult(o);if(e){this.getRoomData().roomPlayStatus=p.GameConstant.RoomPlayStatus.gameEnd,this.gameData.exsitGameInfo={gameID:0,gameType:0,queryTime:0},r&&this.dispatch(u.Notify.Other.REQ_BRANKRUPT_INFO),this.dispatch(f.GameEvent.Desk.DESK_CLEAR_TIMER),this.dispatch(f.GameEvent.Player.SET_TIMER,{viewId:i.curOperateViewId,remainTime:0,maxTime:i.opTimeMax,bRun:!1}),this.dispatch(f.GameEvent.Base.GAME_RESULT),this.dispatch(f.GameEvent.Voice.STOP_MUSIC_BG),this.dispatch(f.GameEvent.Chat.CLEAR);var n=this.getPlayData().curResult;n.ourSidePlayers.forEach(function(t){t&&a.dispatch(f.GameEvent.Player.UPDATE_USERS_INFO,{userId:t.userId,level:t.level,ranklevel:t.ranklevel,rankstarlevel:t.rankstarlevel})}),n.otherSidePlayers.forEach(function(t){t&&a.dispatch(f.GameEvent.Player.UPDATE_USERS_INFO,{userId:t.userId,level:t.level,ranklevel:t.ranklevel,rankstarlevel:t.rankstarlevel})}),1==this.getRoomData().loginFinish?this.getGameFlow().addGameEndFlow():(this.dispatch(f.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:i.allHandCardDatas}),this.dispatch(f.GameEvent.EatCard.SCENE_PLAYING,i.getEatCardInfo()),this.dispatch(f.GameEvent.Popup.GAME_ONCE_RESULT,this.getPlayData().curResult))}},e.prototype.onGameScenePlay=function(t,e){void 0===e&&(e=!0);var a=t.data;this.getGameFlow().stop();var o=this.getRoomData();_.ScopaLogic.isAScopa=o.isAScopa,_.ScopaLogic.isA2Scopa=o.isA2Scopa;var i=this.getPlayData();if(i.gameScenePlaying(a),e){o.setPlayStatus(p.GameConstant.RoomPlayStatus.playing),this.dispatch(f.GameEvent.GameTips.PLAYER_STATUS_CLEAR),this.dispatch(f.GameEvent.GameTips.CLEAR),this.dispatch(f.GameEvent.Desk.WAIT_MENU_CLEAR),this.dispatch(f.GameEvent.Desk.DESKINFO_TRANSPARENT,!0),this.dispatch(f.GameEvent.Desk.UPDATE_DESKINFO,{deskCfg:o.getDeskInfo(),roomCfg:o.getRoomInfo(),iMultpNum:a.dwMultiplyNum}),this.dispatch(f.GameEvent.Desk.DESKINFO_TRANSPARENT,!0),this.dispatch(f.GameEvent.Desk.REMAIN_CARD_NUM_CHANGE,i.curCardStackNum),this.dispatch(f.GameEvent.Desk.DESK_REMAIN_TIME_RESET,i.curOpRemainTime),this.dispatch(f.GameEvent.HandCard.SCENE_PLAYING,{allHandCardDatas:i.allHandCardDatas,curDisplayMode:o.getCardDisplayMode()}),this.dispatch(f.GameEvent.OutCard.SCENE_PLAYING,i.outCardDatas),this.dispatch(f.GameEvent.EatCard.SCENE_PLAYING,i.getEatCardInfo());var r=i.curOperateViewId;this.dispatch(f.GameEvent.HandCard.SET_CAN_TOUCH,0===r),r>-1&&(this.dispatch(f.GameEvent.HandCard.INFORM_PLAYER_OP,{curOperateViewId:r}),this.dispatch(f.GameEvent.Player.SET_TIMER,{viewId:r,remainTime:i.curOpRemainTime,maxTime:i.opTimeMax,bRun:!0})),this.dispatch(f.GameEvent.JPQ.UPDATE_CARDS,i.remainCardDatas),this.dispatch(f.GameEvent.JPQ.UPDATE_SCORE,{ourScoreDetail:i.ourScoreDetail,otherScoreDetail:i.otherScoreDetail})}},e.prototype.onNextGame=function(){var t=this,e=this.getRoomData();e.leftPlayerIdList.forEach(function(a){a!=t.userData.userId&&(t.dispatch(f.GameEvent.Player.STATUS_CHANGE,{userId:a,status:p.GameConstant.RoomUserStatus.GetOut}),e.removePlayer(a))}),e.roomPlayStatus=p.GameConstant.RoomPlayStatus.waiting,this.dispatch(f.GameEvent.Player.STATUS_CHANGE,{userId:e.getUserIdByViewId(0),status:p.GameConstant.RoomUserStatus.Ready}),this.dispatch(f.GameEvent.Desk.WAIT_MENU_CLEAR),this.dispatch(f.GameEvent.Com.READY_NEXT_CLEAR),this.dispatch(f.GameEvent.Desk.DESKINFO_TRANSPARENT,!1),this.dispatch(f.GameEvent.Desk.UPDATE_DESKINFO,{deskCfg:e.getDeskInfo(),roomCfg:e.getRoomInfo()})},e.prototype.onUpdateUserInfo=function(t){if(t){var e=this.roomData.getPlayerByUserId(t.userId);e&&(e.name=t.userName,e.sex=t.gender,e.headURL=t.wxHeadUrl,this.dispatch(f.GameEvent.Player.UPDATE_ROOM_USERINFO,e))}},e.prototype.onClickEatCard=function(){this.playData.ourScoreDetail},e.prototype.onTrust=function(t){void 0===t&&(t=!1),this.dispatch(f.GameEvent.Msg.SEND_TRUST_STATUS,{isTrust:t,chairId:this.roomData.myBaseInfo.chairId})},e.prototype.onOutCardSelf=function(){var t=this.getPlayData().selfOpEatCards;t&&t.deleteCards.length>0&&(h.Logger.info("[viewId=0]\u81ea\u5df1\u51fa\u724c\u4e86 this.selfOpEatCards.deleteCards="+t.deleteCards+" msg.bScopa="+t.bScopa),this.getGameFlow().addEatCardFlow(t,1e3*v.ScopaConstant.THROW_OUT_CARD_TIME))},e.prototype.onClickRuleHelp=function(){var t=[],e=this.getRoomData();e.isAScopa&&t.push(p.GameConstant.RuleType.A_SCOPA),e.isSettleNormal()||t.push(p.GameConstant.RuleType.BigWin),e.isWild()&&t.push(p.GameConstant.RuleType.DoubleUp),l.Global.convertGameType(e.gameID)===l.gHuskyGameType.SCOPA_GOLD_CRAZY?t.push(p.GameConstant.RuleType.Crazy):l.Global.convertGameType(e.gameID)===l.gHuskyGameType.SCOPA_GOLD_CRAZY_V3&&t.push(p.GameConstant.RuleType.CrazyV3),this.dispatch(g.GuiEvent.PopMsg.DISPLAY_RULE_TIPS,{ruleTypes:t})},e.prototype.onReqJPQData=function(t){this.dispatch(f.GameEvent.Popup.JPQ,{worldPos:t,ourScoreDetail:d.ComUtils.clone(this.playData.ourScoreDetail),otherScoreDetail:d.ComUtils.clone(this.playData.otherScoreDetail),unkonwnCards:this.playData.remainCardDatas})},e}(C.LogicBaseHandler);a.ScopaGDLogicHandler=E,cc._RF.pop()},{"../../../script/app/const/game/GameConstant":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../script/lib/utils/Logger":void 0,"../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../../gameBaseSrc/alg/ScopaLogic":void 0,"../../gameBaseSrc/controller/LogicBaseHandler":void 0,"../../gameBaseSrc/model/GameEvent":void 0,"../../gameBaseSrc/model/ScopaConstant":void 0,"../../gameBaseSrc/model/goldGame/CMD_GameMsg":void 0,"../model/CMD_ScopaMsgDefine":"CMD_ScopaMsgDefine","../model/ScopaGDPlayData":"ScopaGDPlayData","./../../../script/app/const/Global":void 0,"./../../../script/lib/utils/ComUtils":void 0,"./../model/ScopaRoomData":"ScopaRoomData","./ScopaGDFlow":"ScopaGDFlow"}],ScopaGDPlayData:[function(t,e,a){"use strict";cc._RF.push(e,"09807XXFAhNgImOTd2zSUlj","ScopaGDPlayData");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDPlayData=void 0;var r=t("./../../../script/lib/utils/Logger"),n=t("./../../../script/lib/utils/ComUtils"),s=t("../../../script/app/const/game/GameConstant"),c=t("../../gameBaseSrc/model/BasePlayData"),d=t("../../gameBaseSrc/alg/ScopaLogic"),l=t("../../gameBaseSrc/model/ScopaConstant"),p=t("./ScopaDefine"),u=t("../../../script/app/const/Global"),h=[1,2,3,4,5,6,7,8,9,10,17,18,19,20,21,22,23,24,25,26,33,34,35,36,37,38,39,40,41,42,49,50,51,52,53,54,55,56,57,58],C=function(t){function e(e){var a=t.call(this,"ScopaGD")||this;return a.logic=e,a.mManualDoubbleCount=0,a.opeTimeRecord=null,a.curOpEatCard=new p.ScopaOpEatCard,a.selfOpEatCards=new p.ScopaOpEatCard,a.clear(),a}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.unKnowCardData=h.slice(0),this.playerEatCardList=[[],[],[],[]],this.playerScopaList=[[],[],[],[]],this.chooseEatGroup=[[],[],[],[]],this.playerScopaCount=[0,0,0,0],this.mManualDoubbleCount=0,this.bPlayerSettebello=[!1,!1,!1,!1],this.winerViewId=-1,this.sendToDeskDatas=[],this.throwCardIndex=-2,this.curOpEatCard&&this.curOpEatCard.clear(),this.selfOpEatCards&&this.selfOpEatCards.clear(),this.ourScoreDetail=null,this.otherScoreDetail=null},Object.defineProperty(e.prototype,"curResult",{get:function(){return this._curResult},set:function(t){this._curResult=t},enumerable:!1,configurable:!0}),e.prototype.handCardCompare=function(){return 0},e.prototype.isViewIdIsOurSide=function(t){return 2==this.logic.getRoomData().maxPlayerNum?0==t:0==(1&t)},e.prototype.isMySideWin=function(){return 2==this.logic.getRoomData().maxPlayerNum?0===this.winerViewId:0==(1&this.winerViewId)},e.prototype.isCardCanOut=function(t){if(d.ScopaLogic.isGhostCard(t))return!0;var e=d.ScopaLogic.bytesToLocal(this.outCardDatas),a=d.ScopaLogic.getCardValue(t),o=d.ScopaLogic.findSumEqualToVaule(e,a);return d.LocalCardSt.put(e),e=null,!(o.length>1)},e.prototype.isLastCard=function(){if(0===this.curCardStackNum){for(var t=0,e=0,a=this.allHandCardDatas;e<a.length;e++){var o=a[e];if(o&&(t+=o.length)>1)break}if(1===t)return!0}return!1},e.prototype.getThrowCardIndex=function(t,e){var a=[];if(this.outCardDatas.forEach(function(t){t>0&&a.push(t)}),d.ScopaLogic.isGhostCard(t)&&a.length>0){e&&this.selfThrowCardResult(a,t);var o=d.PosState.MergePos;return 1==a.length&&(o=this.getCardItemIndexByData(a[0])),o}a.length=0;var i=d.ScopaLogic.bytesToLocal(this.outCardDatas),r=d.ScopaLogic.getCardValue(t),n=!1,s=d.PosState.NotFoundPos,c=d.ScopaLogic.findSameValueCards(i,r);if(1===c.length&&(n=!0,s=this.getCardItemIndexByData(c[0].o),a=[this.outCardDatas[s]]),!1===n){var l=d.ScopaLogic.findSumEqualToVaule(i,r);if(l.length>0&&(l.length>1||l[0].length>1?(n=!0,s=d.PosState.MergePos):1===l[0].length&&(n=!0,s=this.getCardItemIndexByData(l[0][0].o),a=[this.outCardDatas[s]]),1===l.length&&l[0].length>1))for(var p=0,u=l[0];p<u.length;p++){var h=u[p];a.push(h.o)}}return e&&n&&this.selfThrowCardResult(a,t),d.LocalCardSt.put(i),i=null,n?s:this.getUIEmptyPosIndex()},e.prototype.selfThrowCardResult=function(t,e){if(this.selfOpEatCards.clear(),!(t.length<=0)){var a=!1;d.ScopaLogic.isScopa(this.outCardDatas,e)&&!1===this.isLastCard()&&(a=!0);var o=d.ScopaLogic.isSettebello(t)||e===d.ScopaLogic.COINS_7,i=1,r=this.playerScopaCount[0];if(this.logic.getRoomData().isWild()){for(var n=0,s=0,c=this.playerScopaCount;s<c.length;s++)n+=c[s];a&&n++,i=Math.pow(2,n+this.mManualDoubbleCount)}a&&r++;var p,u=t.length;p=u>=2?l.ScopaConstant.MERGE_EAT_DELAY_TIME*(u-1)+l.ScopaConstant.MERGE_EAT_RUN_TIME:1==u?.33+l.ScopaConstant.EAT_CARD_RUN_TIME:l.ScopaConstant.MERGE_EAT_RUN_TIME,this.selfOpEatCards.viewId=0,this.selfOpEatCards.deleteCards=t.sort(function(t,e){return t-e}),this.selfOpEatCards.bScopa=a,this.selfOpEatCards.bSettebello=o,this.selfOpEatCards.outCardData=e,this.selfOpEatCards.bSurplus=!1,this.selfOpEatCards.scopaCount=r,this.selfOpEatCards.bOurSide=!0,this.selfOpEatCards.delayTime=p,this.selfOpEatCards.iMultpNum=i||1}},e.prototype.getCardItemIndexByData=function(t){for(var e=-2,a=this.outCardDatas,o=a.length,i=0;i<o;i++)if(a[i]==t){e=i;break}return e},e.prototype.getUIEmptyPosIndex=function(){for(var t=this.outCardDatas.length,e=0;e<t;e++)if(0===this.outCardDatas[e])return e;return 8===t?d.PosState.MergePos:t},e.prototype.addEatCardDatasByViewId=function(t,e,a){for(var o=0;o<a;o++)this.playerEatCardList[t].push(e[o])},e.prototype.addScopaCardDataByViewId=function(t,e,a){for(var o=0;o<a;o++)this.playerScopaList[t].push(e[o]),this.playerScopaCount[t]++},e.prototype.getAllEatCards=function(){var t=this.curResult,e=[];return e[0]=t.ourGameResult.cardDatas,e[1]=t.otherGameResult.cardDatas,e},e.prototype.getEatCardInfo=function(){for(var t=[0,0],e=[[],[]],a=[0,0],o=0;o<4;o++){var i=this.isViewIdIsOurSide(o)?0:1;t[i]+=this.playerEatCardList[o].length;for(var r=0,n=this.playerScopaList[o];r<n.length;r++){var s=n[r];e[i].push(s)}a[i]+=this.playerScopaCount[o]}return{normalCardList:t,scopaCardList:e,scopaCount:a}},e.prototype.regPlayerScore=function(){this.ourScoreDetail||(this.ourScoreDetail=new p.ScopaPlayerScoreDetail),this.otherScoreDetail||(this.otherScoreDetail=new p.ScopaPlayerScoreDetail),this.ourScoreDetail.clear(),this.otherScoreDetail.clear();for(var t=[0,16,12,13,14,15,18,21,10,10,10],e=l.ScopaConstant.CardColor,a=0;a<4;a++){var o=0,i=0,r=this.playerEatCardList[a];if(r.length>0){for(var n=[0,0,0,0],s=d.ScopaLogic.bytesToLocal(r),c=0,u=s;c<u.length;c++){var h=u[c];h.c===e.Coins&&o++,n[h.c]<t[h.l]&&(n[h.c]=t[h.l])}for(var C=0,f=n;C<f.length;C++)i+=f[C];d.LocalCardSt.put(s),s=null}this.isViewIdIsOurSide(a)?(this.ourScoreDetail.coinsNum+=o,this.ourScoreDetail.ColorFenMax+=i,this.ourScoreDetail.cardNum+=r.length,this.ourScoreDetail.scopaCount+=this.playerScopaCount[a]||0,this.ourScoreDetail.coins7+=this.bPlayerSettebello[a]?1:0):(this.otherScoreDetail.coinsNum+=o,this.otherScoreDetail.ColorFenMax+=i,this.otherScoreDetail.cardNum+=r.length,this.otherScoreDetail.scopaCount+=this.playerScopaCount[a]||0,this.otherScoreDetail.coins7+=this.bPlayerSettebello[a]?1:0)}},e.prototype.gameStart=function(t){this.clear(),this.logic.getPlayData().cardTotalNum=t.dwCardNum},e.prototype.resetCard=function(){this.clear()},e.prototype.sendCard=function(t){this.curOperateViewId=this.logic.getRoomData().getViewIdByChairId(t.dwChairID),this.curCardStackNum=t.dwSurplusNum,this.sendCardCount=3;for(var e=this.logic.getRoomData().getMaxPlayerNum(),a=0;a<e;a++){var o=a+1,i=this.logic.getRoomData().getViewIdByChairId(o);0==i?(this.setHandCardData(0,t.dwCardData,t.dwCardNum),this.sortHandCardDatas(i)):this.initHandCardData0(i,t.dwCardNum)}for(this.handCardDisplayMode[0]=s.GameConstant.HandCardMode.DISPLAY,a=0;a<t.dwTableCardNum;a++)this.addDeskOutCard(t.dwTableCardData[a]);this.sendToDeskDatas=n.ComUtils.clone(t.dwTableCardData),this.deleteUnknowCardDatas(this.allHandCardDatas[0]),this.deleteUnknowCardDatas(t.dwTableCardData),this.updateRemainCardData()},e.prototype.informPlayerOperate=function(t){this.curOperateViewId=this.logic.getRoomData().getViewIdByChairId(t.dwChairID),this.curOpRemainTime=t.dwOppTime,this.chooseEatGroup=[],this.recoredTime(t.dwOppTime)},e.prototype.playerOutCardResult=function(t){if(0===t.dwError){var e=this.logic.getRoomData().getViewIdByChairId(t.dwChairID);this.curProvideViewId=e,this.curOperateViewId=e,this.curProvideCard=t.dwOutCard,this.deleteOneHandCardByData(e,this.curProvideCard),this.throwCardIndex=this.getThrowCardIndex(this.curProvideCard,!1),-1===this.throwCardIndex&&1==t.dwGetCardData.length&&(this.throwCardIndex=this.getCardItemIndexByData(t.dwGetCardData[0])),this.curProvideCard&&this.addDeskOutCard(this.curProvideCard),this.deleteUnknowCardDatas([t.dwOutCard]),this.updateRemainCardData()}},e.prototype.playerOperateResult=function(t){var e=this.logic.getRoomData().getViewIdByChairId(t.dwChairID);if(e<=-1)r.Logger.error("playerOperateResult viewId error");else{this.curProvideViewId=e,this.curOperateViewId=e,this.curProvideCard=t.dwOutCard;var a=t.dwGetCardData.length;t.bScopa&&this.addScopaCardDataByViewId(this.curProvideViewId,[t.dwOutCard],1),a>0&&(this.addEatCardDatasByViewId(this.curProvideViewId,t.dwGetCardData,a),this.addEatCardDatasByViewId(this.curProvideViewId,[t.dwOutCard],1));var o=!1;if(a>0){var i=n.ComUtils.clone(t.dwGetCardData);i.push(t.dwOutCard),this.deleteDeskOutCard(i);var s=d.ScopaLogic.COINS_7;i.forEach(function(t){t===s&&(o=!0)}),o&&(this.bPlayerSettebello[this.curProvideViewId]=!0)}var c;c=a>=2?l.ScopaConstant.MERGE_EAT_DELAY_TIME*(a-1)+l.ScopaConstant.MERGE_EAT_RUN_TIME:1==a?.33+l.ScopaConstant.EAT_CARD_RUN_TIME:l.ScopaConstant.MERGE_EAT_RUN_TIME,this.curOpEatCard.clear(),this.curOpEatCard.viewId=e,this.curOpEatCard.deleteCards=n.ComUtils.clone(t.dwGetCardData).sort(function(t,e){return t-e}),this.curOpEatCard.bScopa=t.bScopa,this.curOpEatCard.outCardData=t.dwOutCard,this.curOpEatCard.bSurplus=!1,this.curOpEatCard.scopaCount=this.playerScopaCount[e],this.curOpEatCard.bOurSide=this.isViewIdIsOurSide(e),this.curOpEatCard.delayTime=c,this.curOpEatCard.iMultpNum=t.dwMultiplyNum,this.curOpEatCard.bSettebello=o,this.regPlayerScore(),d.ScopaLogic.isGhostCard(t.dwOutCard)&&r.Logger.info("[viewId="+e+"]\u73a9\u5bb6\u64cd\u4f5c\u7ed3\u679c \u51fa\u4e86A this.curOpEatCard.deleteCards="+this.curOpEatCard.deleteCards+" msg.bScopa="+t.bScopa)}},e.prototype.informPlayerChooseEatCard=function(t){this.curProvideViewId=0,this.curProvideCard=t.dwOutCard,this.chooseEatGroup=[];for(var e=0;e<t.dwEatCardData.length;e++)this.chooseEatGroup[e]=n.ComUtils.clone(t.dwEatCardData[e].dwCardData)},e.prototype.playerGetSurplusCard=function(t){var e=this.logic.getRoomData().getViewIdByChairId(t.dwChairID);this.curProvideViewId=e,this.curOperateViewId=e,this.addEatCardDatasByViewId(e,t.dwCardData,t.dwCardData.length),this.deleteDeskOutCard(t.dwCardData);var a=!1,o=d.ScopaLogic.COINS_7;t.dwCardData.forEach(function(t){t===o&&(a=!0)}),this.curOpEatCard.clear(),this.curOpEatCard.viewId=e,this.curOpEatCard.deleteCards=n.ComUtils.clone(t.dwCardData).sort(function(t,e){return t-e}),this.curOpEatCard.bScopa=!1,this.curOpEatCard.outCardData=0,this.curOpEatCard.bSurplus=!0,this.curOpEatCard.scopaCount=this.playerScopaCount[e],this.curOpEatCard.bOurSide=this.isViewIdIsOurSide(e),this.curOpEatCard.bSettebello=a,this.curOpEatCard.delayTime=0,this.curOpEatCard.iMultpNum=1},e.prototype.gameResult=function(t){var e=this.logic.getRoomData(),a=e.getViewIdByChairId.bind(e);this.winerViewId=a(t.dwWinnerChairID);var o=new p.ScopaGameResult;o.rematchTime=t.dwRematchTime,this.curResult=o,-1===this.winerViewId?o.endStatus=s.GameConstant.GameEndStatus.DRAW:0===this.winerViewId?o.endStatus=s.GameConstant.GameEndStatus.WIN:o.endStatus=s.GameConstant.GameEndStatus.LOST,o.rankEnd=t.bDanSettle;for(var i=0,r=0,n=t.tabUserSettleInfoList,c=e.getMaxPlayerNum(),d=!1,l=0;l<c;l++){var u=n[l];if(u){var h=a(u.dwChairID);0===h&&u.bPC&&(d=!0);var C=new p.ScopaPlayerScoreDetail;C.viewId=h,C.score=u.dwScore,C.cardNum=u.dwCardnum,C.ColorFenMax=u.dwColorFen,C.coins7=u.bHaveCoins7?1:0,C.coinsNum=u.dwCoinsNum,C.scopaCount=u.dwScopaNum,C.userGold=u.dwGold,C.cardDatas=u.dwCardData,C.dwCupNum=u.dwCupNum,C.dwDanRank=u.dwDanRank,C.dwChange=u.dwChange,C.bUseHD=u.bUseHD;var f=e.getPlayerByViewId(h);f.bPC=u.bPC,f.level=u.dwExpLevel,0===h?(o.ourGameResult=C,o.ourSidePlayers.push(f)):(o.otherGameResult=C,o.otherSidePlayers.push(f)),this.isViewIdIsOurSide(h)?i+=u.dwScore:r+=u.dwScore}}var S=e.isWild(),y=t.dwMultiplyNum,m=e.isSettleNormal();return 0==S&&m?o.strBeiShu="":S&&m?o.strBeiShu=y>1?"BET "+e.getBaseScore()+" X"+y:"BET "+e.getBaseScore():!1===S&&!1===m?o.strBeiShu=i!=r?"BET "+e.getBaseScore()+" X("+i+"-"+r+")":"BET "+e.getBaseScore():S&&!1===m&&(o.strBeiShu=y>1?"BET "+e.getBaseScore()+" X("+i+"-"+r+")X"+y:"BET "+e.getBaseScore()+" X("+i+"-"+r+")"),o.cappedViewId=e.getViewIdByChairId(t.dwCappingChairID),o.viewName=o.strBeiShu?p.eResultGameViewType.GameResultView_2:p.eResultGameViewType.GameResultView,d},e.prototype.gameScenePlaying=function(t){this.clear(),this.handCardDisplayMode[0]=s.GameConstant.HandCardMode.DISPLAY;var e=this.logic.getRoomData();this.curOperateViewId=e.getViewIdByChairId(t.dwCurrentChairID),this.curOpRemainTime=t.dwOppTime,this.recoredTime(t.dwOppTime),this.curCardStackNum=t.dwSurplusNum;for(var a=0;a<t.dwCardnum;a++)this.addDeskOutCard(t.dwCardData[a]);var o=t.tabUserGameInfoList.length;for(a=0;a<o;a++){var i=t.tabUserGameInfoList[a];if(!i)break;var r=e.getViewIdByChairId(i.dwChairID);this.addScopaCardDataByViewId(r,i.dwScopaData,i.dwScopaNum),this.addEatCardDatasByViewId(r,i.dwGetCardData,i.dwGetCardNum),this.bPlayerSettebello[r]=i.bHaveCoins7,this.deleteUnknowCardDatas(i.dwGetCardData),this.deleteUnknowCardDatas(i.dwScopaData),0==r?(this.setHandCardData(0,i.tabHandCardData,i.dwCardnum),this.sortHandCardDatas(r)):this.initHandCardData0(r,i.dwCardnum)}this.regPlayerScore(),this.deleteUnknowCardDatas(t.dwCardData),this.deleteUnknowCardDatas(this.allHandCardDatas[0]),this.updateRemainCardData()},e.prototype.updateRemainCardData=function(){var t=[];this.unKnowCardData.forEach(function(e){var a=d.ScopaLogic.getCardValue(e);t[a]=t[a]||0,t[a]++});var e;e=this.logic.getRoomData().bCrazy?[1,10,9,8,7,6,5,4,3,2]:[10,9,8,7,6,5,4,3,2,1],this.remainCardDatas=[];for(var a=0;a<10;a++){var o=e[a];this.remainCardDatas.push({cardValue:o,cardNum:t[o]||0})}},e.prototype.manualDouble=function(){this.mManualDoubbleCount++},e.prototype.setManualDoubleCount=function(t){this.mManualDoubbleCount=t},e.prototype.recoredTime=function(t){this.opeTimeRecord=null,this.opeTimeRecord=new u.TimeRecord,this.opeTimeRecord.start(t,!1)},e.prototype.getLeftOpeTime=function(){return this.opeTimeRecord?this.opeTimeRecord.end():0},e}(c.BasePlayData);a.ScopaGDPlayData=C,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/const/game/GameConstant":void 0,"../../gameBaseSrc/alg/ScopaLogic":void 0,"../../gameBaseSrc/model/BasePlayData":void 0,"../../gameBaseSrc/model/ScopaConstant":void 0,"./../../../script/lib/utils/ComUtils":void 0,"./../../../script/lib/utils/Logger":void 0,"./ScopaDefine":"ScopaDefine"}],ScopaGDScene:[function(t,e,a){"use strict";cc._RF.push(e,"e3341mQETlJqpx0uTqQV8x9","ScopaGDScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaScene=void 0;var n=t("../../../script/app/event/Notify"),s=t("../../gameBaseSrc/controller/goldGame/GoldDeskHandler"),c=t("../../gameBaseSrc/controller/goldGame/GoldLoginMsgHandler"),d=t("../../gameBaseSrc/model/GameEvent"),l=t("../../gameBaseSrc/view/goldGame/GoldGameScene"),p=t("../controller/ScopaGDLogicHandler"),u=t("../controller/ScopaVoice"),h=cc._decorator,C=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onDestroy=function(){this.goldDeskHandler&&(this.dispatch(n.Notify.Gate.RM_HANDLER,this.goldDeskHandler),this.goldDeskHandler.destory(),this.goldDeskHandler=null),this.loginMsgHandler&&(this.dispatch(n.Notify.Gate.RM_HANDLER,this.loginMsgHandler),this.loginMsgHandler.clear(),this.loginMsgHandler=null),t.prototype.onDestroy.call(this)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.getSceneName=function(){return"ScopaGDScene"},e.prototype.initHandler=function(){t.prototype.initHandler.call(this),this.logicHandler=new p.ScopaGDLogicHandler,this.goldDeskHandler=new s.GoldDeskHandler(this.logicHandler),this.loginMsgHandler=new c.GoldLoginMsgHandler(this.logicHandler),this.dispatch(n.Notify.Gate.ADD_HANDLER,this.goldDeskHandler),this.dispatch(n.Notify.Gate.ADD_HANDLER,this.loginMsgHandler),this.initHandlerFinished=!0,this.tryLoginGame()},e.prototype.initVoice=function(){this.gameVoice=new u.ScopaVoice,t.prototype.initVoice.call(this)},e.prototype.onChangeDeskEvent=function(){this.dispatch(d.GameEvent.Msg.SEND_CHANGE_DESK)},e.prototype.onChangeLanguage=function(e){t.prototype.onChangeLanguage.call(this,e)},e.prototype.onPreLoadResultRes=function(){t.prototype.onPreLoadResultRes.call(this)},r([C],e)}(l.GoldGameScene));a.ScopaScene=f,cc._RF.pop()},{"../../../script/app/event/Notify":void 0,"../../gameBaseSrc/controller/goldGame/GoldDeskHandler":void 0,"../../gameBaseSrc/controller/goldGame/GoldLoginMsgHandler":void 0,"../../gameBaseSrc/model/GameEvent":void 0,"../../gameBaseSrc/view/goldGame/GoldGameScene":void 0,"../controller/ScopaGDLogicHandler":"ScopaGDLogicHandler","../controller/ScopaVoice":"ScopaVoice"}],ScopaGDUIConfig:[function(t,e,a){"use strict";cc._RF.push(e,"5e00dHFP7FPO5c8QN87xZDi","ScopaGDUIConfig");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaBundleConfig=a.ScopaGDUIConfig=void 0;var r=t("../../../script/app/config/ResConfig"),n=t("../../../script/app/const/Global"),s=t("../../../script/lib/manager/ResManager"),c=t("../../gameBaseSrc/model/BaseGameUIConfig");a.ScopaGDUIConfig={bunldleName:n.gAssetBundleName.SCOPA_GOLD_RES,prefab:{EatCardOnDesk:new r.PrefabItem("UIEatCardOnDesk","prefabs/eatCard/EatCardOnDesk",n.gLayerLevel.Normal,c.GameZIndex.eatCard),ScopaCountView:new r.PrefabItem("UIScopaCountView","prefabs/eatCard/ScopaCountView",n.gLayerLevel.Normal,c.GameZIndex.scopeCount),GameChooseEatCardView:new r.PrefabItem("UIGameChooseEatCardView","prefabs/opView/GameChooseEatCardView",n.gLayerLevel.Normal,c.GameZIndex.opView),MyHandCardsView:new r.PrefabItem("UIMyHandPokerView","prefabs/myCard/MyHandCardsView",n.gLayerLevel.Normal,c.GameZIndex.myCards),OthersHandCardsView:new r.PrefabItem("UIOthersHandCardsView","prefabs/othersCard/OthersHandCardsView",n.gLayerLevel.Normal,c.GameZIndex.playerCards),DeskOutCardView:new r.PrefabItem("UIDeskOutCardView","prefabs/outCard/DeskOutCardView",n.gLayerLevel.Normal,c.GameZIndex.outCards),GameMySelfBg:new r.PrefabItem("UIGameUserInfoBg","prefabs/desk/GameMySelfBg",n.gLayerLevel.Normal,c.GameZIndex.myInfoPanel),ScopaAnim:new r.PrefabItem("UIScopaAnim","prefabs/effect/ScopaAnim",n.gLayerLevel.Normal,c.GameZIndex.scopaAnima),GameUserInfoBg:new r.PrefabItem("UIGameUserInfoBg","prefabs/desk/GameUserInfoBg",n.gLayerLevel.Normal,c.GameZIndex.gameBg),SkinGameDeskMenu:new r.PrefabItem("UIGameDeskMenu","skinPrefabs/desk/SkinGameDeskMenu",n.gLayerLevel.Normal,c.GameZIndex.deskMenu),SkinGameInfo:new r.PrefabItem("UIGameInfo","skinPrefabs/desk/SkinGameInfo",n.gLayerLevel.Normal,c.GameZIndex.gameInfo),SkinSendCardCtrl:new r.PrefabItem("UISendCardCtrl","skinPrefabs/desk/SkinSendCardCtrl",n.gLayerLevel.Normal,c.GameZIndex.sendCard),ScoreChangeAnim:new r.PrefabItem("UIScoreChangeAnim","prefabs/effect/ScoreChangeAnim",n.gLayerLevel.Normal,c.GameZIndex.goldChangeAnima)},altas:["altas/ScopaBase"],popup:{GameResultView:new r.PrefabItem("UIGameResultView","prefabs/result/GameResultView",n.gLayerLevel.LowLayer,r.PopupZIndex.onceResult),GameResultView_2:new r.PrefabItem("UIGameResultView","prefabs/result/GameResultView_2",n.gLayerLevel.LowLayer,r.PopupZIndex.onceResult),ScopaGDCrazyResultView:new r.PrefabItem("UIGameResultView","prefabs/result/ScopaGDCrazyResultView",n.gLayerLevel.LowLayer,r.PopupZIndex.onceResult),GameRealTimeScore:new r.PrefabItem("UIGameRealTimeScore","prefabs/desk/GameRealTimeScore",n.gLayerLevel.Popup,r.PopupZIndex.effect),SettebelloAnim:new r.PrefabItem("UISettebelloAnim","prefabs/effect/SettebelloAnim",n.gLayerLevel.Popup,r.PopupZIndex.effect),ScopaKOAnim:new r.PrefabItem("UIScopaKOAnim","prefabs/effect/ScopaKOAnim",n.gLayerLevel.Popup,r.PopupZIndex.effect),ResultScoreDetailView:new r.PrefabItem("UIResultScoreDetailView","prefabs/result/ResultScoreDetailView",n.gLayerLevel.Popup,r.PopupZIndex.effect),ScopaAttackView:new r.PrefabItem("UIScopaAttackView","prefabs/desk/ScopaAttackView",n.gLayerLevel.Popup,r.PopupZIndex.effect),ScopaJPQLayer:new r.PrefabItem("UIScopaJPQLayer","prefabs/desk/ScopaJPQLayer",n.gLayerLevel.Popup,c.GameZIndex.deskMenu),GameJPQShop:new r.PrefabItem("UIScopaJPQShop","prefabs/desk/GameJPQShop",n.gLayerLevel.Popup,c.GameZIndex.deskMenu),HuDunAnim:new r.PrefabItem("UIHuDunAnim","prefabs/effect/HuDunAnim",n.gLayerLevel.Popup,r.PopupZIndex.effect)},skeleton:["effect/shoupai/shoupai","effect/scopa/scopa","effect/teshupai/teshupai","effect/jiesuan/jiesuan"],particle:{lz01:"effect/particle/lz01",lz02:"effect/particle/lz02"}};var d=function(t){function e(){var e=t.call(this)||this;return e.name=n.gAssetBundleName.SCOPA_GOLD_RES,e.tips="Scopa",e.dependency=[n.gAssetBundleName.SCOPA_GOLD_SRC,n.gAssetBundleName.GAME_BASE_RES],e}return i(e,t),e.prototype.getRes=function(){return a.ScopaGDUIConfig},e}(s.BundleConfig);a.ScopaBundleConfig=d,s.default.getInstance().addBundleCfg(new d),cc._RF.pop()},{"../../../script/app/config/ResConfig":void 0,"../../../script/app/const/Global":void 0,"../../../script/lib/manager/ResManager":void 0,"../../gameBaseSrc/model/BaseGameUIConfig":void 0}],ScopaRoomData:[function(t,e,a){"use strict";cc._RF.push(e,"79138PQ6eJIBoLm9M1Xr1Nu","ScopaRoomData");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaGDRoomData=void 0;var r=t("../../../script/app/const/Global"),n=t("../../../script/lib/utils/ComUtils"),s=function(t){function e(e){var a=t.call(this,e)||this;return a.settleMode=1,a.isAScopa=!1,a.isA2Scopa=!1,a.iScopaAttackScore=0,a.clear(),a}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.settleMode=1},e.prototype.parse=function(e){var a=t.prototype.parse.call(this,e);a&&(this.bWild=1==a.wild,this.settleMode=a.settlegoldmode||1,this.isAScopa=1===a.ascopa,this.iScopaAttackScore=a.scopaattack||0,this.isA2Scopa=a.aand2scopa||0,this.bCrazy=1==a.crazy)},e.prototype.isSettleNormal=function(){return 1==this.settleMode},e.prototype.onLoginFinish=function(){t.prototype.onLoginFinish.call(this)},e.prototype.getDeskInfo=function(){var t=n.ComUtils.formatGoldStr(this.iBaseScore||0);return this.bCrazy?["WILD BET "+t]:["BET "+t]},e.prototype.getRoomInfo=function(){var t={showHelp:!1,isNewCrazy:!1};return this.isAScopa&&(t.showHelp=!0),this.isSettleNormal()||(t.showHelp=!0),this.isWild()&&(t.showHelp=!0),r.Global.convertGameType(this.gameID)===r.gHuskyGameType.SCOPA_GOLD_CRAZY_V3&&(t.isNewCrazy=!0),[JSON.stringify(t),this.iScopaAttackScore.toString()]},e}(t("./../../gameBaseSrc/model/goldGame/BaseGoldRoomData").BaseGoldRoomData);a.ScopaGDRoomData=s,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/lib/utils/ComUtils":void 0,"./../../gameBaseSrc/model/goldGame/BaseGoldRoomData":void 0}],ScopaVoice:[function(t,e,a){"use strict";cc._RF.push(e,"5d7f7ei3fNLHYxZrC/oTUBb","ScopaVoice");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScopaVoice=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(t("./../../gameBaseSrc/controller/GameVoice").GameVoice);a.ScopaVoice=r,cc._RF.pop()},{"./../../gameBaseSrc/controller/GameVoice":void 0}],UIDeskOutCardView:[function(t,e,a){"use strict";cc._RF.push(e,"541bb2TIL5F6oU/5i3VzBAa","UIDeskOutCardView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIDeskOutCardView=void 0;var n,s,c=t("./../../../gameBaseSrc/view/PokerCreator"),d=t("./../../model/ScopaGDUIConfig"),l=t("../../../../script/app/const/AudioFile"),p=t("../../../../script/app/const/Global"),u=t("../../../../script/app/event/Notify"),h=t("../../../../script/app/view/ComUI"),C=t("../../../../script/lib/base/CxCompExt"),f=t("../../../../script/lib/utils/ComUtils"),S=t("../../../../script/lib/utils/Display"),y=t("../../../../script/lib/utils/MathUtils"),m=t("../../../gameBaseSrc/alg/ScopaLogic"),v=t("../../../gameBaseSrc/model/GameEvent"),_=t("../../../gameBaseSrc/model/ScopaConstant"),g=t("../../../gameBaseSrc/view/PokerCreator"),b=t("../poker/UIDeskOutPoker"),E=t("../../../../script/lib/manager/NodePoolMgr"),I=t("../../../gameBaseSrc/model/GameInitConfig");(function(t){t[t.MergePos=-1]="MergePos",t[t.NotFoundPos=-2]="NotFoundPos"})(n||(n={})),function(t){t[t.bgEffect=0]="bgEffect",t[t.normalCard=100]="normalCard",t[t.throwCardEffect=290]="throwCardEffect",t[t.throwCard=300]="throwCard",t[t.frontEffect=400]="frontEffect",t[t.particle=401]="particle"}(s||(s={}));var D=cc._decorator,w=D.ccclass,P=D.property,G=function(t){function e(){var e=t.call(this)||this;return e.pfOutCard=null,e.skltDataShouPai=null,e.skltDataTeShu=null,e.arrWaitRmCards=[],e.unuseCards=[],e.playerBgEffect=[],e.playerFrontEffect=[],e.eatCardPoints=[],e.allDeskCards=[],e.allDeskCardsPosInfo=[],e.logicOutCardDatas=[],e.bStopEffect=!0,e.playerThrowCard=[],e.pDoActionNodes=[],e.arrWaitRmCards=[],e.playerBgEffect=[],e.playerFrontEffect=[],e}var a;return i(e,t),a=e,e.prototype.setDataDelegate=function(t){this.playDataDelegate=t},e.prototype.getDataDelegate=function(){return this.playDataDelegate},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initPositionInfo(),this.initDeskCard()},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(v.GameEvent.OutCard.CLEAR,this.clear),this.bindEvent(v.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(v.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(v.GameEvent.Com.CARD_HIGH_LIGHT_ORANGE,this.onHighLightCard),this.bindEvent(v.GameEvent.HandCard.DESK_CARD_THROW,this.onDeskThrow),this.bindEvent(v.GameEvent.HandCard.PLAYER_OP_RESULT,this.onGameOpResult),this.bindEvent(v.GameEvent.HandCard.MY_HAND_CARD_SELECT,this.onHandCardSelectEvent),this.bindEvent(v.GameEvent.OutCard.UPDATE_DATA,this.onUpdateData),this.bindEvent(v.GameEvent.OutCard.DELELE_EAT_CARDS,this.onDeleteEatCards),this.bindEvent(v.GameEvent.OutCard.SCENE_PLAYING,this.doScenePlaying),this.bindEvent(v.GameEvent.OutCard.START_SEND_CARD,this.clear),this.bindEvent(v.GameEvent.OutCard.SENDING_CARD,this.doSendCard),this.bindEvent(v.GameEvent.OutCard.REDEAL_CARD,this.doRedealCard),this.bindEvent(v.GameEvent.Base.GAME_RESULT,this.clear),this.bindEvent(v.GameEvent.EatCard.PUT_POINTS,this.onGetEatCardPoints),this.bindEvent(v.GameEvent.Com.SET_DATA_DELEGATE,this.setDataDelegate)},e.prototype.onDestroy=function(){this.allDeskCards=null,this.allDeskCardsPosInfo=null,this.playerThrowCard=null,this.pDoActionNodes=null,this.unuseCards=null,this.arrWaitRmCards=null,this.playerBgEffect=null,this.playerFrontEffect=null,E.NodePoolMgr.getInstance().getPool(b.UIDeskOutPoker.NAME).clear(),t.prototype.onDestroy.call(this)},e.prototype.clearDeskCards=function(){this.clearThrowCard();for(var t=0,e=this.allDeskCards;t<e.length;t++)e[t].clear();this.clearWaitRmCards()},e.prototype.clearWaitRmCards=function(){var t=this;this.arrWaitRmCards.forEach(function(e){e&&(e.clear(),t.unuseCards.push(e))}),this.arrWaitRmCards.length=0},e.prototype.clear=function(){this.pDoActionNodes&&this.pDoActionNodes.forEach(function(t){t.removeFromParent(!0)}),this.playerBgEffect&&this.playerBgEffect.forEach(function(t){t&&(t.node.active=!1)}),this.playerFrontEffect&&this.playerFrontEffect.forEach(function(t){t&&(t.node.active=!1)}),this.node.stopAllActions(),this.clearThrowCard(),this.clearDeskCards(),this.logicOutCardDatas.length=0},e.prototype.clearThrowCard=function(t){if(null!=t&&null!=t&&t>=0){var e=this.playerThrowCard[t];e&&e.clear()}else this.playerThrowCard.forEach(function(t){t&&t.clear()})},e.prototype.initPositionInfo=function(){var t;t=I.GameInitConfig.isPokerHasNumber?cc.v2(S.Display.cx-373+68,S.Display.cy+76+209):cc.v2(S.Display.cx-342+68,S.Display.cy+76+135);for(var e=c.PokerCreator.POKER_OUT_CARD_WIDTH,o=c.PokerCreator.POKER_OUT_CARD_HEIGHT,i=c.PokerCreator.POKER_OUT_CARD_GAP_X,r=c.PokerCreator.POKER_OUT_CARD_GAP_Y,n=0,d=0,l=a.COL_MAX,p=a.ROW_MAX,u=0;u<p;u++)for(var h=0;h<l;h++){var C=l*u+h;this.allDeskCardsPosInfo[C]=this.allDeskCardsPosInfo[C]||g.CardPosInfo.get(),n=t.x+(e+i)*h,d=t.y-(o+r)*u,this.allDeskCardsPosInfo[C].angle=0,this.allDeskCardsPosInfo[C].scale=c.PokerCreator.POKER_OUT_CARD_SCALE,this.allDeskCardsPosInfo[C].zIndex=s.normalCard+C,this.allDeskCardsPosInfo[C].pos=cc.v2(n,d)}},e.prototype.initDeskCard=function(){for(var t,e,o=E.NodePoolMgr.getInstance().getPool(b.UIDeskOutPoker.NAME),i=a.COL_MAX,r=a.ROW_MAX,n=0;n<r;n++)for(var s=0;s<i;s++){var c=i*n+s;(t=o.get())||(t=cc.instantiate(this.pfOutCard)),(e=t.getComponent(b.UIDeskOutPoker))||(e=t.addComponent(b.UIDeskOutPoker)),this.node.addChild(t,c),t.active=!1,e.itemIndex=c,this.allDeskCards[c]=e}},e.prototype.throwCardToDesk=function(t,e,a,o){var i;this.clearThrowCard(a);var r=!1;e!==n.MergePos&&((i=this.allDeskCards[e])&&i.cardData&&i.cardData.o>0?(i.bEat=!0,r=!0):(i=this.displayCardItem(t,e,!o)).bEat=!1);var s=this.createThrowCard(t,e,a,r);s.itemIndex=e,(-1===e||i&&!0===i.bEat)&&s.setFinalScale(c.PokerCreator.POKER_CENTER_CARD_SCALE,!0),o?(s.node.opacity=0,s.throwToDesk(o)):s.node.opacity=255,t.o===m.ScopaLogic.COINS_7?-1===e?this.playSpecialCardEffect(e,s.cardPosInfo,a):i&&!0===i.bEat&&this.playSpecialCardEffect(e,i.cardPosInfo,a):this.hideEffect(a),i&&!1===i.bEat&&s.delayToClear(),i&&cc.log("throwCardToDesk pThrowCard="+s.cardData.o+" bEat="+s.bEat+" uuid="+s.uuid+" viewId="+a)},e.prototype.createThrowCard=function(t,e,a,o){var i;i=e===n.MergePos?this.getMergeCardPos():this.getCardPosInfo(e,o);var r=this.playerThrowCard[a];if(!r){var c=E.NodePoolMgr.getInstance().getPool(b.UIDeskOutPoker.NAME).get();c||(c=cc.instantiate(this.pfOutCard)),(r=c.getComponent(b.UIDeskOutPoker))||(r=c.addComponent(b.UIDeskOutPoker)),this.playerThrowCard[a]=r,this.node.addChild(r.node)}return r.init({meta:t,posInfo:i}),r.node.zIndex=s.throwCard,r},e.prototype.getCardPosInfo=function(t,e){var a=null;return t>=0&&t<this.allDeskCardsPosInfo.length&&(a=this.allDeskCardsPosInfo[t]),e&&((a=a.copy()).angle+=f.ComUtils.random(-3,3)),a},e.prototype.getMergeCardPos=function(){var t=g.CardPosInfo.get();return t.pos=cc.v2(S.Display.cx,S.Display.cy),t.zIndex=s.throwCard,t.scale=c.PokerCreator.POKER_CENTER_CARD_SCALE,t},e.prototype.displayCardItem=function(t,e,o){var i=this.getDeskCardItemByIndex(e);if(i){var r=this.allDeskCardsPosInfo[e];r.angle=a.CARD_ANGLES[e%a.COL_MAX]+f.ComUtils.random(-3,3),r.scale=c.PokerCreator.POKER_OUT_CARD_SCALE,i.init({meta:t,posInfo:r,itemIndex:e}),i.node.active=!0,0===t.o?i.node.active=!1:0==o&&(i.node.opacity=0,i.delayToDisplay(_.ScopaConstant.THROW_OUT_CARD_TIME))}return i},e.prototype.getDeskCardItemByIndex=function(t){return this.allDeskCards[t]},e.prototype.getLogicOutCardDatas=function(){return this.logicOutCardDatas},e.prototype.getDeskCardItemByIndx=function(t){for(var e=0;e<this.allDeskCards.length;e++)if(this.allDeskCards[e].itemIndex===t)return this.allDeskCards[e];return null},e.prototype.updateData=function(t){m.LocalCardSt.put(this.logicOutCardDatas),this.logicOutCardDatas=null,this.logicOutCardDatas=m.ScopaLogic.bytesToLocal(t)},e.prototype.updateView=function(){this.clearDeskCards();for(var t=this.getLogicOutCardDatas(),e=0;e<t.length;e++)this.displayCardItem(t[e],e,!0)},e.prototype.getDisplayUICardDatas=function(){var t=[],e=m.LocalCardSt.get(0);return this.allDeskCards.forEach(function(a){var o=a.cardData;!1===a.bEat&&o?t.push(o):!0===a.bEat&&t.push(e)}),t},e.prototype.checkCurUIOutCardStatus=function(){for(var t=this.getLogicOutCardDatas(),e=this.getDisplayUICardDatas(),a=t.length,o=e.length,i=o-1;i>=0&&!(e[i].o>0);i--)0===e[i].o&&e.splice(i,1);var r=0;if((o=e.length)==a-1)r=-1;else if(o==a){if(o>0)for(i=0;i<a;i++){var n=t[i],s=e[i];if(!n||!s||n.o!=s.o){cc.log("checkCurUIOutCardStatus, DataError:\u724c\u6570\u636e\u4e0d\u7b26 ui="+JSON.stringify(s)+" logic="+JSON.stringify(n)),r=1;break}}}else cc.log("checkCurUIOutCardStatus, numError:\u6570\u91cf\u4e0d\u7b26"),r=1;return r},e.prototype.checkOutCardInvalid=function(t,e,a){return!(!this.playerThrowCard[a]||this.playerThrowCard[a].cardData.o===t&&this.playerThrowCard[a].itemIndex===e)||0!==this.checkCurUIOutCardStatus()},e.prototype.removeEatCards=function(t,e){if(t&&t.length>1){var a=t.length;e.bSurplus?this.removeSurplusCards(t,e.bOurSide,e.delayTime,e.viewId):a>2?this.removeManyCards(t,e.bOurSide,e.bScopa,e.delayTime,e.viewId):this.removeTwoCards(t,e.bOurSide,e.bScopa,e.delayTime,e.viewId)}},e.prototype.removeManyCards=function(t,e,a,o,i){for(var r=t.length,n=t[r-1],c=n.cardPosInfo.copy(),d=0;d<r-1;d++){var p=t[d];p&&(p.node.active=!0,c.angle+=3*d,p.setFinalPos(c.pos,!0),p.node.zIndex=s.throwCard-r-d-10,p.moveToMergePos(_.ScopaConstant.MERGE_EAT_DELAY_TIME*d))}this.dispatch(u.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.MERGE_CARD}),this.playEatCardEffect(r-1,n.cardPosInfo,i),this.delayToClearEatCards(t,o,e,a,i)},e.prototype.removeTwoCards=function(t,e,a,o,i){var r=this,n=t[t.length-1];n&&cc.tween(n.node).to(.13,{scale:c.PokerCreator.POKER_OUT_CARD_SCALE}).call(function(){r.playEatCardEffect(1,t[0].cardPosInfo,i)}).start(),this.delayToClearEatCards(t,o,e,a,i),this.dispatch(u.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.MERGE_CARD})},e.prototype.removeSurplusCards=function(t,e,a,o){this.delayToClearEatCards(t,a,e,!1,o)},e.prototype.delayToClearEatCards=function(t,e,a,o,i){var r,n=this,s=t.length,c=0;if(a?(r=this.eatCardPoints[0],c=-90):(r=this.eatCardPoints[1],c=90),!this.pDoActionNodes[i]){var d=new cc.Node;d.parent=this.node,this.pDoActionNodes[i]=d}cc.tween(this.pDoActionNodes[i]).delay(e).tag(i).call(function(){for(var e=0;e<s;e++){var a=t[e];cc.isValid(a)&&a.cardPosInfo&&(a.node.active=!0,a.node.opacity=255,o&&s-1===e?(a.node.zIndex=0,a.setFinalPos(r,!0),a.setFinalAngle(c,!0),a.setFinalScale(.3,!0),a.setAnchorPoint(.5,0),a.moveToEatPos(0,c,!1)):(a.cardData&&(a.cardData.r=0),a.setFinalPos(r,!0),a.moveToEatPos(0,a.cardPosInfo.angle,!0)))}cc.isValid(n)&&n.hideEffect(i)}).delay(_.ScopaConstant.EAT_CARD_RUN_TIME).call(function(){cc.isValid(n)&&(n.clearThrowCard(i),n.clearWaitRmCards())}).removeSelf().start()},e.prototype.initEffect=function(t,e,a){var o=null,i=null;if(this.playerBgEffect[a])o=this.playerBgEffect[a].node;else{(o=new cc.Node).parent=this.node,o.zIndex=s.bgEffect;var r=o.addComponent(sp.Skeleton);this.playerBgEffect[a]=r}if(this.playerFrontEffect[a])i=this.playerFrontEffect[a].node;else{(i=new cc.Node).parent=this.node,i.zIndex=s.frontEffect;var n=i.addComponent(sp.Skeleton);this.playerFrontEffect[a]=n}o&&i&&(o.x=i.x=t.pos.x,o.y=i.y=t.pos.y,o.angle=i.angle=t.angle,I.GameInitConfig.isPokerHasNumber?(o.scaleX=i.scaleX=e>1?.9:.75,o.scaleY=i.scaleY=t.scale):o.scale=i.scale=t.scale)},e.prototype.hideEffect=function(t){this.playerBgEffect[t]&&(this.playerBgEffect[t].paused=!0,this.playerBgEffect[t].node.active=!1),this.playerFrontEffect[t]&&(this.playerFrontEffect[t].paused=!0,this.playerFrontEffect[t].node.active=!1),this.bStopEffect=!0},e.prototype.playParticle=function(t,e,a){var o,i=this;o=e>=1?d.ScopaGDUIConfig.particle.lz01:d.ScopaGDUIConfig.particle.lz02,cc.tween(this.node).delay(t||0).call(function(){h.ComUI.createParticle({parent:i.node,x:a.pos.x,y:a.pos.y,zIndex:s.particle,scale:a.scale},o,p.gAssetBundleName.SCOPA_GOLD_RES)}).start()},e.prototype.playEatCardEffect=function(t,e,a){this.initEffect(e,t,a),this.playParticle(.15,t,e),this.bStopEffect=!1;var o=this.playerBgEffect[a],i=this.playerFrontEffect[a];cc.isValid(o)&&this.skltDataShouPai&&(o.skeletonData=this.skltDataShouPai,o.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.SHARED_CACHE),o.node.active=!0,o.animation="s_"+(t>=2?2:t),o.loop=!1,o.paused=!1,o.premultipliedAlpha=!1,o.node.zIndex=s.throwCardEffect),cc.isValid(i)&&t>=3&&(i.node.active=!0,i.animation="s_3_jb",i.loop=!1,i.paused=!1,i.premultipliedAlpha=!1)},e.prototype.playSpecialCardEffect=function(t,e,a){var o=this;this.initEffect(e,-1==t?2:1,a),this.bStopEffect=!1;var i=this.playerBgEffect[a];cc.tween(this.node).delay(_.ScopaConstant.THROW_OUT_CARD_TIME).call(function(){cc.isValid(i)&&o.skltDataTeShu&&0==o.bStopEffect&&(i.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.SHARED_CACHE),i.skeletonData=o.skltDataTeShu,i.node.active=!0,i.loop=!1,i.premultipliedAlpha=!1,i.animation=-1==t?"7_zj":"7_gg",i.node.zIndex=s.throwCardEffect)}).start()},e.prototype.doSendCard=function(t){this.clear(),this.updateData(t.cardDatas),this.doSendCardAction(t)},e.prototype.doSendCardAction=function(t){for(var e=this,o=cc.v3(t.fromPos),i=this.getLogicOutCardDatas(),r=i.length,n=function(n){var d=s.getCardPosInfo(n,!1);d.angle=a.CARD_ANGLES[n%4];var p=s.allDeskCards[n];p.init({meta:i[n],posInfo:d}),p.node.position=o,p.node.scale=.6,p.node.angle=0,p.node.zIndex=r-n,p.showBack();var u=y.MathUtils.lookAt(d.pos,o),h=t.spaceTime*n;cc.tween(p.node).delay(h).parallel(cc.tween().set({angle:u,scale:.6}).call(function(){e.dispatch(v.GameEvent.Voice.PLAY_EFFECT_OTHER,l.AudioFile.Game.SEND_CARD),e.dispatch(v.GameEvent.Desk.REDUCE_CARD_NUM,1),p.node.zIndex=d.zIndex}).to(.13,{scaleX:.15,scaleY:.65}).call(function(){p.showFront()}).to(.04,{scaleX:.2,scaleY:.45}).to(.23,{scaleX:c.PokerCreator.POKER_OUT_CARD_SCALE,scaleY:c.PokerCreator.POKER_OUT_CARD_SCALE,angle:d.angle}),cc.tween().to(.4,{x:d.pos.x,y:d.pos.y})).start()},s=this,d=0;d<r;d++)n(d)},e.prototype.onUpdateData=function(t){this.updateData(t)},e.prototype.onDeskThrow=function(t){this.throwCardToDesk(m.ScopaLogic.byteToLocal(t.cardData),t.throwCardIndex,t.viewId,t.fromPos)},e.prototype.onGameOpResult=function(t){for(var e=f.ComUtils.clone(t.deleteCards),a=this.allDeskCards,o=a.length-1;o>=0;o--){var i=!1,r=a[o];if(r&&r.cardData)for(var n=r.cardData.o,s=0;s<e.length;s++)if(n===e[s]){i=!0,e.splice(s,1);break}i&&(r.bEat=!0)}this.checkOutCardInvalid(t.outCardData,t.throwCardIndex,t.viewId)&&this.updateView()},e.prototype.onHandCardSelectEvent=function(t){this.onHighLightCard({isDisplay:t.isSelect,cardDatas:[t.cardData]})},e.prototype.onDeleteEatCards=function(t){var e=this;if(t&&t.deleteCards&&t.deleteCards.length>0){cc.log("onDeleteEatCards ",t);for(var a=[],o=f.ComUtils.clone(t.deleteCards),i=this.allDeskCards,r=i.length-1;r>=0;r--){var n=!1,s=i[r];if(s&&s.cardData)for(var c=s.cardData.o,d=0;d<o.length;d++)if(c===o[d]){n=!0,o.splice(d,1);break}n&&(a.push(s),s.bEat=!0)}var l=this.playerThrowCard[t.viewId];l&&l.cardData?(l.bEat=!0,a.push(l)):cc.log("onDeleteEatCards deleteCards="+o+" pThrowCard="+(l?l.cardData:null),t),a.forEach(function(t){var a=e.unuseCards.shift();a?a.init({meta:t.cardData,posInfo:t.cardPosInfo}):a=t.clone(),a.node.parent=t.node.parent,a.node.x=t.node.x,a.node.y=t.node.y,a.node.scale=t.node.scale,a.node.zIndex=t.node.zIndex,e.arrWaitRmCards.push(a),t.clear()}),a=null,this.removeEatCards(this.arrWaitRmCards,t)}},e.prototype.onHighLightCard=function(){},e.prototype.doRedealCard=function(t){for(var e,a=cc.v3(t.pos),o=this.allDeskCards,i=function(t){var i=o[t];i&&(e=.06*t,cc.tween(i.node).delay(e).parallel(cc.tween().to(.16,{scaleX:.1,scaleY:.5}).to(.04,{scaleX:.15,scaleY:.65}).call(function(){i.showBack()}).to(.3,{scaleX:.6,scaleY:.6}),cc.tween().to(.5,{x:a.x,y:a.y,angle:0})).set({active:!1}).start())},r=0;r<o.length;r++)i(r)},e.prototype.doScenePlaying=function(t){this.clear(),this.updateData(t),this.updateView()},e.prototype.onGetEatCardPoints=function(t){t&&t[0]instanceof cc.Vec2&&(this.eatCardPoints=null,this.eatCardPoints=[],this.eatCardPoints[0]=this.node.convertToNodeSpace(t[0]),this.eatCardPoints[1]=this.node.convertToNodeSpace(t[1]))},e.CARD_ANGLES=[4,0,-4,-2],e.COL_MAX=4,e.ROW_MAX=2,r([P(cc.Prefab)],e.prototype,"pfOutCard",void 0),r([P(sp.SkeletonData)],e.prototype,"skltDataShouPai",void 0),r([P(sp.SkeletonData)],e.prototype,"skltDataTeShu",void 0),a=r([w],e)}(C.CxCompExt);a.UIDeskOutCardView=G,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/manager/NodePoolMgr":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Display":void 0,"../../../../script/lib/utils/MathUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/model/GameInitConfig":void 0,"../../../gameBaseSrc/model/ScopaConstant":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIDeskOutPoker":"UIDeskOutPoker","./../../../gameBaseSrc/view/PokerCreator":void 0,"./../../model/ScopaGDUIConfig":"ScopaGDUIConfig"}],UIDeskOutPoker:[function(t,e,a){"use strict";cc._RF.push(e,"bcb8da87zVNxI9cuIS6Jhpp","UIDeskOutPoker");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIDeskOutPoker=void 0;var n=t("../../../../script/lib/utils/ComUtils"),s=t("../../../gameBaseSrc/model/ScopaConstant"),c=t("../../../gameBaseSrc/view/PokerCreator"),d=t("./UIPokerCardBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemIndex=null,e.bEat=!1,e}var a;return i(e,t),a=e,e.prototype.init=function(e){t.prototype.init.call(this,e),this.node.scale=c.PokerCreator.POKER_OUT_CARD_SCALE,this.itemIndex=e.itemIndex,this.bEat=!1},e.prototype.throwToDesk=function(t,e){if(!t)return cc.error("throwToDesk fromPosInfo err"),void this.throwToDeskEnd();this.node.stopAllActions(),e=e||s.ScopaConstant.THROW_OUT_CARD_TIME;var a=t.pos,o=t.scale,i=t.angle;cc.tween(this.node).set({scale:o,x:a.x,y:a.y,angle:i,opacity:255}).to(e,{position:cc.v3(this.finalPos),angle:this.finalAngle,scale:this.finalScale},{easing:cc.easing.quadOut}).delay(s.ScopaConstant.EAT_CARD_RUN_TIME).call(this.throwToDeskEnd.bind(this)).start()},e.prototype.throwToDeskEnd=function(){},e.prototype.delayToDisplay=function(t){this.node.active=!0,cc.tween(this.node).set({opacity:0}).delay(t||s.ScopaConstant.THROW_OUT_CARD_TIME).set({opacity:255}).start()},e.prototype.delayToHide=function(t){this.node.active=!0,cc.tween(this.node).set({opacity:255}).delay(t||s.ScopaConstant.THROW_OUT_CARD_TIME).set({opacity:0}).start()},e.prototype.delayToClear=function(t){var e=this;this.node.active=!0,cc.tween(this.node).delay(t||s.ScopaConstant.THROW_OUT_CARD_TIME).call(function(){cc.isValid(e)&&e.clear()}).start()},e.prototype.moveToMergePos=function(t){cc.tween(this.node).delay(t||.06).parallel(cc.tween().to(.3,{scale:c.PokerCreator.POKER_CENTER_CARD_SCALE}),cc.tween().to(s.ScopaConstant.MERGE_EAT_RUN_TIME,{position:cc.v3(this.finalPos),angle:this.finalAngle},{easing:cc.easing.quadOut})).start()},e.prototype.moveToEatPos=function(t,e,a){this.node.stopAllActions(),cc.tween(this.node).delay(t||0).to(s.ScopaConstant.EAT_CARD_RUN_TIME,{position:cc.v3(this.finalPos),angle:e}).start(),a?this.flipToBack(t):this.flipToFront(t)},e.prototype.clone=function(){var t=cc.instantiate(this.node).getComponent(a);return t.cardData=n.ComUtils.clone(this.cardData),t.cardPosInfo=c.CardPosInfo.get().parse(this.cardPosInfo),t.finalAngle=this.finalAngle,t.finalPos=cc.v2(this.finalPos),t.finalScale=this.finalScale,t},e.prototype.clear=function(){t.prototype.clear.call(this),this.itemIndex=null,this.bEat=!1},e.NAME="UIDeskOutPoker",a=r([p],e)}(d.UIPokerCardBase));a.UIDeskOutPoker=u,cc._RF.pop()},{"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/model/ScopaConstant":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./UIPokerCardBase":"UIPokerCardBase"}],UIEatCardDetails:[function(t,e,a){"use strict";cc._RF.push(e,"fafab9XS8JDFpHdLgS4f86J","UIEatCardDetails");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIEatCardDetails=void 0;var n=t("../../../../script/app/const/AudioFile"),s=t("../../../../script/app/const/game/GameConstant"),c=t("../../../../script/app/event/Notify"),d=t("../../../../script/lib/base/CxCompExt"),l=t("../../../../script/lib/manager/NodePoolMgr"),p=t("../../../../script/lib/utils/Display"),u=t("../../../gameBaseSrc/alg/ScopaLogic"),h=t("../../../gameBaseSrc/model/GameEvent"),C=t("../../../gameBaseSrc/view/PokerCreator"),f=t("../poker/UIDeskOutPoker"),S=cc._decorator,y=S.ccclass,m=S.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfOutCard=null,e.eatCardPoints=[],e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.init()},e.prototype.init=function(){t.prototype.init.call(this),this.allEatCardList=[],this.CARD_OFFSET_X=115,this.CARD_OFFSET_Y=217,this.MAXCOL=8,this.START_X=p.Display.cx-405},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(h.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(h.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(h.GameEvent.OutCard.SHOW_EAT_CARDS,this.onShowEatCards),this.bindEvent(h.GameEvent.EatCard.PUT_POINTS,this.onGetEatCardPoints),this.bindEvent(c.Notify.Base.REQ_SCREEN_SHOT,this.onReqScreenShot)},e.prototype.clear=function(){t.prototype.clear.call(this),this.screenNode&&(this.screenNode.destroy(),this.screenNode=null);for(var e=l.NodePoolMgr.getInstance().getPool(f.UIDeskOutPoker.NAME),a=0,o=this.allEatCardList;a<o.length;a++){var i=o[a];i.clear(),e.put(i.node)}},e.prototype.onGetEatCardPoints=function(t){t&&t[0]instanceof cc.Vec2&&(this.eatCardPoints=null,this.eatCardPoints=[],this.eatCardPoints[0]=this.node.convertToNodeSpace(t[0]),this.eatCardPoints[1]=this.node.convertToNodeSpace(t[1]))},e.prototype.onShowEatCards=function(t){this.clear(),this.showOurSideEatCards(t[0]),this.showOtherSideEatCards(t[1])},e.prototype.showOurSideEatCards=function(t){var e=t.length,a=Math.ceil(e/this.MAXCOL),o=cc.v3(this.START_X,185+C.PokerCreator.POKER_OUT_CARD_HEIGHT/2+p.Display.bannerOffsetY);o.y+=(a-1)*this.CARD_OFFSET_Y;for(var i=Math.min(e,this.MAXCOL),r=0;r<i;r++)for(var n=0;n<a;n++){var s=this.MAXCOL*n+r;if(s>=e)break;var c=this.displayCardItem(t[s],s);c.node.x=o.x+this.CARD_OFFSET_X*r,c.node.y=o.y-this.CARD_OFFSET_Y*n,this.doShowCardAnim(this.eatCardPoints[0],c,r,.2*n)}},e.prototype.showOtherSideEatCards=function(t){for(var e=t.length,a=Math.ceil(e/this.MAXCOL),o=cc.v3(this.START_X,p.Display.cy+550+C.PokerCreator.POKER_OUT_CARD_HEIGHT/2),i=Math.min(e,this.MAXCOL),r=0;r<i;r++)for(var n=0;n<a;n++){var s=this.MAXCOL*n+r;if(s>=e)break;var c=this.displayCardItem(t[s],s);c.node.x=o.x+this.CARD_OFFSET_X*r,c.node.y=o.y-this.CARD_OFFSET_Y*n,this.doShowCardAnim(this.eatCardPoints[1],c,r,.2*n)}},e.prototype.displayCardItem=function(t,e){var a=l.NodePoolMgr.getInstance().getPool(f.UIDeskOutPoker.NAME).get();a||(a=cc.instantiate(this.pfOutCard));var o=a.getComponent(f.UIDeskOutPoker);return o||(o=a.addComponent(f.UIDeskOutPoker)),o.init({meta:u.LocalCardSt.get(t)}),this.node.addChild(a,e),this.allEatCardList.push(o),o},e.prototype.doShowCardAnim=function(t,e,a,o){var i=this;if(e){var r=.06*a+o||0,s=e.node.x,c=e.node.y;e.showBack(),cc.tween(e.node).set({x:t.x,y:t.y,angle:0,opacity:0}).delay(r).set({opacity:255}).call(function(){i.dispatch(h.GameEvent.Voice.PLAY_EFFECT_OTHER,n.AudioFile.Game.SEND_CARD)}).parallel(cc.tween().to(.16,{scaleX:.4,scaleY:.5}).to(.04,{scaleX:.05,scaleY:.5}).call(function(){e.showFront(),e.node.scaleX=.05,e.node.scaleY=.35}).to(.3,{scaleX:.66,scaleY:.66}),cc.tween().to(.5,{x:s,y:c,angle:0},{easing:cc.easing.sineOut})).start()}},e.prototype.onReqScreenShot=function(t){t===s.GameConstant.RoomPlayStatus.gameEnd&&this.dispatch(c.Notify.Base.SCREEN_SHOT_START,{requestKey:"UIEatCardDetails",shotNode:this.node})},e.prototype.onScreenShotResult=function(t){if(t&&"UIEatCardDetails"===t.requestKey){var e=t.node;e&&(this.clear(),this.screenNode=e,e.parent=this.node,e.zIndex=cc.macro.MAX_ZINDEX)}},r([m(cc.Prefab)],e.prototype,"pfOutCard",void 0),r([y],e)}(d.CxCompExt);a.UIEatCardDetails=v,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/manager/NodePoolMgr":void 0,"../../../../script/lib/utils/Display":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIDeskOutPoker":"UIDeskOutPoker"}],UIEatCardOnDesk:[function(t,e,a){"use strict";cc._RF.push(e,"47ecdadojhFHZTDPulc6WUt","UIEatCardOnDesk");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIEatCardOnDesk=void 0;var n,s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../../script/lib/utils/Display"),d=t("../../../gameBaseSrc/alg/ScopaLogic"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("../../../gameBaseSrc/model/ScopaConstant"),u=t("../../../gameBaseSrc/view/PokerCreator"),h=t("../poker/UIPokerCardBase");(function(t){t[t.ShowAllCards=0]="ShowAllCards",t[t.ScopaCard=200]="ScopaCard",t[t.NormalCard=300]="NormalCard",t[t.ScopaCount=400]="ScopaCount"})(n||(n={}));var C=cc._decorator,f=C.ccclass,S=C.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfEatCard=null,e.ndOurNormal=null,e.ndOtherNormal=null,e.ourNormalCard=[],e.ourScopaCard=[],e.otherNormalCard=[],e.otherScopaCard=[],e.unuseCards=[],e.cardInitPos=[],e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.cardInitPos[0]=cc.v2(68.5,c.Display.cy-325),this.cardInitPos[1]=cc.v2(c.Display.width-68.5,c.Display.cy+749-c.Display.paddingTop),this.ndOurNormal&&(this.ndOurNormal.x=this.cardInitPos[0].x,this.ndOurNormal.y=this.cardInitPos[0].y,this.ndOurNormal.on("click",this.onClickBtn,this)),this.ndOtherNormal&&(this.ndOtherNormal.x=this.cardInitPos[1].x,this.ndOtherNormal.y=this.cardInitPos[1].y,this.ndOtherNormal.on("click",this.onClickBtn,this)),this.clear()},e.prototype.clear=function(){for(var t=0;t<this.ourNormalCard.length;t++)this.ourNormalCard[t]&&(this.ourNormalCard[t].node.active=!1,this.unuseCards.push(this.ourNormalCard[t].node));for(t=0;t<this.otherNormalCard.length;t++)this.otherNormalCard[t]&&(this.otherNormalCard[t].node.active=!1,this.unuseCards.push(this.otherNormalCard[t].node));for(t=0;t<this.otherScopaCard.length;t++)this.otherScopaCard[t]&&(this.otherScopaCard[t].node.active=!1,this.unuseCards.push(this.otherScopaCard[t].node));for(t=0;t<this.ourScopaCard.length;t++)this.ourScopaCard[t]&&(this.ourScopaCard[t].node.active=!1,this.unuseCards.push(this.ourScopaCard[t].node));this.ourNormalCard.length=0,this.ourScopaCard.length=0,this.otherNormalCard.length=0,this.otherScopaCard.length=0},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(l.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(l.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(l.GameEvent.EatCard.MOVE_TO_DESK,this.onEatCard),this.bindEvent(l.GameEvent.EatCard.SCENE_PLAYING,this.updateAllEatCard),this.bindEvent(l.GameEvent.EatCard.CLEAR,this.clear),this.bindEvent(l.GameEvent.Base.GAME_RESULT,this.clear),this.bindEvent(l.GameEvent.Base.INIT_FINISH,this.onPutEatCardPoints),this.bindEvent(l.GameEvent.Com.SET_DATA_DELEGATE,this.setDataDelegate)},e.prototype.start=function(){this.onPutEatCardPoints()},e.prototype.onPutEatCardPoints=function(){var t=[];t[0]=this.node.convertToWorldSpace(this.cardInitPos[0]),t[1]=this.node.convertToWorldSpace(this.cardInitPos[1]),this.dispatch(l.GameEvent.EatCard.PUT_POINTS,t)},e.prototype.setDataDelegate=function(t){this.playDataDelegate=t},e.prototype.getDataDelegate=function(){return this.playDataDelegate},e.prototype.updateAllEatCard=function(t){this.clear(),this.addNormalCard(t.normalCardList[0],!0),this.updateScopaCards(t.scopaCardList[0],!0),this.setScopaCount(!0,t.scopaCount[0]||0),this.addNormalCard(t.normalCardList[1],!1),this.updateScopaCards(t.scopaCardList[1],!1),this.setScopaCount(!1,t.scopaCount[1]||0)},e.prototype.onEatCard=function(t){t.bScopa?(this.addOneScopaCard(t.outCardData,t.bOurSide),this.addNormalCard(2,t.bOurSide)):this.addNormalCard(t.deleteCards.length+1,t.bOurSide)},e.prototype.addNormalCard=function(t,e){if(this.pfEatCard&&t){var a=void 0,o=void 0;if(e?(a=this.ourNormalCard,o=this.cardInitPos[0]):(a=this.otherNormalCard,o=this.cardInitPos[1]),a.length>=2)return;for(var i=0;i<t;i++){if(a.length>=2)return;var r=this.unuseCards.shift();r||(r=cc.instantiate(this.pfEatCard)),r.active=!0,r.parent=this.node;var s=u.CardPosInfo.get();s.pos=o,s.angle=1==i?3:0,s.scale=.4,s.zIndex=n.NormalCard+i;var c=r.getComponent(h.UIPokerCardBase);c||(c=r.addComponent(h.UIPokerCardBase)),c.init({meta:d.LocalCardSt.get(0),posInfo:s}),a.push(c)}}},e.prototype.addOneScopaCard=function(t,e){if(this.pfEatCard&&t){var a=void 0,o=void 0,i=void 0;e?(o=-90,a=this.ourScopaCard,i=this.cardInitPos[0].sub(cc.v2(10,0))):(o=90,a=this.otherScopaCard,i=this.cardInitPos[1].sub(cc.v2(-10,0)));var r=this.unuseCards.shift();r||(r=cc.instantiate(this.pfEatCard)),r.active=!1,r.parent=this.node;var s=r.getComponent(h.UIPokerCardBase);s||(s=r.addComponent(h.UIPokerCardBase));var c=u.CardPosInfo.get();c.pos=i,c.angle=o,c.scale=.3,c.zIndex=a.length+n.ScopaCard,s.init({meta:d.LocalCardSt.get(t),posInfo:c}),s.setAnchorPoint(.5,0),a.push(s),this.setScopaCount(e,a.length),r.active=!0,a.length>1&&this.moveScopaCardsToFinalPos(a,e,!0)}},e.prototype.setScopaCount=function(t,e){this.dispatch(l.GameEvent.EatCard.SCOPA_COUNT,{bOurSide:t,count:e})},e.prototype.updateScopaCards=function(t,e){if(this.pfEatCard&&t){var a=t.length,o=void 0,i=void 0;e?(o=this.ourScopaCard,i=this.cardInitPos[0].sub(cc.v2(10,0))):(o=this.otherScopaCard,i=this.cardInitPos[1].sub(cc.v2(-10,0)));for(var r=d.ScopaLogic.bytesToLocal(t),s=0;s<a;s++){var c=r[s],l=this.unuseCards.shift();l||(l=cc.instantiate(this.pfEatCard)),l.active=!0,l.parent=this.node;var p=l.addComponent(h.UIPokerCardBase),C=u.CardPosInfo.get();C.pos=i,C.scale=.3,C.zIndex=s+n.ScopaCard,p.init({meta:c,posInfo:C}),p.setAnchorPoint(.5,0),o.push(p)}d.LocalCardSt.put(r),r=null,this.setScopaCount(e,o.length),this.moveScopaCardsToFinalPos(o,e,!1)}},e.prototype.moveScopaCardsToFinalPos=function(t,e,a){var o,i,r=[0,0,15,20,15,12,10,8.5,7.5,6.6,6],n=t.length||0;o=e?-90-(i=-r[n])*n/2:90-(i=r[n])*n/2;for(var s=0;s<n;s++){var c=o+i*s;a?cc.tween(t[s].node).to(p.ScopaConstant.EAT_CARD_RUN_TIME,{angle:c}).start():t[s].node.angle=c}},e.prototype.onClickBtn=function(t){this.dispatch(l.GameEvent.OperateEvent.CLICK_EATCARD,t.node.parent.convertToWorldSpace(cc.v2(t.node.position)))},e.prototype.onDestroy=function(){this.ourNormalCard=null,this.ourScopaCard=null,this.otherNormalCard=null,this.otherScopaCard=null,this.otherScopaCard=null,this.unuseCards=null,t.prototype.onDestroy.call(this)},r([S(cc.Prefab)],e.prototype,"pfEatCard",void 0),r([S(cc.Node)],e.prototype,"ndOurNormal",void 0),r([S(cc.Node)],e.prototype,"ndOtherNormal",void 0),r([f],e)}(s.CxCompExt);a.UIEatCardOnDesk=y,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/Display":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/model/ScopaConstant":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase"}],UIGameChooseEatCardView:[function(t,e,a){"use strict";cc._RF.push(e,"02d54je0fFKo6igm+LdbpSc","UIGameChooseEatCardView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameChooseEatCardView=void 0;var n=t("../../../../script/lib/base/Callback"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../gameBaseSrc/i18n/GameBaseI18n"),d=t("../../../gameBaseSrc/model/GameEvent"),l=t("./UIGameEatCardGroup"),p=cc._decorator,u=p.ccclass,h=p.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfEatCardGroup=null,e.ndMask=null,e.svList=null,e.labTips=null,e.haveCancleMenu=!1,e.lastItemPosX=0,e}var a;return i(e,t),a=e,e.prototype.init=function(e){t.prototype.init.call(this,e),this.clear(),this.haveCancleMenu=e.canCancle},e.prototype.start=function(){a.OP_ITEM_RIGHT_POS_Y=244,a.OP_ITEM_RIGHT_POS_X=0,this.lastItemPosX=a.OP_ITEM_RIGHT_POS_X,this.labTips&&(this.labTips.string=c.GameBaseLan.i18n.game_choose_take_cards)},e.prototype.onDestroy=function(){this.eatOptionData&&(this.eatOptionData=null),t.prototype.onDestroy.call(this)},e.prototype.show=function(){var t=this;this.ndMask&&(this.ndMask.active=!0),this.haveCancleMenu,this.svList&&(this.svList.node.active=!0);for(var e=this.eatOptionData.eatOptions,a=0;a<e.length;a++)this.getChooseItem(e[a]);e.length>6&&this.svList&&cc.tween(this.svList).delay(1.36).call(function(){cc.isValid(t.svList)&&t.svList.scrollToBottom(2)}).delay(2).call(function(){cc.isValid(t.svList)&&t.svList.scrollToTop(2)}).start()},e.prototype.getChooseItem=function(t){if(this.svList){var e=cc.instantiate(this.pfEatCardGroup),a=e.getComponent(l.UIGameEatCardGroup);return a.init({eatCardDatas:t,callback:new n.Callback(this,this.opItemCallBack,t)}),this.svList.content.addChild(e),a}},e.prototype.opItemCallBack=function(t){null!=t&&(this.dispatch(d.GameEvent.OperateEvent.OPERATE,{outCard:this.eatOptionData.outCardData,eatCards:t}),this.clear())},e.prototype.clear=function(){this.svList&&this.svList.content&&(this.svList.content.destroyAllChildren(),this.svList.node.active=!1),this.ndMask&&(this.ndMask.active=!1)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(d.GameEvent.HandCard.INFORM_PLAYER_OP,this.clear),this.bindEvent(d.GameEvent.HandCard.PLAYER_OP_RESULT,this.clear),this.bindEvent(d.GameEvent.HandCard.PLAYER_OUT_CARD_RESULT,this.clear),this.bindEvent(d.GameEvent.Base.GAME_RESULT,this.clear),this.bindEvent(d.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(d.GameEvent.OpView.CHOOSE_CARD,this.checkOpActions),this.bindEvent(d.GameEvent.OpView.CLEAR,this.clear)},e.prototype.checkOpActions=function(t){this.clear(),t&&t.eatOptions&&t.eatOptions.length>0&&(this.eatOptionData=t,this.show())},e.OP_ITEM_RIGHT_POS_X=380,e.OP_ITEM_RIGHT_POS_Y=150,e.OP_ITEM_SPACE_X=20,r([h(cc.Prefab)],e.prototype,"pfEatCardGroup",void 0),r([h(cc.Node)],e.prototype,"ndMask",void 0),r([h(cc.ScrollView)],e.prototype,"svList",void 0),r([h(cc.Label)],e.prototype,"labTips",void 0),a=r([u],e)}(s.CxCompExt);a.UIGameChooseEatCardView=C,cc._RF.pop()},{"../../../../script/lib/base/Callback":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./UIGameEatCardGroup":"UIGameEatCardGroup"}],UIGameCrazyScoreDetail:[function(t,e,a){"use strict";cc._RF.push(e,"6f1617NlVFG5Jgwbp5NNBFj","UIGameCrazyScoreDetail");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameCrazyScoreDetail=void 0;var n=t("./../../../../script/lib/base/CxComponent"),s=cc._decorator,c=s.ccclass,d=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTotalScoreI18n=null,e.labTotalScore=null,e.labScoreI18n=null,e.labScore=null,e.labScopaAttackI18n=null,e.labAttackScore=null,e.colorGreen=(new cc.Color).fromHEX("#37E502"),e.colorPink=(new cc.Color).fromHEX("#FB2164"),e}return i(e,t),e.prototype.init=function(t){this.worldPos=t.worldPos,this.labTotalScoreI18n,this.labScoreI18n,this.labScopaAttackI18n,this.labTotalScore&&(this.labTotalScore.string=t.totalScore||0,this.labTotalScore.node.color=this.getColor(t.totalScore)),this.labScore&&(this.labScore.string=t.eatScore||0,this.labScore.node.color=this.getColor(t.eatScore)),this.labAttackScore&&(this.labAttackScore.string=t.scopaAttackScore||0,this.labAttackScore.node.color=this.getColor(t.scopaAttackScore))},e.prototype.getColor=function(t){return t>0?this.colorGreen:t<0?this.colorPink:cc.Color.WHITE},e.prototype.start=function(){if(this.worldPos){var t=this.node.parent.convertToNodeSpaceAR(this.worldPos);this.node.position=t.subSelf(cc.v3(0,this.node.height/2))}},r([d({type:cc.Label,tooltip:"\u8f93\u8d62\u5206\u6570\u540d"})],e.prototype,"labTotalScoreI18n",void 0),r([d({type:cc.Label,tooltip:"\u8f93\u8d62\u5206\u6570\u540d"})],e.prototype,"labTotalScore",void 0),r([d({type:cc.Label,tooltip:"\u83b7\u5f97\u5206\u6570"})],e.prototype,"labScoreI18n",void 0),r([d({type:cc.Label,tooltip:"\u8f93\u8d62\u5206\u6570"})],e.prototype,"labScore",void 0),r([d({type:cc.Label,tooltip:"Scopa Attack\u540d"})],e.prototype,"labScopaAttackI18n",void 0),r([d({type:cc.Label,tooltip:"attack"})],e.prototype,"labAttackScore",void 0),r([d(cc.Color)],e.prototype,"colorGreen",void 0),r([d(cc.Color)],e.prototype,"colorPink",void 0),r([c],e)}(n.CxComponent);a.UIGameCrazyScoreDetail=l,cc._RF.pop()},{"./../../../../script/lib/base/CxComponent":void 0}],UIGameDeskMenu:[function(t,e,a){"use strict";cc._RF.push(e,"e8ecfhepaVAwI442zcbjyQq","UIGameDeskMenu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameDeskMenu=void 0;var n=t("./../../../../script/lib/utils/ComUtils"),s=t("../../../../script/app/const/AudioFile"),c=t("../../../../script/app/const/Global"),d=t("../../../../script/app/language/LanguageCfg"),l=t("../../../../script/app/model/DataProxy"),p=t("../../../../script/app/module/buryPoint/BuryPoint"),u=t("../../../../script/app/module/buryPoint/BuryPointUtils"),h=t("../../../../script/app/view/ComUI"),C=t("../../../../script/app/view/rank/RankInfo"),f=t("../../../../script/lib/base/CxCompExt"),S=t("../../../../script/lib/i18n/i18nHelper"),y=t("../../../../script/lib/utils/Display"),m=t("../../../../script/lib/utils/ScreenAdapter"),v=t("../../../gameBaseSrc/model/GameEvent"),_=t("../../../gameBaseSrc/model/GameInitConfig"),g=t("../../../lobbySrc/model/LobbyEvent"),b=t("../../../../script/app/event/GuiEvent"),E=t("../../../../script/app/event/Notify"),I=cc._decorator,D=I.ccclass,w=I.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnMainMenu=null,e.btnLeave=null,e.btnSkin=null,e.btnRank=null,e.btnSpecialSale=null,e.btnChat=null,e.ndRecordMenu=null,e.btnShop=null,e.btnLayout=null,e.btnChangeCards=null,e.ndGoldForChange=null,e.ndPowerForChange=null,e.labGoldForChange=null,e.labPowerForChange=null,e.ndDeskBuild=null,e.labTimeCD=null,e.labSwitch=null,e.mSpriteAtl=null,e.mRankLv=null,e.mRankLvNum=null,e.bSelfChangeCardsFinish=!0,e.mCanChangeCards=!1,e.delayLock=!0,e}return i(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(v.GameEvent.Base.GAME_PLAYING,this.gameStart),this.bindEvent(v.GameEvent.Player.GAME_START,this.hide),this.bindEvent(v.GameEvent.OperateEvent.NEXT_GAME,this.show),this.bindEvent(v.GameEvent.Player.MOVE_END,this.show),this.bindEvent(v.GameEvent.Base.GAME_RESULT,this.hide),this.bindEvent(v.GameEvent.Desk.SHOW_RECORD_BTN,this.onShowRecordBtn),this.bindEvent(v.GameEvent.Desk.SHOW_SHOP_BTN,this.onShowShopBtn),this.bindEvent(v.GameEvent.Desk.SHOW_CHANGE_OPE_BTN_ST,this.onChangeOpepBtnsStatus),this.bindEvent(v.GameEvent.Desk.CHANGE_SNEDCARD_STATUS,this.onSendCardsStatus),this.bindEvent(E.Notify.Base.ON_APP_RESUME,this.show),this.bindEvent(E.Notify.Shop.RTN_MIX_GIFT,this.onGetMixGift),this.bindEvent(E.Notify.Ranking.UPDATE_RANK_LOGO,this.updateRank),this.bindEvent(E.Notify.Shop.RTN_BUY_GOODS_SUCCESS,this.onBuyMixGiftSuccess),this.bindEvent(v.GameEvent.Desk.SHOW_DOUBLE_CHANGECARDS_BTN,this.onReconnected)},e.prototype.start=function(){this.onShowRecordBtn(!1),this.btnMainMenu&&(this.btnMainMenu.node.on("click",this.onClickMainMenu,this),m.ScreenAdapter.paddingTop(this.btnMainMenu.node)),this.btnLeave&&(this.btnLeave.node.on("click",this.onClickLeaveMenu,this),m.ScreenAdapter.paddingTop(this.btnLeave.node)),this.btnSkin&&(this.btnSkin.node.on("click",this.onClickSkinMenu,this),m.ScreenAdapter.paddingTop(this.btnSkin.node)),this.btnRank&&(this.updateRank(),this.btnRank.node.y=y.Display.cy-150,this.btnRank.node.on("click",this.onClickRank,this)),this.btnSpecialSale&&(this.btnSpecialSale.node.on("click",this.onClickSpecialScale,this),m.ScreenAdapter.paddingRight(this.btnSpecialSale.node),m.ScreenAdapter.paddingTop(this.btnSpecialSale.node)),this.btnChat&&(this.btnChat.node.on("click",this.onChatClicked,this),this.btnChat.node.y=306,m.ScreenAdapter.paddingRight(this.btnChat.node),m.ScreenAdapter.paddingBottom(this.btnChat.node)),this.btnShop&&(this.btnShop.node.active=!1,this.btnShop.node.on("click",this.onShopClicked,this),m.ScreenAdapter.paddingLeft(this.btnShop.node),m.ScreenAdapter.paddingTop(this.btnShop.node)),this.btnChangeCards&&(this.btnChangeCards.node.active=!1,this.btnChangeCards.node.on("click",this.onClickChangeCards,this)),this.changeSkin(),this.multiLang(),this.dispatch(E.Notify.Shop.REQ_MIX_GIFT)},e.prototype.multiLang=function(){this.labSwitch&&(this.labSwitch.string=n.ComUtils.getLang(d.LangKey.game_switch_cards))},e.prototype.gameStart=function(){this.bSelfChangeCardsFinish=!0,this.mCanChangeCards=!1},e.prototype.onLabTimeCD=function(){var t=this,e=l.DataProxy.getInstance().shopData.mMixGiftData;e?this.labTimeCD&&(e.dwTime<=0?(this.labTimeCD.node.parent.active=!1,this.onShowShopBtn(!0)):(this.labTimeCD.node.parent.active=!0,h.ComUI.StartTimeCountDown(this.labTimeCD,e.dwTime,function(){t.labTimeCD.node.parent.active=!1,t.onShowShopBtn(!0)}))):(this.labTimeCD.node.parent.active=!1,this.onShowShopBtn(!0))},e.prototype.updateRank=function(t){if(t){if(t.lv&&t.num){var e=t.lv,a=C.default.rankName[e-1],o=t.num;e&&o&&this.mSpriteAtl&&(this.mRankLv&&this.mSpriteAtl.getSpriteFrame("rank_lv_"+a)&&(this.mRankLv.spriteFrame=this.mSpriteAtl.getSpriteFrame("rank_lv_"+a)),this.mRankLvNum&&this.mSpriteAtl.getSpriteFrame("rank_num_"+a+"_"+o)&&(this.mRankLvNum.spriteFrame=this.mSpriteAtl.getSpriteFrame("rank_num_"+a+"_"+o)))}}else this.dispatch(E.Notify.Ranking.REQ_SEGMENT_COMPETITION_LIST)},e.prototype.changeSkin=function(){_.GameInitConfig.tableId>1&&this.btnMainMenu&&(this.btnChat.node.y=y.Display.cy-648,m.ScreenAdapter.paddingRight(this.btnChat.node)),this.ndDeskBuild&&(this.ndDeskBuild.active=!1)},e.prototype.onClickMainMenu=function(){var t=this.btnMainMenu.node.convertToWorldSpace(cc.Vec2.ZERO);t.y+=this.btnMainMenu.node.height/2,this.dispatch(v.GameEvent.OperateEvent.CLICK_SETTING,t)},e.prototype.onClickLeaveMenu=function(){this.dispatch(v.GameEvent.Popup.EXIT_DLG),u.BuryPointUtils.send(p.BuryPoint.Debug.Game.ClickLeave)},e.prototype.onClickSpecialScale=function(){this.delayLock&&(n.ComUtils.delayLimit(this),this.dispatch(E.Notify.Shop.REQ_MIX_GIFT),this.dispatch(g.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),this.dispatch(b.GuiEvent.PopMsg.DISPLAY_SHOP_SPECIAL_SALE),u.BuryPointUtils.send(p.BuryPoint.Debug.Game.ClickSpecialSale))},e.prototype.onChatClicked=function(){this.delayLock&&(n.ComUtils.delayLimit(this),this.dispatch(v.GameEvent.Popup.CHAT),u.BuryPointUtils.send(p.BuryPoint.Debug.Game.ClickChat))},e.prototype.onClickSkinMenu=function(){this.dispatch(v.GameEvent.Desk.PREVIEW_SKIN),u.BuryPointUtils.send(p.BuryPoint.Debug.Game.ClickSkin)},e.prototype.onClickRank=function(){if(this.delayLock){n.ComUtils.delayLimit(this);var t=l.DataProxy.getInstance().userData.level;if(l.DataProxy.getInstance().otherData.isUnlock(c.gUnlcokTag.rank,t)){var e=this.btnRank.node.convertToWorldSpaceAR(cc.Vec2.ZERO);e.x-=20,e.y+=this.btnRank.node.height/2+20,this.dispatch(v.GameEvent.Popup.RANK,{worldPos:e}),u.BuryPointUtils.send(p.BuryPoint.Debug.Game.ClickRank)}else{var a=l.DataProxy.getInstance().otherData.getUnlockCfg(c.gUnlcokTag.rank),o=S.i18nHelper.getLanguage([d.LangKey.table_unlock_tips,a.dwLevel]);h.ComUI.showToast(o,3,2)}}},e.prototype.onRecordClicked=function(t){if(this.delayLock){n.ComUtils.delayLimit(this);var e=t.node,a=e.convertToWorldSpaceAR(cc.Vec2.ZERO);a.addSelf(cc.v2(e.width/2,e.height/2)),this.dispatch(v.GameEvent.OperateEvent.CLICK_RECORD,a)}},e.prototype.displaySpecialSaleMenu=function(){},e.prototype.onShopClicked=function(t){if(this.delayLock){n.ComUtils.delayLimit(this);var e=t.node,a=e.convertToWorldSpaceAR(cc.Vec2.ZERO);a.addSelf(cc.v2(e.width/2,e.height/2)),this.dispatch(v.GameEvent.OperateEvent.CLICK_SHOP,a),u.BuryPointUtils.send(p.BuryPoint.Debug.Game.ClickShop)}},e.prototype.hide=function(){this.node.opacity=0},e.prototype.show=function(){this.node.opacity=255,this.updateRank()},e.prototype.onGetMixGift=function(){this.onLabTimeCD()},e.prototype.onBuyMixGiftSuccess=function(){cc.log("\u8d2d\u4e70\u6df7\u5408\u793c\u5305\u6210\u529f\uff0c\u518d\u8bf7\u6c42\u6df7\u5408\u793c\u5305"),this.dispatch(E.Notify.Shop.REQ_MIX_GIFT)},e.prototype.onShowRecordBtn=function(t){this.ndRecordMenu&&(this.ndRecordMenu.active=t)},e.prototype.onShowShopBtn=function(t){this.btnShop&&(this.btnShop.node.active=t)},e.prototype.showChangeCardsBtn=function(t){this.btnChangeCards&&(this.btnChangeCards.node.active=t)},e.prototype.setPowerForChangeCards=function(t){this.ndPowerForChange.active=t>0,this.labPowerForChange&&(this.labPowerForChange.string="-"+t),this.updateBtnLayout()},e.prototype.setGoldForChangeCards=function(t){this.ndGoldForChange.active=t>0,this.labGoldForChange&&(this.labGoldForChange.string=t.toString()),this.updateBtnLayout()},e.prototype.updateBtnLayout=function(){var t=!(!this.ndGoldForChange.active&&!this.ndPowerForChange.active);this.btnLayout&&(this.btnLayout.node.active=t)},e.prototype.onChangeOpepBtnsStatus=function(t){if(cc.log("\u6362\u724c\u64cd\u4f5c\u7ed3\u679c",t),!t)return this.mCanChangeCards=!1,this.bSelfChangeCardsFinish=!0,void this.showChangeCardsBtn(!1);var e=t.msg;if(this.setGoldForChangeCards(e.dwHuanPaiGold),this.setPowerForChangeCards(e.dwHuanPaiTili),t.forceChange)return this.mCanChangeCards=!0,this.bSelfChangeCardsFinish=!0,void this.showChangeCardsBtn(!0);e.bHuanPai?(this.mCanChangeCards=!0,this.bSelfChangeCardsFinish&&this.showChangeCardsBtn(!0)):(this.mCanChangeCards=!1,this.showChangeCardsBtn(!1),this.dispatch(v.GameEvent.Desk.RESET_DESKINO_POS,!0))},e.prototype.onClickDouble=function(){this.delayLock&&(n.ComUtils.delayLimit(this),cc.log("\u70b9\u51fb\u4e86\u52a0\u500d"),this.dispatch(v.GameEvent.OperateEvent.CLICK_DOUBLE),this.dispatch(v.GameEvent.Msg.SEND_DOUBLE))},e.prototype.onClickChangeCards=function(){cc.log("\u70b9\u51fb\u4e86\u6362\u724c\uff0c\u5f53\u524d\u6362\u724c\u5b8c\u6210\u72b6\u6001",this.bSelfChangeCardsFinish),this.bSelfChangeCardsFinish&&this.mCanChangeCards&&(this.bSelfChangeCardsFinish=!1,this.mCanChangeCards=!1,this.dispatch(v.GameEvent.OperateEvent.CLICK_CHANGE_CARDS),this.dispatch(v.GameEvent.Msg.SEND_CHANGE_CARDS)),this.showChangeCardsBtn(!1)},e.prototype.onSendCardsStatus=function(t){this.bSelfChangeCardsFinish=t.sendFinish,this.mCanChangeCards&&this.showChangeCardsBtn(!0)},e.prototype.onReconnected=function(t){var e=t.doubleInfo;e&&(this.setGoldForChangeCards(e.dwHuanPaiGold),this.setPowerForChangeCards(e.dwHuanPaiTili),this.mCanChangeCards=!0,this.bSelfChangeCardsFinish=!0,e.bHuanPai&&this.showChangeCardsBtn(!0))},r([w(cc.Button)],e.prototype,"btnMainMenu",void 0),r([w(cc.Button)],e.prototype,"btnLeave",void 0),r([w(cc.Button)],e.prototype,"btnSkin",void 0),r([w(cc.Button)],e.prototype,"btnRank",void 0),r([w(cc.Button)],e.prototype,"btnSpecialSale",void 0),r([w(cc.Button)],e.prototype,"btnChat",void 0),r([w(cc.Node)],e.prototype,"ndRecordMenu",void 0),r([w(cc.Button)],e.prototype,"btnShop",void 0),r([w(cc.Layout)],e.prototype,"btnLayout",void 0),r([w(cc.Button)],e.prototype,"btnChangeCards",void 0),r([w(cc.Node)],e.prototype,"ndGoldForChange",void 0),r([w(cc.Node)],e.prototype,"ndPowerForChange",void 0),r([w(cc.Label)],e.prototype,"labGoldForChange",void 0),r([w(cc.Label)],e.prototype,"labPowerForChange",void 0),r([w(cc.Node)],e.prototype,"ndDeskBuild",void 0),r([w({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6 \u6587\u5b57\u6807\u7b7e"})],e.prototype,"labTimeCD",void 0),r([w({type:cc.Label,tooltip:"SWITCH\u6587\u5b57\u6807\u7b7e"})],e.prototype,"labSwitch",void 0),r([w(cc.SpriteAtlas)],e.prototype,"mSpriteAtl",void 0),r([w(cc.Sprite)],e.prototype,"mRankLv",void 0),r([w(cc.Sprite)],e.prototype,"mRankLvNum",void 0),r([D],e)}(f.CxCompExt);a.UIGameDeskMenu=P,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/app/view/rank/RankInfo":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/Display":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/model/GameInitConfig":void 0,"../../../lobbySrc/model/LobbyEvent":void 0,"./../../../../script/lib/utils/ComUtils":void 0}],UIGameEatCardGroup:[function(t,e,a){"use strict";cc._RF.push(e,"1ceafq65+tIUaC/gKc7eYrO","UIGameEatCardGroup");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameEatCardGroup=void 0;var n=t("../../../../script/lib/base/CxCompExt"),s=t("../../../../script/lib/utils/MathUtils"),c=t("../../../gameBaseSrc/alg/ScopaLogic"),d=t("../../../gameBaseSrc/view/PokerCreator"),l=t("./../poker/UIMyHandPoker"),p=cc._decorator,u=p.ccclass,h=p.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfCard=null,e.iTouchId=-1,e.bTouchIn=!1,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.clickCallback=e.callback,this.regTouchEvent(),this.createEatGroup(e.eatCardDatas)},e.prototype.start=function(){this.regTouchEvent()},e.prototype.onDestroy=function(){this.clickCallback=null,this.unRegTouchEvent(),t.prototype.onDestroy.call(this)},e.prototype.getCardPosInfo=function(t){var e,a,o,i=[],r=s.MathUtils.ANGLE_TO_RADIAN,n=cc.v2(0,-410);a=90+(o=[0,12,10,8,6,4][e=Math.min(4,t)-1])*e/2;for(var c=0;c<=e;c++){var l=(a-o*c)*r;i[c]=i[c]||d.CardPosInfo.get(),i[c].pos=s.MathUtils.pointAtCircle(n.x,n.y,l,500),i[c].angle=a-o*c-90,i[c].zIndex=c,i[c].scale=.68}return i},e.prototype.createEatGroup=function(t){if(this.pfCard)for(var e=this.getCardPosInfo(t.length),a=0;a<t.length;a++){var o=t[a],i=cc.instantiate(this.pfCard),r=i.getComponent(l.UIMyHandPoker);r||(r=i.addComponent(l.UIMyHandPoker)),r.init({meta:c.LocalCardSt.get(o)}),r.setAnchorPoint(.5,0),i.x=e[a].pos.x,i.y=e[a].pos.y,i.scale=e[a].scale,this.node.addChild(i),cc.tween(i).to(.3,{angle:e[a].angle}).start()}},e.prototype.regTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.unRegTouchEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.setCanTouch=function(t){t?this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0):this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0)},e.prototype.onTouchStart=function(t){-1===this.iTouchId&&(this.iTouchId=t.getID(),this.bTouchIn=!0,this.pressOn())},e.prototype.onTouchMove=function(t){this.iTouchId===t.getID()&&(this.node.getBoundingBoxToWorld().contains(t.getLocation())?this.bTouchIn=!0:this.bTouchIn=!1)},e.prototype.onTouchEnd=function(t){this.iTouchId===t.getID()&&(this.bTouchIn&&this.node.getBoundingBoxToWorld().contains(t.getLocation())?(this.pressOff(),this.emitterEvent()):(this.node.stopAllActions(),this.node.setScale(1)),this.iTouchId=-1,this.bTouchIn=!1)},e.prototype.onTouchCancel=function(){this.pressOff(),this.iTouchId=-1,this.bTouchIn=!1},e.prototype.pressOn=function(){this.node.stopAllActions(),this.node.setScale(1),cc.tween(this.node).to(.1,{scaleX:1.1,scaleY:1.1}).to(.1,{scaleX:1,scaleY:1}).start()},e.prototype.pressOff=function(){this.node.stopAllActions(),cc.tween(this.node).to(.1,{scaleX:1,scaleY:1}).start()},e.prototype.addClickEvent=function(t){this.clickCallback=t},e.prototype.emitterEvent=function(){this.clickCallback&&this.clickCallback.call()},e.GROUP_VIDTH=352,e.GROUP_HEIGHT=352,r([h(cc.Prefab)],e.prototype,"pfCard",void 0),r([u],e)}(n.CxCompExt);a.UIGameEatCardGroup=C,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/MathUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./../poker/UIMyHandPoker":"UIMyHandPoker"}],UIGameInfo:[function(t,e,a){"use strict";cc._RF.push(e,"b5c3d+r5+FMHJM5nJyEuOPv","UIGameInfo");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameInfo=void 0;var n=t("../../../../script/app/view/ComUI"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../gameBaseSrc/model/GameEvent"),d=t("../../../../script/app/module/tables/TableSkinMgr"),l=t("../../../../script/app/event/Notify"),p=t("../../../../script/lib/utils/ComUtils"),u=t("../../../../script/app/language/LanguageCfg"),h=cc._decorator,C=h.ccclass,f=h.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spRemainCardBg=null,e.labRemainCardNum=null,e.labGameInfo=null,e.labBeishu=null,e.btnHelp=null,e.ndPot=null,e.ndLayout=null,e.layoutMidPosY=-150,e.layoutNorPosY=-322,e.isNewCrazy=!1,e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.btnHelp&&(this.btnHelp.node.active=!1,this.btnHelp.node.on("click",this.onHelpClicked,this)),this.labBeishu&&(this.labBeishu.node.active=!1)},e.prototype.start=function(){this.changeSkin(d.TableSkinMgr.getCfg()),this.resetPosition()},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Base.INIT_FINISH,this.onPutBeiShuPos),this.bindEvent(c.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(c.GameEvent.Desk.DESK_REST,this.clear),this.bindEvent(c.GameEvent.Desk.REDUCE_CARD_NUM,this.onReduceCardNum),this.bindEvent(c.GameEvent.Desk.REMAIN_CARD_NUM_CHANGE,this.onRemainCardNumChange),this.bindEvent(c.GameEvent.Desk.DESKINFO_TRANSPARENT,this.onTransParent),this.bindEvent(c.GameEvent.Desk.UPDATE_DESKINFO,this.onUpdateDeskInfo),this.bindEvent(c.GameEvent.Desk.BEI_SHU_CHANGE,this.onBeiShuChange),this.bindEvent(c.GameEvent.Desk.UPDATE_GOLD_POT,this.onUpdateGoldPot),this.bindEvent(c.GameEvent.Desk.SHOW_GOLD_POT,this.onShowPot),this.bindEvent(c.GameEvent.Desk.RESET_DESKINO_POS,this.onDeskInfoResetPos),this.bindEvent(c.GameEvent.Desk.SHOW_DOUBLE_CHANGECARDS_BTN,this.onUpdateDeskInfoPos),this.bindEvent(c.GameEvent.Desk.GET_POT_POS,this.onGetPotPos),this.bindEvent(l.Notify.Base.CHANGE_SKIN,this.onChangeSkin)},e.prototype.changeSkin=function(t){t&&(n.ComUI.changeLabel(this.labRemainCardNum,t.font_remain_cardnum),n.ComUI.changeLabel(this.labGameInfo,t.font_game_info))},e.prototype.onChangeSkin=function(t){this.changeSkin(t)},e.prototype.onPutBeiShuPos=function(){if(this.labBeishu){var t=this.labBeishu.node.parent.convertToWorldSpaceAR(this.labBeishu.node.position);this.dispatch(c.GameEvent.Desk.BEI_SHU_POS,t)}},e.prototype.onRemainCardNumChange=function(t){this.labRemainCardNum&&(this.labRemainCardNum.node.parent.active=!0),this.labRemainCardNum&&(this.labRemainCardNum.string=""+t)},e.prototype.onReduceCardNum=function(t){if(this.labRemainCardNum&&(this.labRemainCardNum.node.active=!0),this.labRemainCardNum){var e=parseInt(this.labRemainCardNum.string);this.labRemainCardNum.string=e-t>=0?""+(e-t):"0"}},e.prototype.onTransParent=function(){},e.prototype.clear=function(){this.labRemainCardNum&&(this.labRemainCardNum.node.parent.active=!1),this.labGameInfo&&(this.labGameInfo.string=""),this.labBeishu&&(this.labBeishu.string="",this.labBeishu.node.active=!1),this.btnHelp&&(this.btnHelp.node.active=!1),this.onUpdateGoldPot({goldPot:0,action:!1}),this.setLayoutPos(!0),this.ndPot&&(this.ndPot.active=!1)},e.prototype.onUpdateDeskInfo=function(t){if(t){var e=t.deskCfg;if(e&&e[0]&&(this.labGameInfo.string=e[0]),null!=t.remainCardNum&&null!=t.remainCardNum&&this.onRemainCardNumChange(t.remainCardNum),t.roomCfg){var a=JSON.parse(t.roomCfg[0]);a&&(this.setHelpButton(a.showHelp),this.setCarzyType(a.isNewCrazy))}t.iMultpNum?this.onBeiShuChange({iMultpNum:t.iMultpNum,action:!1}):this.resetPosition()}},e.prototype.onBeiShuChange=function(t){var e=this;if(this.labBeishu){if(t.newAction)return this.labBeishu.string="/"+t.iMultpNum,this.labBeishu.node.active=!0,void this.runComAction(this.labBeishu.node);var a,o,i,r,n,s,c=t&&t.iMultpNum||1,d=t.action,l=this.labBeishu.string;this.labBeishu.string="/"+c,this.labBeishu.node.active=c>1,a=this.spRemainCardBg.node.x,o=this.labGameInfo.node.x,i=this.labBeishu.node.x,this.resetPosition(),this.onPutBeiShuPos(),d&&(this.labBeishu.string=l,this.scheduleOnce(function(){e.labBeishu.string="/"+c,r=e.spRemainCardBg.node.x,n=e.labGameInfo.node.x,s=e.labBeishu.node.x,e.btnHelp.node.active=!0,cc.tween(e.spRemainCardBg.node).set({x:a}).delay(.96).to(.34,{x:r}).start(),cc.tween(e.labGameInfo.node).set({x:o}).delay(.96).to(.34,{x:n}).start(),cc.tween(e.labBeishu.node).set({opacity:0,scale:.8,x:i}).delay(1.2).to(.1,{scale:1,opacity:255,x:s}).call(function(){e.btnHelp&&(e.btnHelp.node.active=!0)}).start()}))}},e.prototype.resetPosition=function(){var t=this;this.scheduleOnce(function(){var e=[{node:t.spRemainCardBg.node,gap:0},{node:t.labGameInfo.node,gap:30},{node:t.labBeishu.node,gap:20},{node:t.btnHelp.node,gap:0}];n.ComUI.serialize({nodes:e,startX:0,anchor:.5}),e=null},0)},e.prototype.setHelpButton=function(t){this.btnHelp&&(this.btnHelp.node.x=this.labBeishu.node.x+this.labBeishu.node.width/2+this.btnHelp.node.width/2,this.btnHelp.node.active=t)},e.prototype.onShowPot=function(t){this.isNewCrazy?this.ndPot&&(this.ndPot.active=t):this.ndPot&&(this.ndPot.active=!1)},e.prototype.setPotString=function(){},e.prototype.onHelpClicked=function(){this.dispatch(c.GameEvent.OperateEvent.CLICK_RULE_HELP)},e.prototype.onUpdateGoldPot=function(t){if(this.isNewCrazy&&this.ndPot){var e=this.ndPot.getComponentInChildren(cc.Label);e&&(e.string="POT:"+t.goldPot,t.action)}},e.prototype.runComAction=function(t){cc.Tween.stopAllByTarget(t),t.scale=1;var e=0,a=cc.tween(t);[{t:0,scale:1},{t:.13,scale:1.5},{t:.3,scale:1.3},{t:.46,scale:1.5},{t:.6,scale:1}].forEach(function(t){var o=cc.tween().to(t.t-e,{scale:t.scale});a.then(o),e=t.t}),a.start()},e.prototype.onDeskInfoResetPos=function(t){var e=this;this.isNewCrazy&&this.ndLayout&&(t?cc.tween(this.ndLayout).delay(2.3).to(.2,{y:this.layoutNorPosY}).call(function(){e.onGetPotPos()}).start():(this.ndLayout.y=this.layoutNorPosY,this.onGetPotPos()))},e.prototype.onUpdateDeskInfoPos=function(t){if(this.isNewCrazy){var e=0;t.doubleInfo.bHuanPai&&e++,this.setLayoutPos(0!=e)}},e.prototype.setLayoutPos=function(t){void 0===t&&(t=!0),t?this.ndLayout&&(this.ndLayout.y=this.layoutMidPosY):this.ndLayout&&(this.ndLayout.y=this.layoutNorPosY),this.onGetPotPos()},e.prototype.onGetPotPos=function(){var t=this.ndPot.convertToWorldSpaceAR(cc.Vec2.ZERO);this.dispatch(c.GameEvent.Desk.SET_POT_POS,t)},e.prototype.onClickPot=function(){var t=p.ComUtils.getLang(u.LangKey.winner_get_pot);n.ComUI.showToast(t,2,2)},e.prototype.setCarzyType=function(t){this.isNewCrazy=t,this.isNewCrazy||this.setLayoutPos(!1)},r([f(cc.Sprite)],e.prototype,"spRemainCardBg",void 0),r([f(cc.Label)],e.prototype,"labRemainCardNum",void 0),r([f(cc.Label)],e.prototype,"labGameInfo",void 0),r([f(cc.Label)],e.prototype,"labBeishu",void 0),r([f(cc.Button)],e.prototype,"btnHelp",void 0),r([f(cc.Node)],e.prototype,"ndPot",void 0),r([f(cc.Node)],e.prototype,"ndLayout",void 0),r([f(cc.Integer)],e.prototype,"layoutMidPosY",void 0),r([f(cc.Integer)],e.prototype,"layoutNorPosY",void 0),r([C],e)}(s.CxCompExt);a.UIGameInfo=S,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/model/GameEvent":void 0}],UIGameRealTimeScore:[function(t,e,a){"use strict";cc._RF.push(e,"59916Z81qNJOacimK8oEPp3","UIGameRealTimeScore");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameRealTimeScore=void 0;var n=t("../../../../script/lib/base/CxCompExt"),s=t("../../../../script/lib/i18n/i18nHelper"),c=t("../../../gameBaseSrc/i18n/GameBaseI18n"),d=t("../result/UIGameResultItem"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfItem=null,e.layout=null,e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this),e?(this.ourScoreDetail=e.ourScoreDetail,this.otherScoreDetail=e.otherScoreDetail,e.worldPos&&(this.worldPos=e.worldPos),this.initView()):this.close()},e.prototype.start=function(){this.worldPos&&(this.worldPos=this.node.parent.convertToNodeSpaceAR(this.worldPos),this.worldPos.x<0?(this.node.x=this.worldPos.x+this.node.width/2+60,this.node.y=this.worldPos.y+this.node.height/2-50):(this.node.x=this.worldPos.x-this.node.width/2-60,this.node.y=this.worldPos.y-this.node.height/2+50))},e.prototype.initView=function(){var t={Denari:"coinsNum",Primiera:"ColorFenMax",Cards:"cardNum",Settebello:"coins7",Scopa:"scopaCount"};for(var e in t){var a=t[e],o=this.ourScoreDetail[a],i=this.otherScoreDetail[a],r="Scopa"===e,n=s.i18nHelper.makeLanguage(c.IGameBaseI18n.k["txt_"+e],c.GameBaseLan.bundle);if(null!=o&&null!=i){var l=cc.instantiate(this.pfItem);l.parent=this.layout;var p=l.getComponent(d.UIGameResultItem);p&&p.init({leftScore:o,scoreName:n,rightScore:i,useDefColor:r})}}},r([u(cc.Node)],e.prototype,"pfItem",void 0),r([u(cc.Node)],e.prototype,"layout",void 0),r([p],e)}(n.CxCompExt);a.UIGameRealTimeScore=h,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"../result/UIGameResultItem":"UIGameResultItem"}],UIGameResultBattle:[function(t,e,a){"use strict";cc._RF.push(e,"b0ec7aGmeRMXJ1wB5atHpR5","UIGameResultBattle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultBattle=void 0;var n=t("../../../../script/lib/base/CxCompExt"),s=t("./UIGameResultPlayer"),c=cc._decorator,d=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfPlayer=null,e.labLeftScore=null,e.ndLeftPlayers=null,e.labRightScore=null,e.ndRightPlayers=null,e.colorGreen=(new cc.Color).fromHEX("#37E502"),e.colorPink=(new cc.Color).fromHEX("#FB2164"),e}return i(e,t),e.prototype.init=function(t){t?(this.gameResult=t,this.initTotalScore(),this.initPlayerInfo()):cc.error("UIGameResultBattle data is null")},e.prototype.initTotalScore=function(){var t=this.gameResult.ourGameResult.score,e=this.gameResult.otherGameResult.score,a=this.getColor(t,e);this.labLeftScore&&(this.labLeftScore.string=""+t,this.labLeftScore.node.color=a[0]),this.labRightScore&&(this.labRightScore.string=""+e,this.labRightScore.node.color=a[1])},e.prototype.initPlayerInfo=function(){if(this.pfPlayer){for(var t=this.gameResult.ourSidePlayers,e=0;e<t.length;e++)(i=(o=cc.instantiate(this.pfPlayer)).getComponent(s.UIGameResultPlayer))&&i.init(t[e]),o.parent=this.ndLeftPlayers;var a=this.gameResult.otherSidePlayers;for(e=0;e<a.length;e++){var o,i;(i=(o=cc.instantiate(this.pfPlayer)).getComponent(s.UIGameResultPlayer))&&i.init(a[e]),o.parent=this.ndRightPlayers}}},e.prototype.getColor=function(t,e){var a=t-e;return 0===a?[cc.Color.WHITE,cc.Color.WHITE]:a>0?[this.colorGreen,this.colorPink]:[this.colorPink,this.colorGreen]},r([l(cc.Prefab)],e.prototype,"pfPlayer",void 0),r([l(cc.Label)],e.prototype,"labLeftScore",void 0),r([l(cc.Node)],e.prototype,"ndLeftPlayers",void 0),r([l(cc.Label)],e.prototype,"labRightScore",void 0),r([l(cc.Node)],e.prototype,"ndRightPlayers",void 0),r([l(cc.Color)],e.prototype,"colorGreen",void 0),r([l(cc.Color)],e.prototype,"colorPink",void 0),r([d],e)}(n.CxCompExt);a.UIGameResultBattle=p,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"./UIGameResultPlayer":"UIGameResultPlayer"}],UIGameResultItem:[function(t,e,a){"use strict";cc._RF.push(e,"6ab01nJ4LdOpJOjhJxhLv9s","UIGameResultItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultItem=void 0;var n=t("../../../../script/lib/base/CxCompExt"),s=cc._decorator,c=s.ccclass,d=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labLeftScore=null,e.labScoreName=null,e.labRightScore=null,e.colorGreen=(new cc.Color).fromHEX("#37E502"),e.colorPink=(new cc.Color).fromHEX("#FB2164"),e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.labLeftScore&&(this.labLeftScore.string=""+e.leftScore),this.labScoreName&&(this.labScoreName.language=""+e.scoreName),this.labRightScore&&(this.labRightScore.string=""+e.rightScore);var a=this.getColor(e.leftScore,e.rightScore,e.useDefColor);this.setLabColor(this.labLeftScore,a[0]),this.setLabColor(this.labRightScore,a[1])},e.prototype.getColor=function(t,e,a){var o=t-e;return a||0===o?[cc.Color.WHITE,cc.Color.WHITE]:o>0?[this.colorGreen,this.colorPink]:[this.colorPink,this.colorGreen]},e.prototype.setLabColor=function(t,e){t&&(t.node.color=e)},r([d(cc.Label)],e.prototype,"labLeftScore",void 0),r([d(cc.Label)],e.prototype,"labScoreName",void 0),r([d(cc.Label)],e.prototype,"labRightScore",void 0),r([d(cc.Color)],e.prototype,"colorGreen",void 0),r([d(cc.Color)],e.prototype,"colorPink",void 0),r([c],e)}(n.CxCompExt);a.UIGameResultItem=l,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0}],UIGameResultList:[function(t,e,a){"use strict";cc._RF.push(e,"e9af4sPnUBCopzlztqgPwR3","UIGameResultList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultList=void 0;var n=t("../../../../script/app/const/game/GameConstant"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../../script/lib/i18n/i18nHelper"),d=t("../../../gameBaseSrc/i18n/GameBaseI18n"),l=t("./UIGameResultItem"),p=cc._decorator,u=p.ccclass,h=p.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfResultItem=null,e}return i(e,t),e.prototype.init=function(t){this.ourGameResult=t.ourGameResult,this.otherGameResult=t.otherGameResult,this.ourGameResult&&this.otherGameResult?(this.initView(),this.doAnim(t.endStatus)):cc.error("UIGameResultList ourGameResult is null")},e.prototype.initView=function(){var t={Denari:"coinsNum",Primiera:"ColorFenMax",Cards:"cardNum",Settebello:"coins7",Scopa:"scopaCount"};for(var e in t){var a=t[e],o=this.ourGameResult[a],i=this.otherGameResult[a],r="Scopa"===e,n=c.i18nHelper.makeLanguage(d.IGameBaseI18n.k["txt_"+e],d.GameBaseLan.bundle);if(null!=o&&null!=i){var s=cc.instantiate(this.pfResultItem);s.parent=this.node;var p=s.getComponent(l.UIGameResultItem);p&&p.init({leftScore:o,scoreName:n,rightScore:i,useDefColor:r})}}},e.prototype.doAnim=function(t){t===n.GameConstant.GameEndStatus.WIN?cc.tween(this.node.parent).set({scale:.8,opacity:0}).delay(.06).parallel(cc.tween().to(.2,{scale:1.05}).to(.1,{scale:1}),cc.tween().to(.3,{opacity:255})).start():cc.tween(this.node.parent).set({scale:1,opacity:0}).delay(.06).to(.3,{opacity:255}).start()},r([h(cc.Prefab)],e.prototype,"pfResultItem",void 0),r([u],e)}(s.CxCompExt);a.UIGameResultList=C,cc._RF.pop()},{"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"./UIGameResultItem":"UIGameResultItem"}],UIGameResultMenu:[function(t,e,a){"use strict";cc._RF.push(e,"7d57dndyGRHUr7rLVQaRBya","UIGameResultMenu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultMenu=void 0;var n=t("./../../../gameBaseSrc/i18n/GameBaseI18n"),s=t("./../../../../script/lib/utils/Display"),c=t("../../../../script/app/const/Global"),d=t("../../../../script/app/event/Notify"),l=t("../../../../script/lib/base/CxCompExt"),p=t("../../../gameBaseSrc/model/GameEvent"),u=t("../../../../script/app/const/AudioFile"),h=t("../../../../script/lib/i18n/i18nHelper"),C=t("../../../../script/app/module/buryPoint/BuryPoint"),f=t("../../../../script/app/module/buryPoint/BuryPointUtils"),S=t("../../../../script/app/event/GuiEvent"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resultLayer=null,e.btnHome=null,e.btnRematch=null,e.btnDetail=null,e.bSendRematchMsg=!1,e.clickViald=!1,e.isWin=!1,e}return i(e,t),e.prototype.init=function(t){this.isWin=t},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.btnHome&&this.btnHome.node.on("click",this.onClickHome,this),this.btnRematch&&(this.btnRematch.node.on("click",this.onClickRematch,this),this.labRematchTime=this.btnRematch.getComponentInChildren(cc.Label),this.labRematchTime.language=h.i18nHelper.makeLanguage([n.IGameBaseI18n.k.game_end_rematch,this.rematchCD||0],n.GameBaseLan.bundle)),this.btnDetail&&this.btnDetail.node.on("click",this.onClickDetail,this),this.bShowView=!0,this.pMask=this.node.getChildByName("mask"),this.doEnterAnim()},e.prototype.onDestroy=function(){this.stopRematchTimer(),t.prototype.onDestroy.call(this)},e.prototype.listEvent=function(){return new Map([[d.Notify.Game.REMATCH_BTN_CLIKCABLE,this.rematchValid]])},e.prototype.rematchValid=function(){this.clickViald=!0},e.prototype.doEnterAnim=function(){var t=this,e=0;if(this.isWin&&(e=2),this.pMask&&cc.tween(this.pMask).set({opacity:0}).delay(e).to(.1,{opacity:178.5}).start(),this.btnRematch&&cc.tween(this.btnRematch.node).set({opacity:0}).delay(.7).delay(e).to(.2,{opacity:255}).call(function(){t.rematchValid()}).start(),this.btnHome&&cc.tween(this.btnHome.node).set({opacity:0}).delay(.7).delay(e).to(.2,{opacity:255}).start(),this.btnDetail){var a=this.btnDetail.node.position;this.btnDetail.node.x=s.Display.width+100,cc.tween(this.btnDetail.node).set({opacity:255}).delay(.7).delay(e).to(.3,{opacity:255,position:a}).start()}},e.prototype.onClickHome=function(){this.dispatch(p.GameEvent.Voice.PLAY_EFFECT_OTHER,u.AudioFile.Com.BACK),f.BuryPointUtils.send(C.BuryPoint.Debug.Game.ClickHome),this.dispatch(p.GameEvent.OperateEvent.CLICK_HOME)},e.prototype.onClickRematch=function(){this.clickViald?(this.dispatch(p.GameEvent.OperateEvent.NEXT_GAME),this.dispatch(p.GameEvent.Voice.PLAY_EFFECT_OTHER,u.AudioFile.Com.GO),this.dispatch(S.GuiEvent.PopMsg.DISPLAY_TABLE_PROGRESS,{rmthis:!0}),this.bSendRematchMsg=!0,0==this.rematchCD?this.dispatch(p.GameEvent.OperateEvent.CLICK_REMATCH,!1):this.dispatch(p.GameEvent.OperateEvent.CLICK_REMATCH,!0),f.BuryPointUtils.send(C.BuryPoint.Debug.Game.ClickRematch)):cc.log("rematch btn \u70b9\u51fb\u65e0\u6548")},e.prototype.onClickDetail=function(){f.BuryPointUtils.send(C.BuryPoint.Debug.Game.ClickDetail),this.bShowView=!this.bShowView,this.resultLayer&&(this.resultLayer.active=this.bShowView);var t=this.node.getChildByName("mask");t&&(t.active=this.bShowView),this.dispatch(S.GuiEvent.PopMsg.DISPLAY_TABLE_PROGRESS,{rmthis:!0}),this.bShowView?this.dispatch(p.GameEvent.Voice.PLAY_EFFECT_OTHER,u.AudioFile.Com.BACK):this.dispatch(p.GameEvent.Voice.PLAY_EFFECT_OTHER,u.AudioFile.Com.GO)},e.prototype.onClickTableMap=function(){f.BuryPointUtils.send(C.BuryPoint.Debug.Game.ClickTableMap),this.dispatch(p.GameEvent.Com.GAME_EXIT,c.gExitGameType.exitAndLeftRoom)},e.prototype.changeReddot=function(t,e){var a;e?(a=t.getChildByName("reddot"))&&(a.active=!0,a.getComponentInChildren(cc.Label).string=""+e):(a=t.getChildByName("reddot"))&&(a.active=!1)},e.prototype.startRematchTimer=function(t){this.stopRematchTimer(),this.rematchCD=t;var e=Math.abs(t);cc.tween(this.node).repeat(e,cc.tween().delay(1).call(this.setRematchTime.bind(this))).start()},e.prototype.setRematchTime=function(){this.rematchCD--,this.labRematchTime&&(this.labRematchTime.language=h.i18nHelper.makeLanguage([n.IGameBaseI18n.k.game_end_rematch,this.rematchCD],n.GameBaseLan.bundle)),this.rematchCD<=0&&(this.rematchCD=0,this.stopRematchTimer())},e.prototype.stopRematchTimer=function(){this.node.stopAllActions()},r([v(cc.Node)],e.prototype,"resultLayer",void 0),r([v(cc.Button)],e.prototype,"btnHome",void 0),r([v(cc.Button)],e.prototype,"btnRematch",void 0),r([v(cc.Button)],e.prototype,"btnDetail",void 0),r([m],e)}(l.CxCompExt);a.UIGameResultMenu=_,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/lib/utils/Display":void 0,"./../../../gameBaseSrc/i18n/GameBaseI18n":void 0}],UIGameResultPlayer:[function(t,e,a){"use strict";cc._RF.push(e,"ca97aIwDbxMv5+CBUU7ty2G","UIGameResultPlayer");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultPlayer=void 0;var n=t("./../../../../script/lib/utils/ComUtils"),s=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/view/ComUI"),d=t("../../../../script/lib/base/CxCompExt"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndHead=null,e.labNickName=null,e.spPCIcon=null,e.spKOIcon=null,e}return i(e,t),e.prototype.init=function(t){t?(this.setHead(t),this.setNickName(t.name,t.bIsGoldenPass),t.beKO?this.setKOIcon(t.beKO):this.setBankruptcyIcon(t.bPC)):cc.error("UIGameResultPlayer playerInfo is null")},e.prototype.setHead=function(t){this.ndHead&&this.dispatch(s.Notify.Head.CREATE_HEAD,{parent:this.ndHead,userId:t.userId,sex:t.sex,size:cc.size(129,129),save:!0,faceId:t.sysFaceId,robot:t.isRobot,custFaceId:t.custFaceId,url:t.headURL,level:t.level,rankLever:t.ranklevel||0,rankStartLever:t.rankstarlevel||0})},e.prototype.setNickName=function(t,e){this.labNickName&&(this.labNickName.string=n.ComUtils.subStr(t,12,!0),e&&c.ComUI.LabelToGolden(this.labNickName))},e.prototype.setBankruptcyIcon=function(t){this.spPCIcon&&(this.spPCIcon.node.active=t)},e.prototype.setKOIcon=function(t){this.spKOIcon&&(this.spKOIcon.node.active=t)},r([u(cc.Node)],e.prototype,"ndHead",void 0),r([u(cc.Label)],e.prototype,"labNickName",void 0),r([u(cc.Sprite)],e.prototype,"spPCIcon",void 0),r([u(cc.Sprite)],e.prototype,"spKOIcon",void 0),r([p],e)}(d.CxCompExt);a.UIGameResultPlayer=h,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxCompExt":void 0,"./../../../../script/lib/utils/ComUtils":void 0}],UIGameResultTitle:[function(t,e,a){"use strict";cc._RF.push(e,"f9193WrqsFNDowwlbr4S4rB","UIGameResultTitle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultTitle=void 0;var n=t("./../../model/ScopaDefine"),s=t("./../../../../script/lib/base/CxComponent"),c=t("./../../../gameBaseSrc/i18n/GameBaseI18n"),d=t("./../../../../script/lib/utils/ComUtils"),l=t("../../../../script/app/const/AudioFile"),p=t("../../../../script/app/const/game/GameConstant"),u=t("../../../../script/app/event/Notify"),h=t("../../../../script/app/const/Global"),C=t("../../../../script/lib/base/Language"),f=t("../../../../script/lib/manager/ResManager"),S=t("../../../../script/app/model/DataProxy"),y=t("../../../../script/app/event/GuiEvent"),m=t("../../../../script/lib/i18n/i18nHelper"),v=t("../../../gameBaseSrc/model/GameEvent"),_=cc._decorator,g=_.ccclass,b=_.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sklTitle=null,e.sklPartical=null,e.spIcon=null,e.labGold=null,e.labAnimAdd=null,e.ndBeiShu=null,e.labBeiShu=null,e.spScopaIcon=null,e.skl_build=null,e.spCappedTag=null,e.spCappedTips=null,e.labCappedDesc=null,e.btnScoreHelp=null,e.spKO=null,e.spShield=null,e}return i(e,t),e.prototype.init=function(t){this.mBShowCappedTips=!1,this.mGoldNum=t.goldNum,this.mFBGoldNum=t.fbGoldNum,this.mCappedViewId=t.cappedViewId,this.mBUseShield=t.bUseShield||!1,this.setGold(t.goldNum),this.setTitle(t.endStatus,t.viewName),this.setBeiShu(t.strBeiShu,t.endStatus),this.goldAnim(t.endStatus,t.goldNum),this.setCappedTag(t.cappedViewId>=0&&t.endStatus===p.GameConstant.GameEndStatus.WIN),t.beKOViewId>=0&&this.setKO()},e.prototype.listEvent=function(){return new Map([[v.GameEvent.End.NUMBER_CHANGE,this.onMakeGoldNumChange],[v.GameEvent.Effect.GET_HUDUN_FINAL_POS,this.onGetShieldPos],[v.GameEvent.End.SHOW_SHIELD_ICON,this.onShowShield]])},e.prototype.start=function(){this.btnScoreHelp&&(this.btnScoreHelp.node.on("click",this.onClickScoreHelp,this),cc.tween(this.btnScoreHelp.node).repeatForever(cc.tween().to(.6,{scale:1.05}).to(.7,{scale:1})).start())},e.prototype.setTitle=function(t,e){this.sklTitle.paused=!1,this.sklPartical.node.active=!1;var a=this,o=e===n.eResultGameViewType.ScopaGDCrazyResultView?"2":"",i=function(){cc.isValid(a)?(t===p.GameConstant.GameEndStatus.WIN?(a.sklTitle.animation="win"+o,a.node.stopAllActions(),cc.tween(a.node).delay(.7).call(function(){a.sklPartical.node.active=!0,a.sklPartical.animation="win_lizi",a.sklPartical.loop=!0,a.sklPartical.paused=!1}).start()):t===p.GameConstant.GameEndStatus.LOST?(a.sklTitle.animation="lost"+o,a.sklPartical.node.active=!1):t===p.GameConstant.GameEndStatus.DRAW&&(a.sklTitle.animation="draw"+o,a.sklPartical.node.active=!1),i=null):i=null},r=C.Language.getInstance().getLanguage();cc.sys.LANGUAGE_ENGLISH!==r?f.default.getInstance().loadSkeleton("effect/jiesuan/jiesuan_"+r,h.gAssetBundleName.SCOPA_GOLD_RES,function(t,e){e&&cc.isValid(a)&&cc.isValid(a.sklPartical)?(a.sklPartical.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.SHARED_CACHE),a.sklPartical.skeletonData=e,a.sklPartical.node.active=!0,a.sklPartical.premultipliedAlpha=!1,a.sklTitle.skeletonData=e,a.sklTitle.loop=!1,a.sklTitle.node.active=!0,a.sklTitle.premultipliedAlpha=!1,i()):i()}):i()},e.prototype.setGold=function(t){this.labGold&&(this.labGold.string=d.ComUtils.formatGoldStr(t))},e.prototype.goldAnim=function(t){var e=this;t===p.GameConstant.GameEndStatus.WIN?(cc.log("result: goldAnim: win mFBGoldNum=",this.mFBGoldNum),cc.tween(this.labGold.node.parent).set({opacity:0}).delay(.56).to(.2,{opacity:255}).call(function(){e.playGoldAnim()}).start()):cc.tween(this.labGold.node.parent).set({opacity:0}).delay(.3).to(.2,{opacity:255}).start(),this.mBUseShield&&this.dispatch(v.GameEvent.Popup.SHIELD,{type:2,viewId:0,delayTime:t===p.GameConstant.GameEndStatus.WIN?.76:.5}),t===p.GameConstant.GameEndStatus.WIN?this.dispatch(u.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.GAME_WIN}):this.dispatch(u.Notify.Base.PLAY_EFFECT,{path:l.AudioFile.Game.GAME_LOST})},e.prototype.setBeiShu=function(t,e){this.ndBeiShu&&(t?(this.ndBeiShu.active=!0,this.labBeiShu.string=t,e===p.GameConstant.GameEndStatus.WIN?cc.tween(this.ndBeiShu).set({opacity:0}).delay(.56).to(.2,{opacity:255}).start():cc.tween(this.ndBeiShu).set({opacity:0}).delay(.3).to(.2,{opacity:255}).start()):this.ndBeiShu.active=!1)},e.prototype.playGoldAnim=function(){var t=this.mGoldNum;this.mFBGoldNum&&(t=this.mFBGoldNum),this.dispatch(y.GuiEvent.Anim.COM_AWARD_ANIM,{awardNum:t,scene:h.gSceneType.Game});var e=S.DataProxy.getInstance().userData.powerInfo;e&&e.changeNum>0&&this.dispatch(y.GuiEvent.Anim.COM_POWER_ANIM,{awardNum:e.changeNum,scene:h.gSceneType.Game})},e.prototype.playDeskBuildAnim=function(){var t=this;if(cc.log("desk: playDeskBuildAnim() mFBGoldNum=",this.mFBGoldNum),this.labGold&&this.mFBGoldNum&&this.labAnimAdd){cc.log("desk: playDeskBuildAnim() start");var e=this.labAnimAdd.parent.convertToWorldSpaceAR(this.labAnimAdd.position);e.x+=30,this.dispatch(y.GuiEvent.Anim.ANIM_DESK_BUILD_GOLD,e),cc.tween(this.labGold.node).delay(.8).set({opacity:0,scale:.6}).call(function(){t.setGold(t.mFBGoldNum)}).to(.13,{scale:1.6,opacity:255}).to(.07,{scale:.8}).to(.1,{scale:1}).call(function(){t.playGoldAnim()}).start(),this.skl_build&&cc.tween(this.skl_build.node).delay(.7).call(function(){t.skl_build&&(t.skl_build.paused=!1,t.skl_build.node.active=!0)}).start()}},e.prototype.setCappedTag=function(t){this.spCappedTag&&(this.spCappedTag.node.on("click",this.onShowCappedTips,this),this.spCappedTag.node.active=t),this.spCappedTips&&(this.spCappedTips.node.active=!1)},e.prototype.setKO=function(){this.spKO&&(this.spKO.node.active=!0,this.labGold&&(this.labGold.node.active=!1))},e.prototype.onShowCappedTips=function(){this.spCappedTips&&(this.spCappedTips.node.active=this.mBShowCappedTips,this.labCappedDesc&&(0==this.mCappedViewId?this.labCappedDesc.string=m.i18nHelper.getLanguage([c.IGameBaseI18n.k.game_end_you_capped_tips,this.mGoldNum,this.mGoldNum],c.GameBaseLan.bundle):this.labCappedDesc.string=m.i18nHelper.getLanguage([c.IGameBaseI18n.k.game_end_other_capped_tips,this.mGoldNum,this.mGoldNum],c.GameBaseLan.bundle))),this.mBShowCappedTips=!this.mBShowCappedTips},e.prototype.onClickScoreHelp=function(){var t=this.btnScoreHelp.node.convertToWorldSpace(cc.Vec2.ZERO);this.dispatch(v.GameEvent.OperateEvent.CLICK_RESULT_SCORE,t)},e.prototype.onGetShieldPos=function(){this.spShield&&this.dispatch(v.GameEvent.Effect.PUT_HUDUN_FINAL_POS,this.spShield.node.convertToWorldSpaceAR(cc.Vec3.ZERO))},e.prototype.onShowShield=function(t){this.spShield&&(this.spShield.node.active=t)},e.prototype.onMakeGoldNumChange=function(){d.ComUtils.randomLabel({label:this.labGold,startNum:Math.abs(this.mGoldNum),finalNum:0,actionTime:.3,prefix:"-"})},r([b(sp.Skeleton)],e.prototype,"sklTitle",void 0),r([b(sp.Skeleton)],e.prototype,"sklPartical",void 0),r([b(cc.Sprite)],e.prototype,"spIcon",void 0),r([b(cc.Label)],e.prototype,"labGold",void 0),r([b(cc.Node)],e.prototype,"labAnimAdd",void 0),r([b(cc.Node)],e.prototype,"ndBeiShu",void 0),r([b(cc.Label)],e.prototype,"labBeiShu",void 0),r([b(cc.Sprite)],e.prototype,"spScopaIcon",void 0),r([b(sp.Skeleton)],e.prototype,"skl_build",void 0),r([b(cc.Sprite)],e.prototype,"spCappedTag",void 0),r([b(cc.Sprite)],e.prototype,"spCappedTips",void 0),r([b(cc.Label)],e.prototype,"labCappedDesc",void 0),r([b(cc.Button)],e.prototype,"btnScoreHelp",void 0),r([b(cc.Sprite)],e.prototype,"spKO",void 0),r([b(cc.Sprite)],e.prototype,"spShield",void 0),r([g],e)}(s.CxComponent);a.UIGameResultTitle=E,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/lib/base/Language":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/manager/ResManager":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/lib/base/CxComponent":void 0,"./../../../../script/lib/utils/ComUtils":void 0,"./../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"./../../model/ScopaDefine":"ScopaDefine"}],UIGameResultView:[function(t,e,a){"use strict";cc._RF.push(e,"acdfa80ZAVA9K+7KFOYyIsc","UIGameResultView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameResultView=void 0;var n=t("./UIGameResultList"),s=t("./UIGameResultBattle"),c=t("./UIGameResultTitle"),d=t("../../../../script/lib/base/CxCompExt"),l=t("./UIGameResultMenu"),p=t("../../../../script/lib/base/ComPopup"),u=t("../../../../script/app/const/game/GameConstant"),h=t("../../../../script/app/event/Notify"),C=t("../../../../script/app/view/ComFunctions"),f=t("../../../../script/app/view/rank/RankInfo"),S=t("../../../../script/app/const/Global"),y=t("../../../../script/lib/utils/ComUtils"),m=t("../../../../script/app/language/LanguageCfg"),v=t("../../../activitySrc/goldenPass/view/GoldenPassMenuMini"),_=t("../../../clubSrc/view/chest/ClubChestMenu"),g=cc._decorator,b=g.ccclass,E=g.property,I=g.requireComponent,D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.battleResult=null,e.resultList=null,e.pfGoldenPassMini=null,e.pfClubMenu=null,e.spriteCup=null,e.labCup=null,e.labRank=null,e.labRankChange=null,e.mSpratl=null,e.sprRankChange=null,e}return i(e,t),e.prototype.init=function(t){this.gameResult=t,this.initTitle(t),this.initBattleResult(t),this.initResultList(t),C.ComFunctions.isUnlock(S.gUnlcokTag.rank)?this.initRank(t):this.labRank&&(this.labRank.node.parent.active=!1);var e=this.getComponent(l.UIGameResultMenu);e&&(e.init(t.endStatus===u.GameConstant.GameEndStatus.WIN),e.startRematchTimer(t.rematchTime)),this.spriteCup&&(this.initGoldenPassEntry(t.ourGameResult.dwCupNum),this.initClubMenuEntry(t.ourGameResult.dwCupNum)),this.labCup&&(this.labCup.string="x"+t.ourGameResult.dwCupNum)},e.prototype.onDestroy=function(){this.gameResult=null,this.dispatch(h.Notify.AD.HIDE_BANNER),t.prototype.onDestroy.call(this)},e.prototype.initTitle=function(t){if(this.title){var e=t.endStatus,a=t.ourGameResult.userGold;this.title.init({endStatus:e,goldNum:a,fbGoldNum:t.ourGameResult.fbScore,strBeiShu:t.strBeiShu,cappedViewId:t.cappedViewId,viewName:t.viewName,beKOViewId:t.beKOViewId,bUseShield:t.ourGameResult.bUseHD})}},e.prototype.initRank=function(t){if(this.labRankChange&&(this.labRankChange.node.active=!t.rankEnd),this.sprRankChange&&(this.sprRankChange.node.active=!t.rankEnd),t.rankEnd)this.labRank&&(this.labRank.string=y.ComUtils.getLang(m.LangKey.rank_settlement_result),this.labRank.fontSize=35);else if(t&&t.ourGameResult){var e=t.ourGameResult;this.labRank&&(this.labRank.string=e.dwDanRank.toString(),this.labRank.fontSize=50);var a=e.dwChange;if(this.mSpratl){var o="rank_result_";a>0?(this.labRankChange&&(this.labRankChange.node.active=!0,this.labRankChange.node.color=(new cc.Color).fromHEX(f.default.resultColor[0]),this.labRankChange.string=a.toString()),o+="up"):a<0?(this.labRankChange&&(this.labRankChange.node.active=!0,this.labRankChange.node.color=(new cc.Color).fromHEX(f.default.resultColor[1]),this.labRankChange.string=a.toString()),o+="down"):(this.labRankChange&&(this.labRankChange.node.active=!1),o+="keep"),this.mSpratl.getSpriteFrame(o)&&(this.sprRankChange.spriteFrame=this.mSpratl.getSpriteFrame(o))}}},e.prototype.initBattleResult=function(t){this.battleResult&&this.battleResult.init(t)},e.prototype.initResultList=function(t){this.resultList&&this.resultList.init(t)},e.prototype.initGoldenPassEntry=function(t){var e=this;C.ComFunctions.performWithDelay(this.node,function(){if(e.pfGoldenPassMini){e.node.scale=1;var a=e.spriteCup.node.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.instantiate(e.pfGoldenPassMini);o.parent=e.node;var i=o.getComponent(v.default);i.setOpenFromGame(!0),i.setActionData(t,a,e.spriteCup.node.getContentSize())}},.2)},e.prototype.initClubMenuEntry=function(t){var e=this;C.ComFunctions.isUnlock(S.gUnlcokTag.club,!1)&&C.ComFunctions.performWithDelay(this.node,function(){if(e.pfClubMenu){e.node.scale=1;var a=e.spriteCup.node.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.instantiate(e.pfClubMenu);o.parent=e.node;var i=o.getComponent(_.ClubChestMenu);i.alignTopRight(),i.setActionData(t,a,e.spriteCup.node.getContentSize())}},.2)},r([E(c.UIGameResultTitle)],e.prototype,"title",void 0),r([E(s.UIGameResultBattle)],e.prototype,"battleResult",void 0),r([E(n.UIGameResultList)],e.prototype,"resultList",void 0),r([E({type:cc.Prefab,tooltip:"goldenPass\u4e3b\u9898\u5165\u53e3"})],e.prototype,"pfGoldenPassMini",void 0),r([E({type:cc.Prefab,tooltip:"\u4ff1\u4e50\u90e8\u5165\u53e3"})],e.prototype,"pfClubMenu",void 0),r([E({type:cc.Sprite,tooltip:"\u5956\u676f\u7cbe\u7075"})],e.prototype,"spriteCup",void 0),r([E(cc.Label)],e.prototype,"labCup",void 0),r([E(cc.Label)],e.prototype,"labRank",void 0),r([E(cc.Label)],e.prototype,"labRankChange",void 0),r([E(cc.SpriteAtlas)],e.prototype,"mSpratl",void 0),r([E(cc.Sprite)],e.prototype,"sprRankChange",void 0),r([b,I(p.ComPopup)],e)}(d.CxCompExt);a.UIGameResultView=D,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/view/ComFunctions":void 0,"../../../../script/app/view/rank/RankInfo":void 0,"../../../../script/lib/base/ComPopup":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../activitySrc/goldenPass/view/GoldenPassMenuMini":void 0,"../../../clubSrc/view/chest/ClubChestMenu":void 0,"./UIGameResultBattle":"UIGameResultBattle","./UIGameResultList":"UIGameResultList","./UIGameResultMenu":"UIGameResultMenu","./UIGameResultTitle":"UIGameResultTitle"}],UIGameUserInfoBg:[function(t,e,a){"use strict";cc._RF.push(e,"629a2eSmnRCWLIDpf4YTkGM","UIGameUserInfoBg");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIGameUserInfoBg=void 0;var n=t("../../../../script/lib/base/CxCompExt"),s=t("../../../../script/lib/utils/ScreenAdapter"),c=t("../../../gameBaseSrc/model/GameEvent"),d=cc._decorator,l=d.ccclass,p=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spSelf=null,e.spView_2=null,e}return i(e,t),e.prototype.start=function(){this.spSelf&&s.ScreenAdapter.paddingBottom(this.spSelf.node),this.spView_2&&s.ScreenAdapter.paddingBottom(this.spView_2.node)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Player.GAME_START,this.onGameStart),this.bindEvent(c.GameEvent.Player.MOVE_END,this.onGameStartEnd)},e.prototype.onGameStart=function(){this.node.opacity=0},e.prototype.onGameStartEnd=function(){this.node.opacity=255},r([p(cc.Sprite)],e.prototype,"spSelf",void 0),r([p(cc.Sprite)],e.prototype,"spView_2",void 0),r([l],e)}(n.CxCompExt);a.UIGameUserInfoBg=u,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"../../../gameBaseSrc/model/GameEvent":void 0}],UIHuDunAnim:[function(t,e,a){"use strict";cc._RF.push(e,"074e2uQR6NFW7kYrM6ERS3x","UIHuDunAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIHuDunAnim=void 0;var n=t("../../../../script/lib/base/CxComponent"),s=t("../../../gameBaseSrc/model/GameEvent"),c=cc._decorator,d=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pSkeleton=null,e.mType=0,e.mViewId=0,e.mDelayTime=0,e}return i(e,t),e.prototype.init=function(t){t&&(this.mType=t.type,this.mViewId=t.viewId||0,this.mDelayTime=t.delayTime||0,t.startPos&&(this.mStartPos=this.node.convertToNodeSpaceAR(t.startPos)),t.finalPos&&(this.mFinalPos=this.node.convertToNodeSpaceAR(t.finalPos)))},e.prototype.listEvent=function(){return new Map([[s.GameEvent.Effect.PUT_HUDUN_START_POS,this.onGetHuDunStartPos],[s.GameEvent.Effect.PUT_HUDUN_FINAL_POS,this.onGetHuDunFinalPos]])},e.prototype.start=function(){this.mStartPos||(this.mStartPos=cc.Vec3.ZERO,this.dispatch(s.GameEvent.Effect.GET_HUDUN_START_POS,this.mViewId)),this.mFinalPos||(this.mFinalPos=cc.Vec3.ZERO,this.dispatch(s.GameEvent.Effect.GET_HUDUN_FINAL_POS,this.mViewId));var t=this;cc.tween(this.node).delay(this.mDelayTime).call(function(){cc.isValid(t)&&(t.pSkeleton&&(t.pSkeleton.node.active=!0),1===t.mType?t.playInGame():t.playInResult(),t=null)}).start()},e.prototype.clear=function(){this.pSkeleton&&(this.pSkeleton.enabled=!1,this.pSkeleton.node.active=!1),this.node.destroy()},e.prototype.playInGame=function(){if(this.pSkeleton){var t=this,e=cc.Vec3.ZERO;e=0===this.mViewId?cc.v3(0,0):cc.v3(0,250),cc.tween(this.pSkeleton.node).set({scale:.25,opacity:0,position:this.mStartPos}).to(.2,{scale:1,x:e.x,y:e.y,opacity:255}).delay(.7).to(.2,{opacity:0}).call(function(){cc.isValid(t)&&t.clear()}).start()}},e.prototype.playInResult=function(){var t=this;if(this.pSkeleton){var e=this,a=cc.v3(0,0);cc.tween(this.pSkeleton.node).set({scale:0,opacity:0,position:this.mStartPos}).to(.2,{scale:1,position:a,opacity:255}).delay(.7).call(function(){t.dispatch(s.GameEvent.End.NUMBER_CHANGE)}).to(.2,{scale:.25,opacity:255,position:this.mFinalPos}).call(function(){cc.isValid(e)&&(e.dispatch(s.GameEvent.End.SHOW_SHIELD_ICON,!0),e.clear())}).start()}},e.prototype.onGetHuDunStartPos=function(t){t&&(this.mStartPos=this.node.convertToNodeSpaceAR(t))},e.prototype.onGetHuDunFinalPos=function(t){t&&(this.mFinalPos=this.node.convertToNodeSpaceAR(t))},r([l(sp.Skeleton)],e.prototype,"pSkeleton",void 0),r([d],e)}(n.CxComponent);a.UIHuDunAnim=p,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../gameBaseSrc/model/GameEvent":void 0}],UIMultCardTouchBehavior:[function(t,e,a){"use strict";cc._RF.push(e,"8b2b3XNbv1Dj5zz4rJEDgJd","UIMultCardTouchBehavior");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0});var n=t("../../../../script/lib/base/CxCompExt"),s=t("../../../../script/lib/utils/ComUtils"),c=t("../../../../script/lib/utils/Display"),d=t("./UIMyHandCardList"),l=t("./UIMyHandPokerView"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui=null,e.isCardCanTouch=!1,e.isPressing=!1,e.iTouchId=-1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.ui=this.node.getComponent(l.UIMyHandPokerView),this.ui||(this.ui=this.node.addComponent(l.UIMyHandPokerView)),this.pCardList=this.getComponent(d.UIMyHandCardList),this.setCanTouch(!0),this.TouchRect=new cc.Rect(0,0,c.Display.width,c.Display.height/4)},e.prototype.onDestroy=function(){this.ui&&(this.ui=null),this.pCardList&&(this.pCardList=null),this.removeEventAtTouchEnd(),t.prototype.onDestroy.call(this)},e.prototype.checkCardCanOut=function(){return!0},e.prototype.isMeCanOutCard=function(){return!!this.ui.getDataDelegate()&&this.ui.getDataDelegate().isViewIdCanOutCard(0)},e.prototype.setPressing=function(t){this.isPressing=t},e.prototype.getPressing=function(){return this.isPressing},e.prototype.getCanTouch=function(){return this.isCardCanTouch},e.prototype.setCanTouch=function(t){this.isCardCanTouch=t,t?(this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1),this.addEventAtTouchBegan()):(this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.removeEventAtTouchEnd())},e.prototype.addEventAtTouchBegan=function(){this.iTouchId=-1,this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.removeEventAtTouchEnd=function(){this.iTouchId=-1,this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this)},e.prototype.onTouchBegan=function(t){if(-1===this.iTouchId&&this.ui){this.iTouchId=t.getID();var e=t.getLocation(),a=this.node.convertToNodeSpaceAR(e),o=this.TouchRect.contains(a);if(this.getCanTouch()&&1==o){this.setPressing(!0),this.bMoveMode=!1;var i=this.getTouchCardIndex(e),r=this.pCardList.allHandCard;if(i>=0){var n=r[i];n&&n.canTouch()&&n.setPreSelected(!0)}}}},e.prototype.onTouchMoved=function(t){if(this.iTouchId===t.getID()&&this.pCardList){var e=t.getLocation(),a=this.node.convertToNodeSpaceAR(e);if(this.TouchRect.contains(a),1==this.getPressing()){this.bMoveMode=!0;for(var o=Math.abs(t.getLocationX()-t.getStartLocation().x),i=Math.abs(t.getLocationY()-t.getStartLocation().y),r=Math.min(t.getLocationX(),t.getStartLocation().x),n=Math.min(t.getLocationY(),t.getStartLocation().y),s=cc.rect(r,n,o,i),c=this.pCardList.allHandCard,d=c.length-1;d>=0;d--){var l=c[d];l&&l.canTouch()&&(l.containsInRect(s)?l.setPreSelected(!0):l.isSelected()&&l.isPreSelected()?l.setPreSelected(!1):l.isSelected()||l.setPreSelected(!1))}}}},e.prototype.onTouchEnd=function(t){if(this.iTouchId===t.getID()&&this.pCardList){var e=t.getLocation(),a=this.node.convertToNodeSpaceAR(e),o=this.TouchRect.contains(a);if(this.getCanTouch()&&1==this.getPressing())if(this.bMoveMode){this.bMoveMode=!1;for(var i=!1,r=this.pCardList.allHandCard,n=r.length-1;n>=0;n--){var s=r[n];if(s&&s.canTouch()){var c=s.dealWithPreEvent();i||(i=c)}}var d=this.getPreSelectedCard(),l=this.getSelectedCardData();l.length>0?(l=l.concat(d),this.selectCards(l)):i?this.selectCards(d):this.dealWithAICard(d)}else o?this.dealWithTouch(e):this.clearHandCardSelectedStatus();else this.clearHandCardSelectedStatus(),this.curTipIndx=0;this.setPressing(!1),this.clearHandCardPreSelectedStatus(),this.iTouchId=-1}},e.prototype.onTouchCancel=function(t){this.getPressing()&&this.onTouchEnd(t)},e.prototype.getTouchCardIndex=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];if(o&&!0===o.hitPos(t))return a}return-1},e.prototype.clearHandCardSelectedStatus=function(){for(var t=this.pCardList.allHandCard,e=0;e<t.length;e++){var a=t[e];a&&a.setSelected(!1)}},e.prototype.clearHandCardPreSelectedStatus=function(){for(var t=this.pCardList.allHandCard,e=0;e<t.length;e++){var a=t[e];a&&a.clearPreSelected()}},e.prototype.getSelectedCardData=function(){for(var t=[],e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];o&&o.isSelected()&&t.push(o.cardData)}return t},e.prototype.getPreSelectedCard=function(){for(var t=[],e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];o&&o.isPreSelected()&&t.push(o.cardData)}return t},e.prototype.setHandCardCanSelect=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=(n=e[a]).cardData;if(n&&o){n.setCanSelect(!1);for(var i=0;i<t.length;i++){var r=t[i];if(r&&o.l==r.l){n.setCanSelect(!0),n.setUnTouch(!1);break}}}}for(a=0;a<e.length;a++){var n;(n=e[a]).isCanSelect()||(n.setSelected(!1),n.setUnTouch(!0))}},e.prototype.setHandCardAllCanSelect=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];o&&(o.setCanSelect(t),o.setUnTouch(!t))}},e.prototype.dealWithTouch=function(t){for(var e=this.pCardList.allHandCard,a=!1,o=e.length-1;o>=0;o--){var i=e[o];if(i&&i.touch(t)){i.isSelected()?i.setSelected(!1):(i.setSelected(!0),a=!0);break}}a&&1==this.getSelectedCardData().length&&this.dealWithAICard(this.getSelectedCardData()),this.checkCardValid(this.getSelectedCardData())},e.prototype.dealWithAICard=function(t,e){void 0===e&&(e=!1),this.ui.getCurHandCardDatas()},e.prototype.selectCards=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=!1,i=e[a];if(i&&i.cardData){for(var r=0;r<t.length;r++){var n=t[r];if(i.cardData.r===n.r){o=!0,i.setSelected(!0);break}}o||i.setSelected(!1)}}},e.prototype.onClickTipCard=function(){if(this.tipCards&&this.tipCards.length>0){var t=this.tipCards.length-1,e=this.tipCards[this.curTipIndx];e?(this.selectCards(e),this.checkCardValid(e)):this.setOutMenuStatus(!1),this.curTipIndx++,this.curTipIndx>t&&(this.curTipIndx=0)}},e.prototype.checkLastHandCard=function(){return!1},e.prototype.onTipOutCard=function(){},e.prototype.resetTipCard=function(){this.curTipIndx=0},e.prototype.findTipCards=function(){this.curTipIndx=0,this.checkTipCardAndPop()},e.prototype.checkTipCardAndPop=function(t){if(void 0===t&&(t=!1),this.tipCards&&this.tipCards.length>=1){this.curTipIndx=0;var e=this.tipCards[this.curTipIndx];e?(this.tipCards.length>1&&this.curTipIndx++,this.selectCards(e),t?this.checkCardValid(e):this.setOutMenuStatus(!0)):this.setOutMenuStatus(!1)}},e.prototype.checkCardValid=function(){},e.prototype.onClickOutCard=function(){var t=this.getSelectedCardData();t&&t.length>0&&this.isMeCanOutCard()&&this.ui.doOutCard(s.ComUtils.clone(t))},e.prototype.setOutMenuStatus=function(){},r([u],e)}(n.CxCompExt));a.default=h,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Display":void 0,"./UIMyHandCardList":"UIMyHandCardList","./UIMyHandPokerView":"UIMyHandPokerView"}],UIMyHandCardList:[function(t,e,a){"use strict";cc._RF.push(e,"45cdfFd7fJBWK626LMmDZyj","UIMyHandCardList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIMyHandCardList=void 0;var n,s=t("../../../gameBaseSrc/alg/ScopaLogic"),c=t("../../../../script/app/const/AudioFile"),d=t("../../../../script/app/event/Notify"),l=t("../../../../script/lib/base/CxCompExt"),p=t("../../../../script/lib/manager/NodePoolMgr"),u=t("../../../../script/lib/utils/Display"),h=t("../../../../script/lib/utils/Logger"),C=t("../../../../script/lib/utils/MathUtils"),f=t("../../../../script/lib/utils/ScreenAdapter"),S=t("../../../gameBaseSrc/alg/ScopaLogic"),y=t("../../../gameBaseSrc/model/GameEvent"),m=t("../../../gameBaseSrc/model/ScopaConstant"),v=t("../../../gameBaseSrc/view/PokerCreator"),_=t("../poker/UIMyHandPoker"),g=t("./UIMyHandPokerView");(function(t){t[t.CARD_BG_LIGHT=1]="CARD_BG_LIGHT",t[t.CARD=10]="CARD",t[t.HOLD_CARD=1e3]="HOLD_CARD"})(n||(n={}));var b=cc._decorator,E=b.ccclass,I=b.property,D=function(t){function e(){var e=t.call(this)||this;return e.pfMyHandCard=null,e.sfLight=null,e.ui=null,e.curSendOverCardNum=0,e.CARD_GRAY_OPACITY=200,e.Radius=1935,e.RadiusOffset=230,e.curSelectCardIndx=-1,e.bSendCardFinished=!1,e.bNeedShowLight=!1,e.cardLights=[],e.allHandCard=[],e.allHandCardInfo=[],e.unuseCards=[],e.bSendCardFinished=!1,e.bNeedShowLight=!1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.ui=this.node.getComponent(g.UIMyHandPokerView),this.ui||(this.ui=this.node.addComponent(g.UIMyHandPokerView)),this.circlePos=cc.v2(u.Display.cx,340-this.Radius+u.Display.paddingBottom)},e.prototype.onDestroy=function(){this.ui&&(this.ui=null),p.NodePoolMgr.getInstance().clearPool(_.UIMyHandPoker.NAME),t.prototype.onDestroy.call(this),this.cardLights=null,this.allHandCard=null,this.allHandCardInfo=null,this.unuseCards=[],this.unuseCards=null},e.prototype.getCardNum=function(){return this.allHandCard.length},e.prototype.getCardItemByIndex=function(t){return t>=0&&t<this.allHandCard.length?this.allHandCard[t]:null},e.prototype.getCardItemIndexByData=function(t){for(var e=-1,a=this.allHandCard.length-1;a>=0;a--)if(this.allHandCard[a].cardData.r==t){e=a;break}return e},e.prototype.getTouchCardIndx=function(t){for(var e=-1,a=0;a<this.allHandCard.length;a++)if(this.allHandCard[a].node.getBoundingBoxToWorld().contains(t)){e=a;break}return e},e.prototype.getCardItemByData=function(t){for(var e=0;e<this.allHandCard.length;e++)if(this.allHandCard[e].cardData.r===t)return this.allHandCard[e];return null},e.prototype.setCurSelectCardIndx=function(t){this.curSelectCardIndx=t},e.prototype.getCurSelectCardIndx=function(){return this.curSelectCardIndx},e.prototype.selectCancle=function(){for(var t=0;t<this.allHandCard.length;t++)this.allHandCard[t].setUnTouch(!1)},e.prototype.upCardByIndxList=function(t,e,a,o,i){for(var r=0,n=t;r<n.length;r++){var s=n[r];this.allHandCard[s].setUp(e,a,o,i)}},e.prototype.greyCardsByIndxs=function(t,e){e&&this.CARD_GRAY_OPACITY},e.prototype.grayCardsAll=function(t){t&&this.CARD_GRAY_OPACITY},e.prototype.hideAllCards=function(){for(var t=0,e=this.allHandCard;t<e.length;t++)e[t].node.active=!1},e.prototype.orderHandCard=function(t,e){t&&this.sortHandCards();for(var a=this.allHandCardInfo,o=this.allHandCard.length,i=0;i<o;i++){var r=this.allHandCard[i];r&&(r.setFinalPos(a[i].pos,e),e&&r.moveToFinalPosition())}},e.prototype.sortHandCards=function(){},e.prototype.setHandCardCanTouch=function(){for(var t=0,e=this.allHandCard;t<e.length;t++)e[t].setUnTouch(!1)},e.prototype.clearCardFlag=function(){for(var t=0,e=this.allHandCard;t<e.length;t++)e[t].clearFlag()},e.prototype.clearHandCard=function(){for(var t=0,e=this.allHandCard;t<e.length;t++){var a=e[t];a.clear(),this.unuseCards.push(a)}this.allHandCard=[],this.curSendOverCardNum=0,this.hideCardLight()},e.prototype.getNewCard=function(){var t=this.unuseCards.shift();if(!t){var e=p.NodePoolMgr.getInstance().getPool(_.UIMyHandPoker.NAME).get();e||(e=cc.instantiate(this.pfMyHandCard)),(t=e.getComponent(_.UIMyHandPoker))||(t=e.addComponent(_.UIMyHandPoker))}return t.node.active=!0,t.node.parent||(t.node.parent=this.node),t},e.prototype.doSendCardAction=function(t){var e=this;this.initHandCardsPosition(!0),this.bSendCardFinished=!1;var a=cc.v3(t.fromPos);a.x+=60,a.y-=70;for(var o,i,r,n=this.ui.getCurHandCardDatas(),s=this.allHandCardInfo,d=(t.fromPos.y-425)*f.ScreenAdapter.getVScale(),l=[cc.v3(150,d),cc.v3(350,d),cc.v3(550,d)],p=0;p<n.length;p++){var u=s[p];(i=this.getNewCard()).init({meta:n[p],posInfo:u}),i.showBack(),(r=i.node).zIndex=u.zIndex,r.position=a,r.scale=.6,r.opacity=0,this.allHandCard.push(i)}var h=this.allHandCard[2];h&&(C.MathUtils.lookAt(l[2],a),o=0*t.spaceTime,cc.tween(h.node).delay(o).set({angle:48,opacity:255}).call(function(){e.dispatch(y.GameEvent.Voice.PLAY_EFFECT_OTHER,c.AudioFile.Game.SEND_CARD),e.dispatch(y.GameEvent.Desk.REDUCE_CARD_NUM,1)}).parallel(cc.tween().to(.1,{scaleX:1,scaleY:.8}).to(.1,{scaleX:.7,scaleY:.05}),cc.tween().delay(.13).to(.06,{opacity:76.5}),cc.tween().to(.2,{position:l[2],angle:42})).parallel(cc.tween().call(function(){h.showFront()}).to(.03,{scaleX:.5,scaleY:.05,angle:26}).to(.2,{scaleX:1,scaleY:1,angle:0}),cc.tween().to(.03,{opacity:76.5}).to(.1,{opacity:255}),cc.tween().to(.73,{x:this.allHandCardInfo[2].pos.x,y:this.allHandCardInfo[2].pos.y,angle:this.allHandCardInfo[2].angle},{easing:cc.easing.sineOut})).start());var S=this.allHandCard[1];S&&(C.MathUtils.lookAt(l[1],a),o=1*t.spaceTime,cc.tween(S.node).delay(o).set({angle:38,opacity:255}).call(function(){e.dispatch(y.GameEvent.Voice.PLAY_EFFECT_OTHER,c.AudioFile.Game.SEND_CARD),e.dispatch(y.GameEvent.Desk.REDUCE_CARD_NUM,1)}).parallel(cc.tween().to(.1,{scaleX:1,scaleY:.8}).to(.1,{scaleX:.7,scaleY:.05}),cc.tween().delay(.13).to(.06,{opacity:76.5}),cc.tween().to(.2,{position:l[1],angle:38})).parallel(cc.tween().call(function(){S.showFront()}).to(.03,{scaleX:.5,scaleY:.05,angle:26}).to(.2,{scaleX:1,scaleY:1,angle:0}),cc.tween().to(.03,{opacity:76.5}).to(.1,{opacity:255}),cc.tween().to(.73,{x:this.allHandCardInfo[1].pos.x,y:this.allHandCardInfo[1].pos.y,angle:this.allHandCardInfo[1].angle},{easing:cc.easing.sineOut})).start());var m=this.allHandCard[0];m&&(o=2*t.spaceTime,C.MathUtils.lookAt(l[0],a),cc.tween(m.node).delay(o).set({angle:12,opacity:255}).call(function(){e.dispatch(y.GameEvent.Voice.PLAY_EFFECT_OTHER,c.AudioFile.Game.SEND_CARD),e.dispatch(y.GameEvent.Desk.REDUCE_CARD_NUM,1)}).parallel(cc.tween().to(.1,{scaleX:1,scaleY:.8}).to(.1,{scaleX:.7,scaleY:.05}),cc.tween().delay(.13).to(.06,{opacity:76.5}),cc.tween().to(.2,{position:l[0]})).parallel(cc.tween().call(function(){m.showFront()}).to(.03,{scaleX:.5,scaleY:.05,angle:12}).to(.2,{scaleX:1,scaleY:1,angle:0}),cc.tween().to(.03,{opacity:76.5}).to(.1,{opacity:255}),cc.tween().to(.7,{x:this.allHandCardInfo[0].pos.x,y:this.allHandCardInfo[0].pos.y,angle:this.allHandCardInfo[0].angle},{easing:cc.easing.sineOut})).delay(.7).call(function(){cc.isValid(e)&&e.doSendCardActionEnd()}).start())},e.prototype.initHandCardsPosition=function(t){var e;e=t?this.ui.getCurHandCardDatas().length:this.getCardNum(),this.initCardPosition(e),this.sortHandCards()},e.prototype.initCardPosition=function(t){var e=this;this.regCardPosition(t,function(t,a,o,i,r){var n=e.allHandCardInfo[t]||v.CardPosInfo.get();n.pos=C.MathUtils.pointAtCircle(e.circlePos.x,e.circlePos.y,o,a),n.angle=i,n.zIndex=r,e.allHandCardInfo[t]=n})},e.prototype.regCardPosition=function(t,e){if(e)for(var a,o=C.MathUtils.ANGLE_TO_RADIAN,i=0,r=0,s=0,c=0,d=0,l=[0,7,7,7,7,7,7],p=[0,7,7,7,7,7,7],u=t>4?2:1,h=this.RadiusOffset,f=0;f<u;f++){0===f?(r=0,c=90+(d=l[s=Math.min(4,t)-1])*s/2,i=this.Radius):(r=4,c=90+(d=p[s=t-4])*s/2,i=this.Radius+h);for(var S=0;S<=s;S++)e(S+r,i,(a=c-d*S)*o,a-90,100*(u-f)+S+n.CARD)}},e.prototype.upCardByIndex=function(t){var e=this.allHandCard[t];if(e){var a=this.allHandCard.length,o=C.MathUtils.ANGLE_TO_RADIAN,i=0,r=0,n=0,s=0,c=0;t>3?(r=t-4,n=a-4,i=this.Radius+this.RadiusOffset+50,s=90+(c=[0,7,7,7,7,7,7][n])*n/2):(r=t,n=Math.min(4,a)-1,i=this.Radius+50,s=90+(c=[0,7,7,7,7,7,7][n])*n/2);var d=s-c*r,l=d*o,p=this.allHandCardInfo[t];return p.pos=C.MathUtils.pointAtCircle(this.circlePos.x,this.circlePos.y,l,i),p.angle=d-90,p.zIndex=100+r,e.cardPosInfo=p,e.moveToUpPosition(m.ScopaConstant.UP_OUT_CARD_TIME),p}},e.prototype.initCardByLogicData=function(t){this.clear();for(var e,a=t.length,o=this.allHandCardInfo,i=0;i<a;i++){var r=o[i];(e=this.getNewCard()).init({meta:t[i],posInfo:r}),e.node.zIndex=r.zIndex,this.allHandCard.push(e)}},e.prototype.selectCardByIndx=function(t){var e=null,a=this.allHandCard,o=a.length;return t>=0&&t<o&&(e=a[t]),e},e.prototype.removeCardItemByIndx=function(t){var e=this.getCardItemByIndex(t);e&&(p.NodePoolMgr.getInstance().getPool(_.UIMyHandPoker.NAME).put(e.node),this.allHandCard.splice(t,1),this.hideCardLight(),this.initHandCardsPosition(!1),this.allCardMoveToFinalPos())},e.prototype.doOutCardAction=function(t,e,a,o){var i=this,r=this.getCardItemByIndex(t);if(!r)return!1;var n=this.ui.getDataDelegate(),c=r.cardData.o;if(e&&(a=n.getThrowCardIndex(c,!0))===s.PosState.MergePos&&!1===n.isCardCanOut(c))return!1;(o=o||r.cardPosInfo.copy()).pos=cc.v2(r.node.parent.convertToWorldSpaceAR(o.pos));var d=0;return this.allHandCard.length>1&&(d=m.ScopaConstant.UP_CARD_STOP_TIME),cc.tween(this.node).delay(d).call(function(){i.removeCardItemByIndx(t),i.throwCard(c,o,e,a)}).start(),!0},e.prototype.throwCard=function(t,e,a,o){this.dispatch(y.GameEvent.HandCard.DESK_CARD_THROW,{viewId:0,cardData:t,fromPos:e,isOutCardMySelf:a,throwCardIndex:o}),this.dispatch(d.Notify.Base.PLAY_EFFECT,{path:c.AudioFile.Game.OUT_CARD})},e.prototype.allCardMoveToUpPos=function(){var t=this,e=this.allHandCard.length;this.regCardPosition(e,function(e,a,o){var i=a+50,r=t.allHandCard[e];r&&(r.cardPosInfo.pos=C.MathUtils.pointAtCircle(t.circlePos.x,t.circlePos.y,o,i))});for(var a=0;a<e;a++)this.allHandCard[a].moveToUpPosition(m.ScopaConstant.UP_OUT_CARD_TIME);return e},e.prototype.allCardMoveToFinalPos=function(){for(var t=0;t<this.allHandCard.length;t++){var e=this.allHandCard[t];e.node.zIndex=this.allHandCardInfo[t].zIndex,e.setFinalPos(this.allHandCardInfo[t].pos,!0),e.setFinalAngle(this.allHandCardInfo[t].angle,!0),e.moveToFinalPosition()}},e.prototype.handCardRefreash=function(t){this.initHandCardsPosition(!0),this.initCardByLogicData(t),this.bSendCardFinished=!0},e.prototype.showCardLight=function(){if(this.bNeedShowLight=!0,this.bSendCardFinished&&this.sfLight)for(var t=this.allHandCard.length,e=0;e<t;e++){var a=this.allHandCard[e];if(a){if(!this.cardLights[e]){var o=(new cc.Node).addComponent(cc.Sprite);o.spriteFrame=this.sfLight.clone(),o.node.parent=this.node,o.node.zIndex=n.CARD_BG_LIGHT+e,o.node.scaleY=a.node.scale,o.node.scaleX=a.getFrontScale(),this.cardLights[e]=o}this.cardLights[e].node.active=!0,this.cardLights[e].node.angle=a.node.angle,this.cardLights[e].node.position=a.node.position,a.showNoShadowFront()}}},e.prototype.hideCardLight=function(){this.bNeedShowLight=!1;for(var t=0;t<this.cardLights.length;t++){this.cardLights[t]&&(this.cardLights[t].node.active=!1);var e=this.allHandCard[t];e&&e.showShadowFront()}},e.prototype.clear=function(){this.curSendOverCardNum=0,this.bSendCardFinished=!1,this.bNeedShowLight=!1,this.clearHandCard()},e.prototype.cardBeHold=function(t,e){var a=this.getCardItemByIndex(t);return a&&a.setBeHold(e),a},e.prototype.holdCardOn=function(t,e){this.clearHoldCard();var a=this.cardBeHold(t,!0);if(a){var o=this.node.convertToNodeSpaceAR(e);this.createHoldCard(a,o),this.pHoldCard.holdOn()}},e.prototype.createHoldCard=function(t,e){var a=0;return this.pfMyHandCard?(this.pHoldCard=this.getNewCard(),this.pHoldCard?(this.pHoldCard.init({meta:t.cardData,posInfo:t.cardPosInfo}),this.pHoldCard.node.zIndex=n.HOLD_CARD,this.pHoldCard.node.x=e.x,this.pHoldCard.node.y=e.y):a=1):a=2,a>0&&h.Logger.error(" UITouchHandCard holdCardOn errorCode is "+a+" "+["this.pfMyHandCard is null "," can not instantiate this.holdCardPrefab  "][a]),this.pHoldCard},e.prototype.clearHoldCard=function(){this.pHoldCard&&(this.pHoldCard.clear(),this.unuseCards.push(this.pHoldCard),this.pHoldCard=null)},e.prototype.holdCardMove=function(t){if(this.pHoldCard){var e=this.pHoldCard.node.parent.convertToNodeSpace(t);this.pHoldCard.node.setPosition(e)}},e.prototype.holdCardOff=function(){this.clearHoldCard(),this.cardBeHold(this.curSelectCardIndx,!1)},e.prototype.getHoldCardPosInfo=function(){if(this.pHoldCard){var t=this.pHoldCard.cardPosInfo.copy();return t.pos=this.pHoldCard.node.parent.convertToWorldSpace(cc.v2(this.pHoldCard.node.position)),t}return null},e.prototype.doRedealCard=function(t){for(var e,a=this,o=cc.v3(t.pos),i=this.allHandCard,r=function(t){var r=i[t];r&&(e=.16*t,cc.tween(r.node).delay(e).parallel(cc.tween().to(.23,{scaleX:.1,scaleY:.6}).to(.03,{scaleX:.15,scaleY:.75}).call(function(){r.showBack()}).to(.23,{scaleX:.6,scaleY:.6}),cc.tween().to(.5,{x:o.x,y:o.y,angle:0}),cc.tween().call(function(){a.dispatch(y.GameEvent.Voice.PLAY_EFFECT_OTHER,c.AudioFile.Game.SEND_CARD)})).set({active:!1}).start())},n=i.length-1;n>=0;n--)r(n)},e.prototype.doSendCardActionEnd=function(){this.bSendCardFinished=!0,this.bNeedShowLight&&this.showCardLight()},e.prototype.doChangeCardAction=function(t,e){var a=this;this.allHandCard?(this.dispatch(y.GameEvent.Voice.PLAY_EFFECT_OTHER,c.AudioFile.Game.SWITCH_CARDS),this.allHandCard.forEach(function(o,i){var r=t[i],n=o.getComponent(_.UIMyHandPoker);r?(cc.Tween.stopAllByTarget(o.node),o.node.scaleX=1,cc.tween(o.node).to(.13,{scaleX:0}).call(function(){n.showBack(),n.adaptBackSizeWithFront()}).to(.13,{scaleX:1},{easing:cc.easing.sineOut}).delay(.34).parallel(cc.tween(o.node).to(.13,{scaleX:0},{easing:cc.easing.sineOut}),cc.tween(o.node).by(.13,{y:10})).call(function(){n.createPokerCard(S.LocalCardSt.get(r)),n.showFront(),n.backSizeRecover()}).parallel(cc.tween(o.node).to(.26,{scaleX:1},{easing:cc.easing.sineOut}),cc.tween(o.node).by(.26,{y:-10})).call(function(){i==a.allHandCard.length-1&&e&&e()}).start()):cc.error("\u6362\u724c\u6570\u636e\u4e0d\u5b58\u5728",t)})):cc.error("\u624b\u724c\u4e0d\u5b58\u5728")},r([I({type:cc.Prefab,tooltip:"\u624b\u724c"})],e.prototype,"pfMyHandCard",void 0),r([I({type:cc.SpriteFrame,tooltip:"\u9ec4\u5149"})],e.prototype,"sfLight",void 0),r([E],e)}(l.CxCompExt);a.UIMyHandCardList=D,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/manager/NodePoolMgr":void 0,"../../../../script/lib/utils/Display":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../../script/lib/utils/MathUtils":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/model/ScopaConstant":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIMyHandPoker":"UIMyHandPoker","./UIMyHandPokerView":"UIMyHandPokerView"}],UIMyHandPokerView:[function(t,e,a){"use strict";cc._RF.push(e,"d26f92ib/5CL7C5knUODwO5","UIMyHandPokerView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIMyHandPokerView=void 0;var n=t("../../../../script/lib/utils/Logger"),s=t("../../../gameBaseSrc/alg/ScopaLogic"),c=t("../../../gameBaseSrc/model/GameEvent"),d=t("../../../gameBaseSrc/view/base/BaseHandCardsView"),l=t("./UIMyHandCardList"),p=t("./UISingleCardTouchBehavior"),u=cc._decorator,h=u.ccclass,C=(u.property,function(t){function e(){var e=t.call(this)||this;return e._curSelectCardIndex=-1,e.isSelectOutCardAndWaitServer=!1,e._isSendingCard=!1,e.viewId=0,e.handCardLSDatas=[],e}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.curDisplayMode=e.curDisplayMode},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.pCardList=this.getComponent(l.UIMyHandCardList),this.pCardList&&this.pCardList.init(),this._pTouchBehavior=this.getComponent(p.default),this._pTouchBehavior&&this._pTouchBehavior.init()},e.prototype.isSendingCard=function(){return this._isSendingCard},e.prototype.sortHandCards=function(){},e.prototype.onStartSendCard=function(){this.clear(),this._pTouchBehavior.setCanTouch(!1),this._pTouchBehavior.setMeCanOutCard(!1),this._isSendingCard=!0},e.prototype.onEndSendCard=function(){this.node.stopAllActions(),this.curSendOverCardNum=0,this._pTouchBehavior.setCanTouch(!0),this._isSendingCard=!1},e.prototype.onChangeCardsStart=function(t){var e=this;0==t.viewId&&(this.pCardList.hideCardLight(),this._pTouchBehavior.setCanTouch(!1),this._pTouchBehavior.setMeCanOutCard(!1),this.dispatch(c.GameEvent.Effect.CHANGE_CARDS_ANIM,t.viewId),this.pCardList.doChangeCardAction(t.allHandCardDatas[t.viewId],function(){e.dispatch(c.GameEvent.HandCard.STOP_CTL_CHANGE_CARDS,{viewId:t.viewId})}))},e.prototype.onChangeCardsEnd=function(t){0==t.viewId&&(this.dispatch(c.GameEvent.Desk.CHANGE_SNEDCARD_STATUS,{sendFinish:!0}),this.playDataDelegate.isViewIdCanOutCard(t.viewId)&&(this.pCardList.showCardLight(),this._pTouchBehavior.setCanTouch(!0),this._pTouchBehavior.setMeCanOutCard(!0)))},e.prototype.onSendingCard=function(t){this.clear(),this._pTouchBehavior.setCanTouch(!1),s.LocalCardSt.put(this.handCardLSDatas),this.handCardLSDatas=null,this.handCardLSDatas=s.ScopaLogic.bytesToLocal(t.cardDatas),this.pCardList&&this.pCardList.doSendCardAction(t)},e.prototype.doOutCard=function(t,e){this.dispatch(c.GameEvent.OperateEvent.OUT_CARD_SELF,{outCard:t,eatCards:e}),this._pTouchBehavior.setCanTouch(!1),this._pTouchBehavior.setMeCanOutCard(!1)},e.prototype.outHandCardItemByIndex=function(t,e,a,o){var i=null;if(0==this.isSelectOutCardAndWaitServer&&this.pCardList){this.isSelectOutCardAndWaitServer=!0;var r=this.pCardList.getCardItemByIndex(t);r&&(this.pCardList.doOutCardAction(t,a,e,o),i=r.cardData.o,this.pCardList.hideCardLight(),this.pCardList.clearCardFlag())}return i},e.prototype.selectCancelAndResortCard=function(t,e){this._curSelectCardIndex=-1,this.pCardList&&(this.pCardList.initHandCardsPosition(!1),this.pCardList.orderHandCard(t,e),this.pCardList.selectCancle()),this.dispatch(c.GameEvent.HandCard.MY_HAND_CARD_SELECT,{isSelect:!1}),this.dispatch(c.GameEvent.Com.CARD_HIGH_LIGHT_ORANGE,{isDisplay:!1})},e.prototype.checkHandCardCorrect=function(t){var e=!0,a=this.pCardList.allHandCard;if(a.length==t.length)for(var o=0;o<a.length;o++){var i=a[o],r=i.cardData;if(i&&r&&r.r!=t[o].r){e=!1;break}}else e=!1;return e},e.prototype.outCardByServerData=function(t,e){this.outHandCardItemByIndex(this.pCardList.getCardItemIndexByData(t),e,!1)},e.prototype.outCardByTouch=function(t,e){var a=this.outHandCardItemByIndex(t,-2,!0,e);return a?(this.doOutCard(a),!0):(n.Logger.error("not found cardIndx="+t+" carddata"),!1)},e.prototype.operateResult=function(){0==this.checkHandCardCorrect(this.handCardLSDatas)&&(n.Logger.error("UIMyHandCardView \u624b\u724c\u6570\u636e\u6709\u8bef\uff0c\u91cd\u7f6e\uff01\uff01\uff01"),this.handCardRefreash(),this.pCardList&&(this.pCardList.setCurSelectCardIndx(-1),this.pCardList.orderHandCard(!1,!1),this.pCardList.selectCancle(),this.pCardList.hideCardLight()))},e.prototype.updateData=function(t){this._isSendingCard=!1,this.handCardLSDatas=[],t.handCardDatas&&(s.LocalCardSt.put(this.handCardLSDatas),this.handCardLSDatas=null,this.handCardLSDatas=s.ScopaLogic.bytesToLocal(t.handCardDatas||[],!0,!0))},e.prototype.setCurSelectCardIndex=function(t){this._curSelectCardIndex=t},e.prototype.getCurSelectCardIndex=function(){return this._curSelectCardIndex},e.prototype.handCardRefreash=function(){this.pCardList&&this.pCardList.handCardRefreash(this.handCardLSDatas)},e.prototype.getCurHandCardDatas=function(){return this.handCardLSDatas},e.prototype.outCardResult=function(t){s.LocalCardSt.put(this.handCardLSDatas),this.handCardLSDatas=null,this.pCardList.holdCardOff(),this.handCardLSDatas=s.ScopaLogic.bytesToLocal(t.handCardDatas),0==this.isSelectOutCardAndWaitServer&&this.outCardByServerData(t.outCardData,t.throwCardIndex),this.isSelectOutCardAndWaitServer=!1,this._pTouchBehavior.setMeCanOutCard(!1),this._pTouchBehavior.setCanTouch(!1)},e.prototype.clearHandCard=function(){this.pCardList&&this.pCardList.clearHandCard()},e.prototype.clear=function(){t.prototype.clear.call(this),this.clearHandCard()},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Base.GAME_RESULT,this.onGameEnd),this.bindEvent(c.GameEvent.HandCard.SET_CAN_TOUCH,this.onSetCanTouch),this.bindEvent(c.GameEvent.HandCard.UPDATE_DATA,this.onUpdateData),this.bindEvent(c.GameEvent.HandCard.PLAYER_OUT_CARD_RESULT,this.onGameOutCard),this.bindEvent(c.GameEvent.HandCard.PLAYER_OP_RESULT,this.onGameOpResult),this.bindEvent(c.GameEvent.HandCard.SCENE_PLAYING,this.doScenePlaying),this.bindEvent(c.GameEvent.Com.SET_DATA_DELEGATE,this.setDataDelegate)},e.prototype.onGameEnd=function(){this.pCardList&&(this.pCardList.selectCancle(),this.pCardList.clearCardFlag()),this.isSelectOutCardAndWaitServer=!1,this._pTouchBehavior.setCanTouch(!1),this.selectCancelAndResortCard(!1,!1)},e.prototype.onUpdateData=function(t){0==t.viewId&&this.updateData({handCardDatas:t.handCardDatas})},e.prototype.onSetCanTouch=function(t){this._pTouchBehavior.setCanTouch(t),this._pTouchBehavior.setMeCanOutCard(t)},e.prototype.getCanTouch=function(){return this._pTouchBehavior.getCanTouch()},e.prototype.onGameOutCard=function(t){void 0!==t&&null!=t&&t!=={}&&0==t.viewId&&this.outCardResult(t)},e.prototype.onGameOpResult=function(t){void 0!==t&&null!=t&&t!=={}&&t.viewId==this.viewId&&(s.LocalCardSt.put(this.handCardLSDatas),this.handCardLSDatas=null,this.handCardLSDatas=s.ScopaLogic.bytesToLocal(t.handCardDatas),this.operateResult())},e.prototype.doScenePlaying=function(t){this.updateData({handCardDatas:t.allHandCardDatas[0]}),this.pCardList.hideCardLight(),this.isSelectOutCardAndWaitServer=!1,this.handCardRefreash()},e.prototype.onInformPlayerOp=function(t){0===t.curOperateViewId?(this._pTouchBehavior.setCanTouch(!0),this._pTouchBehavior.setMeCanOutCard(!0),this.isSelectOutCardAndWaitServer=!1,this.pCardList&&this.pCardList.showCardLight()):this.pCardList&&(this.pCardList.hideCardLight(),this.pCardList.grayCardsAll(!1))},e.prototype.onRedealCard=function(t){0==t.viewId&&this.pCardList.doRedealCard(t)},r([h],e)}(d.BaseHandCardsView));a.UIMyHandPokerView=C,cc._RF.pop()},{"../../../../script/lib/utils/Logger":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/base/BaseHandCardsView":void 0,"./UIMyHandCardList":"UIMyHandCardList","./UISingleCardTouchBehavior":"UISingleCardTouchBehavior"}],UIMyHandPoker:[function(t,e,a){"use strict";cc._RF.push(e,"51d99egxPtAnaWZf8ezc1DJ","UIMyHandPoker");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIMyHandPoker=void 0;var n,s=t("../../../gameBaseSrc/model/ScopaConstant"),c=t("../../../gameBaseSrc/view/PokerCreator"),d=t("./UIPokerCardBase");(function(t){t[t.ZZ_N=255]="ZZ_N",t[t.ZZ_P=255]="ZZ_P",t[t.ZZ_S=0]="ZZ_S"})(n||(n={}));var l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._unTouch=!1,e._selected=!1,e._preSelected=!1,e._canSelectd=!0,e}return i(e,t),e.prototype.setSelected=function(t,e){void 0===e&&(e=!1),this.canTouch()&&(t?this.spGrayMask&&(this.spGrayMask.node.active=!1):this.spGrayMask&&this._canSelectd&&(this.spGrayMask.node.opacity=n.ZZ_S,this.spGrayMask.node.active=!0),this._selected!=t&&(this.node.stopAllActions(),this._selected=t,null==this.finalPos&&(this.finalPos=cc.v2(this.node.x,this.node.y)),t?e?this.node.setPosition(this.finalPos.x+this.getOffsetX(c.PokerCreator.POKER_SELECTED_OFF_Y),this.finalPos.y+this.getOffsetY(c.PokerCreator.POKER_SELECTED_OFF_Y)):this.node.runAction(cc.moveTo(.06,cc.v2(this.finalPos.x+this.getOffsetX(c.PokerCreator.POKER_SELECTED_OFF_Y),this.finalPos.y+this.getOffsetY(c.PokerCreator.POKER_SELECTED_OFF_Y)))):e?this.node.setPosition(this.finalPos):this.node.runAction(cc.moveTo(.06,this.finalPos))))},e.prototype.isSelected=function(){return this._selected},e.prototype.setPreSelected=function(t){this.canTouch()&&(this._preSelected=t,t?this.spGrayMask&&(this.spGrayMask.node.opacity=n.ZZ_P,this.spGrayMask.node.active=!0):this.spGrayMask&&this._canSelectd&&(this.isSelected()?(this.spGrayMask.node.active=!1,this.spGrayMask.node.opacity=n.ZZ_S):(this.spGrayMask.node.active=!0,this.spGrayMask.node.opacity=n.ZZ_S)))},e.prototype.isPreSelected=function(){return this._preSelected},e.prototype.setCanSelect=function(t){if(this._canSelectd=t,this.spGrayMask){var e=c.PokerCreator.sPokerAltas;this.spGrayMask.node.active=!t,this.spGrayMask.spriteFrame=e.getSpriteFrame(t?"poker_mask_blue":"poker_mask"),this.spGrayMask.node.opacity=t?n.ZZ_S:n.ZZ_N}},e.prototype.isCanSelect=function(){return this._canSelectd},e.prototype.clearPreSelected=function(){this._preSelected=!1,this.spGrayMask&&this._canSelectd&&(this.isSelected()?(this.spGrayMask.node.active=!1,this.spGrayMask.node.opacity=n.ZZ_S):(this.spGrayMask.node.active=!0,this.spGrayMask.node.opacity=n.ZZ_S))},e.prototype.dealWithPreEvent=function(){return!(!this._preSelected||!this.isSelected()||(this.setSelected(!1),this.clearPreSelected(),0))},e.prototype.setUp=function(t,e,a,o){this.node.stopAllActions(),t?e?cc.tween(this.node).delay(o||0).to(a||.06,{position:cc.v3(this.finalPos.x+this.getOffsetX(56),this.finalPos.y+this.getOffsetY(56))}).to(.06,{position:cc.v3(this.finalPos.x+this.getOffsetX(50),this.finalPos.y+this.getOffsetY(50))}).start():(this.node.x=this.finalPos.x+this.getOffsetX(50),this.node.y=this.finalPos.y+this.getOffsetY(50)):e?cc.tween(this.node).delay(o||0).to(a||.1,{position:cc.v3(this.finalPos.x,this.finalPos.y)}).start():this.node.y=this.finalPos.y},e.prototype.setUnTouch=function(t){this._unTouch=t},e.prototype.canTouch=function(){return!this._unTouch},e.prototype.touch=function(t){return!0===this.node.getBoundingBoxToWorld().contains(t)&&this.canTouch()},e.prototype.moveToUpPosition=function(t){this.node.stopAllActions();var e=t||s.ScopaConstant.UP_OUT_CARD_TIME,a=this.cardPosInfo.pos,o=this.cardPosInfo.angle,i=this.cardPosInfo.scale;cc.tween(this.node).to(e,{position:cc.v3(a),angle:o,scale:i},{easing:cc.easing.quadOut}).start()},e.prototype.displayLightOrange=function(){},e.prototype.sendCardFlip=function(t){var e=this;cc.tween(this.node).delay(t||0).set({scaleX:.7,scaleY:.2}).call(function(){e.createPokerCard(e.cardData)}).to(.1,{scaleX:1,scaleY:1}).delay(.2).call(function(){e.moveToFinalPosition(.3)}).start()},e.prototype.setBeHold=function(t){this.node.opacity=t?0:255},e.prototype.holdOn=function(){},e.prototype.doCanNotOut=function(){cc.tween(this.node).set({scale:1}).to(.2,{scale:1.08}).to(.5,{scale:1.08}).to(.2,{scale:1}).start()},e.prototype.clearFlag=function(){},e.prototype.clear=function(){t.prototype.clear.call(this),this._unTouch=!1,this._selected=!1,this._canSelectd=!0,this._preSelected=!1},e.NAME="UIMyHandPoker",r([p],e)}(d.UIPokerCardBase));a.UIMyHandPoker=u,cc._RF.pop()},{"../../../gameBaseSrc/model/ScopaConstant":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./UIPokerCardBase":"UIPokerCardBase"}],UIOthersHandCardsView:[function(t,e,a){"use strict";cc._RF.push(e,"318e1fmvMFIOqraB5OE0XZZ","UIOthersHandCardsView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIOthersHandCardsView=void 0;var n=t("../../../../script/app/const/game/GameConstant"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../../script/lib/manager/NodePoolMgr"),d=t("../../../../script/lib/utils/Logger"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("../poker/UIPokerCardBase"),u=cc._decorator,h=u.ccclass,C=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfHandcards=null,e.playerCardsList=[],e}return i(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(l.GameEvent.HandCard.PLAYER_OUT_CARD_RESULT,this.onGameOutCard),this.bindEvent(l.GameEvent.HandCard.PLAYER_OP_RESULT,this.onGameOpResult),this.bindEvent(l.GameEvent.HandCard.SCENE_PLAYING,this.doScenePlaying),this.bindEvent(l.GameEvent.HandCard.UPDATE_DATA,this.onUpdateData),this.bindEvent(l.GameEvent.Base.DESK_BASE_CONFIG,this.onDeskBaseConfig),this.bindEvent(l.GameEvent.Com.SET_DATA_DELEGATE,this.setDataDelegate)},e.prototype.setDataDelegate=function(t){this.playDataDelegate=t},e.prototype.getDataDelegate=function(){return this.playDataDelegate},e.prototype.start=function(){this.pfHandcards||d.Logger.error("UIOthersHandCardsView not found pfHandcards")},e.prototype.onDestroy=function(){this.playerCardsList&&(this.playerCardsList=null),c.NodePoolMgr.getInstance().clearPool(p.UIPokerCardBase.NAME),t.prototype.onDestroy.call(this)},e.prototype.onDeskBaseConfig=function(t){this.initPlayerCards(t)},e.prototype.removeAll=function(){this.clear(),this.playerCardsList&&(this.playerCardsList.forEach(function(t){t.node.destroy()}),this.playerCardsList=[])},e.prototype.initPlayerCards=function(t){var e=this;this.removeAll(),this.playerCardsList=[],(2===t.maxPlayerNum?["UIPlayerCardsView_2"]:3===t.maxPlayerNum?["UIPlayerCardsView_1","UIPlayerCardsView_3"]:["UIPlayerCardsView_1","UIPlayerCardsView_2","UIPlayerCardsView_3"]).forEach(function(a){var o=cc.instantiate(e.pfHandcards),i=null;(i=o.getComponent(a))||(i=o.addComponent(a)),i.init({curDisplayMode:t.curDisplayMode||n.GameConstant.HandCardMode.NORMAL}),i.setDataDelegate(e.getDataDelegate()),o.x=0,o.y=0,e.node.addChild(o),e.playerCardsList.push(i)})},e.prototype.getPlayerCardsByViewId=function(t){for(var e=0;e<this.playerCardsList.length;e++){var a=this.playerCardsList[e];if(a&&a.getViewId()==t)return a}return null},e.prototype.doScenePlaying=function(t){this.clear();for(var e=0,a=this.playerCardsList;e<a.length;e++){var o=a[e],i=o.getViewId();o.updateData({handCardDatas:t.allHandCardDatas[i]}),o.handCardRefreash()}},e.prototype.clear=function(){if(this.node.stopAllActions(),this.playerCardsList)for(var t=0,e=this.playerCardsList;t<e.length;t++)e[t].clear()},e.prototype.onGameMoCard=function(t){if(t.viewId>0){var e=this.getPlayerCardsByViewId(t.viewId);e&&e.updateData(t)}},e.prototype.onGameOutCard=function(t){if(t.viewId>0){var e=this.getPlayerCardsByViewId(t.viewId);e&&(e.updateData(t),e.outCardResult(t))}},e.prototype.onGameOpResult=function(t){if(t.viewId>0){var e=this.getPlayerCardsByViewId(t.viewId);e&&(e.updateData(t),e.operateResult(t))}},e.prototype.refreshHandCard=function(t){if(t>0){var e=this.getPlayerCardsByViewId(t);e&&e.handCardRefreash()}},e.prototype.onUpdateData=function(t){if(t.viewId>0){var e=this.getPlayerCardsByViewId(t.viewId);e&&e.updateData({handCardDatas:t.handCardDatas})}},r([C(cc.Prefab)],e.prototype,"pfHandcards",void 0),r([h],e)}(s.CxCompExt);a.UIOthersHandCardsView=f,cc._RF.pop()},{"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/manager/NodePoolMgr":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase"}],UIPlayerCardsViewBase:[function(t,e,a){"use strict";cc._RF.push(e,"f9b41u/q+1MPpCv6CJSuNQx","UIPlayerCardsViewBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIPlayerCardsViewBase=void 0;var n=t("../../../gameBaseSrc/alg/ScopaLogic"),s=t("../../../gameBaseSrc/model/GameEvent"),c=t("../../../gameBaseSrc/view/base/BaseHandCardsView"),d=cc._decorator,l=d.ccclass,p=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ZIndex={CARD_BG_LIGHT:0,CARD:1e3},e}return i(e,t),e.prototype.onStartSendCard=function(){this.clear()},e.prototype.onEndSendCard=function(){this.node.stopAllActions(),this.curSendOverCardNum=0},e.prototype.onSendingCard=function(t){t.viewId===this.viewId&&(this.clear(),n.LocalCardSt.put(this.handCardLSDatas),this.handCardLSDatas=null,this.handCardLSDatas=n.ScopaLogic.bytesToLocal(t.cardDatas),this.pCardList&&this.pCardList.doSendCardAction(t))},e.prototype.onChangeCardsStart=function(t){0!=t.viewId&&(this.dispatch(s.GameEvent.Effect.CHANGE_CARDS_ANIM,t.viewId),this.pCardList.doChangeCardAction(null,null))},e.prototype.onChangeCardsEnd=function(){},e.prototype.onRedealCard=function(t){t.viewId==this.viewId&&this.pCardList.doRedealCard(t)},e.prototype.sendCardEnd=function(){},e.prototype.handCardRefreash=function(){this.pCardList&&this.pCardList.handCardRefreash(this.handCardLSDatas)},e.prototype.clearHandCard=function(){this.pCardList&&this.pCardList.clearHandCard()},e.prototype.clear=function(){t.prototype.clear.call(this),this.clearHandCard()},e.prototype.getCurHandCardDatas=function(){return this.handCardLSDatas},e.prototype.operateResult=function(){},e.prototype.updateData=function(t){n.LocalCardSt.put(this.handCardLSDatas),this.handCardLSDatas=null,this.handCardLSDatas=n.ScopaLogic.bytesToLocal(t.handCardDatas)},e.prototype.onInformPlayerOp=function(){},r([l],e)}(c.BaseHandCardsView));a.UIPlayerCardsViewBase=p,cc._RF.pop()},{"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/base/BaseHandCardsView":void 0}],UIPlayerCardsView_1:[function(t,e,a){"use strict";cc._RF.push(e,"77fb9I8vPpEZaD2A5oaquLp","UIPlayerCardsView_1");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIPlayerCardsView_1=void 0;var n=t("../../../../script/app/const/AudioFile"),s=t("../../../../script/app/const/game/GameConstant"),c=t("../../../../script/app/event/Notify"),d=t("../../../../script/lib/utils/Display"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("../../../gameBaseSrc/view/PokerCreator"),u=t("./UIPlayerCardsViewBase"),h=t("./UIPlayerHandCardList"),C=cc._decorator,f=C.ccclass,S=(C.property,function(t){function e(){var e=t.call(this)||this;return e.viewId=1,e.handCardLSDatas=[],e.curSendOverCardNum=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.pCardList=this.getComponent(h.UIPlayerHandCardList),this.startPos=cc.v2(d.Display.width,d.Display.cy)},e.prototype.regCardPosition=function(t){var e=p.PokerCreator.POKER_SMALL_CARD_WIDTH+(t-1)*p.PokerCreator.POKER_SMALL_CARD_OFF_X,a=cc.v2(this.startPos.x,this.startPos.y-e/2);this.allHandCardInfo=[];for(var o=0;o<t;o++){var i=cc.v2(a.x,a.y+(o-1)*p.PokerCreator.POKER_SMALL_CARD_OFF_X);this.allHandCardInfo[o]=this.allHandCardInfo[o]||p.CardPosInfo.get(),this.allHandCardInfo[o].pos=i,this.allHandCardInfo[o].angle=90,this.allHandCardInfo[o].zIndex=o+this.ZIndex.CARD}},e.prototype.outCardResult=function(t){var e=t.outCardData,a=e.throwCardIndex,o=null;if(null!=(o=this.curDisplayMode==s.GameConstant.HandCardMode.DISPLAY?this.pCardList.getCardItemByData(e):this.pCardList.getCardItemByIndex(this.pCardList.getCardNum()-1))){var i=o.node.parent,r=cc.Vec3.ZERO;null!=i&&(r=i.convertToWorldSpaceAR(o.node.position));var d=o.cardPosInfo.copy();d.pos=cc.v2(r).add(cc.v2(60,0)),d.scale=.64,this.dispatch(l.GameEvent.HandCard.DESK_CARD_THROW,{viewId:this.viewId,cardData:e,fromPos:d,isOutCardMySelf:!1,throwCardIndex:a}),this.dispatch(c.Notify.Base.PLAY_EFFECT,{path:n.AudioFile.Game.OUT_CARD})}this.curDisplayMode==s.GameConstant.HandCardMode.NORMAL?this.pCardList.removeCardItemByIndex(this.pCardList.getCardNum()-1):this.pCardList.removeCardItemByCardData(e)},r([f],e)}(u.UIPlayerCardsViewBase));a.UIPlayerCardsView_1=S,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/lib/utils/Display":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./UIPlayerCardsViewBase":"UIPlayerCardsViewBase","./UIPlayerHandCardList":"UIPlayerHandCardList"}],UIPlayerCardsView_2:[function(t,e,a){"use strict";cc._RF.push(e,"f68b2ERgH1PcrcwhMoH6uW8","UIPlayerCardsView_2");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIPlayerCardsView_2=void 0;var n=t("../../../../script/app/const/AudioFile"),s=t("../../../../script/app/const/game/GameConstant"),c=t("../../../../script/app/event/Notify"),d=t("../../../../script/lib/utils/Display"),l=t("../../../gameBaseSrc/alg/ScopaLogic"),p=t("../../../gameBaseSrc/model/GameEvent"),u=t("../../../gameBaseSrc/view/PokerCreator"),h=t("./UIPlayerCardsViewBase"),C=t("./UIPlayerHandCardList"),f=cc._decorator,S=f.ccclass,y=(f.property,function(t){function e(){var e=t.call(this)||this;return e.viewId=2,e.handCardLSDatas=[],e.curSendOverCardNum=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.startPos=cc.v2(d.Display.cx,d.Display.height-161-u.PokerCreator.POKER_SMALL_CARD_HEIGHT/2-d.Display.paddingTop),this.pCardList=this.getComponent(C.UIPlayerHandCardList)},e.prototype.regCardPosition=function(t){var e=u.PokerCreator.POKER_SMALL_CARD_WIDTH+(t-1)*u.PokerCreator.POKER_SMALL_CARD_OFF_X,a=cc.v2(this.startPos.x+e/2,this.startPos.y);this.allHandCardInfo=[];for(var o=0;o<t;o++){var i=cc.v2(a.x-o*u.PokerCreator.POKER_SMALL_CARD_OFF_X,a.y);this.allHandCardInfo[o]=this.allHandCardInfo[o]||u.CardPosInfo.get(),this.allHandCardInfo[o].pos=i,this.allHandCardInfo[o].angle=0,this.allHandCardInfo[o].zIndex=o+this.ZIndex.CARD,this.allHandCardInfo[o].scale=.6}},e.prototype.outCardResult=function(t){var e=this,a=t.outCardData,o=t.throwCardIndex,i=null;if(null!=(i=this.curDisplayMode==s.GameConstant.HandCardMode.DISPLAY?this.pCardList.getCardItemByData(a):this.pCardList.getCardItemByIndex(this.pCardList.getCardNum()-1))){var r=i.node.parent,d=cc.Vec3.ZERO;null!=r&&(d=r.convertToWorldSpaceAR(i.node.position));var u=i.cardPosInfo.copy();u.pos=cc.v2(d).sub(cc.v2(0,150)),u.scale=.45,cc.tween(i.node).delay(.03).set({zIndex:this.pCardList.getCardNum()}).call(function(){i.createPokerCard(l.LocalCardSt.get(a)),e.pCardList.hideCardLight(),e.dispatch(p.GameEvent.HandCard.DESK_CARD_THROW,{viewId:e.viewId,cardData:a,fromPos:u,isOutCardMySelf:!1,throwCardIndex:o}),e.curDisplayMode==s.GameConstant.HandCardMode.NORMAL?e.pCardList.removeCardItemByIndex(e.pCardList.getCardNum()-1):e.pCardList.removeCardItemByCardData(a),e.dispatch(c.Notify.Base.PLAY_EFFECT,{path:n.AudioFile.Game.OUT_CARD})}).start()}},r([S],e)}(h.UIPlayerCardsViewBase));a.UIPlayerCardsView_2=y,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/lib/utils/Display":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./UIPlayerCardsViewBase":"UIPlayerCardsViewBase","./UIPlayerHandCardList":"UIPlayerHandCardList"}],UIPlayerCardsView_3:[function(t,e,a){"use strict";cc._RF.push(e,"c5fe7sdKW5BBJxpVOn/sC6D","UIPlayerCardsView_3");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIPlayerCardsView_3=void 0;var n=t("../../../../script/app/const/AudioFile"),s=t("../../../../script/app/const/game/GameConstant"),c=t("../../../../script/app/event/Notify"),d=t("../../../../script/lib/utils/Display"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("../../../gameBaseSrc/view/PokerCreator"),u=t("./UIPlayerCardsViewBase"),h=t("./UIPlayerHandCardList"),C=cc._decorator,f=C.ccclass,S=(C.property,function(t){function e(){var e=t.call(this)||this;return e.viewId=3,e.handCardLSDatas=[],e.curSendOverCardNum=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.pCardList=this.getComponent(h.UIPlayerHandCardList),this.startPos=cc.v2(0,d.Display.cy)},e.prototype.regCardPosition=function(t){var e=p.PokerCreator.POKER_SMALL_CARD_WIDTH+(t-1)*p.PokerCreator.POKER_SMALL_CARD_OFF_X,a=cc.v2(this.startPos.x,this.startPos.y+e/2);this.allHandCardInfo=[];for(var o=0;o<t;o++){var i=cc.v2(a.x,a.y-(o-1)*p.PokerCreator.POKER_SMALL_CARD_OFF_X);this.allHandCardInfo[o]=this.allHandCardInfo[o]||p.CardPosInfo.get(),this.allHandCardInfo[o].pos=i,this.allHandCardInfo[o].angle=-90,this.allHandCardInfo[o].zIndex=t-o+this.ZIndex.CARD}},e.prototype.outCardResult=function(t){var e=t.outCardData,a=t.throwCardIndex,o=null;if(null!=(o=this.curDisplayMode==s.GameConstant.HandCardMode.DISPLAY?this.pCardList.getCardItemByData(e):this.pCardList.getCardItemByIndex(this.pCardList.getCardNum()-1))){var i=o.node.parent,r=cc.Vec3.ZERO;null!=i&&(r=i.convertToWorldSpaceAR(o.node.position));var d=o.cardPosInfo.copy();d.pos=cc.v2(r).sub(cc.v2(60,0)),d.scale=.64,this.dispatch(l.GameEvent.HandCard.DESK_CARD_THROW,{viewId:this.viewId,cardData:e,fromPos:d,isOutCardMySelf:!1,throwCardIndex:a}),this.dispatch(c.Notify.Base.PLAY_EFFECT,{path:n.AudioFile.Game.OUT_CARD})}this.curDisplayMode==s.GameConstant.HandCardMode.NORMAL?this.pCardList.removeCardItemByIndex(this.pCardList.getCardNum()-1):this.pCardList.removeCardItemByCardData(e)},r([f],e)}(u.UIPlayerCardsViewBase));a.UIPlayerCardsView_3=S,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/lib/utils/Display":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./UIPlayerCardsViewBase":"UIPlayerCardsViewBase","./UIPlayerHandCardList":"UIPlayerHandCardList"}],UIPlayerHandCardList:[function(t,e,a){"use strict";cc._RF.push(e,"3ba3e6tu1dFNoHLjJCvO4YI","UIPlayerHandCardList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIPlayerHandCardList=void 0;var n=t("../../../../script/app/const/AudioFile"),s=t("../../../../script/app/const/game/GameConstant"),c=t("../../../../script/lib/base/CxCompExt"),d=t("../../../../script/lib/manager/NodePoolMgr"),l=t("../../../../script/lib/utils/MathUtils"),p=t("../../../gameBaseSrc/alg/ScopaLogic"),u=t("../../../gameBaseSrc/model/GameEvent"),h=t("../poker/UIPokerCardBase"),C=t("./UIPlayerCardsViewBase"),f=cc._decorator,S=f.ccclass,y=f.property,m=function(t){function e(){var e=t.call(this)||this;return e.pfHandCard=null,e.cardLights=[],e.allHandCard=[],e.unuseCards=[],e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.ui=this.getComponent(C.UIPlayerCardsViewBase)},e.prototype.onDestroy=function(){this.ui&&(this.ui=null),d.NodePoolMgr.getInstance().clearPool(h.UIPokerCardBase.NAME),t.prototype.onDestroy.call(this),this.cardLights=null,this.allHandCard=null},e.prototype.getCardNum=function(){return this.allHandCard.length},e.prototype.hideAllCards=function(){for(var t=0,e=this.allHandCard;t<e.length;t++)e[t].node.active=!1},e.prototype.initCardPosition=function(t){var e;e=t?this.ui.getCurHandCardDatas().length:this.getCardNum(),this.ui.regCardPosition(e)},e.prototype.initCardByLogicData=function(t){var e;this.clear();for(var a=this.ui.allHandCardInfo,o=p.LocalCardSt.get(0),i=0;i<t.length;i++)this.ui.getCurDisplayMode()===s.GameConstant.HandCardMode.DISPLAY&&(o=t[i]),(e=this.getNewCard()).init({meta:o,posInfo:a[i]}),this.allHandCard.push(e)},e.prototype.clearHandCard=function(){for(var t=0,e=this.allHandCard;t<e.length;t++){var a=e[t];a.clear(),this.unuseCards.push(a)}this.allHandCard=[]},e.prototype.getCardItemByIndex=function(t){return t>=0&&t<this.allHandCard.length?this.allHandCard[t]:null},e.prototype.getCardItemIndexByData=function(t){for(var e=-1,a=this.allHandCard.length-1;a>=0;a--)if(this.allHandCard[a].cardData.r==t){e=a;break}return e},e.prototype.removeCardItemByIndex=function(t){var e=this.getCardItemByIndex(t);e&&(e.clear(),this.unuseCards.push(e),this.allHandCard.splice(t,1),this.initCardPosition(!1),this.allCardMoveToFinalPos())},e.prototype.doSendCardAction=function(t){var e=this;this.initCardPosition(!0),this.hideCardLight();var a=cc.v3(t.fromPos);a.x+=34,a.y+=100;for(var o,i,r=this.ui.getCurHandCardDatas(),s=this.ui.allHandCardInfo,c=[],d=null,h=0;h<r.length;h++){var C=s[h];c[h]=cc.v3(C.pos.x-15,C.pos.y),(d=this.getNewCard()).init({meta:p.LocalCardSt.get(0),posInfo:C}),d.node.position=a,d.node.scale=.6,d.node.opacity=0,this.allHandCard.push(d)}var f=this.allHandCard[0];f&&(o=l.MathUtils.lookAt(a,c[0]),i=0*t.spaceTime,cc.tween(f.node).delay(i).set({angle:o,opacity:255}).call(function(){e.dispatch(u.GameEvent.Voice.PLAY_EFFECT_OTHER,n.AudioFile.Game.SEND_CARD),e.dispatch(u.GameEvent.Desk.REDUCE_CARD_NUM,1)}).to(.47,{position:c[0],angle:0}).to(.33,{x:s[0].pos.x,y:s[0].pos.y,angle:s[0].angle},{easing:cc.easing.quadOut}).start());var S=this.allHandCard[1];S&&(o=l.MathUtils.lookAt(a,c[1]),i=1*t.spaceTime,cc.tween(S.node).delay(i).set({angle:o,opacity:255}).call(function(){e.dispatch(u.GameEvent.Voice.PLAY_EFFECT_OTHER,n.AudioFile.Game.SEND_CARD),e.dispatch(u.GameEvent.Desk.REDUCE_CARD_NUM,1)}).to(.47,{position:c[1],angle:0}).to(.33,{x:s[1].pos.x,y:s[1].pos.y,angle:s[1].angle},{easing:cc.easing.quadOut}).start());var y=this.allHandCard[2];y&&(o=l.MathUtils.lookAt(a,c[2]),i=2*t.spaceTime,cc.tween(y.node).delay(i).set({angle:o,opacity:255}).call(function(){e.dispatch(u.GameEvent.Voice.PLAY_EFFECT_OTHER,n.AudioFile.Game.SEND_CARD),e.dispatch(u.GameEvent.Desk.REDUCE_CARD_NUM,1)}).to(.47,{position:c[2],angle:0}).to(.33,{x:s[2].pos.x,y:s[2].pos.y,angle:s[2].angle},{easing:cc.easing.quadOut}).start())},e.prototype.allCardMoveToFinalPos=function(){for(var t=this.ui.allHandCardInfo,e=0;e<this.allHandCard.length;e++){var a=this.allHandCard[e];a.node.zIndex=this.ui.ZIndex.CARD+e,a.setFinalPos(t[e].pos,!0),a.moveToFinalPosition()}},e.prototype.doChangeCardAction=function(t,e){if(void 0===e&&(e=null),this.allHandCard&&0!=this.allHandCard.length){this.dispatch(u.GameEvent.Voice.PLAY_EFFECT_OTHER,n.AudioFile.Game.SWITCH_CARDS);var a=Math.floor(this.allHandCard.length/2),o=this.allHandCard[a].node.x;this.allHandCard.forEach(function(t){t.getComponent(h.UIPokerCardBase).mvToMidThenBack(o,e)})}else cc.error("\u5bf9\u65b9\u624b\u724c\u4e0d\u5b58\u5728",this.allHandCard)},e.prototype.handCardRefreash=function(t){this.initCardPosition(!0),this.initCardByLogicData(t)},e.prototype.clear=function(){this.clearHandCard()},e.prototype.getCardItemByData=function(t){for(var e=0;e<this.allHandCard.length;e++)if(this.allHandCard[e].cardData.r===t)return this.allHandCard[e];return null},e.prototype.removeCardItemByCardData=function(t){var e=this.getCardItemIndexByData(t);this.removeCardItemByIndex(e)},e.prototype.doRedealCard=function(t){for(var e,a=this,o=cc.v3(t.pos),i=this.allHandCard,r=0;r<i.length;r++){var s=i[r];s&&(e=.16*r,cc.tween(s.node).delay(e).call(function(){a.dispatch(u.GameEvent.Voice.PLAY_EFFECT_OTHER,n.AudioFile.Game.SEND_CARD)}).to(.5,{x:o.x,y:o.y,scaleX:.6,scaleY:.6}).set({active:!1}).start())}},e.prototype.showCardLight=function(){},e.prototype.hideCardLight=function(){for(var t=0;t<this.cardLights.length;t++)this.cardLights[t]&&(this.cardLights[t].node.active=!1)},e.prototype.getNewCard=function(){var t=this.unuseCards.shift();if(!t){var e=d.NodePoolMgr.getInstance().getPool(h.UIPokerCardBase.NAME).get();e||(e=cc.instantiate(this.pfHandCard)),(t=e.getComponent(h.UIPokerCardBase))||(t=e.addComponent(h.UIPokerCardBase))}return t.node.parent||(t.node.parent=this.node),t.node.active=!0,t},r([y({type:cc.Prefab,tooltip:"\u624b\u724c"})],e.prototype,"pfHandCard",void 0),r([S],e)}(c.CxCompExt);a.UIPlayerHandCardList=m,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/game/GameConstant":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/manager/NodePoolMgr":void 0,"../../../../script/lib/utils/MathUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase","./UIPlayerCardsViewBase":"UIPlayerCardsViewBase"}],UIPokerCardBase:[function(t,e,a){"use strict";cc._RF.push(e,"028dfQpaxlCTrLo5FbaHkQQ","UIPokerCardBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIPokerCardBase=void 0;var n=t("../../../gameBaseSrc/alg/ScopaLogic"),s=t("./../../../gameBaseSrc/model/GameInitConfig"),c=t("../../../gameBaseSrc/view/PokerCreator"),d=t("../../../../script/lib/base/CxCompExt"),l=t("../../../../script/lib/utils/ComUtils"),p=t("../../../../script/lib/utils/MathUtils"),u=t("../../../gameBaseSrc/alg/ScopaLogic"),h=t("../../../gameBaseSrc/model/ScopaConstant"),C=t("../../../gameBaseSrc/view/PokerCreator"),f=cc._decorator,S=f.ccclass,y=(f.property,function(t){function e(){var e=t.call(this)||this;return e.cardData=null,e.isShowBack=!1,e.hasNumber=!1,e.hasColor=!1,e._isDirty=!0,e._isInit=!1,e.cardData=null,e.finalScale=1,e.finalAngle=0,e.cardPosInfo=C.CardPosInfo.get(),e._isDirty=!0,e}var a;return i(e,t),a=e,e.prototype.reuse=function(){this.node.active=!0},e.prototype.unuse=function(){this.clear()},e.prototype.init=function(e){t.prototype.init.call(this),this.initCard(),this.clear(),this.hasNumber=s.GameInitConfig.isPokerHasNumber,this.hasColor=s.GameInitConfig.isPokerHasColor,this.cardPosInfo=C.CardPosInfo.get(),e.posInfo&&(this.cardPosInfo=this.cardPosInfo.parse(e.posInfo)),null!=this.cardPosInfo.pos&&(this.finalPos=this.cardPosInfo.pos,this.node.position=cc.v3(this.finalPos)),null!=this.cardPosInfo.angle&&(this.finalAngle=this.cardPosInfo.angle,this.node.angle=this.finalAngle),null!=this.cardPosInfo.scale&&(this.finalScale=this.cardPosInfo.scale,this.node.scale=this.finalScale),null!=this.cardPosInfo.zIndex&&(this.node.zIndex=this.cardPosInfo.zIndex),this.createPokerCard(e.meta),this._isDirty=!0},e.prototype.initCard=function(){if(!this._isInit){var t=this.node.getChildByName("sp_back");t&&(this.spBack=t.getComponent(cc.Sprite));var e=this.node.getChildByName("sp_front");if(e){this.spFront=e.getComponent(cc.Sprite);var a=e.getChildByName("sp_light");a&&(this.spLightMask=a.getComponent(cc.Sprite),this.spLightMask.node.active=!1)}var o=this.node.getChildByName("node"),i=o.getChildByName("sp_l_color");i&&(this.spLeftColor=i.getComponent(cc.Sprite),this.spLeftColor.node.active=!1);var r=o.getChildByName("sp_r_color");r&&(this.spRightColor=r.getComponent(cc.Sprite),this.spRightColor.node.active=!1);var n=o.getChildByName("sp_l_num");n&&(this.spLeftNum=n.getComponent(cc.Sprite),this.spLeftNum.node.active=!1);var s=o.getChildByName("sp_r_num");s&&(this.spRightNum=s.getComponent(cc.Sprite),this.spRightNum.node.active=!1);var c=this.node.getChildByName("sp_grey_mask");c&&(this.spGrayMask=c.getComponent(cc.Sprite),this.spGrayMask.node.active=!1);var d=this.node.getChildByName("sp_img");d&&(this.spImg=d.getComponent(cc.Sprite));var l=this.node.getChildByName("sp_tag");l&&(this.spTag=l.getComponent(cc.Sprite),this.spTag.node.active=!1),this._isInit=!0}},e.prototype.createPokerCard=function(t){this.cardData=l.ComUtils.clone(t),null!=this.cardData&&null!=this.cardData&&(this.node.active=!0,this.initBack(),this.initFront(),this.initNumAndColor(),this.setCardTag(),0==t.o&&this.showBack())},e.prototype.initBack=function(){this.spBack&&(this.spBack.node.active=!1)},e.prototype.initFront=function(){var t=this.cardData.c,e=this.cardData.l,o=s.GameInitConfig.pokerResId,i=s.GameInitConfig.pokerFrontType,r=s.GameInitConfig.pokerColorNum,n=c.PokerCreator.sPokerAltas,d="pk"+o+"_d_"+t%r+"_"+e,l="pk"+o+t+"_1",p="pk"+o+t+"_"+e,u="pk"+i+"_f_1",h="pk"+i+"_f_2",C=1==i?"pk_l_11":"pk_l_12",f=this.hasNumber&&this.hasColor;a.sSfShadowFront||(a.sSfShadowFront=n.getSpriteFrame(u)),a.sSfNoShadowFront||(a.sSfNoShadowFront=n.getSpriteFrame(h)),this.spFront&&a.sSfShadowFront&&(this.spFront.node.active=!0,this.spFront.spriteFrame=a.sSfNoShadowFront.clone()),this.spLightMask&&(this.spLightMask.node.active=!1,this.spLightMask.spriteFrame=n.getSpriteFrame(C)),this.spImg&&(this.spImg.node.active=!0,this.spImg.spriteFrame=n.getSpriteFrame(p)),this.spLeftColor&&(this.spLeftColor.node.active=f,f&&(this.spLeftColor.spriteFrame=n.getSpriteFrame(l))),this.spRightColor&&(this.spRightColor.node.active=f,f&&(this.spRightColor.spriteFrame=n.getSpriteFrame(l))),this.spLeftNum&&(this.spLeftNum.node.active=this.hasNumber,this.hasNumber&&(this.spLeftNum.spriteFrame=n.getSpriteFrame(d))),this.spRightNum&&(this.spRightNum.node.active=this.hasNumber,this.hasNumber&&(this.spRightNum.spriteFrame=n.getSpriteFrame(d)))},e.prototype.initNumAndColor=function(){this.node.width=c.PokerCreator.POKER_HAND_CARD_WIDTH,this.node.height=c.PokerCreator.POKER_HAND_CARD_HEIGHT,this.spBack&&(this.spBack.node.scaleX=this.hasNumber?1:c.PokerCreator.POKER_BACK_SCALE_X),this.spFront&&(this.spFront.node.scaleX=this.hasNumber?1:c.PokerCreator.POKER_FRONT_SCALE_X),this.spImg&&(this.spImg.node.scale=this.hasNumber?c.PokerCreator.POKER_IMG_SCALE:1),this.spLeftColor&&(this.spLeftColor.node.active=this.hasNumber&&this.hasColor),this.spRightColor&&(this.spRightColor.node.active=this.hasNumber&&this.hasColor),this.spLeftNum&&(this.spLeftNum.node.active=this.hasNumber,this.hasColor?(this.spLeftNum.node.x=-111.294,this.spLeftNum.node.y=149.574):(this.spLeftNum.node.x=-101.387,this.spLeftNum.node.y=161)),this.spRightNum&&(this.spRightNum.node.active=this.hasNumber,this.hasColor?(this.spRightNum.node.x=114.808,this.spRightNum.node.y=-149.438):(this.spRightNum.node.x=106.883,this.spRightNum.node.y=-161.674))},e.prototype.getFrontScale=function(){return this.spFront?this.spFront.node.scaleX:1},e.prototype.setCardTag=function(){var t=n.ScopaLogic.isGhostCard(this.cardData.o);this.setTagA(t),this.setYellowLightZZ(t)},e.prototype.setAnchorPoint=function(t,e){this.node.anchorX=t,this.node.anchorY=e,this.spFront&&(this.spFront.node.anchorX=t,this.spFront.node.anchorY=e),this.spLightMask&&(this.spLightMask.node.anchorX=t,this.spLightMask.node.anchorY=e),this.spImg&&(this.spImg.node.anchorX=t,this.spImg.node.anchorY=e)},e.prototype.showBack=function(){this.isShowBack||(this.isShowBack=!0,this.spBack&&(c.PokerCreator.setPokerBack(this.spBack),this.spBack.node.active=!0),this.hideFront())},e.prototype.showFront=function(){this.isShowBack&&(this.isShowBack=!1,this.spBack&&(this.spBack.node.active=!1),this.spFront&&(this.spFront.node.active=!0,this.spFront.spriteFrame=a.sSfShadowFront.clone()),this.spLightMask&&(this.spLightMask.node.active=!1),this.spLeftColor&&(this.spLeftColor.node.active=this.hasNumber&&this.hasColor),this.spRightColor&&(this.spRightColor.node.active=this.hasNumber&&this.hasColor),this.spImg&&(this.spImg.node.active=!0),this.spLeftNum&&(this.spLeftNum.node.active=this.hasNumber),this.spRightNum&&(this.spRightNum.node.active=this.hasNumber),this.setCardTag())},e.prototype.getCardColor=function(){return this.cardData.c},e.prototype.getCardValue=function(){return this.cardData.l},e.prototype.setCardData=function(t){this.cardData=t},e.prototype.getCardData=function(){return this.cardData},e.prototype.setFinalInfo=function(t){this.finalAngle=t.angle,this.finalScale=t.scale,this.finalPos=t.pos},e.prototype.setFinalScale=function(t,e){this.finalScale=t,this.cardPosInfo&&(this.cardPosInfo.scale=t),0==e&&this.directMoveEnd()},e.prototype.setFinalPos=function(t,e){this.finalPos=t,this.cardPosInfo&&(this.cardPosInfo.pos=t),0==e&&this.directMoveEnd()},e.prototype.setFinalAngle=function(t,e){this.finalAngle=t,this.cardPosInfo&&(this.cardPosInfo.angle=t),0==e&&this.directMoveEnd()},e.prototype.directMoveEnd=function(){this.node.stopAllActions(),this.node.x=this.finalPos.x,this.node.y=this.finalPos.y,this.node.angle=this.finalAngle,this.node.scale=this.finalScale},e.prototype.moveToFinalPosition=function(t){this.node.stopAllActions();var e=t||h.ScopaConstant.THROW_OUT_CARD_TIME;cc.tween(this.node).to(e,{position:cc.v3(this.finalPos),angle:this.finalAngle,scale:this.finalScale},{easing:cc.easing.quadOut}).start()},e.prototype.containsInRect=function(t){return this.node.getBoundingBoxToWorld().intersects(t)},e.prototype.hitPos=function(t){return this.node.getBoundingBoxToWorld().contains(t)},e.prototype.getOffsetX=function(t){return p.MathUtils.getPosX(90+this.node.angle,t)},e.prototype.getOffsetY=function(t){return p.MathUtils.getPosY(90-this.node.angle,t)},e.prototype.flipToFront=function(t){var e=this;cc.tween(this.node).delay(t||0).to(.2,{scaleX:.1,scaleY:.47}).delay(.03).call(function(){e.showFront()}).to(.17,{scaleX:.3,scaleY:.3}).start()},e.prototype.flipToBack=function(t){var e=this;cc.tween(this.node).delay(t||0).to(.2,{scaleX:.1,scaleY:.47}).delay(.03).call(function(){e.showBack()}).to(.17,{scaleX:.4,scaleY:.4}).start()},e.prototype.showShadowFront=function(){this.spFront&&a.sSfShadowFront&&(this.spFront.spriteFrame=a.sSfShadowFront.clone()),this.setCardTag()},e.prototype.showNoShadowFront=function(){this.spFront&&a.sSfNoShadowFront&&(this.spFront.spriteFrame=a.sSfNoShadowFront.clone()),this.setCardTag()},e.prototype.setTagA=function(t){this.spTag&&(this.spTag.node.active=t)},e.prototype.setYellowLightZZ=function(t){this.spLightMask&&(this.spLightMask.node.active=t)},e.prototype.hideFront=function(){this.spFront&&(this.spFront.node.active=!1),this.spImg&&(this.spImg.node.active=!1),this.spLeftColor&&(this.spLeftColor.node.active=!1),this.spRightColor&&(this.spRightColor.node.active=!1),this.spLeftNum&&(this.spLeftNum.node.active=!1),this.spRightNum&&(this.spRightNum.node.active=!1),this.spLightMask&&(this.spLightMask.node.active=!1),this.spTag&&(this.spTag.node.active=!1)},e.prototype.clear=function(){this._isDirty&&(this._isDirty=!1,t.prototype.clear.call(this),this.hideFront(),this.node.x=0,this.node.y=0,this.node.anchorX=0,this.node.scale=1,this.node.opacity=255,this.node.angle=0,this.node.active=!1,this.cardData=null,this.finalPos=cc.v2(0,0),this.cardPosInfo=null,this.node.stopAllActions(),this.setAnchorPoint(.5,.5),this.isShowBack=!1,u.LocalCardSt.put(this.cardData),C.CardPosInfo.put(this.cardPosInfo))},e.prototype.adaptBackSizeWithFront=function(){this.spBack.node.width=c.PokerCreator.POKER_HAND_CARD_WIDTH,this.spBack.node.height=c.PokerCreator.POKER_HAND_CARD_HEIGHT},e.prototype.backSizeRecover=function(){this.spBack.node.width=c.PokerCreator.POKER_HAND_BACK_WIDTH,this.spBack.node.height=c.PokerCreator.POKER_HAND_BACK_HEIGHT},e.prototype.mvToMidThenBack=function(t,e){var a=this;void 0===e&&(e=null),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.2,{x:t},{easing:cc.easing.sineOut}).delay(.73).to(.2,{x:this.finalPos.x},{easing:cc.easing.sineOut}).call(function(){a.playLightBlink()}).delay(.5).call(function(){e&&e()}).start()},e.prototype.playLightBlink=function(t){void 0===t&&(t=1);var e=c.PokerCreator.sPokerAltas.getSpriteFrame("pk_bg_light"),a=new cc.Node,o=a.addComponent(cc.Sprite);o.spriteFrame=e,o.node.parent=this.node,a.width=c.PokerCreator.POKER_HAND_BACK_WIDTH,a.height=c.PokerCreator.POKER_HAND_BACK_HEIGHT,cc.tween(a).set({opacity:0}).repeat(t,cc.tween(a).to(.17,{opacity:200}).to(.17,{opacity:0}).to(.17,{opacity:200}).to(.17,{opacity:0})).removeSelf().start()},e.NAME="UIPokerCardBase",a=r([S],e)}(d.CxCompExt));a.UIPokerCardBase=y,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/MathUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/ScopaConstant":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"./../../../gameBaseSrc/model/GameInitConfig":void 0}],UIResultScoreDetailView:[function(t,e,a){"use strict";cc._RF.push(e,"76f35Kax7NHMJ3EMqRtSTNB","UIResultScoreDetailView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIResultScoreDetailView=void 0;var n=t("../../../../script/lib/utils/ComUtils"),s=t("../../../gameBaseSrc/i18n/GameBaseI18n"),c=t("../../../../script/lib/base/CxComponent"),d=t("../../../../script/app/base/component/ComListView"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("../desk/UIScopaAttackListItem"),u=cc._decorator,h=u.ccclass,C=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfListItem=null,e.labTotalName=null,e.labTotalScore=null,e.svList=null,e.ndEmpty=null,e.labEmpty=null,e.colorAdd=(new cc.Color).fromHEX("#FCDB17"),e.colorSub=(new cc.Color).fromHEX("#3BC5FF"),e.labScoreName=null,e.labScore=null,e.labAttackName=null,e.labAttackScore=null,e.labBetScore=null,e.ndPot=null,e.labPot=null,e.mTotalScore=0,e.mRecordListData=[],e}return i(e,t),e.prototype.init=function(t){if(t&&(this.mWorldPos=t.worldPos),this.updateView(t),this.labTotalName&&(this.labTotalName.string=s.GameBaseLan.i18n.game_txt_totoalwin.toUpperCase()),this.labTotalScore){var e=this.mTotalScore+t.goldOfPot,a=e>0?"+":"",o=0===e?cc.Color.WHITE:e>0?this.colorAdd:this.colorSub;this.labTotalScore.node.color=o,this.labTotalScore.string=a+n.ComUtils.formatGoldStr(e)}this.labBetScore&&(this.labBetScore.string=t.strBeiShu||""),this.labScoreName&&(this.labScoreName.string=s.GameBaseLan.i18n.txt_Score.toUpperCase()+":"),this.labScore&&(this.labScore.string=n.ComUtils.formatGoldStr(t.score||0)),this.labAttackName&&(this.labAttackName.string=s.GameBaseLan.i18n.game_txt_attack+":"),this.labAttackScore&&(this.labAttackScore.string=n.ComUtils.formatGoldStr(t.attackScore||0)),this.labPot&&(this.labPot.string="POT:"+n.ComUtils.formatGoldStr(t.goldOfPot||0)),t.isCrazy?this.ndPot&&(this.ndPot.active=t.hasPot):this.ndPot&&(this.ndPot.active=!1)},e.prototype.listEvent=function(){return new Map([[l.GameEvent.Popup.SCOPA_RECORD_UPDATE_LIST,this.updateView]])},e.prototype.updateView=function(t){t&&(this.mRecordListData=t.recordListData||[],this.mTotalScore=t.totalScore||0),this.labEmpty&&(this.labEmpty.string=s.GameBaseLan.i18n.game_rescord_empty_tips),this.ndEmpty&&(this.ndEmpty.active=0===this.mRecordListData.length);var e={scrollView:this.svList,content:this.svList.content,itemPrefab:this.pfListItem,itemClass:p.UIScopaAttackListItem,dataList:this.mRecordListData,dataEx:{},space:0,top:0,bottom:0,createInterval:.01},a=this.node.getComponent(d.ComListView);null==a&&(a=this.node.addComponent(d.ComListView)),a.initParams(e),a.initScrollView()},e.prototype.start=function(){this.mWorldPos||this.dispatch(l.GameEvent.Msg.SEND_RECORD_LIST)},r([C({type:cc.Node,tooltip:"\u5217\u8868item"})],e.prototype,"pfListItem",void 0),r([C({type:cc.Label,tooltip:"\u8f93\u8d62"})],e.prototype,"labTotalName",void 0),r([C({type:cc.Label,tooltip:"\u8f93\u8d62\u603b\u5206\u6570"})],e.prototype,"labTotalScore",void 0),r([C({type:cc.ScrollView,tooltip:"\u6eda\u52a8\u5217\u8868\uff0c\u6240\u6709scopa\u8bb0\u5f55"})],e.prototype,"svList",void 0),r([C({type:cc.Node,tooltip:"\u5217\u8868\u4e3a\u7a7a\u5219\u663e\u793a"})],e.prototype,"ndEmpty",void 0),r([C({type:cc.Label,tooltip:"\u4e3a\u7a7a \u63d0\u793a"})],e.prototype,"labEmpty",void 0),r([C(cc.Color)],e.prototype,"colorAdd",void 0),r([C(cc.Color)],e.prototype,"colorSub",void 0),r([C({type:cc.Label,tooltip:"Score "})],e.prototype,"labScoreName",void 0),r([C({type:cc.Label,tooltip:"Score "})],e.prototype,"labScore",void 0),r([C({type:cc.Label,tooltip:"Attack Score name"})],e.prototype,"labAttackName",void 0),r([C({type:cc.Label,tooltip:"Attack Score"})],e.prototype,"labAttackScore",void 0),r([C({type:cc.Label,tooltip:"Bet \u516c\u5f0f "})],e.prototype,"labBetScore",void 0),r([C({type:cc.Node,tooltip:"POT \u8282\u70b9 "})],e.prototype,"ndPot",void 0),r([C({type:cc.Label,tooltip:"POT"})],e.prototype,"labPot",void 0),r([h],e)}(c.CxComponent);a.UIResultScoreDetailView=f,cc._RF.pop()},{"../../../../script/app/base/component/ComListView":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../desk/UIScopaAttackListItem":"UIScopaAttackListItem"}],UIScopaAnim:[function(t,e,a){"use strict";cc._RF.push(e,"12c842Cg9lDtoSUxd6BTn/z","UIScopaAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaAnim=void 0;var n=t("../../../../script/app/module/tables/TableSkinMgr"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../gameBaseSrc/model/GameEvent"),d=cc._decorator,l=d.ccclass,p=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeleton=null,e.skltBS=null,e.ndBeiShu=null,e.labScopaBS=null,e}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.clear()},e.prototype.start=function(){this.skltBS&&(this.skltBS.node.y=this.skeleton.node.y+300)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.GameTips.CLEAR,this.clear),this.bindEvent(c.GameEvent.GameTips.SCOPA,this.onPlayScopa),this.bindEvent(c.GameEvent.Desk.BEI_SHU_POS,this.onGetBeiShuPos)},e.prototype.playScopa=function(t,e){var a=this;this.skeleton&&(this.arrSkeletonData[e]?(this.skeleton.clearTracks(),this.skeleton.setToSetupPose(),this.skeleton.skeletonData=this.arrSkeletonData[e],this.skeleton.node.active=!0,this.skeleton.enabled=!0,this.skeleton.paused=!1,this.skeleton.animation="scopa"):n.TableSkinMgr.getSkeleton("effect/scopa",e).then(function(t){t&&(a.skeleton.enabled=!1,a.skeleton.clearTracks(),a.skeleton.setToSetupPose(),a.skeleton.skeletonData=t,a.skeleton.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),a.skeleton.loop=!1,a.skeleton.paused=!1,a.skeleton.premultipliedAlpha=!1,a.skeleton.node.active=!0,a.skeleton.enabled=!0,a.skeleton.animation="scopa",a.arrSkeletonData[e]=t)})),this.skltBS&&(this.skltBS.enabled=!0,this.skltBS.paused=!1,this.skltBS.node.active=!0,this.skltBS.animation=t>1?"scopa_jiabei":"scopa_jia1")},e.prototype.playWave=function(){this.skeleton&&(this.skeleton.node.parent.active=!0,this.skeleton.enabled=!0,this.skeleton.paused=!1,this.skeleton.animation="bowen")},e.prototype.playBeiShuAnim=function(t){t<=1||!this.posBeishu||(this.labScopaBS.node.active=!0,cc.tween(this.labScopaBS.node).set({x:this.skeleton.node.x,y:this.skeleton.node.y+300,scale:.3,opacity:0}).delay(.23).to(.07,{scale:1.5,opacity:255}).to(.13,{scale:1}).to(.13,{scale:1.2}).delay(.24).to(.06,{scale:1.5}).to(.34,{x:this.posBeishu.x,y:this.posBeishu.y,scale:.15}).set({active:!1}).start())},e.prototype.clear=function(){t.prototype.clear.call(this),this.skeleton&&(this.skeleton.node.active=!1,this.skeleton.paused=!0),this.labScopaBS&&(this.labScopaBS.node.active=!1),this.skltBS&&(this.skltBS.node.active=!1,this.skltBS.paused=!0),this.arrSkeletonData=[]},e.prototype.onGetBeiShuPos=function(t){this.posBeishu=this.labScopaBS.node.parent.convertToNodeSpaceAR(t)},e.prototype.onPlayScopa=function(t){this.skeleton&&(this.skeleton.node.active=!0),t.playScopa?this.playScopa(t.beishu,t.tableId):t.playWave&&this.playWave(),t.beishu&&t.beishu>1&&this.playBeiShuAnim(t.beishu)},r([p({type:sp.Skeleton,tooltip:"scopa"})],e.prototype,"skeleton",void 0),r([p({type:sp.Skeleton,tooltip:"\u52a0\u500d\u52a8\u753b"})],e.prototype,"skltBS",void 0),r([p(cc.Node)],e.prototype,"ndBeiShu",void 0),r([p(cc.Label)],e.prototype,"labScopaBS",void 0),r([l],e)}(s.CxCompExt);a.UIScopaAnim=u,cc._RF.pop()},{"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../gameBaseSrc/model/GameEvent":void 0}],UIScopaAttackHelp:[function(t,e,a){"use strict";cc._RF.push(e,"98c36M1DXFLAqct0KS2zywR","UIScopaAttackHelp");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaAttackHelp=void 0;var n=t("./../../../gameBaseSrc/view/PokerCreator"),s=t("../../../../script/lib/base/CxComponent"),c=t("../../../gameBaseSrc/alg/ScopaLogic"),d=t("../poker/UIPokerCardBase"),l=t("./../../../../script/app/view/ComUI"),p=t("../../../../script/lib/utils/ComUtils"),u=t("../../../gameBaseSrc/i18n/GameBaseI18n"),h=[0,16,12,13,14,15,18,21,10,10,10],C=cc._decorator,f=C.ccclass,S=C.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labCollected=null,e.labNoCoinsCard=null,e.labScopaAttack=null,e.labBaseScore=null,e.labAttackScore=null,e.ndCardLayout=null,e.labCoinsSumSmall=null,e.spSmallCoin=null,e.spBigCoin=null,e.labCoinsSumBig=null,e.pfCard=null,e}return i(e,t),e.prototype.init=function(t){this.viewData=t||{cards:[],coinsSum:0,baseScore:0,multp:1},this.initView()},e.prototype.initView=function(){this.labCollected&&(this.labCollected.string=u.GameBaseLan.i18n.game_get_coins_cards),this.labScopaAttack&&(this.labScopaAttack.string=u.GameBaseLan.i18n.game_scopa_attack),this.labCoinsSumSmall&&(this.labCoinsSumSmall.string=this.viewData.coinsSum),this.labCoinsSumBig&&(this.labCoinsSumBig.string=this.viewData.coinsSum),0===this.viewData.coinsSum&&(this.spSmallCoin&&l.ComUI.enableNodeGray(this.spSmallCoin.node,!0),this.spBigCoin&&l.ComUI.enableNodeGray(this.spBigCoin.node,!0),this.labNoCoinsCard&&(this.labNoCoinsCard.node.active=!0,this.labNoCoinsCard.string=u.GameBaseLan.i18n.game_no_coins_cards)),this.labBaseScore&&(this.labBaseScore.string="x"+p.ComUtils.formatGoldStr(this.viewData.baseScore*this.viewData.multp)),this.labAttackScore&&(this.labAttackScore.string=p.ComUtils.formatGoldStr(this.viewData.baseScore*this.viewData.coinsSum*this.viewData.multp,1e9));for(var t=this.labAttackScore.font,e=this.viewData.cards.length,a=0;a<e;a++){var o=new cc.Node;o.parent=this.ndCardLayout;var i=cc.instantiate(this.pfCard);i.parent=o;var r=i.getComponent(d.UIPokerCardBase);r||(r=i.addComponent(d.UIPokerCardBase)),r.init({meta:c.LocalCardSt.get(this.viewData.cards[a])}),i.scale=.3,i.y=20,o.setContentSize(i.getBoundingBox()),l.ComUI.createLable({string:h[n.PokerCreator.getValue(this.viewData.cards[a])],fontSize:50,font:t,position:cc.v3(0,-80)}).node.parent=o}},r([S({type:cc.Label,tooltip:"\u6536\u96c6"})],e.prototype,"labCollected",void 0),r([S({type:cc.Label,tooltip:"No Coins Card"})],e.prototype,"labNoCoinsCard",void 0),r([S({type:cc.Label,tooltip:"SCOPA ATTACK"})],e.prototype,"labScopaAttack",void 0),r([S({type:cc.Label,tooltip:"\u5e95\u5206"})],e.prototype,"labBaseScore",void 0),r([S({type:cc.Label,tooltip:"\u653b\u51fb\u5206"})],e.prototype,"labAttackScore",void 0),r([S({type:cc.Node,tooltip:"\u5df2\u7ecf\u6536\u96c6\u7684\u724c"})],e.prototype,"ndCardLayout",void 0),r([S({type:cc.Label,tooltip:"\u91d1\u5e01\u6570\u503c\u7684\u548c"})],e.prototype,"labCoinsSumSmall",void 0),r([S({type:cc.Sprite,tooltip:"\u91d1\u5e01\u56fe\u6848"})],e.prototype,"spSmallCoin",void 0),r([S({type:cc.Sprite,tooltip:"\u91d1\u5e01\u56fe\u6848"})],e.prototype,"spBigCoin",void 0),r([S({type:cc.Label,tooltip:"\u91d1\u5e01\u6570\u503c\u7684\u548c"})],e.prototype,"labCoinsSumBig",void 0),r([S({type:cc.Prefab,tooltip:"\u724c"})],e.prototype,"pfCard",void 0),r([f],e)}(s.CxComponent);a.UIScopaAttackHelp=y,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase","./../../../../script/app/view/ComUI":void 0,"./../../../gameBaseSrc/view/PokerCreator":void 0}],UIScopaAttackListItem:[function(t,e,a){"use strict";cc._RF.push(e,"5a2f63pCnFEvoZOhifZE4jQ","UIScopaAttackListItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaAttackListItem=void 0;var n=t("../../../../script/lib/utils/ComUtils"),s=t("../../../../script/lib/base/CxComponent"),c=t("../../../gameBaseSrc/alg/ScopaLogic"),d=t("../poker/UIPokerCardBase"),l=t("../../../gameBaseSrc/view/PokerCreator"),p=cc._decorator,u=p.ccclass,h=p.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labScore=null,e.ndCards=null,e.pfCard=null,e.padding=50,e.gap=65,e.cardScale=.2,e.colorAdd=(new cc.Color).fromHEX("#37E502"),e.colorSub=(new cc.Color).fromHEX("#FB2164"),e}return i(e,t),e.prototype.updateItem=function(t,e){this.init(e)},e.prototype.init=function(t){if(t){var e=0==t.dwViewId;if(this.labScore){var a=e?"+":"-",o=this.ndCards.width/2,i=Math.abs(t.tabScopaWin);this.labScore.string=a+n.ComUtils.formatGoldStr(i),this.labScore.node.color=e?this.colorAdd:this.colorSub,this.labScore.node.x=o-this.padding,this.labScore.node.anchorX=1}this.initCards(t.tabCards,e)}},e.prototype.initCards=function(t){if(this.ndCards&&this.pfCard&&t){var e=this.gap,a=-this.ndCards.width/2+this.padding,o=this.ndCards.children;o.forEach(function(t){t.active=!1}),t.length>7&&(e=(.7*this.ndCards.width-this.pfCard.data.width*this.cardScale-this.padding)/t.length);for(var i=0;i<t.length;i++){var r=a+e*i,n=o[i];n||((n=cc.instantiate(this.pfCard)).parent=this.ndCards);var s=n.getComponent(d.UIPokerCardBase);s||(s=n.addComponent(d.UIPokerCardBase));var p=l.CardPosInfo.get();p.pos=cc.v2(r,0),p.scale=this.cardScale,p.zIndex=i+1*i,s.init({meta:c.LocalCardSt.get(t[i]),posInfo:p}),n.active=!0}}},r([h({type:cc.Label,tooltip:"\u8f93\u8d62\u5206\u6570"})],e.prototype,"labScore",void 0),r([h({type:cc.Node,tooltip:"\u6240\u6709scopa \u6536\u96c6\u7684\u91d1\u5e01\u724c"})],e.prototype,"ndCards",void 0),r([h({type:cc.Prefab,tooltip:"scopa \u724c"})],e.prototype,"pfCard",void 0),r([h({type:cc.Integer,tooltip:"\u9760\u8fb9"})],e.prototype,"padding",void 0),r([h({type:cc.Integer,tooltip:"\u95f4\u9694"})],e.prototype,"gap",void 0),r([h({type:cc.Float,tooltip:"\u7f29\u653e"})],e.prototype,"cardScale",void 0),r([h(cc.Color)],e.prototype,"colorAdd",void 0),r([h(cc.Color)],e.prototype,"colorSub",void 0),r([u],e)}(s.CxComponent);a.UIScopaAttackListItem=C,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase"}],UIScopaAttackListView:[function(t,e,a){"use strict";cc._RF.push(e,"4a476+xbshP5JFzspMNVxot","UIScopaAttackListView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaAttackListView=void 0;var n=t("./../../../../script/app/view/ComUI"),s=t("../../../../script/lib/utils/ComUtils"),c=t("../../../gameBaseSrc/i18n/GameBaseI18n"),d=t("../../../../script/lib/base/CxComponent"),l=t("./UIScopaAttackListItem"),p=t("../../../../script/app/base/component/ComListView"),u=t("../../../gameBaseSrc/model/GameEvent"),h=cc._decorator,C=h.ccclass,f=h.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfListItem=null,e.labTotalName=null,e.labTotalScore=null,e.svList=null,e.ndEmpty=null,e.labEmpty=null,e.colorAdd=(new cc.Color).fromHEX("#37E502"),e.colorSub=(new cc.Color).fromHEX("#FB2164"),e.mTotalScore=0,e.mRecordListData=[],e}return i(e,t),e.prototype.init=function(t){t&&(this.mWorldPos=t.worldPos,this.mRecordListData=t.recordListData||[],this.mTotalScore=t.totalScore||0),this.updateView(t)},e.prototype.listEvent=function(){return new Map([[u.GameEvent.Popup.SCOPA_RECORD_UPDATE_LIST,this.updateView]])},e.prototype.updateView=function(t){if(t&&(this.mRecordListData=t.recordListData||[],this.mTotalScore=t.totalScore||0),this.labTotalName&&(this.labTotalName.string=c.GameBaseLan.i18n.game_txt_attack+":"),this.labTotalScore){var e=this.mTotalScore>0?"+":"",a=0===this.mTotalScore?cc.Color.WHITE:this.mTotalScore>0?this.colorAdd:this.colorSub;this.labTotalScore.node.color=a,this.labTotalScore.string=e+s.ComUtils.formatGoldStr(this.mTotalScore),this.labTotalName&&(this.labTotalScore.node.anchorX=0,this.labTotalScore.node.x=this.labTotalName.node.x+n.ComUI.getLabelSize(this.labTotalName).width+15)}this.labEmpty&&(this.labEmpty.string=c.GameBaseLan.i18n.game_rescord_empty_tips),this.ndEmpty&&(this.ndEmpty.active=0===this.mRecordListData.length);var o={scrollView:this.svList,content:this.svList.content,itemPrefab:this.pfListItem,itemClass:l.UIScopaAttackListItem,dataList:this.mRecordListData,dataEx:{},space:0,top:0,bottom:0,createInterval:.01},i=this.node.getComponent(p.ComListView);null==i&&(i=this.node.addComponent(p.ComListView)),i.initParams(o),i.initScrollView()},e.prototype.start=function(){if(this.mWorldPos){var t=this.node.parent.convertToNodeSpaceAR(this.mWorldPos);this.node.position=t.subSelf(cc.v3(this.node.width/2,this.node.height/2))}else this.dispatch(u.GameEvent.Msg.SEND_RECORD_LIST)},r([f({type:cc.Node,tooltip:"\u5217\u8868item"})],e.prototype,"pfListItem",void 0),r([f({type:cc.Label,tooltip:"\u8f93\u8d62"})],e.prototype,"labTotalName",void 0),r([f({type:cc.Label,tooltip:"\u8f93\u8d62\u603b\u5206\u6570"})],e.prototype,"labTotalScore",void 0),r([f({type:cc.ScrollView,tooltip:"\u6eda\u52a8\u5217\u8868\uff0c\u6240\u6709scopa\u8bb0\u5f55"})],e.prototype,"svList",void 0),r([f({type:cc.Node,tooltip:"\u5217\u8868\u4e3a\u7a7a\u5219\u663e\u793a"})],e.prototype,"ndEmpty",void 0),r([f({type:cc.Label,tooltip:"\u4e3a\u7a7a \u63d0\u793a"})],e.prototype,"labEmpty",void 0),r([f(cc.Color)],e.prototype,"colorAdd",void 0),r([f(cc.Color)],e.prototype,"colorSub",void 0),r([C],e)}(d.CxComponent);a.UIScopaAttackListView=S,cc._RF.pop()},{"../../../../script/app/base/component/ComListView":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/app/view/ComUI":void 0,"./UIScopaAttackListItem":"UIScopaAttackListItem"}],UIScopaAttackMenu:[function(t,e,a){"use strict";cc._RF.push(e,"ee1f6P8cR9AG7YnXHMlqc4W","UIScopaAttackMenu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaAttackMenu=void 0;var n=t("./../../../../script/lib/base/CxComponent"),s=t("../../../gameBaseSrc/model/GameEvent"),c=t("../poker/UIPokerCardBase"),d=t("../../../gameBaseSrc/view/PokerCreator"),l=t("../../../gameBaseSrc/alg/ScopaLogic"),p=t("../../../../script/lib/utils/ComUtils"),u=cc._decorator,h=u.ccclass,C=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labAttackScore=null,e.pfCard=null,e.skltData=null,e.spGreenBg=null,e.spGreyBg=null,e.delayLock=!0,e}return i(e,t),e.prototype.listEvent=function(){return new Map([[s.GameEvent.Desk.SCOPA_CHANGE_SCORE,this.onChangeScore],[s.GameEvent.Desk.UPDATE_SCOPA_SCORE,this.onUpdateScore],[s.GameEvent.Com.GAME_SCENE_CLEAR,this.clear],[s.GameEvent.Com.READY_NEXT_CLEAR,this.clear],[s.GameEvent.Desk.SHOW_RECORD_BTN,this.onShowRecordBtn]])},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.on("click",this.onClick,this)},e.prototype.clear=function(){this.labAttackScore&&(this.labAttackScore.string="0")},e.prototype.playCardAnim=function(t){if(t)for(var e=1,a=0;a<t.length;a++){var o=cc.instantiate(this.pfCard);o.parent=this.node,e=.8*a;var i=o.getComponent(c.UIPokerCardBase);i||(i=o.addComponent(c.UIPokerCardBase));var r=d.CardPosInfo.get();r.pos=cc.v2(0,260),r.scale=.25,r.zIndex=10,i.init({meta:l.LocalCardSt.get(t[a]),posInfo:r}),this.playEffectOverCard(o,e)}},e.prototype.playEffectOverCard=function(t,e){var a=this;if(t){t.active=!0,cc.tween(t).set({scale:.25,y:160,opacity:0}).delay(e).to(.2,{opacity:255,y:100}).to(.2,{y:130}).to(.2,{y:100}).to(.2,{opacity:0,y:0}).removeSelf().start();var o=(new cc.Node).addComponent(sp.Skeleton);o&&this.skltData&&cc.tween(o.node).delay(e||0).call(function(){cc.isValid(o)&&(o.node.parent=t.parent,o.node.zIndex=t.zIndex-1,o.node.y=130,o.skeletonData=a.skltData,o.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.SHARED_CACHE),o.node.active=!0,o.enabled=!0,o.animation="lianshengbaodian",o.loop=!1,o.paused=!1,o.premultipliedAlpha=!1,o.setCompleteListener(function(){cc.isValid(o)&&o.node.destroy()}))}).start()}},e.prototype.onChangeScore=function(t){var e=this;t&&0===t.viewId&&(this.labAttackScore&&cc.tween(this.labAttackScore.node).delay(.8).call(function(){cc.isValid(e.labAttackScore)&&(e.labAttackScore.string=p.ComUtils.formatGoldStr(t.baseScore*t.multp*t.coinsSum))}).start(),this.switchBg(t.coinsSum),this.playCardAnim(t.cards))},e.prototype.onUpdateScore=function(t){t&&0===t.viewId&&(this.labAttackScore&&(this.labAttackScore.string=p.ComUtils.formatGoldStr(t.baseScore*t.multp*t.coinsSum)),this.switchBg(t.coinsSum))},e.prototype.switchBg=function(t){this.spGreenBg&&(this.spGreenBg.node.active=t>0),this.spGreyBg&&(this.spGreyBg.node.active=t<=0)},e.prototype.onClick=function(){this.delayLock&&(p.ComUtils.delayLimit(this),this.dispatch(s.GameEvent.OperateEvent.CLICK_SCOPA_ATTACK_VIEW))},e.prototype.onShowRecordBtn=function(t){this.node.active=t},r([C({type:cc.Label,tooltip:"\u653b\u51fb\u5206"})],e.prototype,"labAttackScore",void 0),r([C({type:cc.Prefab,tooltip:"\u724c"})],e.prototype,"pfCard",void 0),r([C({type:sp.SkeletonData,tooltip:"\u5c55\u793a\u91d1\u5e01\u724c\u7279\u6548"})],e.prototype,"skltData",void 0),r([C({type:cc.Sprite,tooltip:"\u7eff\u8272\u80cc\u666f"})],e.prototype,"spGreenBg",void 0),r([C({type:cc.Sprite,tooltip:"\u7070\u8272\u80cc\u666f"})],e.prototype,"spGreyBg",void 0),r([h],e)}(n.CxComponent);a.UIScopaAttackMenu=f,cc._RF.pop()},{"../../../../script/lib/utils/ComUtils":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase","./../../../../script/lib/base/CxComponent":void 0}],UIScopaAttackView:[function(t,e,a){"use strict";cc._RF.push(e,"2dd8dHEOW1HobYolk0rXnNz","UIScopaAttackView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaAttackView=void 0;var n=t("./../../../../script/lib/utils/ComUtils"),s=t("./../../../gameBaseSrc/i18n/GameBaseI18n"),c=t("../../../../script/app/language/LanguageCfg"),d=t("../../../../script/app/language/LanguageImpl"),l=t("../../../../script/lib/base/CxComponent"),p=t("./UIScopaAttackHelp"),u=t("./UIScopaAttackListView"),h=cc._decorator,C=h.ccclass,f=h.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tgScore=null,e.tgList=null,e.pRecordList=null,e.pRuleHelp=null,e.labTips=null,e.labBSTips=null,e.labBankBS=null,e.mShowBandBeishu=!1,e}return i(e,t),e.prototype.init=function(t){var e;if(t&&t.bankBeiShu>1?(this.node.height+=30,this.labBSTips&&(this.labBSTips.node.active=!0),this.labBankBS&&(this.labBankBS.node.active=!0,this.labBankBS.string="x"+t.bankBeiShu)):(this.labBSTips&&(this.labBSTips.node.active=!1),this.labBankBS&&(this.labBankBS.node.active=!1)),this.pRuleHelp&&this.pRuleHelp.init(t),this.tgList&&(this.tgList.node.on("toggle",this.onListToggleCliked,this),(e=this.tgList.getComponentsInChildren(cc.Label)).length>0)){var a=s.GameBaseLan.i18n.game_scopa_attack;a=n.ComUtils.stringToCamelCase(a),e.forEach(function(t){cc.isValid(t)&&(t.string=a)})}if(this.tgScore&&(this.tgScore.node.on("toggle",this.onHelpToggleCliked,this),(e=this.tgScore.getComponentsInChildren(cc.Label)).length>0)){var o=s.GameBaseLan.i18n.game_txt_totoalwin;o=n.ComUtils.stringToCamelCase(o),e.forEach(function(t){cc.isValid(t)&&(t.string=o)})}this.labTips&&(this.labTips.string=d.LanguageImpl.i18n[c.LangKey.scopa_rule_crazy])},e.prototype.start=function(){},e.prototype.onListToggleCliked=function(t){t.isChecked&&this.switchToListView(!0)},e.prototype.onHelpToggleCliked=function(t){t.isChecked&&this.switchToListView(!1)},e.prototype.switchToListView=function(t){t&&this.initListView(),this.pRecordList&&(this.pRecordList.node.active=t),this.pRuleHelp&&(this.pRuleHelp.node.active=!t)},e.prototype.initListView=function(){this.pRecordList&&this.pRecordList.init(null)},e.prototype.initHelpView=function(){},r([f({type:cc.Toggle,tooltip:"\u83b7\u5f97\u5206\u6570\u8be6\u60c5\u5f00\u5173"})],e.prototype,"tgScore",void 0),r([f({type:cc.Toggle,tooltip:"\u83b7\u5f97\u5206\u6570\u7684\u5217\u8868\u5f00\u5173"})],e.prototype,"tgList",void 0),r([f({type:u.UIScopaAttackListView,tooltip:"\u5206\u6570\u5217\u8868"})],e.prototype,"pRecordList",void 0),r([f({type:p.UIScopaAttackHelp,tooltip:"\u5206\u6570\u89c4\u5219"})],e.prototype,"pRuleHelp",void 0),r([f({type:cc.Label,tooltip:"\u63d0\u793a"})],e.prototype,"labTips",void 0),r([f({type:cc.Label,tooltip:"\u5148\u624b\u540e\u624b\u7684\u533a\u522b\u8ba1\u7b97"})],e.prototype,"labBSTips",void 0),r([f({type:cc.Label,tooltip:"\u5148\u624b\u540e\u624b\u7684\u500d\u6570"})],e.prototype,"labBankBS",void 0),r([C],e)}(l.CxComponent);a.UIScopaAttackView=S,cc._RF.pop()},{"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/language/LanguageImpl":void 0,"../../../../script/lib/base/CxComponent":void 0,"./../../../../script/lib/utils/ComUtils":void 0,"./../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"./UIScopaAttackHelp":"UIScopaAttackHelp","./UIScopaAttackListView":"UIScopaAttackListView"}],UIScopaCountView:[function(t,e,a){"use strict";cc._RF.push(e,"eb12anmoFpAEJsXAsW2Dtlu","UIScopaCountView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaCountView=void 0;var n=t("../../../../script/app/event/Notify"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../gameBaseSrc/model/GameEvent"),d=t("../../../../script/app/view/ComUI"),l=t("../../../../script/app/module/tables/TableSkinMgr"),p=cc._decorator,u=p.ccclass,h=p.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labOurScopaCnt=null,e.labOtherScopaCnt=null,e.btnJPQ=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.clear(),this.changeSkin(l.TableSkinMgr.getCfg())},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(c.GameEvent.Com.GAME_SCENE_CLEAR,this.clear),this.bindEvent(c.GameEvent.Com.READY_NEXT_CLEAR,this.clear),this.bindEvent(c.GameEvent.EatCard.CLEAR,this.clear),this.bindEvent(c.GameEvent.Base.GAME_RESULT,this.clear),this.bindEvent(c.GameEvent.EatCard.SCOPA_COUNT,this.onSetScopaCount),this.bindEvent(c.GameEvent.EatCard.PUT_POINTS,this.onGetEatCardPoints),this.bindEvent(n.Notify.Base.CHANGE_SKIN,this.changeSkin),this.bindEvent(c.GameEvent.Player.GAME_START,this.hide),this.bindEvent(c.GameEvent.OperateEvent.NEXT_GAME,this.show),this.bindEvent(c.GameEvent.Player.MOVE_END,this.show),this.bindEvent(c.GameEvent.Base.GAME_RESULT,this.hide)},e.prototype.changeSkin=function(t){t&&this.labOtherScopaCnt&&d.ComUI.changeLabel(this.labOtherScopaCnt,t.font_scopa_count)},e.prototype.clear=function(){t.prototype.clear.call(this),this.labOurScopaCnt.string="",this.labOurScopaCnt.node.parent.active=!1,this.labOtherScopaCnt.string="",this.labOtherScopaCnt.node.parent.active=!1},e.prototype.onGetEatCardPoints=function(t){if(t&&t[0]instanceof cc.Vec2){if(this.labOurScopaCnt){var e=this.node.convertToNodeSpace(t[0]);this.labOurScopaCnt.node.parent.x=e.x,this.labOurScopaCnt.node.parent.y=e.y}this.labOtherScopaCnt&&(e=this.node.convertToNodeSpace(t[1]),this.labOtherScopaCnt.node.parent.x=e.x,this.labOtherScopaCnt.node.parent.y=e.y),this.btnJPQ&&(e=this.node.convertToNodeSpace(t[0]),this.btnJPQ.node.active=!0,this.btnJPQ.node.x=e.x,this.btnJPQ.node.y=e.y,this.btnJPQ.node.on("click",this.onClickBtn,this))}},e.prototype.onSetScopaCount=function(t){this.setScopaCount(t.bOurSide,t.count)},e.prototype.setScopaCount=function(t,e){var a;t?(a=this.labOurScopaCnt).string=""+e:(a=this.labOtherScopaCnt).string=""+e,a&&(a.node.parent.active=e>0)},e.prototype.onClickBtn=function(t){this.dispatch(c.GameEvent.OperateEvent.CLICK_JPQ,t.node.convertToWorldSpaceAR(cc.Vec2.ZERO))},e.prototype.hide=function(){this.node.opacity=0},e.prototype.show=function(){this.node.opacity=255},r([h(cc.Label)],e.prototype,"labOurScopaCnt",void 0),r([h(cc.Label)],e.prototype,"labOtherScopaCnt",void 0),r([h(cc.Button)],e.prototype,"btnJPQ",void 0),r([u],e)}(s.CxCompExt);a.UIScopaCountView=C,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxCompExt":void 0,"../../../gameBaseSrc/model/GameEvent":void 0}],UIScopaJPQCard:[function(t,e,a){"use strict";cc._RF.push(e,"4519caUNIpAYqDOggA1z354","UIScopaJPQCard");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaJPQCard=void 0;var n=t("../../../../script/lib/base/CxComponent"),s=t("../../../gameBaseSrc/alg/ScopaLogic"),c=cc._decorator,d=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labCardNum=null,e.labCardValue=null,e.spCardBg=null,e.sfSpeacBg=null,e.colorYellow=(new cc.Color).fromHEX("#fff832"),e.colorBlue=(new cc.Color).fromHEX("#9a98ac"),e.cardValue=0,e.cardNum=0,e.isGhostCard=!1,e}return i(e,t),e.prototype.init=function(t){this.isGhostCard=s.ScopaLogic.isGhostCardByValue(t.value),this.setCardNum(t.num),this.setCardValue(t.value),this.setCardBg(this.isGhostCard)},e.prototype.setCardBg=function(t){t&&this.spCardBg&&this.sfSpeacBg&&(this.spCardBg.spriteFrame=this.sfSpeacBg)},e.prototype.setCardNum=function(t){this.cardNum=t||0;var e=0==t?this.colorBlue:this.isGhostCard?this.colorYellow:cc.Color.WHITE;if(!this.labCardNum){var a=this.node.getChildByName("lab_num");a&&(this.labCardNum=a.getComponent(cc.Label))}this.labCardNum&&(this.labCardNum.node.color=e,this.labCardNum.string=""+t)},e.prototype.setCardValue=function(t){if(this.cardValue=t||0,!this.labCardValue){var e=this.node.getChildByName("lab_card");e&&(this.labCardValue=e.getComponent(cc.Label))}this.labCardValue&&t&&(this.labCardValue.string=""+(t-1))},r([l(cc.Label)],e.prototype,"labCardNum",void 0),r([l(cc.Label)],e.prototype,"labCardValue",void 0),r([l(cc.Sprite)],e.prototype,"spCardBg",void 0),r([l(cc.SpriteFrame)],e.prototype,"sfSpeacBg",void 0),r([l(cc.Color)],e.prototype,"colorYellow",void 0),r([l(cc.Color)],e.prototype,"colorBlue",void 0),r([d],e)}(n.CxComponent);a.UIScopaJPQCard=p,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0}],UIScopaJPQLayer:[function(t,e,a){"use strict";cc._RF.push(e,"40a5749hCxBZLntxlT5K/z8","UIScopaJPQLayer");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaJPQLayer=void 0;var n=t("../../../../script/app/language/LanguageImpl"),s=t("../../../../script/lib/base/CxComponent"),c=t("../../../../script/lib/i18n/i18nHelper"),d=t("../../../gameBaseSrc/i18n/GameBaseI18n"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("../result/UIGameResultItem"),u=t("./UIScopaJPQCard"),h=cc._decorator,C=h.ccclass,f=h.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTitle=null,e.pfScoreItem=null,e.layoutScore=null,e.layoutCards=null,e.cardNumMax=10,e.listCards=[],e.listScoreItems=[],e}return i(e,t),e.prototype.listEvent=function(){return new Map([[l.GameEvent.JPQ.UPDATE_CARDS,this.updateCardsView],[l.GameEvent.JPQ.UPDATE_SCORE,this.updateScoreView]])},e.prototype.init=function(t){this.listCards=[],t?(this.unkonwnCards=t.unkonwnCards||[],this.ourScoreDetail=t.ourScoreDetail,this.otherScoreDetail=t.otherScoreDetail,t.worldPos&&(this.worldPos=t.worldPos),this.initView()):this.close()},e.prototype.start=function(){this.labTitle&&(this.labTitle.string=n.LanguageImpl.i18n.text_jpq_name),this.worldPos&&(this.worldPos=this.node.parent.convertToNodeSpaceAR(this.worldPos),this.worldPos.x<0?(this.node.x=this.worldPos.x+this.node.width/2+60,this.node.y=this.worldPos.y+this.node.height/2-50):(this.node.x=this.worldPos.x-this.node.width/2-60,this.node.y=this.worldPos.y-this.node.height/2+50))},e.prototype.onDestroy=function(){this.listCards=null,this.ourScoreDetail=null,this.otherScoreDetail=null,this.listScoreItems=null,t.prototype.onDestroy.call(this)},e.prototype.initView=function(){this.initScoreView(),this.initCardsView()},e.prototype.initScoreView=function(){var t={Denari:"coinsNum",Primiera:"ColorFenMax",Cards:"cardNum",Settebello:"coins7",Scopa:"scopaCount"},e=0,a=this.layoutScore.node.children;for(var o in t){var i=t[o],r=this.ourScoreDetail?this.ourScoreDetail[i]:0,n=this.otherScoreDetail?this.otherScoreDetail[i]:0,s="Scopa"===o,l=c.i18nHelper.makeLanguage(d.IGameBaseI18n.k["txt_"+o],d.GameBaseLan.bundle);if(null!=r&&null!=n){var u=this.listScoreItems[e];if(!u){var h=a[e]||cc.instantiate(this.pfScoreItem);h.parent=this.layoutScore.node,h.x=0,h.y=0,(u=h.getComponent(p.UIGameResultItem))&&this.listScoreItems.push(u)}u&&u.init({leftScore:r,scoreName:l,rightScore:n,useDefColor:s})}e++}},e.prototype.initCardsView=function(){if(this.listCards=[],this.layoutCards)for(var t=this.cardNumMax,e=this.layoutCards.node.children,a=0;a<t;a++){var o=e[a];if(!o)break;this.listCards[a]=o.getComponent(u.UIScopaJPQCard);var i=this.unkonwnCards[a];i&&this.listCards[a].init({value:i.cardValue,num:i.cardNum})}},e.prototype.resetView=function(){for(var t=0;t<this.cardNumMax;t++){var e=this.listCards[t];if(!e)break;e.init({value:t+1,num:0})}},e.prototype.updateCardsView=function(t){t&&this.listCards&&this.listCards.forEach(function(e){if(e){var a=t.find(function(t){return t.cardValue==e.cardValue});a?e.setCardNum(a.cardNum):e.setCardNum(0)}})},e.prototype.updateScoreView=function(t){t&&(this.ourScoreDetail=t.ourScoreDetail||this.ourScoreDetail,this.otherScoreDetail=t.otherScoreDetail||this.otherScoreDetail,this.initScoreView())},r([f(cc.Label)],e.prototype,"labTitle",void 0),r([f(cc.Node)],e.prototype,"pfScoreItem",void 0),r([f(cc.Layout)],e.prototype,"layoutScore",void 0),r([f(cc.Layout)],e.prototype,"layoutCards",void 0),r([C],e)}(s.CxComponent);a.UIScopaJPQLayer=S,cc._RF.pop()},{"../../../../script/app/language/LanguageImpl":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../gameBaseSrc/i18n/GameBaseI18n":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../result/UIGameResultItem":"UIGameResultItem","./UIScopaJPQCard":"UIScopaJPQCard"}],UIScopaJPQShop:[function(t,e,a){"use strict";cc._RF.push(e,"c5066fGB/VLTbvIv7gDUPyp","UIScopaJPQShop");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaJPQShop=void 0;var n=t("../../../../script/app/event/Notify"),s=t("../../../../script/app/language/LanguageImpl"),c=t("../../../../script/app/view/shop/ShopJPQItem"),d=t("../../../../script/lib/base/CxComponent"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTitle=null,e.pfGoodsItem=null,e.svLayout=null,e}return i(e,t),e.prototype.init=function(t){t&&(t.worldPos&&(this.worldPos=t.worldPos),t.goodsList?this.initGoodList(t.goodsList):this.dispatch(n.Notify.Shop.REQ_GAME_EXCHANGE_LIST))},e.prototype.listEvent=function(){return new Map([[n.Notify.Shop.RTN_EXCHANGE_LIST,this.updateView],[n.Notify.Shop.RTN_EXCHANGE_RESULT,this.onExchaneReult]])},e.prototype.start=function(){this.labTitle&&(this.labTitle.string=s.LanguageImpl.i18n.out_of_jpq),this.worldPos&&(this.worldPos=this.node.parent.convertToNodeSpaceAR(this.worldPos),this.worldPos.x<0?(this.node.x=this.worldPos.x+this.node.width/2+60,this.node.y=this.worldPos.y+this.node.height/2-50):(this.node.x=this.worldPos.x-this.node.width/2-60,this.node.y=this.worldPos.y-this.node.height/2+50))},e.prototype.initGoodList=function(t){if(this.goodsList=t,t&&this.svLayout){var e=this.svLayout.node.getChildByName("view").getComponent(cc.Mask);e&&(e.enabled=t.length>3);for(var a=this.svLayout.content.children,o=(Math.max(a.length,t.length),0);o<3;o++){var i=t[o],r=a[o];if(i){r||((r=cc.instantiate(this.pfGoodsItem)).x=0,r.y=0,r.parent=this.svLayout.content),r.active=!0;var n=r.getComponent(c.default);n&&i&&(n.isInGame=!0,n.init({goodsInfo:i}))}else r.active=!1}}},e.prototype.updateView=function(t){this.initGoodList(t)},e.prototype.onExchaneReult=function(){this.node.destroy()},r([u(cc.Label)],e.prototype,"labTitle",void 0),r([u(cc.Node)],e.prototype,"pfGoodsItem",void 0),r([u(cc.ScrollView)],e.prototype,"svLayout",void 0),r([p],e)}(d.CxComponent);a.UIScopaJPQShop=h,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageImpl":void 0,"../../../../script/app/view/shop/ShopJPQItem":void 0,"../../../../script/lib/base/CxComponent":void 0}],UIScopaKOAnim:[function(t,e,a){"use strict";cc._RF.push(e,"4b33ft3PuNFxLd1sMb4xQWy","UIScopaKOAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaKOAnim=void 0;var n=t("../../../../script/app/const/AudioFile"),s=t("../../../../script/app/event/Notify"),c=t("./../../../../script/lib/base/CxComponent"),d=cc._decorator,l=d.ccclass,p=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeleton=null,e}return i(e,t),e.prototype.init=function(){},e.prototype.start=function(){var t=this;this.dispatch(s.Notify.Base.PLAY_EFFECT,{path:n.AudioFile.Game.KO}),this.skeleton&&(this.skeleton.node.active=!0,this.skeleton.enabled=!0,this.skeleton.animation="ko",this.skeleton.setCompleteListener(function(){cc.isValid(t)&&t.node.destroy()}))},r([p({type:sp.Skeleton,tooltip:"scopa KO"})],e.prototype,"skeleton",void 0),r([l],e)}(c.CxComponent);a.UIScopaKOAnim=u,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/event/Notify":void 0,"./../../../../script/lib/base/CxComponent":void 0}],UIScopaScoreInfo:[function(t,e,a){"use strict";cc._RF.push(e,"ea32d8AvWROVqb8uJ2tfQuR","UIScopaScoreInfo");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaScoreInfo=void 0;var n=t("./../../../../script/lib/utils/ScreenAdapter"),s=t("../../../../script/lib/base/CxComponent"),c=t("../../../gameBaseSrc/model/GameEvent"),d=t("./UIScopaScoreItem"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pArrScoreItem=[],e}return i(e,t),e.prototype.listEvent=function(){return new Map([[c.GameEvent.Desk.SCOPA_CHANGE_SCORE,this.onChangeScore],[c.GameEvent.Desk.UPDATE_SCOPA_SCORE,this.onUpdateScore],[c.GameEvent.Com.GAME_SCENE_CLEAR,this.clear],[c.GameEvent.Com.READY_NEXT_CLEAR,this.clear],[c.GameEvent.Desk.UPDATE_DESKINFO,this.initView]])},e.prototype.start=function(){this.pArrScoreItem&&(n.ScreenAdapter.paddingTop(this.pArrScoreItem[1].node),n.ScreenAdapter.paddingBottom(this.pArrScoreItem[0].node))},e.prototype.initView=function(t){if(t.roomCfg){var e=parseInt(t.roomCfg[1])||0;e&&this.pArrScoreItem&&this.pArrScoreItem.forEach(function(t){t&&t.setBaseScore(e)})}},e.prototype.onChangeScore=function(t){this.pArrScoreItem&&this.pArrScoreItem.forEach(function(e){e&&e.viewId===t.viewId&&e.onChangeScore(t)})},e.prototype.onUpdateScore=function(t){this.pArrScoreItem&&this.pArrScoreItem.forEach(function(e){e&&e.viewId===t.viewId&&e.onUpdateScore(t)})},e.prototype.clear=function(){this.pArrScoreItem&&this.pArrScoreItem.forEach(function(t){t&&t.clear()})},r([u({type:d.UIScopaScoreItem,tooltip:"item"})],e.prototype,"pArrScoreItem",void 0),r([p],e)}(s.CxComponent);a.UIScopaScoreInfo=h,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/lib/utils/ScreenAdapter":void 0,"./UIScopaScoreItem":"UIScopaScoreItem"}],UIScopaScoreItem:[function(t,e,a){"use strict";cc._RF.push(e,"364fbkHMxRKbIYFmCyuVIPm","UIScopaScoreItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScopaScoreItem=void 0;var n=t("./../../../../script/app/view/ComUI"),s=t("../../../../script/lib/base/CxComponent"),c=t("../../../gameBaseSrc/alg/ScopaLogic"),d=t("../../../gameBaseSrc/view/PokerCreator"),l=t("../poker/UIPokerCardBase"),p=t("../../../gameBaseSrc/model/GameEvent"),u=cc._decorator,h=u.ccclass,C=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfCard=null,e.labMultp=null,e.labBaseScore=null,e.ndGoldCards=null,e.skltData=null,e.viewId=-1,e.pArrCardEffect=[],e.baseScore=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.clear(),this.node.on("click",this.onClickHelp,this)},e.prototype.init=function(t){this.viewId=t.viewId||-1,this.baseScore=t.baseScore||0,this.setBaseScore(this.baseScore)},e.prototype.onClickHelp=function(t){var e=t.node.convertToWorldSpaceAR(cc.Vec3.ZERO);this.dispatch(p.GameEvent.OperateEvent.CLICK_SCOPA_ATTACK_VIEW,{viewId:this.viewId,worldPos:e})},e.prototype.initCards=function(t,e){if(this.pfCard&&this.ndGoldCards){var a,o=t.length,i=-this.ndGoldCards.width/2+25,r=42,n=1,s=this.ndGoldCards.childrenCount;if(s+o>7){r=25;for(var p=this.ndGoldCards.children,u=0;u<s;u++){var h=i+r*u;cc.tween(p[u]).to(.23,{x:h}).start()}}for(u=s;u<s+o;u++){h=i+r*u,n=.1*u,(a=cc.instantiate(this.pfCard)).parent=this.ndGoldCards;var C=a.getComponent(l.UIPokerCardBase);C||(C=a.addComponent(l.UIPokerCardBase));var f=d.CardPosInfo.get();f.pos=cc.v2(h,0),f.scale=.15,f.zIndex=u+3,C.init({meta:c.LocalCardSt.get(t[u-s]),posInfo:f}),e&&this.playEffectOverCard(a,n)}}},e.prototype.playEffectOverCard=function(t,e){var a=this;if(t){t.active=!0,cc.tween(t).set({opacity:0,scale:.075}).delay(e||0).to(.13,{opacity:146,scale:.18}).to(.1,{opacity:255,scale:.15}).start();var o=(new cc.Node).addComponent(sp.Skeleton);o&&this.skltData&&(this.pArrCardEffect=this.pArrCardEffect||[],this.pArrCardEffect.push(o),o.node.opacity=0,o.node.position=t.position,o.node.parent=t.parent,o.node.zIndex=t.zIndex+1,cc.tween(o.node).delay(e||0).call(function(){o.node.opacity=255,cc.isValid(o)&&(o.skeletonData=a.skltData,o.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.SHARED_CACHE),o.node.active=!0,o.enabled=!0,o.animation="lianshengbaodian",o.loop=!1,o.paused=!1,o.premultipliedAlpha=!1,o.setCompleteListener(function(){cc.isValid(o)&&o.node.destroy()}))}).start())}},e.prototype.setBaseScore=function(t){this.labBaseScore&&(this.labBaseScore.string="x"+t)},e.prototype.onChangeScore=function(t){if(t&&t.viewId===this.viewId){this.node.active=!0,this.initCards(t.cards,!0);var e=.1*(t.cards.length+1);this.labMultp&&(this.labMultp.node.active=!0,this.labMultp.string=""+t.multp,this.labMultp.node.opacity=0,cc.tween(this.labMultp.node).delay(e).set({opacity:255,scale:1}).to(.13,{scale:2}).to(.17,{scale:1.5}).to(.16,{scale:2}).to(.14,{scale:1}).start(),this.labBaseScore&&(this.labMultp.node.x=this.labBaseScore.node.x-n.ComUI.getLabelSize(this.labBaseScore).width-n.ComUI.getLabelSize(this.labMultp).width/2)),this.labBaseScore&&(this.labBaseScore.node.active=!0)}},e.prototype.onUpdateScore=function(t){var e=t.playerGoldCards&&t.playerGoldCards.length>0;this.node.active=e,this.labBaseScore&&(this.labBaseScore.node.active=e,this.labBaseScore.string="x"+t.baseScore),this.labMultp&&(this.labMultp.node.active=e,this.labMultp.string=""+t.playerMulpScore,this.labBaseScore&&(this.labMultp.node.x=this.labBaseScore.node.x-n.ComUI.getLabelSize(this.labBaseScore).width-n.ComUI.getLabelSize(this.labMultp).width/2)),this.ndGoldCards&&this.ndGoldCards.removeAllChildren(!0),this.initCards(t.playerGoldCards,!1)},e.prototype.clear=function(){this.node.active=!1,this.labBaseScore&&(this.labBaseScore.node.active=!1),this.labMultp&&(this.labMultp.node.active=!1),this.ndGoldCards&&this.ndGoldCards.removeAllChildren(!0)},r([C({type:cc.Prefab,tooltip:"\u724c"})],e.prototype,"pfCard",void 0),r([C({type:cc.Label,tooltip:"\u500d\u6570"})],e.prototype,"labMultp",void 0),r([C({type:cc.Label,tooltip:"\u57fa\u672c\u5206"})],e.prototype,"labBaseScore",void 0),r([C({type:cc.Node,tooltip:"\u6240\u6709scopa \u6536\u96c6\u7684\u91d1\u5e01\u724c"})],e.prototype,"ndGoldCards",void 0),r([C({type:sp.SkeletonData,tooltip:"\u5c55\u793a\u91d1\u5e01\u724c\u7279\u6548"})],e.prototype,"skltData",void 0),r([C({type:cc.Integer,tooltip:"viewId"})],e.prototype,"viewId",void 0),r([h],e)}(s.CxComponent);a.UIScopaScoreItem=f,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../gameBaseSrc/alg/ScopaLogic":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"../../../gameBaseSrc/view/PokerCreator":void 0,"../poker/UIPokerCardBase":"UIPokerCardBase","./../../../../script/app/view/ComUI":void 0}],UIScoreChangeAnim:[function(t,e,a){"use strict";cc._RF.push(e,"77badH3qhFFx5bRCGmM4De4","UIScoreChangeAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UIScoreChangeAnim=void 0;var n=t("./../../../../script/app/view/ComUI"),s=t("../../../../script/lib/base/CxComponent"),c=t("../../../gameBaseSrc/model/GameEvent"),d=t("../../../../script/lib/utils/Display"),l=t("../../../../script/lib/utils/ComUtils"),p=cc._decorator,u=p.ccclass,h=p.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fontAdd=null,e.fontMinus=null,e.spCapped=null,e.spBankrupt=null,e.arrLabChangeScore=[],e.moveOffsetX=100,e.arrChangeScorePos=[],e}return i(e,t),e.prototype.listEvent=function(){return new Map([[c.GameEvent.Effect.CHANGE_SCORE,this.onChangeScore],[c.GameEvent.Com.READY_NEXT_CLEAR,this.clear],[c.GameEvent.Effect.CLEAR,this.clear]])},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.arrChangeScorePos=[cc.v2(d.Display.cx,d.Display.cy-250),cc.v2(d.Display.width-240,d.Display.cy+125),cc.v2(d.Display.cx,d.Display.cy+510),cc.v2(240,d.Display.cy+125)],this.clear()},e.prototype.clear=function(){this.arrLabChangeScore&&this.arrLabChangeScore.forEach(function(t){t&&(t.node.active=!1)})},e.prototype.onChangeScore=function(t){if(t)for(var e=t.find(function(t){return 3===t.tag})?.4:0,a=0;a<t.length;a++){var o=t[a].changeScore,i=t[a].tag,r=t[a].viewId;if(null!=o){var s=this.arrLabChangeScore[r],c=null;s||((s=(new cc.Node).addComponent(cc.Label)).node.parent=this.node,this.arrLabChangeScore[r]=s),s.string="/"+Math.abs(o),s.font=o>0?this.fontAdd:this.fontMinus,(c=s.node).active=!0,c.opacity=255,c.x=this.arrChangeScorePos[r].x-this.moveOffsetX,c.y=this.arrChangeScorePos[r].y,c.stopAllActions(),this.playeAnim(c,this.arrChangeScorePos[r],e);var d=this.arrChangeScorePos[r].x+n.ComUI.getLabelSize(s).width/2;if(this.spCapped&&2===i){this.spCapped.node.active=!0,this.spCapped.node.x=d-this.moveOffsetX,this.spCapped.node.y=c.y+48;var p=cc.v2(d,this.spCapped.node.y);this.playeAnim(this.spCapped.node,p,e)}else this.spBankrupt&&1===i?(this.spBankrupt.node.active=!0,this.spBankrupt.node.x=d-this.moveOffsetX,this.spBankrupt.node.y=c.y+48,p=cc.v2(d,this.spBankrupt.node.y),this.playeAnim(this.spBankrupt.node,p)):3===i&&(this.playeAnim(c,this.arrChangeScorePos[r],e),l.ComUtils.randomLabel({label:s,startNum:Math.abs(o),finalNum:0,actionTime:.3,delayTime:.8,prefix:"/"}))}}},e.prototype.playeAnim=function(t,e,a){void 0===a&&(a=0),t&&cc.tween(t).set({opacity:0}).to(.2,{position:cc.v3(e),opacity:255}).delay(.5+a).to(.2,{opacity:0}).set({active:!1}).start()},r([h({type:cc.BitmapFont,tooltip:"\u52a0\u5206\u7684\u5b57\u4f53"})],e.prototype,"fontAdd",void 0),r([h({type:cc.BitmapFont,tooltip:"\u51cf\u5206\u7684\u5b57\u4f53"})],e.prototype,"fontMinus",void 0),r([h({type:cc.Sprite,tooltip:"\u5c01\u9876"})],e.prototype,"spCapped",void 0),r([h({type:cc.Sprite,tooltip:"\u7834\u4ea7"})],e.prototype,"spBankrupt",void 0),r([h({type:[cc.Label],tooltip:"\u73a9\u5bb6\u5206\u6570\u53d8\u5316"})],e.prototype,"arrLabChangeScore",void 0),r([u],e)}(s.CxComponent);a.UIScoreChangeAnim=C,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Display":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/app/view/ComUI":void 0}],UISettebelloAnim:[function(t,e,a){"use strict";cc._RF.push(e,"c835e9v3KlBzK+CeETuO1sB","UISettebelloAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UISettebelloAnim=void 0;var n=t("./../../../../script/app/module/tables/TablesConfig"),s=t("../../../../script/lib/base/CxCompExt"),c=t("../../../../script/app/module/tables/TableSkinMgr"),d=cc._decorator,l=d.ccclass,p=d.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeleton=null,e.skltGold=null,e}return i(e,t),e.prototype.init=function(t){t.settebello&&this.playSettebello(t.tableId),t.bScopa?(this.skeleton.node.scale=.8,this.skeleton.node.y=180):(this.skeleton.node.scale=1,this.skeleton.node.y=0,this.playGold(t.tableId))},e.prototype.playSettebello=function(t){var e=this;c.TableSkinMgr.getSkeleton("effect/scopa",t).then(function(t){t&&cc.isValid(e)&&e.skeleton&&(e.skeleton.enabled=!1,e.skeleton.clearTracks(),e.skeleton.setToSetupPose(),e.skeleton.skeletonData=t,e.skeleton.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),e.skeleton.loop=!1,e.skeleton.premultipliedAlpha=!1,e.skeleton.node.active=!0,e.skeleton.paused=!1,e.skeleton.enabled=!0,e.skeleton.animation="settebello",e.skeleton.setCompleteListener(function(){cc.isValid(e)&&e.close()}))})},e.prototype.playGold=function(t){var e=this;if(this.skltGold){var a=c.TableSkinMgr.getTableCfgById(t);a.id!==n.TableID.def&&a.id!==n.TableID.lydxc&&a.id!==n.TableID.hdcz||(this.skltGold.node.active=!0,this.skltGold.enabled=!0,this.skltGold.animation="fjb_g",this.skltGold.setCompleteListener(function(){cc.isValid(e)&&e.close()}))}},e.prototype.close=function(){this.clear(),t.prototype.close.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this.skeleton&&(this.skeleton.node.parent.active=!1,this.skeleton.paused=!0)},r([p(sp.Skeleton)],e.prototype,"skeleton",void 0),r([p(sp.Skeleton)],e.prototype,"skltGold",void 0),r([l],e)}(s.CxCompExt);a.UISettebelloAnim=u,cc._RF.pop()},{"../../../../script/app/module/tables/TableSkinMgr":void 0,"../../../../script/lib/base/CxCompExt":void 0,"./../../../../script/app/module/tables/TablesConfig":void 0}],UISingleCardTouchBehavior:[function(t,e,a){"use strict";cc._RF.push(e,"b5fbfPTg4hGLJ6L+oNDhFLl","UISingleCardTouchBehavior");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0});var n,s=t("./../../../../script/lib/utils/Display"),c=t("../../../../script/lib/base/CxCompExt"),d=t("../../../../script/lib/utils/Logger"),l=t("../../../gameBaseSrc/model/GameEvent"),p=t("./UIMyHandCardList"),u=t("./UIMyHandPokerView");(function(t){t[t.NONE=0]="NONE",t[t.SELECT=1]="SELECT",t[t.HOLD=2]="HOLD"})(n||(n={}));var h=function(){this.isSelected=!1,this.isNewCard=!1},C=cc._decorator,f=C.ccclass,S=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ui=null,e.isCardCanTouch=!1,e.isPressing=!1,e.isDoublePressMode=!1,e.isDoublePressed=!1,e.cardSelectStatus=0,e.curSelectCardIndx=-1,e.iTouchId=-1,e.isCanOutCard=!0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.ui=this.node.getComponent(u.UIMyHandPokerView),this.ui||(this.ui=this.node.addComponent(u.UIMyHandPokerView)),this.pCardList=this.getComponent(p.UIMyHandCardList),this.setCanTouch(!0),this.TouchRect=new cc.Rect(167,130,s.Display.width,400),this.addTouchEventListener()},e.prototype.onDestroy=function(){this.ui&&(this.ui=null),this.pCardList&&(this.pCardList=null),this.removeEventAtTouchEnd(),t.prototype.onDestroy.call(this)},e.prototype.checkCardCanOut=function(){return!0},e.prototype.isMeCanOutCard=function(){return this.isCanOutCard},e.prototype.setMeCanOutCard=function(t){this.isCanOutCard=t},e.prototype.setDoublePressMode=function(t){this.isDoublePressMode=t},e.prototype.getDoublePressMode=function(){return this.isDoublePressMode},e.prototype.setDoublePressed=function(t){this.isDoublePressed=t},e.prototype.getDoublePressed=function(){return this.isDoublePressed},e.prototype.setCardSelectStatus=function(t){this.cardSelectStatus=t},e.prototype.getCardSelectStatus=function(){return this.cardSelectStatus},e.prototype.setPressing=function(t){this.isPressing=t},e.prototype.getPressing=function(){return this.isPressing},e.prototype.getCanTouch=function(){return this.isCardCanTouch},e.prototype.addTouchEventListener=function(){this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.addEventAtTouchBegan()},e.prototype.setCanTouch=function(t){this.isCardCanTouch=t,this.iTouchId=-1,t?this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this):this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this)},e.prototype.addEventAtTouchBegan=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.removeEventAtTouchEnd=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this)},e.prototype.onTouchBegan=function(t){if(-1===this.iTouchId&&this.ui&&!this.ui.isSendingCard()){this.iTouchId=t.getID();var e=t.getLocation(),a=this.node.convertToNodeSpaceAR(e),o=this.TouchRect.contains(a);if(this.getCanTouch()&&1==o)if(this.setPressing(!0),!0===o){var i=this.getTouchCardIndex(e);if(i>=0){var r=this.touchHandCard(i);1==r.isSelected?(this.setCardSelectStatus(n.SELECT),this.setPressing(!0),1==r.isNewCard?this.setDoublePressed(!1):this.setDoublePressed(!0)):(this.setCardSelectStatus(n.NONE),this.setDoublePressed(!1))}else this.selectCancelAndResortCard(!1,!1)}else this.selectCancelAndResortCard(!1,!1)}},e.prototype.onTouchMoved=function(t){if(this.iTouchId===t.getID()&&this.pCardList)if(this.ui&&this.ui.isSendingCard())this.onTouchCancel(t);else{var e=t.getLocation(),a=this.node.convertToNodeSpaceAR(e),o=this.TouchRect.contains(a);if(1==this.getPressing())if(0==this.getDoublePressMode())this.getCardSelectStatus()===n.NONE?(i=this.getTouchCardIndex(e))>=0&&(this.setCardSelectStatus(n.SELECT),this.touchHandCard(i)):this.getCardSelectStatus()===n.SELECT?!0===o?(i=this.getTouchCardIndex(e))>=0&&this.touchHandCard(i):this.curSelectCardIndx>=0?(this.setCardSelectStatus(n.HOLD),this.holdCardOn(this.curSelectCardIndx,e)):(this.setCardSelectStatus(n.NONE),this.selectCancelAndResortCard(!1,!0)):this.getCardSelectStatus()===n.HOLD&&this.holdCardMove(e);else if(this.getCardSelectStatus()===n.NONE)(i=this.getTouchCardIndex(e))>=0&&(1==(r=this.touchHandCard(i)).isSelected?(this.setCardSelectStatus(n.SELECT),!0===r.isNewCard&&this.setDoublePressed(!1)):(this.setCardSelectStatus(n.NONE),this.selectCancelAndResortCard(!1,!0)));else if(this.getCardSelectStatus()===n.SELECT){var i,r;!0===o?(i=this.getTouchCardIndex(e))>=0&&(1==(r=this.touchHandCard(i)).isSelected?(this.setCardSelectStatus(n.SELECT),!0===r.isNewCard&&this.setDoublePressed(!1)):(this.setCardSelectStatus(n.NONE),this.selectCancelAndResortCard(!1,!0))):this.curSelectCardIndx>=0&&(this.setCardSelectStatus(n.HOLD),this.holdCardOn(this.curSelectCardIndx,e))}else this.getCardSelectStatus()===n.HOLD&&this.holdCardMove(e)}},e.prototype.onTouchEnd=function(t){if(this.iTouchId===t.getID()&&this.pCardList)if(this.ui&&this.ui.isSendingCard())this.onTouchCancel(t);else{var e=t.getLocation(),a=this.node.convertToNodeSpaceAR(e),o=this.TouchRect.contains(a);if(this.getCanTouch()&&1==this.getPressing())if(0==this.getDoublePressMode()){if(this.getCardSelectStatus()===n.SELECT)!0===o&&(r=this.getTouchCardIndex(e))>=0&&this.selectCardOut(r);else if(this.getCardSelectStatus()===n.HOLD){var i=this.getHoldCardPosition();this.holdCardOff(),!0===o?this.setCardSelectStatus(n.SELECT):(this.setDoublePressed(!1),this.selectCardOut(this.curSelectCardIndx,i))}this.setCardSelectStatus(n.NONE)}else{var r;this.getCardSelectStatus()===n.SELECT?!0===o&&(r=this.getTouchCardIndex(e))>=0&&this.getDoublePressed()&&(this.setDoublePressed(!1),this.selectCardOut(r)):this.getCardSelectStatus()===n.HOLD&&(i=this.getHoldCardPosition(),this.holdCardOff(),!0===o?this.setCardSelectStatus(n.SELECT):(this.setDoublePressed(!1),this.selectCardOut(this.curSelectCardIndx,i)))}else this.clearHandCardSelectedStatus(),this.curTipIndx=0;this.setPressing(!1),this.clearHandCardPreSelectedStatus(),this.iTouchId=-1,this.setCardSelectStatus(n.NONE)}},e.prototype.onTouchCancel=function(t){this.getPressing()&&this.getCardSelectStatus()===n.HOLD&&this.onTouchEnd(t),this.iTouchId=-1,this.setCardSelectStatus(n.NONE),this.selectCancelAndResortCard(!1,!0),this.setDoublePressed(!1)},e.prototype.selectCancelAndResortCard=function(t,e){this.setDoublePressed(!1),this.curSelectCardIndx=-1,this.pCardList.setCurSelectCardIndx(this.curSelectCardIndx),this.ui.selectCancelAndResortCard(t,e)},e.prototype.selectCardOut=function(t,e){1==this.isMeCanOutCard()&&t>=0&&(this.ui.outCardByTouch(t,e),this.curSelectCardIndx=-1)},e.prototype.touchHandCard=function(t){var e=new h,a=this.pCardList.allHandCard;if(t>=0&&t<a.length){var o=a[t];if(!o)return void d.Logger.info("touchHandCard touchIndx is error ");var i=o.cardData.r;1==this.checkCardCanOut(i)?(e.isSelected=!0,this.curSelectCardIndx!==t&&(this.curSelectCardIndx=t,e.isNewCard=!0,this.pCardList.setCurSelectCardIndx(this.curSelectCardIndx),this.pCardList.initHandCardsPosition(!1),this.pCardList.selectCardByIndx(t),this.dispatch(l.GameEvent.HandCard.MY_HAND_CARD_SELECT,{isSelect:!0,cardData:i}),this.dispatch(l.GameEvent.Com.CARD_HIGH_LIGHT_ORANGE,{isDisplay:!0,cardDatas:[i]}))):(this.dispatch(l.GameEvent.HandCard.MY_HAND_CARD_TOUCH,{}),this.dispatch(l.GameEvent.Com.CARD_HIGH_LIGHT_ORANGE,{isDisplay:!1}),d.Logger.info("unSelect, touchCard can not out"))}return e},e.prototype.getTouchCardIndex=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];if(o&&!0===o.hitPos(t))return a}return-1},e.prototype.clearHandCardSelectedStatus=function(){for(var t=this.pCardList.allHandCard,e=0;e<t.length;e++){var a=t[e];a&&a.setSelected(!1)}},e.prototype.clearHandCardPreSelectedStatus=function(){for(var t=this.pCardList.allHandCard,e=0;e<t.length;e++){var a=t[e];a&&a.clearPreSelected()}},e.prototype.getSelectedCardData=function(){for(var t=[],e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];o&&o.isSelected()&&t.push(o.cardData)}return t},e.prototype.getPreSelectedCard=function(){for(var t=[],e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];o&&o.isPreSelected()&&t.push(o.cardData)}return t},e.prototype.setHandCardCanSelect=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=(n=e[a]).cardData;if(n&&o){n.setCanSelect(!1);for(var i=0;i<t.length;i++){var r=t[i];if(r&&o.l==r.l){n.setCanSelect(!0),n.setUnTouch(!1);break}}}}for(a=0;a<e.length;a++){var n;(n=e[a]).isCanSelect()||(n.setSelected(!1),n.setUnTouch(!0))}},e.prototype.setHandCardAllCanSelect=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=e[a];o&&(o.setCanSelect(t),o.setUnTouch(!t))}},e.prototype.selectCards=function(t){for(var e=this.pCardList.allHandCard,a=e.length-1;a>=0;a--){var o=!1,i=e[a];if(i&&i.cardData){for(var r=0;r<t.length;r++){var n=t[r];if(i.cardData.r===n.r){o=!0,i.setSelected(!0);break}}o||i.setSelected(!1)}}},e.prototype.checkTipCardAndPop=function(t){if(void 0===t&&(t=!1),this.tipCards&&this.tipCards.length>=1){this.curTipIndx=0;var e=this.tipCards[this.curTipIndx];e?(this.tipCards.length>1&&this.curTipIndx++,this.selectCards(e),t?this.checkCardValid(e):this.setOutMenuStatus(!0)):this.setOutMenuStatus(!1)}},e.prototype.checkCardValid=function(){},e.prototype.setOutMenuStatus=function(){},e.prototype.holdCardOn=function(t,e){this.pCardList.holdCardOn(t,e)},e.prototype.holdCardMove=function(t){this.pCardList.holdCardMove(t)},e.prototype.holdCardOff=function(){this.pCardList.holdCardOff()},e.prototype.getHoldCardPosition=function(){return this.pCardList.getHoldCardPosInfo()},r([f],e)}(c.CxCompExt));a.default=S,cc._RF.pop()},{"../../../../script/lib/base/CxCompExt":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/lib/utils/Display":void 0,"./UIMyHandCardList":"UIMyHandCardList","./UIMyHandPokerView":"UIMyHandPokerView"}],UISkinAnim:[function(t,e,a){"use strict";cc._RF.push(e,"98889j3dtRMS4+dDg/cSHSP","UISkinAnim");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=this&&this.__decorate||function(t,e,a,o){var i,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(n=(r<3?i(n):r>3?i(e,a,n):i(e,a))||n);return r>3&&n&&Object.defineProperty(e,a,n),n};Object.defineProperty(a,"__esModule",{value:!0}),a.UISkinAnim=void 0;var n=t("./../../../../script/lib/utils/Display"),s=t("./../../../../script/lib/base/CxComponent"),c=t("../../../../script/app/event/Notify"),d=t("../../../gameBaseSrc/model/GameEvent"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrHeadFinalPos=[],e}return i(e,t),e.prototype.listEvent=function(){return new Map([[c.Notify.Base.REQ_SCREEN_SHOT,this.onReqScreenShot],[c.Notify.Base.SCREEN_SHOT_RESULT,this.onScreenShotResult],[d.GameEvent.Player.PUT_HEADS_POS,this.onGetPlayersPos]])},e.prototype.onGetPlayersPos=function(t){if(t&&t[0]instanceof cc.Vec2)for(var e=0;e<t.length;e++){var a=this.node.convertToNodeSpace(t[e]);this.arrHeadFinalPos[e]=a}},e.prototype.onReqScreenShot=function(t){"skin"===t&&this.dispatch(c.Notify.Base.SCREEN_SHOT_START,{requestKey:"UISkinAnim"})},e.prototype.onScreenShotResult=function(t){if(t&&"UISkinAnim"===t.requestKey){var e=t.node;if(e){e.x=this.arrHeadFinalPos[2].x-n.Display.cx+50,e.y=this.arrHeadFinalPos[2].y-n.Display.cy,e.parent=this.node,e.zIndex=cc.macro.MAX_ZINDEX,e.anchorX=1,e.anchorY=1;var a=e.y+100;e.x,cc.tween(e).to(.6,{scale:.1}).delay(.5).to(.5,{opacity:0,scale:.03,y:a}).delay(.5).removeSelf().start()}}},r([p],e)}(s.CxComponent));a.UISkinAnim=u,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../gameBaseSrc/model/GameEvent":void 0,"./../../../../script/lib/base/CxComponent":void 0,"./../../../../script/lib/utils/Display":void 0}]},{},["ScopaGDCrazyLogicHandler","ScopaGDFlow","ScopaGDLogicHandler","ScopaVoice","CMD_ScopaCrazyMsgDefine","CMD_ScopaMsgDefine","ScopaDefine","ScopaGDCrazyPlayData","ScopaGDGameMsg","ScopaGDPlayData","ScopaGDUIConfig","ScopaRoomData","ScopaGDCrazyScene","ScopaGDScene","UIGameDeskMenu","UIGameInfo","UIGameRealTimeScore","UIGameUserInfoBg","UIScopaAttackHelp","UIScopaAttackListItem","UIScopaAttackListView","UIScopaAttackMenu","UIScopaAttackView","UIScopaJPQCard","UIScopaJPQLayer","UIScopaJPQShop","UIScopaScoreInfo","UIScopaScoreItem","UIEatCardDetails","UIEatCardOnDesk","UIScopaCountView","UIHuDunAnim","UIScopaAnim","UIScopaKOAnim","UIScoreChangeAnim","UISettebelloAnim","UISkinAnim","UIMultCardTouchBehavior","UIMyHandCardList","UIMyHandPokerView","UISingleCardTouchBehavior","UIGameChooseEatCardView","UIGameEatCardGroup","UIOthersHandCardsView","UIPlayerCardsViewBase","UIPlayerCardsView_1","UIPlayerCardsView_2","UIPlayerCardsView_3","UIPlayerHandCardList","UIDeskOutCardView","UIDeskOutPoker","UIMyHandPoker","UIPokerCardBase","UIGameCrazyScoreDetail","UIGameResultBattle","UIGameResultItem","UIGameResultList","UIGameResultMenu","UIGameResultPlayer","UIGameResultTitle","UIGameResultView","UIResultScoreDetailView"]);