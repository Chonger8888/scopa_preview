window.__require=function t(e,o,i){function n(s,r){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var c="function"==typeof __require&&__require;if(!r&&c)return c(a,!0);if(p)return p(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){return n(e[s][1][t]||t)},l,l.exports,t,e,o,i)}return o[s].exports}for(var p="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({BindAccountConfirm:[function(t,e,o){"use strict";cc._RF.push(e,"7b96agYRKZPQrVb3z0EKysk","BindAccountConfirm");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/const/Global"),r=t("../../../../script/app/event/Notify"),a=t("../../../../script/app/language/LanguageCfg"),c=t("../../../../script/app/view/ComUI"),l=t("../../../../script/lib/base/BottomBarView"),u=t("../../../../script/lib/base/CxComponent"),d=t("../../../../script/lib/utils/ComUtils"),y=t("../../../../script/lib/utils/Logger"),h=cc._decorator,b=h.ccclass,f=h.property,L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pHeadNode=null,e.pNameLabel=null,e.pTipLabel=null,e.mBindInfo=null,e}return n(e,t),e.prototype.init=function(t){this.mBindInfo=t},e.prototype.initParams=function(){return{showSubBG:!1,showTitle:!1}},e.prototype.listEvent=function(){return new Map([[r.Notify.UserInfo.RTN_BIND_USER_ACCOUNT,this.onBindAccountResult]])},e.prototype.start=function(){this.initData(),this.initLayer()},e.prototype.initData=function(){if(this.mBindInfo){this.mToken=this.mBindInfo.token||"";var t=this.mBindInfo.userInfo;t&&(this.mName=t.name,this.mUrl=t.pictureUrl)}},e.prototype.initLayer=function(){var t=this;this.pNameLabel&&this.mName&&(this.pNameLabel.string=""+this.mName),this.pTipLabel&&(this.pTipLabel.string=d.ComUtils.getLang(a.LangKey.fb_bind_account_content)),this.mUrl&&(this.pHeadNode.destroyAllChildren(),c.ComUI.createUserHead({parent:this.pHeadNode,url:this.mUrl})),l.BottomBarView.setBottomBar(this.node,[{style:s.gColorStyle.GREEN,text:d.ComUtils.makeLang(a.LangKey.text_cancel),callback:function(){t.node.destroy()}},{style:s.gColorStyle.DARKBLUE,text:d.ComUtils.makeLang(a.LangKey.text_login),callback:function(){t.onBindConfirm()}}])},e.prototype.onBindConfirm=function(){this.mToken&&(c.ComUI.addLoading({time:5}),y.Logger.info("onBindConfirm() token="+this.mToken),y.Logger.info("onBindConfirm() name="+this.mName),y.Logger.info("onBindConfirm() url="+this.mUrl),this.dispatch(r.Notify.UserInfo.REQ_BIND_USER_ACCOUNT,{token:this.mToken,name:this.mName,url:this.mUrl,loginType:s.gLoginType.FaceBook}))},e.prototype.onBindAccountResult=function(t){c.ComUI.rmLoading(),0==t.code||(2==t.code?c.ComUI.showDialog({text:"Account already exists, please login again."}):c.ComUI.showDialog({text:d.ComUtils.getLang(a.LangKey.text_fail_bind_fb)})),this.node.destroy()},p([f(cc.Node)],e.prototype,"pHeadNode",void 0),p([f(cc.Label)],e.prototype,"pNameLabel",void 0),p([f(cc.Label)],e.prototype,"pTipLabel",void 0),p([b],e)}(u.CxComponent);o.default=L,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/BottomBarView":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0}],BindAccountLayer:[function(t,e,o){"use strict";cc._RF.push(e,"a285biheRVFcYvSEUXmSYpE","BindAccountLayer");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/event/GuiEvent"),r=t("../../../../script/app/language/LanguageCfg"),a=t("../../../../script/app/model/DataProxy"),c=t("../../../../script/app/module/login/view/LoginManager"),l=t("../../../../script/app/view/ComUI"),u=t("../../../../script/lib/base/CxComponent"),d=t("../../../../script/lib/utils/ComUtils"),y=cc._decorator,h=y.ccclass,b=y.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pGoldLabel=null,e.pTipLabel=null,e.mBindInfo=null,e}return n(e,t),e.prototype.initParams=function(){return{showSubBG:!1,showTitle:!1}},e.prototype.start=function(){this.setVerticalOffset(),this.initLayer()},e.prototype.initLayer=function(){this.mBindInfo=a.DataProxy.getInstance().userData.bindAccountInfo,this.mBindInfo&&(this.pGoldLabel&&(this.pGoldLabel.string=d.ComUtils.formatGoldStr(this.mBindInfo.rewardNum)),this.pTipLabel&&(this.pTipLabel.string=d.ComUtils.getLang(r.LangKey.fb_bind_account_tip)))},e.prototype.onBindAccount=function(){var t=this;l.ComUI.addLoading({time:10}),c.LoginManager.getInstance().bindFBAccount(function(e){l.ComUI.rmLoading(),e&&e.ok?t.dispatch(s.GuiEvent.PopMsg.DISPLAY_BIND_CONFIRM,e):l.ComUI.showToast(d.ComUtils.getLang(r.LangKey.text_fail_bind_fb)),t.node.destroy()})},e.prototype.test=function(){this.dispatch(s.GuiEvent.PopMsg.DISPLAY_BIND_CONFIRM,{token:"abc",userInfo:{name:"myname",pictureUrl:"https://scontent-hkg4-2.xx.fbcdn.net/v/t1.30497-1/cp0/c15.0.50.50a/p50x50/84628273_176159830277856_972693363922829312_n.jpg?_nc_cat=1&ccb=2&_nc_sid=12b3be&_nc_ohc=NNh98FvJJdcAX8VHRpi&_nc_ht=scontent-hkg4-2.xx&tp=27&oh=c59f5e6b2b95b7812d7dc123e11b7aa1&oe=602F3E38"}})},p([b(cc.Label)],e.prototype,"pGoldLabel",void 0),p([b(cc.Label)],e.prototype,"pTipLabel",void 0),p([h],e)}(u.CxComponent);o.default=f,cc._RF.pop()},{"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/login/view/LoginManager":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0}],LobbyBottomMenu:[function(t,e,o){"use strict";cc._RF.push(e,"10affoRLf5KXoJYdcFZbK+A","LobbyBottomMenu");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyBottomMenu=void 0;var s=t("../../../../script/app/const/AudioFile"),r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/event/GuiEvent"),c=t("../../../../script/app/event/Notify"),l=t("../../../../script/app/language/LanguageCfg"),u=t("../../../../script/app/model/ActivityDataProxy"),d=t("../../../../script/app/model/DataProxy"),y=t("../../../../script/app/module/buryPoint/BuryPoint"),h=t("../../../../script/app/module/buryPoint/BuryPointUtils"),b=t("../../../../script/app/view/ComFunctions"),f=t("../../../../script/app/view/ComUI"),L=t("../../../../script/app/view/SettingLayer"),v=t("../../../../script/lib/base/CxComponent"),m=t("../../../../script/lib/base/NewTag"),_=t("../../../../script/lib/i18n/i18nHelper"),g=t("../../../../script/lib/utils/ComUtils"),C=t("../../model/LobbyEvent"),I=cc._decorator,E=I.ccclass,P=I.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnStore=null,e.btnMissions=null,e.toggleScopa=null,e.toggleTables=null,e.spNew=null,e.spLock=null,e.spGray=null,e.delayLock=!0,e.bInHome=!0,e}return n(e,t),e.prototype.listEvent=function(){return new Map([[c.Notify.Activity.CHANGE_REDDOT_NUM,this.onChangeRedDotNum],[C.LobbyEvent.Click.CLICK_HOME,this.onClickHome],[C.LobbyEvent.Click.CLICK_TABLES,this.onClickTables],[a.GuiEvent.Anim.GET_PACK_UP_TABLE_POS,this.onGetTableTabPos],[c.Notify.Other.RESP_NEW_UNLOCK_INFO,this.onGetUnLockInfo],[c.Notify.Base.OPEN_USERINFO,this.onGetUnLockInfo],[c.Notify.Other.RESP_NEW_UNLOCK_READ_ST,this.onGetUnLockNewStatus],[c.Notify.Other.RESP_TABLES_NEW_ST,this.onGetUnLockNewStatus],[c.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage]])},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.mapRedDotCtlBtn=null},e.prototype.start=function(){this.mapRedDotCtlBtn=new Map,this.btnStore&&this.btnStore.node.on("click",this.onClickShop,this),this.btnMissions&&this.btnMissions.node.on("click",this.onClickMissions,this),this.toggleScopa&&this.toggleScopa.node.on("toggle",this.onToggleScopaClick,this),this.toggleTables&&this.toggleTables.node.on("toggle",this.onToggleTablesClick,this),this.toggleScopa&&(this.bInHome=!0,this.toggleScopa.isChecked=!0),this.bindRedDotEvent(),this.onGetUnLockInfo()},e.prototype.multiLang=function(){},e.prototype.bindRedDotEvent=function(){if(this.toggleTables){this.mapRedDotCtlBtn.set(u.gRedDot.TABLES_REDDOT,[this.toggleTables.node]);var t=d.DataProxy.getInstance().tablesData.redPoint;f.ComUI.changeRedDot(this.toggleTables.node,t)}this.btnMissions&&this.mapRedDotCtlBtn.set(u.gRedDot.DAILY_TASK,[this.btnMissions.node])},e.prototype.onClickShop=function(){this.delayLock&&(g.ComUtils.delayLimit(this),this.dispatch(a.GuiEvent.PopMsg.DISPLAY_SHOP_LAYER),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.BuryPointUtils.send(y.BuryPoint.Debug.Lobby.ClickStore))},e.prototype.onToggleScopaClick=function(t){t.isChecked&&!this.bInHome&&(this.dispatch(C.LobbyEvent.Click.CLICK_HOME),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.BuryPointUtils.send(y.BuryPoint.Debug.Lobby.ClickScopa),this.bInHome=!0)},e.prototype.onToggleTablesClick=function(t){if(!b.ComFunctions.isUnlock(r.gUnlcokTag.table)){var e=d.DataProxy.getInstance().otherData.getUnlockCfg(r.gUnlcokTag.table),o=_.i18nHelper.getLanguage([l.LangKey.table_unlock_tips,e.dwLevel]);return f.ComUI.showToast(o,3,2),this.toggleScopa.isChecked=!0,void(this.toggleTables.isChecked=!1)}this.spNew.getComponent(m.default)&&this.spNew.getComponent(m.default).readNewTag(),t.isChecked&&this.bInHome&&(this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.BuryPointUtils.send(y.BuryPoint.Debug.Lobby.ClickTables),this.dispatch(C.LobbyEvent.Click.CLICK_TABLES),this.bInHome=!1)},e.prototype.onClickMore=function(){this.delayLock&&(g.ComUtils.delayLimit(this),this.dispatch(a.GuiEvent.PopMsg.DISPLAY_SETTING_LAYER,new L.SettingData(L.SettingType.LOBBY)),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.BuryPointUtils.send(y.BuryPoint.Debug.Lobby.ClickMore))},e.prototype.onClickMissions=function(){this.delayLock&&(g.ComUtils.delayLimit(this),this.dispatch(a.GuiEvent.PopMsg.DISPLAY_MISSION_LAYER),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.BuryPointUtils.send(y.BuryPoint.Debug.Lobby.ClickMissions))},e.prototype.onClickBoxShop=function(){this.delayLock&&(g.ComUtils.delayLimit(this),this.dispatch(a.GuiEvent.PopMsg.DISPLAY_SHOP_BOX_LAYER),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.BuryPointUtils.send(y.BuryPoint.Debug.Lobby.ClickMissions))},e.prototype.onChangeRedDotNum=function(t){if(t&&this.mapRedDotCtlBtn){var e=this.mapRedDotCtlBtn.get(t.activityId);e&&e.forEach(function(e){f.ComUI.changeRedDot(e,t.redcount)})}},e.prototype.setRedDot=function(t,e){var o=t.getChildByName("reddot");o&&(o.active=e)},e.prototype.onClickHome=function(){this.bInHome=!0,this.toggleScopa&&(this.toggleScopa.isChecked=!0)},e.prototype.onClickTables=function(){this.bInHome=!1,this.toggleTables&&(this.toggleTables.isChecked=!0)},e.prototype.onGetTableTabPos=function(){this.toggleTables&&this.dispatch(a.GuiEvent.Anim.PUT_PACK_UP_TABLE_POS,{worldPos:this.toggleTables.node.convertToWorldSpaceAR(cc.Vec2.ZERO)})},e.prototype.onGetUnLockInfo=function(){var t=b.ComFunctions.isUnlock(r.gUnlcokTag.table);this.spLock.node.active=!t,this.spGray.node.active=!t},e.prototype.onGetUnLockNewStatus=function(){var t=d.DataProxy.getInstance().otherData.isNewTagRead(r.gUnlcokTag.table);if(this.spNew.node.active=!t,t){var e=d.DataProxy.getInstance().otherData.newTables;e&&e.length>0&&(this.spNew.node.active=!0)}},e.prototype.onChangeLanguage=function(){this.multiLang()},p([P(cc.Button)],e.prototype,"btnStore",void 0),p([P(cc.Button)],e.prototype,"btnMissions",void 0),p([P(cc.Toggle)],e.prototype,"toggleScopa",void 0),p([P(cc.Toggle)],e.prototype,"toggleTables",void 0),p([P(cc.Sprite)],e.prototype,"spNew",void 0),p([P(cc.Sprite)],e.prototype,"spLock",void 0),p([P(cc.Sprite)],e.prototype,"spGray",void 0),p([E],e)}(v.CxComponent);o.LobbyBottomMenu=T,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/ActivityDataProxy":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../../script/app/view/ComFunctions":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/app/view/SettingLayer":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/base/NewTag":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../model/LobbyEvent":"LobbyEvent"}],LobbyDeskBuild:[function(t,e,o){"use strict";cc._RF.push(e,"993eaZXKU5CT6KFSjAM+6H/","LobbyDeskBuild");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/const/Global"),r=t("../../../../script/app/view/deskbuild/DeskBuildMenu"),a=t("../../../../script/lib/base/CxComponent"),c=t("../../../../script/lib/utils/ComUtils"),l=t("../../model/LobbyEvent"),u=cc._decorator,d=u.ccclass,y=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndMenu=null,e.pDeskBuildMenu=null,e.mIsInTable=!1,e}return n(e,t),e.prototype.listEvent=function(){return new Map([[l.LobbyEvent.Click.CLICK_HOME,this.onClickHome],[l.LobbyEvent.Click.CLICK_TABLES,this.onClickTables]])},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.ndMenu&&(this.mMenuInitPos=cc.v2(this.ndMenu.position),this.pDeskBuildMenu=this.ndMenu.getComponentInChildren(r.default),this.pDeskBuildMenu&&this.pDeskBuildMenu.init({fromScene:s.gSceneType.Lobby,reddot:!1,name:"desk_build"}))},e.prototype.start=function(){this.displayLine(!0),this.ndMenu&&!this.mIsInTable&&c.ComUtils.playEnterAction(this.ndMenu,this.mMenuInitPos,"right_left",132,!1,.4)},e.prototype.onClickHome=function(){this.displayLine(!0),this.ndMenu&&(this.ndMenu.y=this.mMenuInitPos.y,this.ndMenu.x=this.mMenuInitPos.x,c.ComUtils.playEnterAction(this.ndMenu,this.mMenuInitPos,"right_left",132,!1,.4),this.pDeskBuildMenu&&this.pDeskBuildMenu.setInBuild(!1))},e.prototype.onClickTables=function(){this.mIsInTable=!0,this.displayLine(!1),this.ndMenu&&(this.ndMenu.stopAllActions(),this.ndMenu.y=this.mMenuInitPos.y+300,this.ndMenu.x=this.mMenuInitPos.x,this.pDeskBuildMenu&&this.pDeskBuildMenu.setInBuild(!0))},e.prototype.displayLine=function(t){this.pDeskBuildMenu&&this.pDeskBuildMenu.displayView({showLine:t})},p([y(cc.Node)],e.prototype,"ndMenu",void 0),p([d],e)}(a.CxComponent);o.default=h,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/view/deskbuild/DeskBuildMenu":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../model/LobbyEvent":"LobbyEvent"}],LobbyEffectLayer:[function(t,e,o){"use strict";cc._RF.push(e,"dfc2fKpYWFOFpK8yms8fO/r","LobbyEffectLayer");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyEffectLayer=void 0;var s=t("./../../../../script/lib/base/CxComponent"),r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),p([a],e)}(s.CxComponent));o.LobbyEffectLayer=c,cc._RF.pop()},{"./../../../../script/lib/base/CxComponent":void 0}],LobbyEvent:[function(t,e,o){"use strict";cc._RF.push(e,"2d3d6i3cgdPRL8LbB8Lqw+q","LobbyEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyEvent=void 0,function(t){(function(t){t.PLAY_LOBBY_MUSIC="lobby_play_lobby_music",t.PLAY_LOBBY_EFFECT="lobby_play_lobby_effect"})(t.Base||(t.Base={})),function(t){t.CLICK_SCOPA="lobby_click_scopa",t.CLICK_SCOPA_WILD="lobby_click_scopa_wild",t.CLICK_SCOPNE="lobby_click_scopne",t.CLICK_QUICK_START="lobby_click_quick_start",t.CLICK_TABLES="lobby_click_tables",t.CLICK_HOME="lobby_click_home",t.CLICK_TABLE_MAP="lobby_click_tablemap",t.CLICK_TABLE_BOX="lobby_click_table_box",t.CLICK_CD_TASK="lobby_clickcdtask",t.CLICK_BOX_SHOP="lobby_click_box_shop",t.CLICK_INVITE="lobby_click_invite",t.CLICK_LOTTERY="lobby_click_lottery"}(t.Click||(t.Click={})),(t.MainView||(t.MainView={})).FINGER="lobby_main_view_finger"}(o.LobbyEvent||(o.LobbyEvent={})),cc._RF.pop()},{}],LobbyFinger:[function(t,e,o){"use strict";cc._RF.push(e,"ca9afkXL7dNDrE3s5qe1Q6S","LobbyFinger");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyFinger=void 0;var s=t("../../../../script/app/event/GuiEvent"),r=t("./../../../../script/lib/base/CxComponent"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndFinger=null,e}return n(e,t),e.prototype.listEvent=function(){return new Map([[s.GuiEvent.UI.SHOW_FINGER,this.show],[s.GuiEvent.UI.HIDE_FINGER,this.hide]])},e.prototype.start=function(){this.show({worldPos:cc.v2(300,400)})},e.prototype.show=function(t){if(t&&t.worldPos&&this.ndFinger){var e=this.ndFinger.parent.convertToNodeSpace(t.worldPos);this.ndFinger.x=e.x,this.ndFinger.y=e.y,this.ndFinger.active=!0}},e.prototype.hide=function(){this.ndFinger&&(this.ndFinger.active=!1)},p([l(cc.Node)],e.prototype,"ndFinger",void 0),p([c],e)}(r.CxComponent);o.LobbyFinger=u,cc._RF.pop()},{"../../../../script/app/event/GuiEvent":void 0,"./../../../../script/lib/base/CxComponent":void 0}],LobbyGameItem:[function(t,e,o){"use strict";cc._RF.push(e,"73880HsQbhCTKInd4W5nouK","LobbyGameItem");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/event/Notify"),r=t("../../../../script/lib/base/CxComponent"),a=t("../../../../script/lib/utils/ComUtils"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pSpriteAtlas=null,e.pMainSprite=null,e.pDiSprite=null,e.pBasePower=null,e.pBaseScore=null,e.pEnterScore=null,e.pGoldIcon=null,e.pPeiceIcon=null,e.pPeiceLabel=null,e.mCurGameType=0,e.mCurGrade=0,e.mCurConfig=null,e.maxPic=4,e}return n(e,t),e.prototype.start=function(){this.initView()},e.prototype.init=function(t){t&&(this.mCurGameType=t.gameType,this.mCurConfig=t.config)},e.prototype.initView=function(){if(this.mCurConfig&&this.mCurConfig.chClientData){var t=this.mCurConfig.chClientData;this.mCurGrade=this.mCurConfig.dwGradeType||0,this.initMainIcon(this.mCurGrade),this.initItemDi(this.mCurGrade),this.setBaseScore(t.basescore),this.setBasePower(t.consumeps),this.setScoreUpAndDown(t.ug,t.dg),this.setPeiceIcon(t.chipnum)}},e.prototype.setBaseScore=function(t){this.pBaseScore&&t&&(this.pBaseScore.string=a.ComUtils.formatGoldStr(t,1e4,0))},e.prototype.setBasePower=function(t){this.pBasePower&&t&&(this.pBasePower.string=""+t)},e.prototype.setScoreUpAndDown=function(t,e){this.pEnterScore&&(this.pEnterScore.string=this.getScoreText(t,e))},e.prototype.getScoreText=function(t,e){var o,i;return null==t||null==e?"":(i=a.ComUtils.formatGoldStr(e,1e5,0),o=a.ComUtils.formatGoldStr(t,1e5,0),0==t?""+i:i+"~"+o)},e.prototype.initMainIcon=function(t){if(this.pSpriteAtlas&&t){var e="lobby_game_item_"+t;if(t>this.maxPic){var o=t%4;0===o&&(o=1),e="lobby_game_item_"+o}var i=this.pSpriteAtlas.getSpriteFrame(e);i&&this.pMainSprite&&(this.pMainSprite.spriteFrame=i)}},e.prototype.initItemDi=function(t){if(this.pSpriteAtlas&&t){var e="lobby_game_di_"+t;if(t>this.maxPic){var o=t%4;0===o&&(o=1),e="lobby_game_di_"+o}var i=this.pSpriteAtlas.getSpriteFrame(e);i&&this.pDiSprite&&(this.pDiSprite.spriteFrame=i)}},e.prototype.setPeiceIcon=function(t){this.pPeiceIcon&&this.pPeiceLabel&&t&&t>0&&(this.pPeiceIcon.node.active=!0,this.pPeiceLabel.string="x"+t)},e.prototype.onEnterGame=function(){this.mCurConfig&&this.dispatch(s.Notify.MatchGame.MATCH_GAME_ID,{gameId:this.mCurConfig.dwGameID})},p([u(cc.SpriteAtlas)],e.prototype,"pSpriteAtlas",void 0),p([u(cc.Sprite)],e.prototype,"pMainSprite",void 0),p([u(cc.Sprite)],e.prototype,"pDiSprite",void 0),p([u(cc.Label)],e.prototype,"pBasePower",void 0),p([u(cc.Label)],e.prototype,"pBaseScore",void 0),p([u(cc.Label)],e.prototype,"pEnterScore",void 0),p([u(cc.Sprite)],e.prototype,"pGoldIcon",void 0),p([u(cc.Sprite)],e.prototype,"pPeiceIcon",void 0),p([u(cc.Label)],e.prototype,"pPeiceLabel",void 0),p([l],e)}(r.CxComponent);o.default=d,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0}],LobbyGameView:[function(t,e,o){"use strict";cc._RF.push(e,"440c8xn1mhEWriTBJ7zhLeu","LobbyGameView");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/base/component/ComSubLayer"),r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/language/LanguageCfg"),l=t("../../../../script/lib/utils/ComUtils"),u=t("./LobbyGameItem"),d=cc._decorator,y=d.ccclass,h=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pGameItem=null,e.pBtnLabel=null,e.pContainer=null,e.labDesc=null,e.mCurGameType=r.gHuskyGameType.SCOPA_GOLD,e.mViewList=null,e.mViewClass=null,e.mGameList=null,e}return n(e,t),e.prototype.initParams=function(){return{title:this.getGameName(),showSubBG:!1,titleColor:this.isWildGame()?1:0}},e.prototype.listEvent=function(){return new Map([[a.Notify.Base.UPDATE_CURRENCY,this.onUpdateGold]])},e.prototype.start=function(){this.setVerticalOffset(),this.initLayer()},e.prototype.onDestroy=function(){this.node.stopAllActions(),t.prototype.onDestroy.call(this)},e.prototype.onEnable=function(){this.mViewList&&this.updateViewList()},e.prototype.init=function(t){t&&(this.mCurGameType=t.gameType||r.gHuskyGameType.SCOPA_GOLD,this.mGameList=t.gameList)},e.prototype.getGameName=function(){var t="";switch(this.mCurGameType){case r.gHuskyGameType.SCOPA_GOLD:t="SCOPA";break;case r.gHuskyGameType.SCOPA_GOLD_WILD:case r.gHuskyGameType.SCOPA_GOLD_A:t="SCOPA WILD";break;case r.gHuskyGameType.SCOPONE_GOLD:t="SCOPONE";break;default:t="SCOPA"}return t},e.prototype.isWildGame=function(){return this.mCurGameType===r.gHuskyGameType.SCOPA_GOLD_WILD||this.mCurGameType===r.gHuskyGameType.SCOPA_GOLD_A},e.prototype.initLayer=function(){this.initData(),this.pBtnLabel&&(this.pBtnLabel.string=l.ComUtils.getLang(c.LangKey.text_play_now)),this.labDesc&&(this.labDesc.node.active=this.isWildGame(),this.labDesc.string=l.ComUtils.getLang(c.LangKey.text_scopa_wild_tips)),this.initViewList()},e.prototype.initData=function(){this.mViewClass=new Array},e.prototype.initViewList=function(){if(this.mGameList&&this.mGameList.length>0)for(var t=0;t<this.mGameList.length;t++){var e=this.mGameList[t];if(e&&e.dwGameID){var o=cc.instantiate(this.pGameItem);if(o&&this.pContainer){this.pContainer.addChild(o);var i=o.getComponent(u.default);i&&(this.mViewClass.push(i),i.init({gameType:this.mCurGameType,config:e}))}}}},e.prototype.updateViewList=function(){},e.prototype.onUpdateGold=function(){this.updateViewList()},e.prototype.onClickQuickMenu=function(){this.mCurGameType&&this.dispatch(a.Notify.MatchGame.MATCH_QUICK_GAME,this.mCurGameType)},p([h(cc.Prefab)],e.prototype,"pGameItem",void 0),p([h(cc.Label)],e.prototype,"pBtnLabel",void 0),p([h(cc.Node)],e.prototype,"pContainer",void 0),p([h(cc.Label)],e.prototype,"labDesc",void 0),p([y],e)}(s.default);o.default=b,cc._RF.pop()},{"../../../../script/app/base/component/ComSubLayer":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/lib/utils/ComUtils":void 0,"./LobbyGameItem":"LobbyGameItem"}],LobbyGoldInfo:[function(t,e,o){"use strict";cc._RF.push(e,"a5c806O035E97fMOOVt7IAI","LobbyGoldInfo");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/config/GameConfig"),r=t("../../../../script/app/event/GuiEvent"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/model/DataProxy"),l=t("../../../../script/lib/base/CxComponent"),u=t("../../../../script/lib/utils/ComUtils"),d=cc._decorator,y=d.ccclass,h=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pGoldLabel=null,e.pGoldIcon=null,e}return n(e,t),e.prototype.start=function(){this.initGoldInfo()},e.prototype.listEvent=function(){return new Map([[a.Notify.Base.UPDATE_CURRENCY,this.initGoldInfo],[a.Notify.Base.UPDATE_USERINFO,this.initGoldInfo],[a.Notify.UserInfo.UPDATE_USER_GOLD,this.initGoldInfo],[r.GuiEvent.Anim.AWARD_GET_ICON_POS,this.onPutAwardPosInfo]])},e.prototype.initGoldInfo=function(){var t=c.DataProxy.getInstance().userData.gold;if(null!=t){var e=u.ComUtils.formatGoldStr(t);this.pGoldLabel&&(this.pGoldLabel.string=e)}},e.prototype.onClick=function(){s.GameConfig.Release==s.ServerType.Release?this.dispatch(r.GuiEvent.PopMsg.DISPLAY_SHOP_LAYER):this.dispatch(r.GuiEvent.PopMsg.DISPLAY_TEST_GOLD)},e.prototype.onPutAwardPosInfo=function(){this.pGoldIcon&&this.dispatch(r.GuiEvent.Anim.AWARD_PUT_ICON_POS,{tPos:this.pGoldIcon.parent.convertToWorldSpaceAR(cc.v2(this.pGoldIcon.x,this.pGoldIcon.y)),node:this.pGoldIcon.parent.parent})},p([h(cc.Label)],e.prototype,"pGoldLabel",void 0),p([h(cc.Node)],e.prototype,"pGoldIcon",void 0),p([y],e)}(l.CxComponent);o.default=b,cc._RF.pop()},{"../../../../script/app/config/GameConfig":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0}],LobbyHandler:[function(t,e,o){"use strict";cc._RF.push(e,"12abappek1I0rnyLspgypN/","LobbyHandler");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyHandler=void 0;var p=t("./../../../script/app/model/DataProxy"),s=t("./../../../script/app/const/Global"),r=t("./../../../script/app/model/LocalDataProxy"),a=t("../../../script/app/event/Notify"),c=t("../../../script/app/platform/FcmSdk"),l=t("../../../script/app/base/handler/ProxyHandler"),u=t("../../../script/lib/utils/Logger"),d=t("./LobbyVoice"),y=t("../model/LobbyEvent"),h=t("../../../script/app/const/Global"),b=t("../../../script/app/module/buryPoint/BuryPoint"),f=t("../../../script/app/module/buryPoint/BuryPointUtils"),L=t("../../../script/app/language/LanguageCfg"),v=t("../../../script/app/view/ComUI"),m=t("../../../script/lib/utils/ComUtils"),_=t("../../../script/app/event/GuiEvent"),g=t("../../../script/app/model/AdDataProxy"),C=t("../../../script/app/module/task/CMD_TaskMsg"),I=t("../../../script/plugin/pb/protofile/CMD_FFDMsg"),E=t("../../../script/app/view/ComFunctions"),P=t("../../../script/lib/i18n/i18nHelper"),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lobbyVoice=null,e}return n(e,t),e.prototype.getName=function(){return"LobbyHandler"},e.prototype.onDestroy=function(){this.lobbyVoice&&(this.lobbyVoice.onDestroy(),delete this.lobbyVoice,this.lobbyVoice=null),t.prototype.release.call(this)},e.prototype.addHandler=function(){this.lobbyVoice=new d.LobbyVoice,this.dispatch(y.LobbyEvent.Base.PLAY_LOBBY_MUSIC),this.reqInfomation(),this.dispatch(a.Notify.AD.LOAD_BANNER,I.BannerType.HALL),this.dispatch(a.Notify.AD.SHOW_BANNER,I.BannerType.HALL)},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(a.Notify.Base.ON_RECONNET_TIP,this.onReconnetTip),this.addEvent(a.Notify.Gate.CONNECTED,this.onConnected),this.addEvent(y.LobbyEvent.Click.CLICK_SCOPA,this.onClickScopa),this.addEvent(y.LobbyEvent.Click.CLICK_SCOPA_WILD,this.onClickScopaWild),this.addEvent(y.LobbyEvent.Click.CLICK_SCOPNE,this.onClickScopne),this.addEvent(y.LobbyEvent.Click.CLICK_QUICK_START,this.onClickQuickStart),this.addEvent(y.LobbyEvent.Click.CLICK_TABLE_BOX,this.onClickTableBox),this.addEvent(y.LobbyEvent.Click.CLICK_INVITE,this.onClickInvite),this.addEvent(y.LobbyEvent.Click.CLICK_LOTTERY,this.onClickLottery),this.addEvent(a.Notify.Tables.RTN_TABLE_RECYCLE,this.onRtnTableBox),this.addEvent(a.Notify.Task.OPEN_SCOPA_CLASSIC,this.onClickScopa),this.addEvent(a.Notify.Task.OPEN_SCOPA_WILD,this.onClickScopaWild)},e.prototype.reqInfomation=function(){u.Logger.info("==== LobbyHandler reqInfomation ==="),this.dispatch(a.Notify.UserInfo.GET_USER_INFO),this.dispatch(a.Notify.UserInfo.GET_BIND_ACCOUNT_INFO),this.dispatch(a.Notify.UserInfo.REQ_USER_POWER_DATA),this.dispatch(a.Notify.Shop.REQ_BOX_SHOP_DATA_INFO),this.dispatch(a.Notify.Task.REQ_DAY_TASK_LIST),this.dispatch(a.Notify.Query.FIND_USER_ROOM),this.dispatch(a.Notify.Other.REQ_HALL_SHARE_CFG),this.dispatch(a.Notify.Activity.REQ_ACT_ON_OFF),this.dispatch(a.Notify.UserInfo.REQ_EXTSESSION_TIME),this.dispatch(a.Notify.Tables.REQ_TABLES_LIST),this.dispatch(a.Notify.Tables.REQ_NOT_GET_AWARD),this.dispatch(a.Notify.Other.REQ_MYSTERY_GIFT_DATA),this.dispatch(a.Notify.Other.GET_INVITE_INFO),this.dispatch(a.Notify.Other.REQ_TANG_KUANG_INFO),this.dispatch(a.Notify.GoldenPass.REQ_INFO),this.dispatch(a.Notify.FFD.REQ_OTHER_GG_INFO),this.dispatch(a.Notify.Other.REQ_LEVEL_UP),this.dispatch(a.Notify.Other.REQ_NEW_UNLOCK_INFO),this.dispatch(a.Notify.Other.REQ_NEW_UNLOCK_READ_ST),this.dispatch(a.Notify.Other.REQ_TABLES_NEW_ST),this.requestLobbyRedDot(),c.default.udpateFCMToken()},e.prototype.requestLobbyRedDot=function(){this.dispatch(a.Notify.Tables.REQ_TABLE_RED_DOT),this.dispatch(a.Notify.Task.REQ_DAY_TASK_REDDOT,C.RedPointType.CD_TASK),this.dispatch(a.Notify.Task.REQ_DAY_TASK_REDDOT,C.RedPointType.DAILY_TASK),this.dispatch(a.Notify.FFD.REQ_RED_DOT,I.RedPointType.DAILY_LOTERY)},e.prototype.onReconnetTip=function(){v.ComUI.addLoading({time:10})},e.prototype.onConnected=function(){v.ComUI.rmLoading()},e.prototype.onClickScopa=function(){p.DataProxy.getInstance().comData.setEnterLobbyType(h.gLobbyEnterType.Sub),p.DataProxy.getInstance().comData.setLobbyGameType(s.gHuskyGameType.SCOPA_GOLD),f.BuryPointUtils.send(b.BuryPoint.Operation.Lobby.ScopaClick),this.dispatch(_.GuiEvent.PopMsg.DISPLAY_LOBBY_SELECT_GAME,{gameType:s.gHuskyGameType.SCOPA_GOLD,gameList:m.ComUtils.clone(this.configData.getGameConfigList(s.gHuskyGameType.SCOPA_GOLD))})},e.prototype.onClickScopaWild=function(){if(E.ComFunctions.isUnlock(s.gUnlcokTag.scopaWild)){p.DataProxy.getInstance().comData.setEnterLobbyType(h.gLobbyEnterType.Sub),p.DataProxy.getInstance().comData.setLobbyGameType(s.gHuskyGameType.SCOPA_GOLD_WILD),f.BuryPointUtils.send(b.BuryPoint.Operation.Lobby.ScopaClick);var t=s.gHuskyGameType.SCOPA_GOLD_A;this.dispatch(_.GuiEvent.PopMsg.DISPLAY_LOBBY_SELECT_GAME,{gameType:t,gameList:m.ComUtils.clone(this.configData.getGameConfigList(t))})}else{var e=p.DataProxy.getInstance().otherData.getUnlockCfg(s.gUnlcokTag.scopaWild),o=P.i18nHelper.getLanguage([L.LangKey.table_unlock_tips,e.dwLevel]);v.ComUI.showToast(o,3,2)}},e.prototype.onClickScopne=function(){f.BuryPointUtils.send(b.BuryPoint.Operation.Lobby.ScopneClick),v.ComUI.showDialog({text:m.ComUtils.getLang(L.LangKey.text_coming_soon)})},e.prototype.onClickQuickStart=function(){this.dispatch(a.Notify.MatchGame.MATCH_QUICK_START),f.BuryPointUtils.send(b.BuryPoint.Operation.Lobby.QuickStart)},e.prototype.showFinger=function(){var t=new Date,e=this.localData.get(r.LocalStorageProxy.DailyFirstLogin,""),o=t.getFullYear()+"/"+m.ComUtils.pad(t.getMonth()+1,2)+"/"+m.ComUtils.pad(t.getDate(),2);e!==o&&(this.dispatch(y.LobbyEvent.MainView.FINGER,!0),this.localData.set(r.LocalStorageProxy.DailyFirstLogin,o))},e.prototype.onClickTableBox=function(){this.dispatch(a.Notify.Tables.REQ_TABLE_RECYCLE,{isPop:!0})},e.prototype.onRtnTableBox=function(t){t&&t.isPop&&this.dispatch(_.GuiEvent.PopMsg.SHOW_TABLE_BOX_LAYER,t)},e.prototype.onClickInvite=function(){var t=p.DataProxy.getInstance().inviteData.getInvitInfo();t?this.dispatch(_.GuiEvent.PopMsg.INVITE_USER,{tabRewardList:t.tabRewardList}):this.dispatch(a.Notify.Other.GET_INVITE_CFG)},e.prototype.onClickLottery=function(){var t=p.DataProxy.getInstance().adData.getRVSceneData(g.RVADSceneID.LOTTERY);this.dispatch(_.GuiEvent.PopMsg.DISPLAY_VIDEO_LOTTERY,t)},e}(l.ProxyHandler);o.LobbyHandler=T,cc._RF.pop()},{"../../../script/app/base/handler/ProxyHandler":void 0,"../../../script/app/const/Global":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/app/model/AdDataProxy":void 0,"../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../script/app/module/task/CMD_TaskMsg":void 0,"../../../script/app/platform/FcmSdk":void 0,"../../../script/app/view/ComFunctions":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/i18n/i18nHelper":void 0,"../../../script/lib/utils/ComUtils":void 0,"../../../script/lib/utils/Logger":void 0,"../../../script/plugin/pb/protofile/CMD_FFDMsg":void 0,"../model/LobbyEvent":"LobbyEvent","./../../../script/app/const/Global":void 0,"./../../../script/app/model/DataProxy":void 0,"./../../../script/app/model/LocalDataProxy":void 0,"./LobbyVoice":"LobbyVoice"}],LobbyHeadInfo:[function(t,e,o){"use strict";cc._RF.push(e,"df1262IFGxD64VctMvcJeNp","LobbyHeadInfo");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyHeadInfo=void 0;var s=t("../../../../script/app/const/AudioFile"),r=t("../../../../script/app/event/GuiEvent"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/model/DataProxy"),l=t("../../../../script/app/module/userInfo/UserInfoManager"),u=t("../../../../script/app/view/ComUI"),d=t("../../../../script/lib/base/CxComponent"),y=t("../../../../script/lib/utils/ComUtils"),h=t("../../../../script/lib/utils/Logger"),b=t("../../model/LobbyEvent"),f=cc._decorator,L=f.ccclass,v=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pSpriteAtlas=null,e.txtName=null,e.ndHead=null,e.spLevelBg=null,e.labTabLevel=null,e.mUserName="",e.mGender=0,e.mUserId=0,e.delayLock=!0,e}return n(e,t),e.prototype.listEvent=function(){return new Map([[a.Notify.Base.UPDATE_USERINFO,this.onUserInfo],[a.Notify.Base.OPEN_USERINFO,this.onUserHead],[a.Notify.UserInfo.UPDATE_USER_HEAD,this.onUserHead],[a.Notify.UserInfo.UPLOAD_USER_INFO,this.onUploadInfo],[a.Notify.Other.RESP_LEVEL_UP,this.onLevelUp]])},e.prototype.start=function(){var t=c.DataProxy.getInstance().userData;t&&(this.mUserName=t.userName,this.mGender=t.gender,this.initHead(t),this.initName(t),this.mUserId=t.userId)},e.prototype.initHead=function(t){this.ndHead.destroyAllChildren(),u.ComUI.createUserHead({parent:this.ndHead,userId:t.userId,sex:t.gender,size:this.ndHead.getContentSize(),save:!0,faceId:t.faceId,url:t.headUrl,level:t.level}),this.labTabLevel&&(this.labTabLevel.string=""+t.tableLevel)},e.prototype.initName=function(t){if(this.mUserName=t.userName,this.mUserName){var e=y.ComUtils.subStr(this.mUserName,9);this.txtName&&e&&(this.txtName.string=e)}},e.prototype.onClickUserInfo=function(){if(h.Logger.info("onClickUserInfo()"),this.delayLock){y.ComUtils.delayLimit(this,1e3);var t=c.DataProxy.getInstance().userData;this.dispatch(r.GuiEvent.PopMsg.DISPLAY_INFO_DIALOG,{myUserId:this.mUserId,userId:this.mUserId,userName:t.userName,userGold:t.gold,totalTimes:t.dwJushuTotal,totalWins:t.dwWinCount,gameWinList:t.gameWinList,faceId:t.faceId,headUrl:t.headUrl,gender:t.gender,powerInfo:t.powerInfo,useTableId:t.useTableId,ownTableList:t.ownTableList,curTableId:t.useTableId,level:t.level,curExp:t.curExp,nextLvlExp:t.nextLvlExp}),this.dispatch(b.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO)}},e.prototype.onUserInfo=function(t){this.mUserName===t.userName&&this.mGender===t.gender||(this.mUserName=t.userName,this.mGender=t.gender,this.onUploadInfo()),this.mComHead&&l.UserInfoManager.getInstance().updateMyHeadInfo(this.mComHead),this.initName(t),this.labTabLevel&&(this.labTabLevel.string=""+t.tableLevel)},e.prototype.onUserHead=function(t){var e=t||c.DataProxy.getInstance().userData;this.initHead(e)},e.prototype.onUploadInfo=function(){this.dispatch(a.Notify.UserInfo.UPLOAD_USER_NAME,this.mUserName),this.dispatch(a.Notify.UserInfo.UPLOAD_USER_GENDER,this.mGender)},e.prototype.onLevelUp=function(){cc.log("\u66f4\u65b0\u7528\u6237\u5934\u50cf\u4fe1\u606f")},p([v(cc.SpriteAtlas)],e.prototype,"pSpriteAtlas",void 0),p([v(cc.Label)],e.prototype,"txtName",void 0),p([v(cc.Node)],e.prototype,"ndHead",void 0),p([v(cc.Sprite)],e.prototype,"spLevelBg",void 0),p([v(cc.Label)],e.prototype,"labTabLevel",void 0),p([L],e)}(d.CxComponent);o.LobbyHeadInfo=m,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/userInfo/UserInfoManager":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../model/LobbyEvent":"LobbyEvent"}],LobbyHeadItem:[function(t,e,o){"use strict";cc._RF.push(e,"44027/ajw1NI6cmIDpXyfoR","LobbyHeadItem");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/const/Global"),r=t("../../../../script/app/view/ComUI"),a=t("../../../../script/lib/base/CxComponent"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pHeadNode=null,e.pSelectIcon=null,e.mIndex=0,e.mSelectIndex=0,e.mCallback=null,e}return n(e,t),e.prototype.start=function(){this.initItem()},e.prototype.init=function(t){this.mIndex=t.index,this.mSelectIndex=t.select,this.mCallback=t.callback},e.prototype.initItem=function(){this.pHeadNode&&(this.pHeadNode.destroyAllChildren(),r.ComUI.createUserHead({parent:this.pHeadNode,faceId:this.mIndex+1,sex:s.Gender.BOY,isSelect:this.mIndex==this.mSelectIndex,size:cc.size(this.pHeadNode.width,this.pHeadNode.height)})),this.pSelectIcon&&(this.mIndex==this.mSelectIndex?this.pSelectIcon.active=!0:this.pSelectIcon.active=!1)},e.prototype.updateItem=function(t){this.mSelectIndex=t,this.initItem()},e.prototype.onClick=function(){this.mCallback&&this.mCallback(this.mIndex)},p([u(cc.Node)],e.prototype,"pHeadNode",void 0),p([u(cc.Node)],e.prototype,"pSelectIcon",void 0),p([l],e)}(a.CxComponent);o.default=d,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0}],LobbyHeadModify:[function(t,e,o){"use strict";cc._RF.push(e,"42367traNZAUZ6MA1iDdExf","LobbyHeadModify");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/const/Global"),r=t("../../../../script/app/event/Notify"),a=t("../../../../script/app/language/LanguageCfg"),c=t("../../../../script/app/model/DataProxy"),l=t("../../../../script/app/view/ComUI"),u=t("../../../../script/lib/base/CxComponent"),d=t("../../../../script/lib/utils/ComUtils"),y=cc._decorator,h=y.ccclass,b=y.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pHeadItem=null,e.pContainer=null,e.pBtnText=null,e.mCurSelect=0,e.mClsList=new Array,e.delayLock=!0,e}return n(e,t),e.prototype.start=function(){this.setVerticalOffset(),this.initLayer()},e.prototype.initParams=function(){return{title:"",showTitle:!1,showSubBG:!1}},e.prototype.listEvent=function(){return new Map([[r.Notify.UserInfo.RTN_MODIFY_USER_FACE_ID,this.onUpdateResult]])},e.prototype.getDefaultSelect=function(){var t=0;return 0==(t=c.DataProxy.getInstance().userData.faceId||0)?t=(c.DataProxy.getInstance().userData.gender||s.Gender.BOY)==s.Gender.BOY?1:0:t-=1,t},e.prototype.initLayer=function(){var t=this;this.mCurSelect=this.getDefaultSelect();for(var e=0;e<9;e++){var o=cc.instantiate(this.pHeadItem);this.pContainer&&this.pContainer.addChild(o);var i=o.getComponent("LobbyHeadItem");i&&(this.mClsList.push(i),i.init({index:e,select:this.mCurSelect,callback:function(e){t.updateAllItem(e)}}))}d.ComUtils.setLangText(this.pBtnText,a.LangKey.user_confirm_change)},e.prototype.updateAllItem=function(t){var e=this;this.mCurSelect=t,this.mClsList&&this.mClsList.forEach(function(t){t&&t.updateItem&&t.updateItem(e.mCurSelect)})},e.prototype.onConfirmChange=function(){if(this.delayLock&&(d.ComUtils.delayLimit(this,1e3),this.mCurSelect>=0)){var t=this.mCurSelect+1;this.dispatch(r.Notify.UserInfo.UPLOAD_USER_FACE_ID,t)}},e.prototype.onUpdateResult=function(t){t?l.ComUI.showToast(d.ComUtils.getLang(a.LangKey.text_succ_modify_head)):l.ComUI.showToast(d.ComUtils.getLang(a.LangKey.text_fail_modify_head)),this.node.destroy()},p([b(cc.Prefab)],e.prototype,"pHeadItem",void 0),p([b(cc.Node)],e.prototype,"pContainer",void 0),p([b(cc.Label)],e.prototype,"pBtnText",void 0),p([h],e)}(u.CxComponent);o.default=f,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0}],LobbyMainView:[function(t,e,o){"use strict";cc._RF.push(e,"2224aIzc5VPIL/cvSnPHGaX","LobbyMainView");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/const/AudioFile"),r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/view/ComFunctions"),l=t("../../../../script/lib/base/CxComponent"),u=t("../../../../script/lib/base/Language"),d=t("../../../../script/lib/base/NewTag"),y=t("../../../../script/lib/utils/ComUtils"),h=t("../../../../script/lib/utils/Logger"),b=t("../../model/LobbyEvent"),f=cc._decorator,L=f.ccclass,v=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spkFinger=null,e.btnScopa=null,e.btnScopaWild=null,e.btnPlayNow=null,e.spLock=null,e.spGrayTag=null,e.spGrayMenu=null,e.spNew=null,e.mViewList=null,e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){var t=this;h.Logger.info("LobbyMainView start()"),this.mBtnList=[this.btnScopa.node,this.btnScopaWild.node,this.btnPlayNow.node],this.mBtnInitPosList=new Map,this.mBtnList.forEach(function(e){e&&t.mBtnInitPosList.set(e.name,cc.v2(e.position))}),this.doEnterAction(),this.onGetUnLockInfo(),this.onChangeLanguage()},e.prototype.listEvent=function(){return new Map([[b.LobbyEvent.MainView.FINGER,this.onShowFinger],[a.Notify.Other.RESP_NEW_UNLOCK_INFO,this.onGetUnLockInfo],[a.Notify.Base.OPEN_USERINFO,this.onGetUnLockInfo],[a.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage]])},e.prototype.onClickScopa=function(){this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Com.GO}),this.dispatch(b.LobbyEvent.Click.CLICK_SCOPA)},e.prototype.onClickScopaWild=function(){this.spNew.getComponent(d.default)&&this.spNew.getComponent(d.default).readNewTag(),this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Com.GO}),this.dispatch(b.LobbyEvent.Click.CLICK_SCOPA_WILD)},e.prototype.onClickScopone=function(){this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Com.GO}),this.dispatch(b.LobbyEvent.Click.CLICK_SCOPNE)},e.prototype.onClickQuickGame=function(){this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Com.GO}),this.dispatch(b.LobbyEvent.Click.CLICK_QUICK_START)},e.prototype.doEnterAction=function(){var t=this;if(this.mBtnList){var e=.2;this.mBtnList.forEach(function(o){o&&o.active&&(e+=.1,y.ComUtils.playEnterAction(o,t.mBtnInitPosList.get(o.name),"right_left",100,!1,e))})}},e.prototype.doExitAction=function(){var t=this;if(this.mBtnList){var e=.2;this.mBtnList.forEach(function(o){o&&o.active&&(e+=.1,y.ComUtils.playEnterAction(o,t.mBtnInitPosList.get(o.name),"right_left",-200,!1,e))})}},e.prototype.onShowFinger=function(t){if(this.spkFinger){var e=t||!1;this.spkFinger.node.active=e,this.spkFinger.paused=!e}},e.prototype.onGetUnLockInfo=function(){c.ComFunctions.isUnlock(r.gUnlcokTag.scopaWild)?(this.spLock.node.active=!1,this.spGrayMenu.node.active=!1,this.spGrayTag.node.active=!1):(this.spLock.node.active=!0,this.spGrayMenu.node.active=!0,this.spGrayTag.node.active=!0)},e.prototype.onChangeLanguage=function(){var t="playnow_"+u.Language.getInstance().getLanguage();this.btnPlayNow.getComponent(sp.Skeleton).animation=t},p([v(sp.Skeleton)],e.prototype,"spkFinger",void 0),p([v(cc.Button)],e.prototype,"btnScopa",void 0),p([v(cc.Button)],e.prototype,"btnScopaWild",void 0),p([v(cc.Button)],e.prototype,"btnPlayNow",void 0),p([v(cc.Sprite)],e.prototype,"spLock",void 0),p([v(cc.Sprite)],e.prototype,"spGrayTag",void 0),p([v(cc.Sprite)],e.prototype,"spGrayMenu",void 0),p([v(cc.Sprite)],e.prototype,"spNew",void 0),p([L],e)}(l.CxComponent);o.default=m,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/view/ComFunctions":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/base/Language":void 0,"../../../../script/lib/base/NewTag":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../model/LobbyEvent":"LobbyEvent"}],LobbyPopupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"4aa05AgLg9Cg5MyvUxYNCkS","LobbyPopupMgr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyPopupMgr=void 0;var s=t("./../../../script/app/base/ComPopupMgr"),r=t("./../../../script/app/const/Global"),a=t("../../../script/app/event/Notify"),c=t("../model/LobbyUIConfig"),l=t("../../../script/app/config/ResourceUIConfig"),u=t("../../../script/app/event/GuiEvent"),d=t("../../../script/app/model/DataProxy"),y=t("../../../script/lib/manager/PrefabItemMgr"),h=t("../../../script/app/base/BasePopupMr"),b=cc._decorator,f=b.ccclass,L=(b.property,b.requireComponent),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_SETTING_LAYER,this.onOpenSetting),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_LOBBY_SELECT_GAME,this.onOpenSelectGame),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_MODIFY_HEAD,this.onOpenModifyHead),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_TEST_GOLD,this.onOpenTestGold),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_MISSION_LAYER,this.onOpenTaskListLayer),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_BIND_ACCOUNT,this.onOpenBindAccount),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_BIND_CONFIRM,this.onOpenBindConfirm),this.bindEvent(u.GuiEvent.PopMsg.SHOW_TABLE_BOX_LAYER,this.onShowTableBoxLayer),this.bindEvent(u.GuiEvent.PopMsg.SHOW_TABLE_BOX_INFO,this.onShowTableBoxInfo),this.bindEvent(u.GuiEvent.PopMsg.DISPLAY_MYSTERY_GIFT_DLG,this.onShowMysteryGiftDlg),this.bindEvent(u.GuiEvent.PopMsg.INVITE_USER,this.onShowInviteUser),this.bindEvent(u.GuiEvent.PopMsg.INVITE_SUCCESS,this.onInviteSuccess),this.bindEvent(u.GuiEvent.PopMsg.CLOSE_ALL,this.onCloseAll)},e.prototype.onCloseAll=function(){this.popupLoader.closeAll()},e.prototype.onOpenSetting=function(t){var e=l.ResourceUIConfig.popup.SettingLayer;this.popupLoader.showPopup(e,r.gAssetBundleName.RESOURCES,t)},e.prototype.onOpenSelectGame=function(t){var e=c.LobbyUIConfig.popup.LobbyGameView;this.popupLoader.showPopup(e,r.gAssetBundleName.LOBBY_RES,t)},e.prototype.onOpenModifyHead=function(t){var e=c.LobbyUIConfig.popup.LobbyHeadModify;this.popupLoader.showPopup(e,r.gAssetBundleName.LOBBY_RES,t)},e.prototype.onOpenTaskListLayer=function(t){if(!this.checkServerAutoPop(u.GuiEvent.PopMsg.DISPLAY_MISSION_LAYER,t)){t||(t={}),t.taskList=d.DataProxy.getInstance().taskData.getDayTaskList(),t.taskList||this.dispatch(a.Notify.Task.REQ_DAY_TASK_LIST);var e=l.ResourceUIConfig.popup.TaskListLayer;this.popupLoader.showPopup(e,r.gAssetBundleName.RESOURCES,t)}},e.prototype.onOpenBindAccount=function(t){var e=c.LobbyUIConfig.popup.BindAccountLayer;this.popupLoader.showPopup(e,r.gAssetBundleName.LOBBY_RES,t)},e.prototype.onOpenBindConfirm=function(t){var e=c.LobbyUIConfig.popup.BindAccountConfirm;this.popupLoader.showPopup(e,r.gAssetBundleName.LOBBY_RES,t)},e.prototype.onOpenTestGold=function(t){var e=c.LobbyUIConfig.popup.LobbyTestGold;this.popupLoader.showPopup(e,r.gAssetBundleName.LOBBY_RES,t)},e.prototype.onShowTableBoxLayer=function(t){var e=y.PrefabItemMgr.getInstance().get("TableBoxLayer",r.gAssetBundleName.TABLES_RES);this.popupLoader.showPopup(e,r.gAssetBundleName.TABLES_RES,t)},e.prototype.onShowTableBoxInfo=function(t){var e=y.PrefabItemMgr.getInstance().get("TableBoxInfo",r.gAssetBundleName.TABLES_RES);this.popupLoader.showPopup(e,r.gAssetBundleName.TABLES_RES,t)},e.prototype.onShowMysteryGiftDlg=function(t){if(!this.checkServerAutoPop(u.GuiEvent.PopMsg.DISPLAY_MYSTERY_GIFT_DLG,t)){var e=l.ResourceUIConfig.popup.MysteryGiftDlg;this.popupLoader.showPopup(e,r.gAssetBundleName.RESOURCES,t)}},e.prototype.onShowInviteUser=function(t){var e=l.ResourceUIConfig.popup.InviteUser;this.popupLoader.showPopup(e,r.gAssetBundleName.RESOURCES,t)},e.prototype.onInviteSuccess=function(t){if(!this.checkServerAutoPop(u.GuiEvent.PopMsg.INVITE_SUCCESS,t)){var e=l.ResourceUIConfig.popup.InviteSuccess;this.popupLoader.showPopup(e,r.gAssetBundleName.RESOURCES,t)}},p([f,L(s.ComPopupMgr)],e)}(h.BasePopupMr);o.LobbyPopupMgr=v,cc._RF.pop()},{"../../../script/app/base/BasePopupMr":void 0,"../../../script/app/config/ResourceUIConfig":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/manager/PrefabItemMgr":void 0,"../model/LobbyUIConfig":"LobbyUIConfig","./../../../script/app/base/ComPopupMgr":void 0,"./../../../script/app/const/Global":void 0}],LobbyScene:[function(t,e,o){"use strict";cc._RF.push(e,"92edayAll5AUYPBqNoNbVQt","LobbyScene");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./../../../script/app/const/Global"),r=t("./../../../script/app/base/BaseScene"),a=t("../../../script/app/event/Notify"),c=t("../controller/LobbyHandler"),l=t("./main/LobbyMainView"),u=t("../../../script/lib/utils/Logger"),d=t("../../../script/app/platform/PyManager"),y=t("../../../script/app/module/buryPoint/BuryPointUtils"),h=t("../../../script/app/module/buryPoint/BuryPoint"),b=t("../model/LobbyUIConfig"),f=t("../model/LobbyEvent"),L=t("./tables/LobbyTablesList"),v=t("../../../script/app/event/GuiEvent"),m=t("../../../script/app/model/DataProxy"),_=t("../../../script/plugin/pb/protofile/CMD_OtherMsg"),g=cc._decorator,C=g.ccclass,I=g.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lobbyHandler=null,e.pfMainView=null,e.pfTable=null,e.pLobbyMainView=null,e.pTablesLayer=null,e}return n(e,t),e.prototype.getSceneName=function(){return"Lobby"},e.prototype.listEvent=function(){return new Map([[a.Notify.Base.ON_APP_RESUME,this.onAppResume],[f.LobbyEvent.Click.CLICK_HOME,this.onClickHome],[f.LobbyEvent.Click.CLICK_TABLES,this.onClickTables],[a.Notify.Base.HIDE_LOBBY_SOME_LAYER,this.onHide],[a.Notify.Activity.RSP_ACT_ON_OFF,this.onActivityEntryEvent]])},e.prototype.onLoad=function(){u.Logger.info("LobbyScene: onLoad()"),m.DataProxy.getInstance().comData.setInGame(!1),t.prototype.onLoad.call(this),this.initHandler()},e.prototype.onDestroy=function(){this.lobbyHandler&&(this.lobbyHandler.onDestroy(),this.lobbyHandler=null),t.prototype.onDestroy.call(this),this.dispatch(a.Notify.AD.RM_BANNER)},e.prototype.start=function(){var t=this;u.Logger.info("LobbyScene: start()"),y.BuryPointUtils.send(h.BuryPoint.Operation.Lobby.ShowLobbyView),this.initLobbyView(),this.scheduleOnce(function(){d.default.queryPurchaseOrder(),t.dispatch(a.Notify.Other.PRE_LOAD_GAME_RES)},2),this.scheduleOnce(function(){t.dispatch(v.GuiEvent.PopMsg.AUTO_POP_VIEW)},1)},e.prototype.initHandler=function(){this.lobbyHandler=new c.LobbyHandler},e.prototype.initLobbyView=function(){var t=this;u.Logger.info("initLobbyView()"),this.mountPrefab((new Map).set(s.gAssetBundleName.LOBBY_RES,b.LobbyUIConfig),function(){t.dispatch(a.Notify.Base.HANDLER_ORIGIN)}),this.switchLobbyView(!0)},e.prototype.onAppResume=function(t){var e=this;if(t.interval>=1e4){var o=t.callSdk?5:.1;this.scheduleOnce(function(){e.lobbyHandler&&e.lobbyHandler.reqInfomation()},o)}},e.prototype.switchLobbyView=function(t){this.diplayScopa(t),this.diplayTables(!t)},e.prototype.diplayScopa=function(t){if(!this.pLobbyMainView&&this.pfMainView){var e=cc.instantiate(this.pfMainView);e&&(this.pLobbyMainView=e.getComponent(l.default),this.normalLayer.addChild(e,b.LobbyZIndex.MainView))}this.pLobbyMainView&&(this.pLobbyMainView.node.active=t,t&&(this.lobbyHandler.showFinger(),this.pLobbyMainView.doEnterAction()))},e.prototype.diplayTables=function(t){if(!this.pTablesLayer&&this.pfTable){var e=cc.instantiate(this.pfTable);e&&(this.pTablesLayer=e.getComponent(L.default),this.normalLayer.addChild(e,b.LobbyZIndex.TablesView))}this.pTablesLayer&&(this.pTablesLayer.node.active=t)},e.prototype.onClickHome=function(){this.switchLobbyView(!0)},e.prototype.onClickTables=function(){this.switchLobbyView(!1)},e.prototype.onHide=function(t){[this.normalLayer,this.effectLayer,this.replayLayer].every(function(e){e&&(e.active=!t)})},e.prototype.onActivityEntryEvent=function(){m.DataProxy.getInstance().activityData.getEntryIsOpen(_.ActivityId.PAILEISELECT_ACTIVITY)&&m.DataProxy.getInstance().userData.isNewPlayer&&m.DataProxy.getInstance().userData.cardSkinId<=0&&this.dispatch(v.GuiEvent.PopMsg.DISPLAY_CARD_SKIN_GUIDE_LAYER)},p([I(cc.Prefab)],e.prototype,"pfMainView",void 0),p([I(cc.Prefab)],e.prototype,"pfTable",void 0),p([C],e)}(r.BaseScene);o.default=E,cc._RF.pop()},{"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../script/app/platform/PyManager":void 0,"../../../script/lib/utils/Logger":void 0,"../../../script/plugin/pb/protofile/CMD_OtherMsg":void 0,"../controller/LobbyHandler":"LobbyHandler","../model/LobbyEvent":"LobbyEvent","../model/LobbyUIConfig":"LobbyUIConfig","./../../../script/app/base/BaseScene":void 0,"./../../../script/app/const/Global":void 0,"./main/LobbyMainView":"LobbyMainView","./tables/LobbyTablesList":"LobbyTablesList"}],LobbyTablesList:[function(t,e,o){"use strict";cc._RF.push(e,"21db2qC+ohP7YiSmWI+PUz7","LobbyTablesList");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/config/ResConfig"),r=t("../../../../script/app/const/Global"),a=t("../../../../script/app/view/ComUI"),c=t("../../../../script/lib/base/CxComponent"),l=t("../../../../script/lib/manager/ResManager"),u=cc._decorator,d=u.ccclass,y=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){cc.log("LobbyTablesList(): onLoad()"),this.preloadTablesRes()},e.prototype.start=function(){},e.prototype.preloadTablesRes_old=function(){var t={bundleName:r.gAssetBundleName.TABLES_RES,prefab:{TableListLayer:new s.PrefabItem("TableListLayer","prefabs/TableListLayer",0,0)}},e=t.prefab,o=t.bundleName,i=this,n=function(t){if(e.hasOwnProperty(t)){var n=e[t];l.default.getInstance().loadPrefab(n.path,o,function(t,e){if(t)cc.error("preloadTablesRes fail "+n.path);else if(e&&cc.isValid(i)){var o=cc.instantiate(e);o&&i.node.addChild(o)}})}};for(var p in e)n(p)},e.prototype.preloadTablesRes=function(){var t={bundleName:r.gAssetBundleName.TABLES_RES,prefabList:["TableListLayer"]};a.ComUI.loadPrefabFromBundle(this.node,t.bundleName,t.prefabList)},p([d],e)}(c.CxComponent));o.default=y,cc._RF.pop()},{"../../../../script/app/config/ResConfig":void 0,"../../../../script/app/const/Global":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/manager/ResManager":void 0}],LobbyTestGold:[function(t,e,o){"use strict";cc._RF.push(e,"e46d4D9itNCXZgvdFzvDnKE","LobbyTestGold");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/event/Notify"),r=t("../../../../script/app/view/ComUI"),a=t("../../../../script/lib/base/CxComponent"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pEditBox=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initParams=function(){return{title:"Test"}},e.prototype.onClick=function(){if(this.pEditBox){var t=this.pEditBox.string;if(null==t||""==t)return void r.ComUI.showDialog({text:"Please enter the correct number\uff01"});var e=Number(t);if(!Number.isNaN(e)&&Number.isSafeInteger(e)){if(e>1e6||e<0)return void r.ComUI.showDialog({text:"Please enter the correct number\uff01"});this.dispatch(s.Notify.Other.OTHER_TEST_GOLD,e),this.node.destroy()}else r.ComUI.showDialog({text:"Please enter the correct number\uff01"})}},p([u(cc.EditBox)],e.prototype,"pEditBox",void 0),p([l],e)}(a.CxComponent);o.default=d,cc._RF.pop()},{"../../../../script/app/event/Notify":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0}],LobbyTopMenu:[function(t,e,o){"use strict";cc._RF.push(e,"eb1b6Fo1iJC/596Y0eYxqFj","LobbyTopMenu");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyTopMenu=void 0;var s=t("../../../../script/app/const/AudioFile"),r=t("../../../../script/app/event/GuiEvent"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/language/LanguageCfg"),l=t("../../../../script/app/model/ActivityDataProxy"),u=t("../../../../script/app/model/DataProxy"),d=t("../../../../script/app/module/buryPoint/BuryPoint"),y=t("../../../../script/app/module/buryPoint/BuryPointUtils"),h=t("../../../../script/app/view/activity/GoldenPassMenu"),b=t("../../../../script/app/view/ComUI"),f=t("../../../../script/lib/base/CxComponent"),L=t("../../../../script/lib/i18n/i18nHelper"),v=t("../../../../script/lib/utils/ComUtils"),m=t("../../../../script/lib/utils/Logger"),_=t("../../../../script/lib/utils/ScreenAdapter"),g=t("../../model/LobbyEvent"),C=cc._decorator,I=C.ccclass,E=C.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pBtnLayout=null,e.pTimeLabel=null,e.pTimeIcon=null,e.pTimeReward=null,e.pBtnSale=null,e.pBtnLottery=null,e.pBtnCDTask=null,e.pBtnInvite=null,e.pfGoldenPassMenu=null,e.layoutNode=null,e.ndHome=null,e.ndTable=null,e.ndBox=null,e.ndExchangeBox=null,e.labLottery=null,e.labInvite=null,e.labSale=null,e.delayLock=!0,e.mTimeTask=null,e.mStartTime=0,e.mCurTime=0,e.mTimeCount=0,e.mCheckCnt=0,e}return n(e,t),e.prototype.listEvent=function(){return new Map([[a.Notify.Task.RTN_TASK_TIME_REWARD_INFO,this.onGetTimeTaskInfo],[a.Notify.Base.ON_APP_RESUME,this.onAppResume],[r.GuiEvent.UI.DISPLAY_MENU_SPECIAL_SALE,this.displaySpecialSaleMenu],[g.LobbyEvent.Click.CLICK_HOME,this.onClickHome],[g.LobbyEvent.Click.CLICK_TABLES,this.onClickTables],[a.Notify.Activity.RSP_ACT_ON_OFF,this.onActivityEntryEvent],[a.Notify.Activity.CHANGE_REDDOT_NUM,this.onChangeRedDotNum],[a.Notify.Tables.RTN_TABLE_RED_DOT,this.onChangeTableBox],[a.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage]])},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.stopTimer()},e.prototype.start=function(){this.mapOFCtlBtn=new Map,this.mapRedDotCtlBtn=new Map,this.switchBtnView(!0),this.initTimeTask(),this.initSpecialSale(),this.displayGoldenPassMenu(),this.ndHome&&_.ScreenAdapter.paddingTop(this.ndHome),this.ndTable&&_.ScreenAdapter.paddingTop(this.ndTable),this.ndBox&&this.ndBox.on("click",this.onClickBoxShop,this),this.ndExchangeBox&&this.ndExchangeBox.on("click",this.onClickTableBox,this),this.pBtnLottery&&this.pBtnLottery.node.on("click",this.onClickLottery,this),this.pBtnInvite&&this.pBtnInvite.node.on("click",this.onClickInvite,this),this.bindRedDotAndOFEvent(),this.multiLang(),u.DataProxy.getInstance().activityData.getAllEntryData()&&this.onActivityEntryEvent(u.DataProxy.getInstance().activityData.getAllEntryData())},e.prototype.multiLang=function(){this.labLottery&&(this.labLottery.language=L.i18nHelper.getLanguage(c.LangKey.activity_btn_lottery_txt)),this.labInvite&&(this.labInvite.language=L.i18nHelper.getLanguage(c.LangKey.activity_btn_invite_txt)),this.labSale&&(this.labSale.language=L.i18nHelper.getLanguage(c.LangKey.activity_btn_sale_txt))},e.prototype.switchBtnView=function(t){this.ndHome&&(this.ndHome.active=t),this.ndTable&&(this.ndTable.active=!t),t||this.refreshBoxBtnView()},e.prototype.refreshBoxBtnView=function(){this.initBoxShop(),this.initExchangeBox()},e.prototype.bindRedDotAndOFEvent=function(){if(this.pBtnLottery){this.mapOFCtlBtn.set(l.gActivityEntry.MRCJ_ACTIVITY,[this.pBtnLottery.node]),this.mapRedDotCtlBtn.set(l.gRedDot.DAILY_LOTTERY,[this.pBtnLottery.node]);var t=u.DataProxy.getInstance().adData.getRedDotCount(l.gRedDot.DAILY_LOTTERY);b.ComUI.changeRedDot(this.pBtnLottery.node,t)}this.pBtnCDTask&&this.mapRedDotCtlBtn.set(l.gRedDot.CD_TASK,[this.pBtnCDTask.node]),this.ndExchangeBox&&(this.mapRedDotCtlBtn.set(l.gRedDot.TABLES_REDDOT,[this.ndExchangeBox]),t=u.DataProxy.getInstance().tablesData.redPoint,b.ComUI.changeRedDot(this.ndExchangeBox,t))},e.prototype.onClickGoldHelp=function(){m.Logger.info("onClickGoldHelp()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.mTimeTask&&this.dispatch(a.Notify.Task.CLICK_CD_TASK,this.mCurTime),this.dispatch(g.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickCLAM))},e.prototype.onClickSpecialSale=function(){m.Logger.info("onClickSpecialSale()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.dispatch(g.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),this.dispatch(r.GuiEvent.PopMsg.DISPLAY_SHOP_SPECIAL_SALE),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickSpecialSale))},e.prototype.onClickLottery=function(){m.Logger.info("onClickLottery()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.dispatch(g.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),this.dispatch(g.LobbyEvent.Click.CLICK_LOTTERY),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickLottery))},e.prototype.onClickTableBox=function(){this.delayLock&&(console.log("\u70b9\u51fb\u4e86tableBox"),v.ComUtils.delayLimit(this),this.dispatch(a.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Com.GO}),this.dispatch(g.LobbyEvent.Click.CLICK_TABLE_BOX),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickTableBox))},e.prototype.onClickBoxShop=function(){this.delayLock&&(console.log("\u6253\u5f00box\u5546\u57ce"),v.ComUtils.delayLimit(this),this.dispatch(r.GuiEvent.PopMsg.DISPLAY_SHOP_BOX_LAYER),this.dispatch(g.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickMissions))},e.prototype.onClickInvite=function(){console.log("onClickInvite()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.dispatch(g.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),this.dispatch(g.LobbyEvent.Click.CLICK_INVITE),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickInvite))},e.prototype.onClickHome=function(){this.switchBtnView(!0)},e.prototype.onClickTables=function(){this.switchBtnView(!1)},e.prototype.initSpecialSale=function(){var t=!1,e=u.DataProxy.getInstance().otherData.tangKuangInfo;e&&e.bShowFuFei&&(t=!0),this.displaySpecialSaleMenu(t)},e.prototype.displaySpecialSaleMenu=function(t){this.pBtnSale&&(this.pBtnSale.node.active=t),this.displayGoldenPassMenu()},e.prototype.initTimeTask=function(){this.sendGetTimeTaskInfo()},e.prototype.udpateGoldTimeView=function(){this.pTimeLabel&&null!=this.mCurTime&&(this.mTimeTask.bIsGet?(this.pTimeLabel.string="CLAIM",this.pTimeIcon&&(this.pTimeIcon.node.active=!1),this.pTimeReward&&(this.pTimeReward.node.active=!0)):(this.pTimeLabel.string=v.ComUtils.formatTimeString(this.mCurTime,"00:00:00"),this.pTimeLabel.node.active=!0,this.pTimeIcon&&(this.pTimeIcon.node.active=!0),this.pTimeReward&&(this.pTimeReward.node.active=!1)))},e.prototype.getTimeString=function(t){return t<10?"0"+t:""+t},e.prototype.sendGetTimeTaskInfo=function(){m.Logger.info("LobbyTopMenu: sendGetTimeTaskInfo()"),this.dispatch(a.Notify.Task.REQ_TASK_TIME_REWARD_INFO)},e.prototype.startTimer=function(){m.Logger.info("LobbyTopMenu: startTimer()"),this.schedule(this.updateTimer,1)},e.prototype.stopTimer=function(){this.unschedule(this.updateTimer)},e.prototype.updateTimer=function(){this.mTimeCount++,this.mCheckCnt++,20==this.mCheckCnt&&(this.mCheckCnt=0,this.mTimeCount=Math.floor((new Date).getTime()/1e3)-this.mStartTime),this.mTimeTask&&this.mTimeTask.iSurplusTime&&(this.mTimeCount>=this.mTimeTask.iSurplusTime?(this.stopTimer(),this.mTimeTask.bIsGet=!0,this.mTimeCount=0,this.mCheckCnt=0,this.mCurTime=0):this.mCurTime=this.mTimeTask.iSurplusTime-this.mTimeCount),this.udpateGoldTimeView()},e.prototype.onAppResume=function(){var t=this;this.scheduleOnce(function(){t.dispatch(a.Notify.Task.REQ_TASK_TIME_REWARD_INFO)},1)},e.prototype.onGetTimeTaskInfo=function(t){this.mTimeTask=t,this.mTimeTask&&(this.mTimeTask.bIsGet?this.mCurTime=0:(this.mCurTime=this.mTimeTask.iSurplusTime,this.mStartTime=Math.floor((new Date).getTime()/1e3),this.stopTimer(),this.startTimer()),this.udpateGoldTimeView())},e.prototype.onActivityEntryEvent=function(t){var e=this;t&&this.mapOFCtlBtn&&(t.forEach(function(t,o){var i=e.mapOFCtlBtn.get(o);i&&i.forEach(function(o){e.setBtnState(o,t)})}),this.displayGoldenPassMenu())},e.prototype.setBtnState=function(t,e){t.active=e.bOnOff,e.strInfo&&(t.info=e.strInfo)},e.prototype.onChangeRedDotNum=function(t){if(t&&this.mapRedDotCtlBtn){var e=this.mapRedDotCtlBtn.get(t.activityId);e&&e.forEach(function(e){b.ComUI.changeRedDot(e,t.redcount)})}},e.prototype.onChangeTableBox=function(t){if(this.ndExchangeBox&&t){var e=t.redPoint||0;b.ComUI.changeRedDot(this.ndExchangeBox,e)}},e.prototype.displayGoldenPassMenu=function(){var t="goldenPassMenu",e=this.layoutNode.getChildByName(t);if(!e&&this.layoutNode&&this.pfGoldenPassMenu&&((e=cc.instantiate(this.pfGoldenPassMenu)).getComponent(h.default).setOpenFromGame(!1),this.layoutNode.addChild(e,1,t)),e){var o=0;this.layoutNode.children.forEach(function(t){t.active&&(t.zIndex=2*o++)}),e.zIndex=1}},e.prototype.initBoxShop=function(){if(this.ndBox){var t=u.DataProxy.getInstance().shopData.getBoxShopData();t?(this.ndBox.active=!0,t.bIsHongDian?(this.setRedDot(this.ndBox,!0),this.playBoxAction()):(this.setRedDot(this.ndBox,!1),this.ndBox.stopAllActions(),this.ndBox.scale=1)):this.ndBox.active=!1}},e.prototype.initExchangeBox=function(){if(this.ndExchangeBox){var t=u.DataProxy.getInstance().tablesData.redPoint;t&&t>0&&this.setRedDot(this.ndExchangeBox,!0)}},e.prototype.playBoxAction=function(){this.ndBox.stopAllActions(),this.ndBox.scale=1,cc.tween(this.ndBox).delay(2).repeatForever(cc.tween().to(.16,{scale:.9}).to(.17,{scale:1}).to(.17,{scale:.9}).to(.16,{scale:1}).to(.17,{scale:.9}).to(.17,{scale:1}).delay(4)).start()},e.prototype.setRedDot=function(t,e){var o=t.getChildByName("reddot");o&&(o.active=e)},e.prototype.onChangeLanguage=function(){this.multiLang()},p([E(cc.Node)],e.prototype,"pBtnLayout",void 0),p([E(cc.Label)],e.prototype,"pTimeLabel",void 0),p([E(cc.Sprite)],e.prototype,"pTimeIcon",void 0),p([E(cc.Sprite)],e.prototype,"pTimeReward",void 0),p([E({type:cc.Button,tooltip:"\u6bcf\u65e5\u793c\u5305"})],e.prototype,"pBtnSale",void 0),p([E({type:cc.Button,tooltip:"\u62bd\u5956"})],e.prototype,"pBtnLottery",void 0),p([E({type:cc.Button,tooltip:"\u5012\u8ba1\u65f6"})],e.prototype,"pBtnCDTask",void 0),p([E({type:cc.Button,tooltip:"\u9080\u8bf7"})],e.prototype,"pBtnInvite",void 0),p([E({type:cc.Prefab,tooltip:"goldenPass"})],e.prototype,"pfGoldenPassMenu",void 0),p([E(cc.Node)],e.prototype,"layoutNode",void 0),p([E({type:cc.Node,tooltip:"\u5927\u5385\u89c6\u56fe\u8282\u70b9"})],e.prototype,"ndHome",void 0),p([E({type:cc.Node,tooltip:"table\u89c6\u56fe\u8282\u70b9"})],e.prototype,"ndTable",void 0),p([E({type:cc.Node,tooltip:"box\u8282\u70b9"})],e.prototype,"ndBox",void 0),p([E({type:cc.Node,tooltip:"exchangeBox\u8282\u70b9"})],e.prototype,"ndExchangeBox",void 0),p([E({type:cc.Label,tooltip:"lottery \u6587\u5b57\u6807\u7b7e"})],e.prototype,"labLottery",void 0),p([E({type:cc.Label,tooltip:"invite \u6587\u5b57\u6807\u7b7e"})],e.prototype,"labInvite",void 0),p([E({type:cc.Label,tooltip:"sale \u6587\u5b57\u6807\u7b7e"})],e.prototype,"labSale",void 0),p([I],e)}(f.CxComponent);o.LobbyTopMenu=P,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/ActivityDataProxy":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/app/view/activity/GoldenPassMenu":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"../../model/LobbyEvent":"LobbyEvent"}],LobbyTopRightMenu:[function(t,e,o){"use strict";cc._RF.push(e,"929ceskCNFKiKQrsile8nLp","LobbyTopRightMenu");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyTopRightMenu=void 0;var s=t("../../../../script/app/const/AudioFile"),r=t("../../../../script/app/event/GuiEvent"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/language/LanguageCfg"),l=t("../../../../script/app/model/ActivityDataProxy"),u=t("../../../../script/app/model/DataProxy"),d=t("../../../../script/app/module/buryPoint/BuryPoint"),y=t("../../../../script/app/module/buryPoint/BuryPointUtils"),h=t("../../../../script/app/platform/FaceBookSdk"),b=t("../../../../script/app/view/SettingLayer"),f=t("../../../../script/lib/base/CxComponent"),L=t("../../../../script/lib/i18n/i18nHelper"),v=t("../../../../script/lib/utils/ComUtils"),m=t("../../../../script/lib/utils/Logger"),_=t("../../../../script/lib/utils/ScreenAdapter"),g=t("../../../../script/plugin/pb/protofile/CMD_OtherMsg"),C=t("../../model/LobbyEvent"),I=cc._decorator,E=I.ccclass,P=I.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnMore=null,e.pBtnFB=null,e.pBtnService=null,e.pFbLabel=null,e.labSupport=null,e.delayLock=!0,e}return n(e,t),e.prototype.listEvent=function(){return new Map([[a.Notify.Activity.RSP_ACT_ON_OFF,this.onActivityEntryEvent],[C.LobbyEvent.Click.CLICK_HOME,this.onClickHome],[a.Notify.UserInfo.RTN_BIND_ACCOUNT_INFO,this.onUpdateAccount],[r.GuiEvent.UI.DISPLAY_BIND_ACCOUNT_MENU,this.displayFBMenu],[a.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage],[a.Notify.Activity.CHANGE_REDDOT_NUM,this.onChangeRedDotNum]])},e.prototype.start=function(){if(this.mapCtlBtn=new Map,this.mapCtlBtn.set(l.gRedDot.SETTING,[this.btnMore.node]),this.bInHome=!0,this.btnMore&&(this.btnMore.node.on("click",this.onClickMore,this),_.ScreenAdapter.paddingTop(this.btnMore.node)),this.pBtnFB&&(this.pBtnFB.node.on("click",this.onClickFB,this),_.ScreenAdapter.paddingTop(this.pBtnFB.node)),this.pBtnService&&(this.pBtnService.node.on("click",this.onClickService,this),_.ScreenAdapter.paddingTop(this.pBtnService.node)),this.bindBtnOnOffEvent(),u.DataProxy.getInstance().activityData.getAllEntryData()&&this.onActivityEntryEvent(u.DataProxy.getInstance().activityData.getAllEntryData()),this.initBindAccount(),this.multiLang(),u.DataProxy.getInstance().activityData.getEntryIsOpen(g.ActivityId.PAILEISELECT_ACTIVITY)&&!u.DataProxy.getInstance().userData.isNewPlayer&&0==u.DataProxy.getInstance().userData.cardSkinId){var t={activityId:l.gRedDot.SETTING,redcount:u.DataProxy.getInstance().otherData.cardSkinRedPoint.dwRedPointNum||1};this.onChangeRedDotNum(t)}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.mapCtlBtn=null},e.prototype.onClickHome=function(){this.bInHome=!0},e.prototype.multiLang=function(){this.labSupport&&(this.labSupport.language=L.i18nHelper.getLanguage(c.LangKey.activity_btn_support_txt))},e.prototype.bindBtnOnOffEvent=function(){},e.prototype.onClickMore=function(){this.delayLock&&(v.ComUtils.delayLimit(this),this.dispatch(r.GuiEvent.PopMsg.DISPLAY_SETTING_LAYER,new b.SettingData(b.SettingType.LOBBY)),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickMore))},e.prototype.onClickBoxShop=function(){this.delayLock&&(v.ComUtils.delayLimit(this),this.dispatch(C.LobbyEvent.Click.CLICK_BOX_SHOP),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickBoxShop))},e.prototype.onActivityEntryEvent=function(t){var e=this;t&&this.mapCtlBtn&&t.forEach(function(t,o){var i=e.mapCtlBtn.get(o);i&&i.forEach(function(o){e.setBtnState(o,t)})})},e.prototype.setBtnState=function(t,e){this.bInHome||(t.active=e.bOnOff),e.strInfo&&(t.info=e.strInfo)},e.prototype.onChangeRedDotNum=function(t){var e=this;if(t&&this.mapCtlBtn){var o=this.mapCtlBtn.get(t.activityId);o&&o.forEach(function(o){e.changeRedDot(o,t.redcount)})}},e.prototype.changeRedDot=function(t,e){var o;if(e){if(o=t.getChildByName("reddot")){o.active=!0;var i=o.getComponentInChildren(cc.Label);e>1?(i.node.active=!0,i.string=""+e):i.node.active=!1}}else(o=t.getChildByName("reddot"))&&(o.active=!1)},e.prototype.displayFBMenu=function(t){this.pBtnFB&&(this.pBtnFB.node.active=t)},e.prototype.onUpdateAccount=function(){this.initBindAccount()},e.prototype.initBindAccount=function(){var t=!1,e=u.DataProxy.getInstance().userData.bindAccountInfo;e&&e.rewardNum&&(this.pFbLabel&&(this.pFbLabel.string=v.ComUtils.formatGoldStr(e.rewardNum)),e.isBind||(t=!0)),this.pBtnFB&&(this.pBtnFB.node.active=t)},e.prototype.onClickService=function(){m.Logger.info("onClickService()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),h.FaceBookSdk.openFBUrl(),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickSupport))},e.prototype.onClickFB=function(){m.Logger.info("onClickFB()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.dispatch(r.GuiEvent.PopMsg.DISPLAY_BIND_ACCOUNT),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickFBBind))},e.prototype.onClickInvite=function(){m.Logger.info("onClickInvite()"),this.delayLock&&(v.ComUtils.delayLimit(this,1e3),this.dispatch(C.LobbyEvent.Base.PLAY_LOBBY_EFFECT,s.AudioFile.Com.GO),this.dispatch(C.LobbyEvent.Click.CLICK_INVITE),y.BuryPointUtils.send(d.BuryPoint.Debug.Lobby.ClickInvite))},e.prototype.onChangeLanguage=function(){this.multiLang()},p([P(cc.Button)],e.prototype,"btnMore",void 0),p([P(cc.Button)],e.prototype,"pBtnFB",void 0),p([P(cc.Button)],e.prototype,"pBtnService",void 0),p([P(cc.Label)],e.prototype,"pFbLabel",void 0),p([P(cc.Label)],e.prototype,"labSupport",void 0),p([E],e)}(f.CxComponent);o.LobbyTopRightMenu=T,cc._RF.pop()},{"../../../../script/app/const/AudioFile":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/ActivityDataProxy":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../../script/app/platform/FaceBookSdk":void 0,"../../../../script/app/view/SettingLayer":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/i18n/i18nHelper":void 0,"../../../../script/lib/utils/ComUtils":void 0,"../../../../script/lib/utils/Logger":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"../../../../script/plugin/pb/protofile/CMD_OtherMsg":void 0,"../../model/LobbyEvent":"LobbyEvent"}],LobbyTopUserInfo:[function(t,e,o){"use strict";cc._RF.push(e,"83ba4ygnpFF1LsqoTIog/II","LobbyTopUserInfo");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyTopUserInfo=void 0;var s=t("../../../../script/app/view/com/ComGoldInfo"),r=t("../../../../script/app/view/com/ComPowerInfo"),a=t("../../../../script/lib/utils/ScreenAdapter"),c=t("./../../../../script/lib/base/CxComponent"),l=t("./LobbyHeadInfo"),u=cc._decorator,d=u.ccclass,y=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pHeadInfo=null,e.pGoldInfo=null,e.pPowerInfo=null,e}return n(e,t),e.prototype.start=function(){this.pHeadInfo&&a.ScreenAdapter.paddingTop(this.pHeadInfo.node),this.pGoldInfo&&a.ScreenAdapter.paddingTop(this.pGoldInfo.node),this.pPowerInfo&&a.ScreenAdapter.paddingTop(this.pPowerInfo.node)},p([y(l.LobbyHeadInfo)],e.prototype,"pHeadInfo",void 0),p([y(s.default)],e.prototype,"pGoldInfo",void 0),p([y(r.default)],e.prototype,"pPowerInfo",void 0),p([d],e)}(c.CxComponent);o.LobbyTopUserInfo=h,cc._RF.pop()},{"../../../../script/app/view/com/ComGoldInfo":void 0,"../../../../script/app/view/com/ComPowerInfo":void 0,"../../../../script/lib/utils/ScreenAdapter":void 0,"./../../../../script/lib/base/CxComponent":void 0,"./LobbyHeadInfo":"LobbyHeadInfo"}],LobbyTree:[function(t,e,o){"use strict";cc._RF.push(e,"ab8b6N1CKZAk6e2bWz4qIg9","LobbyTree");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyTree=void 0;var s=t("../../../../script/lib/base/CxComponent"),r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),p([a],e)}(s.CxComponent));o.LobbyTree=c,cc._RF.pop()},{"../../../../script/lib/base/CxComponent":void 0}],LobbyUIConfig:[function(t,e,o){"use strict";cc._RF.push(e,"dbe7bwZB2hO75WQkTQt0fUj","LobbyUIConfig");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyBundleConfig=o.LobbyUIConfig=o.LobbyZIndex=void 0;var p,s=t("./../../../script/app/const/Global"),r=t("../../../script/app/config/ResConfig"),a=t("../../../script/lib/manager/ResManager");(function(t){t[t.BG=1]="BG",t[t.MainView=2]="MainView",t[t.TablesView=3]="TablesView",t[t.BttomMenu=4]="BttomMenu",t[t.DeskBuildMenu=5]="DeskBuildMenu",t[t.TopRightMenu=4]="TopRightMenu",t[t.TopUserInfo=5]="TopUserInfo",t[t.TopMenu=6]="TopMenu",t[t.GoldenPassMenu=7]="GoldenPassMenu",t[t.Effct=100]="Effct"})(p=o.LobbyZIndex||(o.LobbyZIndex={})),o.LobbyUIConfig={bunldleName:s.gAssetBundleName.LOBBY_RES,prefab:{LobbyBottomMenu:new r.PrefabItem("LobbyBottomMenu","prefab/view/LobbyBottomMenu",s.gLayerLevel.Normal,p.BttomMenu),LobbyTopMenu:new r.PrefabItem("LobbyTopMenu","prefab/view/LobbyTopMenu",s.gLayerLevel.Normal,p.TopMenu),LobbyTopRightMenu:new r.PrefabItem("LobbyTopRightMenu","prefab/view/LobbyTopRightMenu",s.gLayerLevel.Normal,p.TopRightMenu),LobbyTopUserInfo:new r.PrefabItem("LobbyTopUserInfo","prefab/view/LobbyTopUserInfo",s.gLayerLevel.Normal,p.TopUserInfo),LobbyEffectLayer:new r.PrefabItem("LobbyEffectLayer","prefab/view/other/LobbyEffectLayer",s.gLayerLevel.Normal,p.Effct),LobbyTree:new r.PrefabItem("LobbyTree","prefab/view/LobbyTree",s.gLayerLevel.Normal,p.BG)},altas:["altas/LobbyRoom"],popup:{LobbyGameView:new r.PrefabItem("LobbyGameView","prefab/view/LobbyGameView",s.gLayerLevel.Popup,0),LobbyUserLayer:new r.PrefabItem("LobbyUserLayer","prefab/view/LobbyUserLayer",s.gLayerLevel.Popup,r.PopupZIndex.userInfo),LobbyHeadModify:new r.PrefabItem("LobbyHeadModify","prefab/view/LobbyHeadModify",s.gLayerLevel.Popup,r.PopupZIndex.userInfo+1),LobbyTestGold:new r.PrefabItem("LobbyTestGold","prefab/view/other/LobbyTestGold",s.gLayerLevel.Popup,0),BindAccountLayer:new r.PrefabItem("BindAccountLayer","prefab/view/bind/BindAccountLayer",s.gLayerLevel.Popup,r.PopupZIndex.userInfo+1),BindAccountConfirm:new r.PrefabItem("BindAccountConfirm","prefab/view/bind/BindAccountConfirm",s.gLayerLevel.Popup,0)}};var c=function(t){function e(){var e=t.call(this)||this;return e.name=s.gAssetBundleName.LOBBY_RES,e.tips="\u5927\u5385",e.dependency=[s.gAssetBundleName.LOBBY_SRC,s.gAssetBundleName.TABLES_RES,s.gAssetBundleName.ACTIVITY_RES],e}return n(e,t),e.prototype.getRes=function(){return o.LobbyUIConfig},e}(a.BundleConfig);o.LobbyBundleConfig=c,a.default.getInstance().addBundleCfg(new c),cc._RF.pop()},{"../../../script/app/config/ResConfig":void 0,"../../../script/lib/manager/ResManager":void 0,"./../../../script/app/const/Global":void 0}],LobbyUserLayer:[function(t,e,o){"use strict";cc._RF.push(e,"880aaEbJa1JTqzbYbvm1VJl","LobbyUserLayer");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__decorate||function(t,e,o,i){var n,p=arguments.length,s=p<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(p<3?n(s):p>3?n(e,o,s):n(e,o))||s);return p>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../script/app/const/Global"),r=t("../../../../script/app/event/GuiEvent"),a=t("../../../../script/app/event/Notify"),c=t("../../../../script/app/language/LanguageCfg"),l=t("../../../../script/app/model/DataProxy"),u=t("../../../../script/app/module/login/view/LoginManager"),d=t("../../../../script/app/view/ComUI"),y=t("../../../../script/lib/base/CxComponent"),h=t("../../../../script/lib/utils/ComUtils"),b=cc._decorator,f=b.ccclass,L=b.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pHeadNode=null,e.pNameLabel=null,e.pGoldLabel=null,e.pPowerLabel=null,e.pIDLabel=null,e.pModBtn=null,e.pTotalWinTitle=null,e.pTotalWinInfo=null,e.pGame1_Title=null,e.pGame1_Info=null,e.pGame2_Title=null,e.pGame2_Info=null,e.delayLock=!0,e}return n(e,t),e.prototype.start=function(){this.initLayer(),this.dispatch(a.Notify.UserInfo.GET_USER_INFO)},e.prototype.initParams=function(){return{title:"",showTitle:!1,showSubBG:!1}},e.prototype.listEvent=function(){return new Map([[a.Notify.Base.UPDATE_USERINFO,this.onUserInfo]])},e.prototype.initLayer=function(){this.initLang();var t=l.DataProxy.getInstance().userData;if(t){if(this.pNameLabel&&(this.pNameLabel.string=t.userName,t.bIsGoldenPass&&d.ComUI.LabelToGolden(this.pNameLabel)),this.pGoldLabel&&(this.pGoldLabel.string=""+t.gold),this.pPowerLabel&&t.powerInfo&&(this.pPowerLabel.string=""+t.powerInfo.dwCurPS),this.pIDLabel&&(this.pIDLabel.string="id:"+t.userId),this.pHeadNode&&(this.pHeadNode.destroyAllChildren(),d.ComUI.createUserHead({parent:this.pHeadNode,userId:t.userId,sex:t.gender,faceId:t.faceId,size:cc.size(this.pHeadNode.width,this.pHeadNode.height),url:t.headUrl,level:t.level})),this.pModBtn){var e=!1,o=u.LoginManager.getInstance().getLoginType();o!=s.gLoginType.YK&&o!=s.gLoginType.Apple||t.bindAccountInfo&&(e=!t.bindAccountInfo.isBind),this.pModBtn.node.active=e}this.pTotalWinInfo&&(this.pTotalWinInfo.string=this.getWinInfo(t.dwJushuTotal,t.dwWinCount));for(var i=[this.pGame1_Info,this.pGame2_Info],n=t.gameWinList,p=0;p<i.length;p++){var r=i[p],a=n[p];if(r){var c=a&&a.total||0,y=a&&a.win||0;r.string=this.getWinInfo(c,y)}}}},e.prototype.initLang=function(){h.ComUtils.setLangText(this.pTotalWinTitle,c.LangKey.user_total_wins),h.ComUtils.setLangText(this.pGame1_Title,c.LangKey.user_scopa_wins),h.ComUtils.setLangText(this.pGame2_Title,c.LangKey.user_scopone_wins)},e.prototype.getWinInfo=function(t,e){var o=0;return t>0&&(o=Math.floor(e/t*100)),e+"("+o+"%)"},e.prototype.onUserInfo=function(){this.initLayer()},e.prototype.onClickModify=function(){this.delayLock&&(h.ComUtils.delayLimit(this,1e3),this.dispatch(r.GuiEvent.PopMsg.DISPLAY_MODIFY_HEAD))},p([L(cc.Node)],e.prototype,"pHeadNode",void 0),p([L(cc.Label)],e.prototype,"pNameLabel",void 0),p([L(cc.Label)],e.prototype,"pGoldLabel",void 0),p([L(cc.Label)],e.prototype,"pPowerLabel",void 0),p([L(cc.Label)],e.prototype,"pIDLabel",void 0),p([L(cc.Button)],e.prototype,"pModBtn",void 0),p([L(cc.Label)],e.prototype,"pTotalWinTitle",void 0),p([L(cc.Label)],e.prototype,"pTotalWinInfo",void 0),p([L(cc.Label)],e.prototype,"pGame1_Title",void 0),p([L(cc.Label)],e.prototype,"pGame1_Info",void 0),p([L(cc.Label)],e.prototype,"pGame2_Title",void 0),p([L(cc.Label)],e.prototype,"pGame2_Info",void 0),p([f],e)}(y.CxComponent);o.default=v,cc._RF.pop()},{"../../../../script/app/const/Global":void 0,"../../../../script/app/event/GuiEvent":void 0,"../../../../script/app/event/Notify":void 0,"../../../../script/app/language/LanguageCfg":void 0,"../../../../script/app/model/DataProxy":void 0,"../../../../script/app/module/login/view/LoginManager":void 0,"../../../../script/app/view/ComUI":void 0,"../../../../script/lib/base/CxComponent":void 0,"../../../../script/lib/utils/ComUtils":void 0}],LobbyVoice:[function(t,e,o){"use strict";cc._RF.push(e,"c5494+yygpJmKkhGUMqQvDN","LobbyVoice"),Object.defineProperty(o,"__esModule",{value:!0}),o.LobbyVoice=void 0;var i=t("../../../script/app/const/AudioFile"),n=t("../../../script/app/event/Notify"),p=t("../../../script/lib/event/EventDispatcher"),s=t("../model/LobbyEvent"),r=function(){function t(){var t=this;this.BG_MUSIC=i.AudioFile.Lobby.BG_MUSIC;var e=this.listEvent();e&&e.size>0&&e.forEach(function(e,o){p.EventDispatcher.getInstance().add(o,e,t,0)})}return t.prototype.listEvent=function(){return new Map([[s.LobbyEvent.Base.PLAY_LOBBY_MUSIC,this.onPlayBgMusic],[s.LobbyEvent.Base.PLAY_LOBBY_EFFECT,this.playOtherEffect]])},t.prototype.onDestroy=function(){p.EventDispatcher.getInstance().remove(this)},t.prototype.dispatch=function(t,e){p.EventDispatcher.getInstance().dispatch(t,e)},t.prototype.onPlayBgMusic=function(t){void 0===t&&(t=this.BG_MUSIC),this.dispatch(n.Notify.Base.PLAY_MUSIC,{path:t})},t.prototype.playOtherEffect=function(t){this.dispatch(n.Notify.Base.PLAY_EFFECT,{path:t})},t}();o.LobbyVoice=r,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/event/Notify":void 0,"../../../script/lib/event/EventDispatcher":void 0,"../model/LobbyEvent":"LobbyEvent"}]},{},["LobbyHandler","LobbyVoice","LobbyEvent","LobbyUIConfig","LobbyPopupMgr","LobbyScene","BindAccountConfirm","BindAccountLayer","LobbyBottomMenu","LobbyDeskBuild","LobbyGoldInfo","LobbyHeadInfo","LobbyMainView","LobbyTopMenu","LobbyTopRightMenu","LobbyTopUserInfo","LobbyEffectLayer","LobbyFinger","LobbyTestGold","LobbyTree","LobbyGameItem","LobbyGameView","LobbyTablesList","LobbyHeadItem","LobbyHeadModify","LobbyUserLayer"]);