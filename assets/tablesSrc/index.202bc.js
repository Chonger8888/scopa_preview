window.__require=function t(e,i,o){function a(s,r){if(!i[s]){if(!e[s]){var p=s.split("/");if(p=p[p.length-1],!e[p]){var l="function"==typeof __require&&__require;if(!r&&l)return l(p,!0);if(n)return n(p,!0);throw new Error("Cannot find module '"+s+"'")}s=p}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){return a(e[s][1][t]||t)},c,c.exports,t,e,i,o)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)a(o[s]);return a}({CMD_TableMsg:[function(t,e,i){"use strict";cc._RF.push(e,"f7f13azFp5Cuqmt8NXjRk5X","CMD_TableMsg"),Object.defineProperty(i,"__esModule",{value:!0}),i.TABLE_SUB_MSG=i.MSG_SC_ResponseOpenBox=i.MSG_CS_ReqOpenBox=i.OpenBoxChipInfo=i.MSG_SC_ResponseSurplushChips=i.SurplusChipItem=i.MSG_SC_ResponseUnLock=i.MSG_SC_ResponseUnLockCD=i.MSG_SC_ResponseRecycle=i.MSG_SC_ResponseRedpoint=i.MSG_SC_ResponseTableFinishReward=i.Reward=i.MSG_SC_ResponseUseTable=i.MSG_CS_ReqUseTable=i.MSG_CS_GetTableFinishReward=i.MSG_SC_ResponseTableNotFinishList=i.TableNotFinishItem=i.MSG_SC_ResponseGameGetChips=i.MSG_SC_ResponseTableMulitiCfg=i.TableMulitiItme=i.ChipItem=i.MSG_SC_ResponseTableList=i.TableItem=i.PieceItem=void 0;var o=function(){function t(){this.dwPieceId=0,this.dwStar=0,this.dwNum=0,this.dwPreTableId=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwPieceId&&e.uint32(8).uint32(t.dwPieceId),null!=t.dwStar&&e.uint32(16).uint32(t.dwStar),null!=t.dwNum&&e.uint32(24).uint32(t.dwNum),null!=t.dwPreTableId&&e.uint32(32).uint32(t.dwPreTableId),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwPieceId=o.uint32();break;case 2:n.dwStar=o.uint32();break;case 3:n.dwNum=o.uint32();break;case 4:n.dwPreTableId=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.PieceItem=o;var a=function(){function t(){this.dwTableId=0,this.dwStar=0,this.dwTotal=0,this.dwFinishNum=0,this.bFinish=!1,this.tabPiece=void 0,this.reward=void 0,this.dwPreTableId=0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwTableId&&e.uint32(8).uint32(t.dwTableId),null!=t.dwStar&&e.uint32(16).uint32(t.dwStar),null!=t.dwTotal&&e.uint32(24).uint32(t.dwTotal),null!=t.dwFinishNum&&e.uint32(32).uint32(t.dwFinishNum),null!=t.bFinish&&e.uint32(40).bool(t.bFinish);for(var i=0,a=t.tabPiece;i<a.length;i++)null!=(r=a[i])&&o.encode(r,e.uint32(50).fork()).ldelim();for(var n=0,s=t.reward;n<s.length;n++){var r;null!=(r=s[n])&&f.encode(r,e.uint32(58).fork()).ldelim()}return null!=t.dwPreTableId&&e.uint32(64).uint32(t.dwPreTableId),e},t.decode=function(e,i){var a=e instanceof Uint8Array?new protobuf.Reader(e):e,n=void 0===i?a.len:a.pos+i,s=new t,r=!1;for(s.tabPiece=[],s.reward=[];a.pos<n&&!r;){var p=a.uint32();switch(p>>>3){case 0:r=!0;break;case 1:s.dwTableId=a.uint32();break;case 2:s.dwStar=a.uint32();break;case 3:s.dwTotal=a.uint32();break;case 4:s.dwFinishNum=a.uint32();break;case 5:s.bFinish=a.bool();break;case 6:s.tabPiece.push(o.decode(a,a.uint32()));break;case 7:s.reward.push(f.decode(a,a.uint32()));break;case 8:s.dwPreTableId=a.uint32();break;default:a.skipType(7&p)}}return s},t}();i.TableItem=a;var n=function(){function t(){this.tabTable=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create());for(var i=0,o=t.tabTable;i<o.length;i++){var n=o[i];null!=n&&a.encode(n,e.uint32(10).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,n=void 0===i?o.len:o.pos+i,s=new t,r=!1;for(s.tabTable=[];o.pos<n&&!r;){var p=o.uint32();switch(p>>>3){case 0:r=!0;break;case 1:s.tabTable.push(a.decode(o,o.uint32()));break;default:o.skipType(7&p)}}return s},t}();i.MSG_SC_ResponseTableList=n;var s=function(){function t(){this.dwPieceId=0,this.dwStar=0,this.bNew=!1,this.dwTableId=0,this.objTable=void 0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwPieceId&&e.uint32(8).uint32(t.dwPieceId),null!=t.dwStar&&e.uint32(16).uint32(t.dwStar),null!=t.bNew&&e.uint32(24).bool(t.bNew),null!=t.dwTableId&&e.uint32(32).uint32(t.dwTableId),void 0!==t.objTable&&void 0!==t.objTable&&null!=t.objTable&&a.encode(t.objTable,e.uint32(42).fork()).ldelim(),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,n=void 0===i?o.len:o.pos+i,s=new t,r=!1;o.pos<n&&!r;){var p=o.uint32();switch(p>>>3){case 0:r=!0;break;case 1:s.dwPieceId=o.uint32();break;case 2:s.dwStar=o.uint32();break;case 3:s.bNew=o.bool();break;case 4:s.dwTableId=o.uint32();break;case 5:s.objTable=a.decode(o,o.uint32());break;default:o.skipType(7&p)}}return s},t}();i.ChipItem=s;var r=function(){function t(){this.dwTableId=0,this.strName=protobuf.util.newBuffer([]),this.strExData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwTableId&&e.uint32(8).uint32(t.dwTableId),null!=t.strName&&e.uint32(18).bytes(t.strName),null!=t.strExData&&e.uint32(26).bytes(t.strExData),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwTableId=o.uint32();break;case 2:n.strName=o.bytes();break;case 3:n.strExData=o.bytes();break;default:o.skipType(7&r)}}return n},t}();i.TableMulitiItme=r;var p=function(){function t(){this.tabTable=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create());for(var i=0,o=t.tabTable;i<o.length;i++){var a=o[i];null!=a&&r.encode(a,e.uint32(10).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.tabTable=[];o.pos<a&&!s;){var p=o.uint32();switch(p>>>3){case 0:s=!0;break;case 1:n.tabTable.push(r.decode(o,o.uint32()));break;default:o.skipType(7&p)}}return n},t}();i.MSG_SC_ResponseTableMulitiCfg=p;var l=function(){function t(){this.bGet=!1,this.bFirstUnlock=!1,this.tabChips=void 0,this.strExData=protobuf.util.newBuffer([])}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.bGet&&e.uint32(8).bool(t.bGet),null!=t.bFirstUnlock&&e.uint32(16).bool(t.bFirstUnlock);for(var i=0,o=t.tabChips;i<o.length;i++){var a=o[i];null!=a&&s.encode(a,e.uint32(26).fork()).ldelim()}return null!=t.strExData&&e.uint32(34).bytes(t.strExData),e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,r=!1;for(n.tabChips=[];o.pos<a&&!r;){var p=o.uint32();switch(p>>>3){case 0:r=!0;break;case 1:n.bGet=o.bool();break;case 2:n.bFirstUnlock=o.bool();break;case 3:n.tabChips.push(s.decode(o,o.uint32()));break;case 4:n.strExData=o.bytes();break;default:o.skipType(7&p)}}return n},t}();i.MSG_SC_ResponseGameGetChips=l;var c=function(){function t(){this.dwTableId=0,this.reward=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwTableId&&e.uint32(8).uint32(t.dwTableId);for(var i=0,o=t.reward;i<o.length;i++){var a=o[i];null!=a&&f.encode(a,e.uint32(18).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.reward=[];o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwTableId=o.uint32();break;case 2:n.reward.push(f.decode(o,o.uint32()));break;default:o.skipType(7&r)}}return n},t}();i.TableNotFinishItem=c;var d=function(){function t(){this.dwNum=0,this.tabTabelItem=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwNum&&e.uint32(8).uint32(t.dwNum);for(var i=0,o=t.tabTabelItem;i<o.length;i++){var a=o[i];null!=a&&c.encode(a,e.uint32(18).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.tabTabelItem=[];o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwNum=o.uint32();break;case 2:n.tabTabelItem.push(c.decode(o,o.uint32()));break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseTableNotFinishList=d;var u=function(){function t(){this.dwTableId=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwTableId&&e.uint32(8).uint32(t.dwTableId),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwTableId=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.MSG_CS_GetTableFinishReward=u;var h=function(){function t(){this.dwTableId=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwTableId&&e.uint32(8).uint32(t.dwTableId),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwTableId=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.MSG_CS_ReqUseTable=h;var b=function(){function t(){this.dwError=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwError=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseUseTable=b;var f=function(){function t(){this.dwType=0,this.dwNum=0,this.dwDaoJuID=0,this.bNew=!1,this.strExData=protobuf.util.newBuffer([])}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwType&&e.uint32(8).uint32(t.dwType),null!=t.dwNum&&e.uint32(16).int32(t.dwNum),null!=t.dwDaoJuID&&e.uint32(24).uint32(t.dwDaoJuID),null!=t.bNew&&e.uint32(32).bool(t.bNew),null!=t.strExData&&e.uint32(42).bytes(t.strExData),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwType=o.uint32();break;case 2:n.dwNum=o.int32();break;case 3:n.dwDaoJuID=o.uint32();break;case 4:n.bNew=o.bool();break;case 5:n.strExData=o.bytes();break;default:o.skipType(7&r)}}return n},t}();i.Reward=f;var y=function(){function t(){this.dwError=0,this.reward=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError);for(var i=0,o=t.reward;i<o.length;i++){var a=o[i];null!=a&&f.encode(a,e.uint32(18).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.reward=[];o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwError=o.uint32();break;case 2:n.reward.push(f.decode(o,o.uint32()));break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseTableFinishReward=y;var _=function(){function t(){this.dwRedPointNum=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwRedPointNum&&e.uint32(8).uint32(t.dwRedPointNum),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwRedPointNum=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseRedpoint=_;var v=function(){function t(){this.bCanOpen=!1,this.dwStar=0,this.dwNeedStar=0,this.dwTime=0,this.dwGold=0,this.reward=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.bCanOpen&&e.uint32(8).bool(t.bCanOpen),null!=t.dwStar&&e.uint32(16).uint32(t.dwStar),null!=t.dwNeedStar&&e.uint32(24).uint32(t.dwNeedStar),null!=t.dwTime&&e.uint32(32).uint32(t.dwTime),null!=t.dwGold&&e.uint32(40).uint32(t.dwGold);for(var i=0,o=t.reward;i<o.length;i++){var a=o[i];null!=a&&f.encode(a,e.uint32(50).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.reward=[];o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.bCanOpen=o.bool();break;case 2:n.dwStar=o.uint32();break;case 3:n.dwNeedStar=o.uint32();break;case 4:n.dwTime=o.uint32();break;case 5:n.dwGold=o.uint32();break;case 6:n.reward.push(f.decode(o,o.uint32()));break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseRecycle=v;var w=function(){function t(){this.dwError=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwError=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseUnLockCD=w;var T=function(){function t(){this.dwError=0,this.reward=void 0,this.tabChips=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError);for(var i=0,o=t.reward;i<o.length;i++)null!=(r=o[i])&&f.encode(r,e.uint32(18).fork()).ldelim();for(var a=0,n=t.tabChips;a<n.length;a++){var r;null!=(r=n[a])&&s.encode(r,e.uint32(26).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,r=!1;for(n.reward=[],n.tabChips=[];o.pos<a&&!r;){var p=o.uint32();switch(p>>>3){case 0:r=!0;break;case 1:n.dwError=o.uint32();break;case 2:n.reward.push(f.decode(o,o.uint32()));break;case 3:n.tabChips.push(s.decode(o,o.uint32()));break;default:o.skipType(7&p)}}return n},t}();i.MSG_SC_ResponseUnLock=T;var m=function(){function t(){this.dwChipId=0,this.dwTableId=0,this.dwPieceId=0,this.dwStar=0,this.dwNum=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChipId&&e.uint32(8).uint32(t.dwChipId),null!=t.dwTableId&&e.uint32(16).uint32(t.dwTableId),null!=t.dwPieceId&&e.uint32(24).uint32(t.dwPieceId),null!=t.dwStar&&e.uint32(32).uint32(t.dwStar),null!=t.dwNum&&e.uint32(40).uint32(t.dwNum),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwChipId=o.uint32();break;case 2:n.dwTableId=o.uint32();break;case 3:n.dwPieceId=o.uint32();break;case 4:n.dwStar=o.uint32();break;case 5:n.dwNum=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.SurplusChipItem=m;var g=function(){function t(){this.dwStarNum=0,this.tabChips=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwStarNum&&e.uint32(8).uint32(t.dwStarNum);for(var i=0,o=t.tabChips;i<o.length;i++){var a=o[i];null!=a&&m.encode(a,e.uint32(18).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.tabChips=[];o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwStarNum=o.uint32();break;case 2:n.tabChips.push(m.decode(o,o.uint32()));break;default:o.skipType(7&r)}}return n},t}();i.MSG_SC_ResponseSurplushChips=g;var L=function(){function t(){this.dwChipId=0,this.dwNum=0}return t.encode=function(t,e){return void 0===e&&(e=protobuf.Writer.create()),null!=t.dwChipId&&e.uint32(8).uint32(t.dwChipId),null!=t.dwNum&&e.uint32(16).uint32(t.dwNum),e},t.decode=function(e,i){for(var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.dwChipId=o.uint32();break;case 2:n.dwNum=o.uint32();break;default:o.skipType(7&r)}}return n},t}();i.OpenBoxChipInfo=L;var C=function(){function t(){this.tabChipsInfo=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create());for(var i=0,o=t.tabChipsInfo;i<o.length;i++){var a=o[i];null!=a&&L.encode(a,e.uint32(10).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,s=!1;for(n.tabChipsInfo=[];o.pos<a&&!s;){var r=o.uint32();switch(r>>>3){case 0:s=!0;break;case 1:n.tabChipsInfo.push(L.decode(o,o.uint32()));break;default:o.skipType(7&r)}}return n},t}();i.MSG_CS_ReqOpenBox=C;var S=function(){function t(){this.dwError=0,this.reward=void 0,this.tabChips=void 0}return t.encode=function(t,e){void 0===e&&(e=protobuf.Writer.create()),null!=t.dwError&&e.uint32(8).uint32(t.dwError);for(var i=0,o=t.reward;i<o.length;i++)null!=(r=o[i])&&f.encode(r,e.uint32(18).fork()).ldelim();for(var a=0,n=t.tabChips;a<n.length;a++){var r;null!=(r=n[a])&&s.encode(r,e.uint32(26).fork()).ldelim()}return e},t.decode=function(e,i){var o=e instanceof Uint8Array?new protobuf.Reader(e):e,a=void 0===i?o.len:o.pos+i,n=new t,r=!1;for(n.reward=[],n.tabChips=[];o.pos<a&&!r;){var p=o.uint32();switch(p>>>3){case 0:r=!0;break;case 1:n.dwError=o.uint32();break;case 2:n.reward.push(f.decode(o,o.uint32()));break;case 3:n.tabChips.push(s.decode(o,o.uint32()));break;default:o.skipType(7&p)}}return n},t}();i.MSG_SC_ResponseOpenBox=S,i.TABLE_SUB_MSG={MSG_CS_SHOW_TABLE_LIST:2e3,MSG_SC_RESPONSE_TABLE_TABLE_LIST:2001,MSG_CS_GET_TABLE_MULTI_CFG:2002,MSG_CS_RESPONSE_TABLE_MULTI_CFG:2003,MSG_CS_REQ_GAME_GET_CHIPS:2004,MSG_SC_RESPONSE_GAME_GET_CHIPS:2005,MSG_CS_GET_TABLE_NOT_FINISH_LIST:2018,MSG_SC_RESPONSE_TABLE_NOT_FINISH_LIST:2019,MSG_CS_GET_TABLE_FINISH_REWARD:2006,MSG_SC_RESPONSE_TABLE_FINISH_REWARD:2007,MSG_CS_REQ_USE_TABLE:2008,MSG_SC_RESPONSE_USE_TABLE:2009,MSG_CS_SHOWT_REDPOINT:2010,MSG_SC_RESPONSE_REDPOINT:2011,MSG_CS_SHOWT_RECYCLE:2012,MSG_SC_RESPONSE_RECYCLE:2013,MSG_CS_REQ_UNLOCKCD:2014,MSG_SC_RESPONSE_UNLOCKCD:2015,MSG_CS_REQ_UNLOCK:2016,MSG_SC_RESPONSE_UNLOCK:2017,MSG_CS_REQ_SURPLUS_CHIPS:2020,MSG_SC_RESPONSE_SURPLUS_CHIPS:2021,MSG_CS_REQ_OPEN_BOX:2022,MSG_SC_RESPONSE_OPEN_BOX:2023,UNRECOGNIZED:-1},cc._RF.pop()},{}],TableBoxInfo:[function(t,e,i){"use strict";cc._RF.push(e,"dec15ojCs1IKYC0BkY+IGFg","TableBoxInfo");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableBoxInfo=void 0;var s=t("../../../script/lib/base/CxComponent"),r=cc._decorator,p=r.ccclass,l=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pBG=null,e.pContainer=null,e.pListItem=null,e.mListData=null,e}return a(e,t),e.prototype.init=function(t){this.mListData=t},e.prototype.start=function(){this.initLayer()},e.prototype.initLayer=function(){if(this.mListData&&this.pContainer){this.initView();var t=this.pContainer.getComponent(cc.Layout);this.mListData.length<=2?this.setLayoutParams(t,66,66,55,55,65,45):(t.node.width=860,this.setLayoutParams(t,26,26,55,55,24,24)),t.updateLayout(),this.setBgSize()}},e.prototype.setBgSize=function(){if(this.pContainer){var t=this.pContainer.getComponent(cc.Layout);this.pBG&&t&&(this.pBG.width=t.node.width,this.pBG.height=t.node.height)}},e.prototype.setLayoutParams=function(t,e,i,o,a,n,s){t&&(t.paddingLeft=e,t.paddingRight=i,t.paddingTop=o,t.paddingBottom=a,t.spacingX=n,t.spacingY=s)},e.prototype.initView=function(){if(this.pContainer&&this.mListData){this.pContainer.removeAllChildren();for(var t=0;t<this.mListData.length;t++)if(this.pListItem){var e=cc.instantiate(this.pListItem);if(e){var i=e.getComponent("TableBoxItem");i&&i.init({index:t,data:this.mListData[t]}),this.pContainer.addChild(e)}}}},n([l(cc.Node)],e.prototype,"pBG",void 0),n([l(cc.Node)],e.prototype,"pContainer",void 0),n([l(cc.Prefab)],e.prototype,"pListItem",void 0),n([p],e)}(s.CxComponent);i.TableBoxInfo=c,cc._RF.pop()},{"../../../script/lib/base/CxComponent":void 0}],TableBoxItem:[function(t,e,i){"use strict";cc._RF.push(e,"11990vjVeJAyJtcd5gPIvF3","TableBoxItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableBoxItem=void 0;var s=t("../../../script/app/const/Global"),r=t("../../../script/app/view/ComUI"),p=t("../../../script/lib/base/CxComponent"),l=cc._decorator,c=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pSpriteAtlas=null,e.pBG=null,e.pMainIcon=null,e.pLabel=null,e}return a(e,t),e.prototype.init=function(t){t&&(this.mRewardData=t.data)},e.prototype.start=function(){this.initLayer()},e.prototype.initLayer=function(){this.mRewardData&&(this.setBG(),this.setMainIcon(),this.setLabel())},e.prototype.setMainIcon=function(){if(this.pMainIcon){var t=null,e=this.mRewardData.dwType;e==s.gShopHBType.GOLD?t="table_reward_icon_1":e==s.gShopHBType.POWER?t="table_reward_icon_2":e==s.gShopHBType.CHIPS&&(t="table_reward_icon_3"),r.ComUI.setSpriteImage(this.pMainIcon,this.pSpriteAtlas,t)}},e.prototype.setBG=function(){if(this.pBG){var t=null,e=this.mRewardData.dwType;e==s.gShopHBType.GOLD?t="table_img_info_bg_1":e==s.gShopHBType.POWER?t="table_img_info_bg_2":e==s.gShopHBType.CHIPS&&(t="table_img_info_bg_3"),r.ComUI.setSpriteImage(this.pBG,this.pSpriteAtlas,t)}},e.prototype.setLabel=function(){if(this.pLabel){var t=this.mRewardData.dwMaxNum,e=this.mRewardData.dwNum,i="";i=t>0&&t>e?e+"-"+t:""+e,this.mRewardData.dwType==s.gShopHBType.CHIPS&&(i+=" Cards"),this.pLabel.string=i}},n([d(cc.SpriteAtlas)],e.prototype,"pSpriteAtlas",void 0),n([d(cc.Sprite)],e.prototype,"pBG",void 0),n([d(cc.Sprite)],e.prototype,"pMainIcon",void 0),n([d(cc.Label)],e.prototype,"pLabel",void 0),n([c],e)}(p.CxComponent);i.TableBoxItem=u,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0}],TableBoxLayer:[function(t,e,i){"use strict";cc._RF.push(e,"2cd9bTsP0NDQ4J8A4DMakrL","TableBoxLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableBoxLayer=void 0;var s=t("../../../script/app/base/component/ComTimer"),r=t("../../../script/app/const/Global"),p=t("../../../script/app/event/GuiEvent"),l=t("../../../script/app/event/Notify"),c=t("../../../script/app/language/LanguageCfg"),d=t("../../../script/app/model/DataProxy"),u=t("../../../script/app/view/ComUI"),h=t("../../../script/lib/base/CxComponent"),b=t("../../../script/lib/base/PopupView"),f=t("../../../script/lib/event/EventDispatcher"),y=t("../../../script/lib/i18n/i18nHelper"),_=t("../../../script/lib/utils/ComUtils"),v=cc._decorator,w=v.ccclass,T=v.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pSpriteAtlas=null,e.pBoxSkeleton=null,e.pTimeLabel=null,e.pNumLabel=null,e.pStarIcon=null,e.pGoldIcon=null,e.pPaoNode=null,e.pMainBtn=null,e.mBoxInfo=null,e.mNewBoxInfo=null,e.mTimer=new s.default,e.mShowTime=0,e.mIsPlayAnim=!1,e.delayLock=!0,e}return a(e,t),e.prototype.listEvent=function(){return new Map([[l.Notify.Tables.RTN_TABLE_RECYCLE,this.onUpdateLayer],[l.Notify.Tables.RTN_TABLE_BOX_UNLOCK,this.onUnlockBox],[l.Notify.Tables.RTN_TABLE_BOX_UNLOCK_CD,this.onUnlockCD]])},e.prototype.init=function(t){this.mBoxInfo=t},e.prototype.start=function(){this.mBoxInfo&&(this.mShowTime=this.mBoxInfo.dwTime,this.setVerticalOffset(),this.initLayer(this.mBoxInfo),this.initLockTime()),b.PopupView.setTitle(this.node,_.ComUtils.getLang(c.LangKey.text_prompt))},e.prototype.initLayer=function(t){t&&(this.showBox(t),this.showTime(t),this.showBtn(t),this.showPao(t),this.showLableInfo(t))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.mTimer&&this.mTimer.clear()},e.prototype.initLockTime=function(){var t=this;this.mBoxInfo&&this.mBoxInfo.dwTime>0&&this.mTimer.start({startTime:this.mBoxInfo.dwStartTime,obj:this,totalTime:this.mBoxInfo.dwTime,callback:function(e,i){i?(t.mShowTime=0,t.mBoxInfo.dwTime=0,t.initLayer(t.mBoxInfo),f.EventDispatcher.getInstance().delayDispatch(1e3,l.Notify.Tables.REQ_TABLE_RECYCLE)):(t.mShowTime=e,t.showTime(t.mBoxInfo))}})},e.prototype.showBox=function(t){t&&(t.dwTime>0?this.setBoxSkeleton(!0):this.setBoxSkeleton(!1))},e.prototype.setBoxSkeleton=function(t){this.pBoxSkeleton&&(this.pBoxSkeleton.paused=!0,this.pBoxSkeleton.clearTracks(),this.pBoxSkeleton.setToSetupPose(),this.pBoxSkeleton.animation=t?"bx_hui":"bx_liang",this.pBoxSkeleton.paused=!1)},e.prototype.showTime=function(t){this.pTimeLabel&&t&&(t.dwTime>0?(this.pTimeLabel.node.active=!0,this.pTimeLabel.string=_.ComUtils.formatTimeString(this.mShowTime)):this.pTimeLabel.node.active=!1)},e.prototype.showBtn=function(t){t&&this.pMainBtn&&(t.dwStar<t.dwNeedStar?(this.pNumLabel&&(this.pNumLabel.string=""+t.dwNeedStar),this.pGoldIcon&&(this.pGoldIcon.node.active=!1),this.pStarIcon&&(this.pStarIcon.node.active=!0),this.setBtnGray(!0)):(t.dwTime>0?(this.pNumLabel&&(this.pNumLabel.string=""+_.ComUtils.formatGoldStr(t.dwGold,1e4,0)),this.pGoldIcon&&(this.pGoldIcon.node.active=!0),this.pStarIcon&&(this.pStarIcon.node.active=!1)):(this.pNumLabel&&(this.pNumLabel.string=""+t.dwNeedStar),this.pGoldIcon&&(this.pGoldIcon.node.active=!1),this.pStarIcon&&(this.pStarIcon.node.active=!0)),this.setBtnGray(!1)))},e.prototype.setBtnGray=function(t){if(this.pMainBtn){this.pMainBtn.interactable=!t;var e=this.pMainBtn.node.getChildByName("Background");if(e){var i=t?"com_btn_gray":"com_btn_green";u.ComUI.setSprite(e,i,r.gAssetBundleName.RESOURCES),u.ComUI.enableNodeGray(this.pGoldIcon.node,t),u.ComUI.enableNodeGray(this.pStarIcon.node,t),u.ComUI.enableNodeGray(this.pNumLabel.node,t)}}},e.prototype.showPao=function(t){t&&this.pPaoNode&&(this.pPaoNode.active=!1,t.dwTime>0&&t.dwStar>=t.dwNeedStar&&(this.pPaoNode.active=!0))},e.prototype.showLableInfo=function(t){t&&(this.setLabelString(this.node,"label_top",_.ComUtils.getLang(c.LangKey.table_box_top_info)),this.setLabelString(this.node,"label_bottom",y.i18nHelper.makeLanguage([c.LangKey.table_box_cards_tip,t.dwStar])),this.setLabelString(this.pPaoNode,"label_pao",_.ComUtils.getLang(c.LangKey.table_box_time_tip)))},e.prototype.setLabelString=function(t,e,i){if(t&&e&&i){var o=t.getChildByName(e);if(o){var a=o.getComponent(cc.Label);a&&(a.language=i)}}},e.prototype.onUpdateLayer=function(t){var e=this;t&&(this.mNewBoxInfo=t,this.mIsPlayAnim?this.scheduleOnce(function(){e.mIsPlayAnim=!1,e.updateNewData()},2):this.updateNewData())},e.prototype.updateNewData=function(){this.mNewBoxInfo&&(this.mBoxInfo=this.mNewBoxInfo,this.initLayer(this.mBoxInfo),this.initLockTime(),this.mNewBoxInfo=null)},e.prototype.onClickInfo=function(){this.delayLock&&(_.ComUtils.delayLimit(this,1e3),this.mBoxInfo&&this.dispatch(p.GuiEvent.PopMsg.SHOW_TABLE_BOX_INFO,this.mBoxInfo.rewardList))},e.prototype.onClick=function(){this.delayLock&&(_.ComUtils.delayLimit(this,1e3),this.mBoxInfo&&(this.mBoxInfo.dwTime>0?this.mIsPlayAnim||(d.DataProxy.getInstance().userData.gold<this.mBoxInfo.dwGold?this.dispatch(p.GuiEvent.PopMsg.DISPLAY_NOT_ENOUGH_LAYER):this.dispatch(l.Notify.Tables.REQ_TABLE_BOX_UNLOCK_CD)):this.dispatch(l.Notify.Tables.REQ_TABLE_BOX_UNLOCK)))},e.prototype.onUnlockBox=function(t){t&&(0==t.dwError?u.ComUI.showToast("Unlock Chests Success"):u.ComUI.showToast("Unlock Chests Failed"))},e.prototype.onUnlockCD=function(t){t&&(0==t.dwError?(this.showUnlockCDAnim(),this.dispatch(l.Notify.Tables.REQ_TABLE_RECYCLE),u.ComUI.showToast("Unlock Time Success")):u.ComUI.showToast("Unlock Time Failed"))},e.prototype.showUnlockCDAnim=function(){var t=this;if(this.mIsPlayAnim=!0,this.pTimeLabel&&(this.pTimeLabel.node.active=!1),this.pPaoNode&&(this.pPaoNode.active=!1),this.mTimer&&this.mTimer.stopTimer(),u.ComUI.playSkeletonAnim(this.pBoxSkeleton,"bx_jiesuo",!1,function(){t.showBox(t.mBoxInfo)}),this.pMainBtn){var e=cc.instantiate(this.pMainBtn.node);e.active=!0,this.node.addChild(e),this.pMainBtn.node.active=!1,cc.tween(e).to(.1,{scale:1}).to(.13,{scale:1}).to(.77,{opacity:255}).to(.2,{opacity:0}).removeSelf().start(),cc.tween(this.pMainBtn.node).delay(.5).call(function(){t.mNewBoxInfo&&t.showBtn(t.mNewBoxInfo)}).delay(.6).set({active:!0,scale:.5,opacity:0}).to(.13,{scale:1.2,opacity:255}).to(.17,{scale:1}).call(function(){t.mIsPlayAnim=!1,t.updateNewData()}).start()}},e.prototype.test=function(){var t={bCanOpen:!0,dwGold:150,dwTime:0,dwNeedStar:60,dwStar:100};t.dwStartTime=Math.floor((new Date).getTime()/1e3),this.mBoxInfo=t},n([T({type:cc.SpriteAtlas,tooltip:"tableres\u8d44\u6e90"})],e.prototype,"pSpriteAtlas",void 0),n([T({type:sp.Skeleton,tooltip:"\u5b9d\u7bb1\u52a8\u753b\u548c\u56fe\u6807\u663e\u793a"})],e.prototype,"pBoxSkeleton",void 0),n([T({type:cc.Label,tooltip:"\u5012\u8ba1\u65f6Label"})],e.prototype,"pTimeLabel",void 0),n([T({type:cc.Label,tooltip:"\u661f\u661f\u6216\u91d1\u5e01\u4e2a\u6570Label"})],e.prototype,"pNumLabel",void 0),n([T({type:cc.Sprite,tooltip:"\u661f\u661f\u7cbe\u7075"})],e.prototype,"pStarIcon",void 0),n([T({type:cc.Sprite,tooltip:"\u91d1\u5e01\u7cbe\u7075"})],e.prototype,"pGoldIcon",void 0),n([T({type:cc.Node,tooltip:"\u6ce1\u6ce1\u8282\u70b9"})],e.prototype,"pPaoNode",void 0),n([T({type:cc.Button,tooltip:"\u7eff\u8272\u6309\u94ae"})],e.prototype,"pMainBtn",void 0),n([w],e)}(h.CxComponent);i.TableBoxLayer=m,cc._RF.pop()},{"../../../script/app/base/component/ComTimer":void 0,"../../../script/app/const/Global":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0,"../../../script/lib/base/PopupView":void 0,"../../../script/lib/event/EventDispatcher":void 0,"../../../script/lib/i18n/i18nHelper":void 0,"../../../script/lib/utils/ComUtils":void 0}],TableBoxRewardItem:[function(t,e,i){"use strict";cc._RF.push(e,"1c239shLnVJvKYHpGW8qnpD","TableBoxRewardItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableBoxRewardItem=void 0;var s=t("../../../script/app/const/Global"),r=t("../../../script/app/module/tables/TableSkinMgr"),p=t("../../../script/app/view/ComUI"),l=t("../../../script/lib/base/CxComponent"),c=cc._decorator,d=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pTableList=null,e.pTableRes=null,e.pMainIcon=null,e.pStarNode=null,e.pNewNode=null,e.pLightRoate=null,e.pLightKuang=null,e.pRewardIcon=null,e.pRewardLabel=null,e.pPieceIdLabel=null,e.mIsChip=!1,e}return a(e,t),e.prototype.init=function(t){if(t){var e=t.rewardData;e&&(this.mIsChip=e.isChip,this.mIsChip?this.mChipData=e.data:this.mRewardData=e.data)}},e.prototype.start=function(){this.initLayer()},e.prototype.initLayer=function(){(this.mChipData||this.mRewardData)&&(this.setMainIcon(),this.setStar(),this.setNewIcon(),this.setRewardIcon(),this.setRewardLabel(),this.setPieceId())},e.prototype.setMainIcon=function(){var t=null;if(this.mIsChip)this.mChipData&&(t="table_icon_"+r.TableSkinMgr.getTableCfgById(this.mChipData.dwTableId).id,this.pMainIcon&&p.ComUI.setSpriteImage(this.pMainIcon,this.pTableList,t));else if(this.mRewardData){var e=this.mRewardData.dwType;e==s.gShopHBType.GOLD?t="table_img_info_bg_1":e==s.gShopHBType.POWER&&(t="table_img_info_bg_2"),p.ComUI.setSpriteImage(this.pMainIcon,this.pTableRes,t)}},e.prototype.setRewardIcon=function(){if(this.mRewardData){var t=null,e=this.mRewardData.dwType;e==s.gShopHBType.GOLD?t="table_reward_icon_1":e==s.gShopHBType.POWER&&(t="table_reward_icon_2"),this.pRewardIcon&&(this.pRewardIcon.node.active=!0,p.ComUI.setSpriteImage(this.pRewardIcon,this.pTableRes,t))}},e.prototype.setRewardLabel=function(){this.mRewardData&&this.pRewardLabel&&(this.pRewardLabel.node.active=!0,this.pRewardLabel.string="+"+this.mRewardData.dwNum)},e.prototype.setStar=function(){if(this.mChipData)for(var t=this.mChipData.dwStar,e=1;e<=5;e++){var i=this.pStarNode.getChildByName("star"+e);i&&(i.active=!1,e<=t&&(i.active=!0))}else this.pStarNode&&(this.pStarNode.active=!1)},e.prototype.setNewIcon=function(){this.mChipData&&this.pNewNode&&(this.pNewNode.node.active=this.mChipData.bNew)},e.prototype.setPieceId=function(){this.mChipData&&this.pPieceIdLabel&&(this.pPieceIdLabel.string=this.mChipData.dwTableId+"-"+this.mChipData.dwPieceId,this.pPieceIdLabel.node.active=!0)},e.prototype.playLightRoate=function(){this.pLightRoate&&(this.pLightRoate.node.active=!0,cc.tween(this.pLightRoate.node).repeatForever(cc.tween().by(8,{angle:360})).start())},e.prototype.setLightKuang=function(){this.pLightKuang&&this.mChipData&&this.mChipData.bNew&&(this.pLightKuang.node.active=!0)},n([u(cc.SpriteAtlas)],e.prototype,"pTableList",void 0),n([u(cc.SpriteAtlas)],e.prototype,"pTableRes",void 0),n([u(cc.Sprite)],e.prototype,"pMainIcon",void 0),n([u(cc.Node)],e.prototype,"pStarNode",void 0),n([u(cc.Sprite)],e.prototype,"pNewNode",void 0),n([u(cc.Sprite)],e.prototype,"pLightRoate",void 0),n([u(cc.Sprite)],e.prototype,"pLightKuang",void 0),n([u(cc.Sprite)],e.prototype,"pRewardIcon",void 0),n([u(cc.Label)],e.prototype,"pRewardLabel",void 0),n([u(cc.Label)],e.prototype,"pPieceIdLabel",void 0),n([d],e)}(l.CxComponent);i.TableBoxRewardItem=h,cc._RF.pop()},{"../../../script/app/const/Global":void 0,"../../../script/app/module/tables/TableSkinMgr":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0}],TableBoxRewardLayer:[function(t,e,i){"use strict";cc._RF.push(e,"46b5bd5RYtLZJUVG51BeO16","TableBoxRewardLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableBoxRewardLayer=void 0;var s=t("../../../script/app/const/AudioFile"),r=t("../../../script/app/event/Notify"),p=t("../../../script/app/view/ComUI"),l=t("../../../script/lib/base/CxComponent"),c=t("./TableBoxRewardItem"),d=cc._decorator,u=d.ccclass,h=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pListItem=null,e.pContainer=null,e.pSkeleton=null,e.pSkeletonXin=null,e.pPieceNode=null,e.mRewardData=null,e.mChipData=null,e.mAllList=null,e.mID=null,e.mLineTotal=0,e.mNodeList=new Array,e.mLineList=new Array,e.mEnableClose=!1,e}return a(e,t),e.prototype.init=function(t){t&&(this.mRewardData=t.rewardList,this.mChipData=t.chipList,this.mID=t.dwID)},e.prototype.start=function(){var t=this;this.initData(),this.initRewardList(),this.initAnim(),this.addPieceAnim(),this.scheduleOnce(function(){t.mEnableClose=!0},2)},e.prototype.initData=function(){var t=this;this.mAllList=new Array,this.mChipData&&this.mChipData.forEach(function(e){var i={isChip:!0};i.data=e,t.mAllList.push(i)}),this.mRewardData&&this.mRewardData.forEach(function(e){var i={isChip:!1};i.data=e,t.mAllList.push(i)})},e.prototype.initRewardList=function(){this.createNodeLine(),this.setLineLayout(this.pContainer)},e.prototype.createItem=function(t){if(this.pListItem){var e=cc.instantiate(this.pListItem);if(e){e.anchorX=.5,e.anchorY=.5;var i=e.getComponent("TableBoxRewardItem");return i&&i.init({rewardData:t}),e}}return null},e.prototype.createNodeLine=function(){var t=this,e=0,i=0,o=null;this.mAllList&&this.mAllList.forEach(function(a){var n=t.createItem(a);n&&(n.active=!1,0==e&&(o=new Array),o&&o.push(n),t.mNodeList&&t.mNodeList.push(n),i++,3!=++e&&i!=t.mAllList.length||(e=0,t.mLineList.push(o)))})},e.prototype.setLineLayout=function(t){var e=this;if(this.mLineList&&t){var i=0,o=0,a=this.mLineList.length;3==a?i=35:2==a&&(i=90);var n=0;this.mLineList.forEach(function(s){if(s){var r=e.addOneLine(s),p=r.height;0==n&&(n=a*p+(a-1)*p);var l=n/2-(p/2+(p+i)*o);r.x=0,r.y=l,o++,t&&(t.addChild(r),t.height=n)}})}},e.prototype.addOneLine=function(t){var e=new cc.Node,i=0,o=t.length;3==o?i=90:2==o&&(i=100);var a=t[0].width,n=t[0].height,s=o*a+(o-1)*i;e.width=s,e.height=n;var r=0;return t.forEach(function(t){if(t){e.addChild(t);var o=-s/2+a/2+(a+i)*r;t.x=o,t.y=0,r++}}),e},e.prototype.initAnim=function(){if(this.mID){var t=["","kbx_mu","kbx_yin","kbx_jin","kbx_zi"][this.mID];t&&(p.ComUI.playSkeletonAnim(this.pSkeletonXin,t),this.dispatch(r.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Table.OPEN_BOX}))}else p.ComUI.playSkeletonAnim(this.pSkeleton,"kbx"),this.dispatch(r.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Table.OPEN_BOX})},e.prototype.addPieceAnim=function(){if(this.mNodeList)for(var t=0;t<this.mNodeList.length;t++){var e=this.mNodeList[t];this.addOnePieceAnim(e,t)}},e.prototype.addOnePieceAnim=function(t,e){var i=this;if(t){var o=t.parent.convertToWorldSpaceAR(t.position);if(this.pPieceNode){var a=cc.instantiate(this.pPieceNode);if(a){a.x=this.pPieceNode.x,a.y=this.pPieceNode.y,a.scale=0,this.node.addChild(a);var n=a.parent.convertToNodeSpace(o);cc.tween(a).delay(.7).delay(.1*e).set({active:!0}).to(.23,{x:n.x,y:n.y,scale:1}).delay(.09).call(function(){i.dispatch(r.Notify.Base.PLAY_EFFECT,{path:s.AudioFile.Table.FANG_PAI})}).delay(.04).to(.17,{scaleX:0,scaleY:1}).call(function(){i.playPieceLight(t)}).start()}}}},e.prototype.playPieceLight=function(t){t&&(t.active=!0,t.scaleX=0,t.scaleY=1,cc.tween(t).to(.13,{scaleX:1,scaleY:1}).call(function(){if(t){var e=t.getComponent(c.TableBoxRewardItem);e&&(e.setLightKuang(),e.playLightRoate())}}).start())},e.prototype.onClick=function(){this.mEnableClose&&this.close()},e.prototype.onBeforeClose=function(){this.dispatch(r.Notify.Tables.REQ_NOT_GET_AWARD)},e.prototype.test=function(){for(var t=new Array,e=0;e<5;e++){var i={};i.bNew=e>2,i.dwPieceId=e,i.dwStar=1+e,i.dwTableId=1+e,t.push(i)}this.mChipData=t},n([h(cc.Prefab)],e.prototype,"pListItem",void 0),n([h(cc.Node)],e.prototype,"pContainer",void 0),n([h(sp.Skeleton)],e.prototype,"pSkeleton",void 0),n([h(sp.Skeleton)],e.prototype,"pSkeletonXin",void 0),n([h(cc.Node)],e.prototype,"pPieceNode",void 0),n([u],e)}(l.CxComponent);i.TableBoxRewardLayer=b,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0,"./TableBoxRewardItem":"TableBoxRewardItem"}],TableCompleteView:[function(t,e,i){"use strict";cc._RF.push(e,"6da4f3EEV9J7oXRJYTO3mFZ","TableCompleteView");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableCompleteView=void 0;var s=t("./../../../script/app/language/LanguageCfg"),r=t("./../../../script/lib/utils/ComUtils"),p=t("./../../../script/app/const/Global"),l=t("./../../../script/app/module/tables/TableSkinMgr"),c=t("../../../script/app/event/Notify"),d=t("../../../script/app/view/ComUI"),u=t("../../../script/lib/base/CxComponent"),h=t("../../../script/lib/manager/ResManager"),b=t("../../../script/app/const/AudioFile"),f=t("../../../script/app/event/GuiEvent"),y=t("../../../script/app/base/ComPopupMgr"),_=t("../../../script/lib/i18n/i18nHelper"),v=cc._decorator,w=v.ccclass,T=v.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndLight=null,e.spLightSide=null,e.ndTable=null,e.spTable=null,e.spScopa=null,e.spTitle=null,e.labTitle=null,e.ndAwardBg=null,e.labYouWon=null,e.labAwardPower=null,e.spAwardPowerIcon=null,e.labAwardGold=null,e.spAwardGoldIcon=null,e.btnCollect=null,e.delayLock=!0,e._viewOpenState=new y.ViewOpenState("GoldenPassMainView"),e}return a(e,t),e.prototype.listEvent=function(){return new Map([[f.GuiEvent.Anim.PUT_PACK_UP_TABLE_POS,this.onGetPackUpTablePos],[c.Notify.Tables.RTN_TABLE_FINISH_REWARD,this.onGetReward],[c.Notify.Base.RTN_CHECK_VIEW_IS_OPENED,this.onCheckGoldenPassViewOpened]])},e.prototype.init=function(t){this.notGetAwardList=t,this.notGetAwardList&&this.notGetAwardList.length>0&&(this.curAwardItem=this.notGetAwardList.shift())},e.prototype.start=function(){this.dispatch(c.Notify.Base.CHECK_VIEW_IS_OPENED,this._viewOpenState.scriptName),this.ndTable&&(this.tableDefPos=cc.v2(this.ndTable.x,this.ndTable.y)),this.doEnterAnim(),this.dispatch(c.Notify.Other.REQ_TABLES_NEW_ST)},e.prototype.doEnterAnim=function(){var t=this;if(this.ndTable&&(this.ndTable.active=!0,this.ndTable.opacity=255,this.ndTable.scale=1,this.ndTable.x=this.tableDefPos.x,this.ndTable.y=this.tableDefPos.y),this.ndLight&&(this.ndLight.active=!1,cc.tween(this.ndLight).delay(.1).set({active:!0}).start()),this.dispatch(c.Notify.Base.PLAY_EFFECT,{path:b.AudioFile.Table.TABLE_COMPELTE}),this.spTable){if(this.curAwardItem){var e=l.TableSkinMgr.getTableCfgById(this.curAwardItem.dwTableId);if(e){var i=this;h.default.getInstance().loadImg(e.bg,p.gAssetBundleName.TABLES_RES,function(t,e){e&&(i.spTable.spriteFrame=e)}),h.default.getInstance().loadAtlas(e.skin,p.gAssetBundleName.TABLES_RES,function(e,i){i&&cc.isValid(t.spTable)&&(t.spScopa.spriteFrame=i.getSpriteFrame("table_scopa"))})}}cc.tween(this.spTable.node).set({scale:1,opacity:0}).delay(.1).to(.13,{scale:1.2,opacity:255}).to(.23,{scale:1.15}).start()}this.spLightSide&&(this.spLightSide.node.active=!0,cc.tween(this.spLightSide.node).set({scale:3.65,opacity:0}).delay(.1).to(.23,{opacity:255}).start()),this.spTitle&&(this.spTitle.node.active=!0,cc.tween(this.spTitle.node).set({scale:3,opacity:0}).delay(.2).to(.2,{scale:.9,opacity:255}).to(.16,{scale:1.1}).to(.8,{scale:1}).start()),this.labTitle&&(this.labTitle.node.active=!0,cc.tween(this.labTitle.node).set({scale:1.5,opacity:0}).delay(.33).to(.2,{scale:.9,opacity:255}).to(.23,{scale:1}).start()),this.ndAwardBg&&(this.ndAwardBg.active=!0,cc.tween(this.ndAwardBg).set({opacity:0}).delay(.5).to(.2,{opacity:255}).start()),this.labYouWon&&(this.labYouWon.node.active=!0,this.labYouWon.string=r.ComUtils.getLang(s.LangKey.table_text_you_won),cc.tween(this.labYouWon.node).set({scale:2}).delay(.6).to(.1,{scale:.9}).to(.16,{scale:1}).start()),this.curAwardItem.reward&&this.curAwardItem.reward.forEach(function(e){e.dwType===p.gShopHBType.POWER?(t.spAwardPowerIcon&&(t.spAwardPowerIcon.node.active=!0,cc.tween(t.spAwardPowerIcon.node).set({scale:.9,opacity:0}).delay(.76).set({scale:.9,opacity:255}).to(.14,{scale:1}).start()),t.labAwardPower&&(t.labAwardPower.node.active=!0,cc.tween(t.labAwardPower.node).set({scale:.7,opacity:0}).delay(.86).set({scale:.7,opacity:255}).to(.14,{scale:1}).start())):e.dwType===p.gShopHBType.POWER&&(t.spAwardGoldIcon&&(t.spAwardGoldIcon.node.active=!0,cc.tween(t.spAwardGoldIcon.node).set({scale:.9,opacity:0}).delay(.76).set({scale:.9,opacity:255}).to(.14,{scale:1}).start()),t.labAwardGold&&(t.labAwardGold.node.active=!0,cc.tween(t.labAwardGold.node).set({scale:.7,opacity:0}).delay(.86).set({scale:.7,opacity:255}).to(.14,{scale:1}).start()))}),this.btnCollect&&(this.btnCollect.node.active=!0,this.btnCollect.node.on("click",this.onCollectClicked,this),cc.tween(this.btnCollect.node).set({opacity:0}).delay(1).set({opacity:255}).start()),this.initAward()},e.prototype.openNext=function(){this.curAwardItem=this.notGetAwardList.shift(),this.curAwardItem?this.doEnterAnim():this.close()},e.prototype.initAward=function(){var t=this;this.curAwardItem.reward&&this.curAwardItem.reward.forEach(function(e){var i=r.ComUtils.formatGoldStr(e.dwNum);e.dwType===p.gShopHBType.POWER?(t.labAwardPower&&(t.labAwardPower.string="x"+i),t.spAwardPowerIcon&&(t.spAwardPowerIcon.node.parent.active=!0)):e.dwType===p.gShopHBType.GOLD&&(t.labAwardGold&&(t.labAwardGold.string="x"+i),t.spAwardGoldIcon&&(t.spAwardGoldIcon.node.parent.active=!0))})},e.prototype.onCollectClicked=function(){if(this.delayLock){r.ComUtils.delayLimit(this),this.dispatch(c.Notify.Base.PLAY_EFFECT,{path:b.AudioFile.Com.GO}),this.dispatch(c.Notify.Tables.REQ_TABLE_FINISH_REWARD,this.curAwardItem.dwTableId);var t=_.i18nHelper.getLanguage(s.LangKey.table_to_use_tips);d.ComUI.showToast(t,3,2)}},e.prototype.onUseItClicked=function(){this.delayLock&&(r.ComUtils.delayLimit(this),this.dispatch(c.Notify.Base.PLAY_EFFECT,{path:b.AudioFile.Com.GO}),this.dispatch(c.Notify.Tables.REQ_TABLE_FINISH_REWARD,this.curAwardItem.dwTableId),this.dispatch(c.Notify.Tables.USE_TABLE,this.curAwardItem.dwTableId))},e.prototype.onGetPackUpTablePos=function(t){t&&t.worldPos&&(this.packUpPos=this.node.convertToNodeSpaceAR(t.worldPos)),t&&t.node&&(this.pPackUpNode=cc.instantiate(t.node),this.pPackUpNode&&(this.pPackUpNode.parent=this.node,this.pPackUpNode.active=!1,this.pPackUpNode.zIndex=-1,this.pPackUpNode.x=this.packUpPos.x,this.pPackUpNode.y=this.packUpPos.y))},e.prototype.hideNodes=function(){this.ndLight&&(this.ndLight.active=!1),this.spLightSide&&(this.spLightSide.node.active=!1),this.spTitle&&(this.spTitle.node.active=!1),this.labTitle&&(this.labTitle.node.active=!1),this.ndAwardBg&&(this.ndAwardBg.active=!1),this.labAwardPower&&(this.labAwardPower.node.active=!1),this.spAwardPowerIcon&&(this.spAwardPowerIcon.node.active=!1),this.labAwardGold&&(this.labAwardGold.node.active=!1),this.spAwardGoldIcon&&(this.spAwardGoldIcon.node.active=!1),this.btnCollect&&(this.btnCollect.node.active=!1)},e.prototype.doPackUpTableAnim=function(){var t=this;this.hideNodes(),this.packUpPos?(cc.tween(this.ndTable).set({scale:1}).delay(.5).to(.6,{x:this.packUpPos.x,y:this.packUpPos.y,scale:.05}).set({opacity:0}).delay(.1).call(function(){t.openNext()}).start(),this.pPackUpNode&&cc.tween(this.pPackUpNode).delay(.5).set({active:!0}).delay(1).set({active:!1}).start()):this.openNext()},e.prototype.onGetReward=function(){this.doPackUpTableAnim()},e.prototype.onCheckGoldenPassViewOpened=function(t){this._viewOpenState.scriptName==t.scriptName&&(this._viewOpenState.opened=t.ret),this._viewOpenState.opened||this.dispatch(f.GuiEvent.Anim.GET_PACK_UP_TABLE_POS)},n([T({type:cc.Node,tooltip:"\u5e95\u5149"})],e.prototype,"ndLight",void 0),n([T({type:cc.Sprite,tooltip:"\u5149\u8fb9"})],e.prototype,"spLightSide",void 0),n([T({type:cc.Node,tooltip:"\u684c\u5b50\u8282\u70b9"})],e.prototype,"ndTable",void 0),n([T({type:cc.Sprite,tooltip:"\u684c\u5b50"})],e.prototype,"spTable",void 0),n([T({type:cc.Sprite,tooltip:"Scopa"})],e.prototype,"spScopa",void 0),n([T({type:cc.Sprite,tooltip:"\u6807\u9898"})],e.prototype,"spTitle",void 0),n([T({type:cc.Label,tooltip:"\u5b8c\u6210"})],e.prototype,"labTitle",void 0),n([T({type:cc.Node,tooltip:"\u5956\u52b1\u80cc\u666f"})],e.prototype,"ndAwardBg",void 0),n([T({type:cc.Label,tooltip:"You Won"})],e.prototype,"labYouWon",void 0),n([T({type:cc.Label,tooltip:"\u5956\u52b1\u80fd\u91cf\u6570\u91cf"})],e.prototype,"labAwardPower",void 0),n([T({type:cc.Sprite,tooltip:"\u5956\u52b1\u80fd\u91cf\u7684\u56fe\u7247"})],e.prototype,"spAwardPowerIcon",void 0),n([T({type:cc.Label,tooltip:"\u5956\u52b1\u91d1\u5e01\u6570\u91cf"})],e.prototype,"labAwardGold",void 0),n([T({type:cc.Sprite,tooltip:"\u5956\u52b1\u91d1\u5e01\u7684\u56fe\u7247"})],e.prototype,"spAwardGoldIcon",void 0),n([T({type:cc.Button,tooltip:"\u6536\u4e0b"})],e.prototype,"btnCollect",void 0),n([w],e)}(u.CxComponent);i.TableCompleteView=m,cc._RF.pop()},{"../../../script/app/base/ComPopupMgr":void 0,"../../../script/app/const/AudioFile":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0,"../../../script/lib/i18n/i18nHelper":void 0,"../../../script/lib/manager/ResManager":void 0,"./../../../script/app/const/Global":void 0,"./../../../script/app/language/LanguageCfg":void 0,"./../../../script/app/module/tables/TableSkinMgr":void 0,"./../../../script/lib/utils/ComUtils":void 0}],TableGetMoreChipsDlg:[function(t,e,i){"use strict";cc._RF.push(e,"6c5e7XXdJFNepX/tmxm+Xn4","TableGetMoreChipsDlg");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableGetMoreChipsDlg=void 0;var s=t("./../../../script/app/view/ComUI"),r=t("../../../script/app/event/Notify"),p=t("../../../script/app/language/LanguageCfg"),l=t("../../../script/lib/base/PopupView"),c=t("../../../script/lib/utils/ComUtils"),d=t("./../../../script/lib/base/CxComponent"),u=cc._decorator,h=u.ccclass,b=u.property,f=u.requireComponent,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnGo2Play=null,e.labTipsContent=null,e.labGameInfo=null,e.gameId=0,e}return a(e,t),e.prototype.init=function(t){this.gameId=t.gameId,this.labTipsContent&&(this.labTipsContent.string=t.tips||"",s.ComUI.getLabelSize(this.labTipsContent).width<800&&(this.labTipsContent.horizontalAlign=cc.Label.HorizontalAlign.CENTER)),this.labGameInfo&&(this.labGameInfo.string="BET "+(c.ComUtils.formatGoldStr(t.bet)||0))},e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=this.getComponent(l.PopupView);if(e&&e.setTitle(c.ComUtils.makeLang(p.LangKey.table_get_more_chips_title)),this.btnGo2Play)if(this.gameId>0){this.btnGo2Play.node.on("click",this.onBtnGoToPlayClicked,this);var i=this.btnGo2Play.getComponent(cc.Label);i&&(i.string=c.ComUtils.makeLang(p.LangKey.text_goto_play))}else{this.btnGo2Play.node.active=!1;var o=e.getSize();o.height-=220,e.setSize(o),this.node.height=o.height,this.labGameInfo&&(this.labGameInfo.node.parent.active=!1)}},e.prototype.onBtnGoToPlayClicked=function(){this.dispatch(r.Notify.MatchGame.MATCH_GAME_ID,{gameId:this.gameId,bSuggestLowerGame:!1})},n([b({type:cc.Button,tooltip:"\u53bb\u73a9\u6e38\u620f"})],e.prototype,"btnGo2Play",void 0),n([b({type:cc.Label,tooltip:"\u53bb\u73a9\u6e38\u620f"})],e.prototype,"labTipsContent",void 0),n([b({type:cc.Label,tooltip:"\u573a\u6b21\u4fe1\u606f"})],e.prototype,"labGameInfo",void 0),n([h,f(l.PopupView)],e)}(d.CxComponent);i.TableGetMoreChipsDlg=y,cc._RF.pop()},{"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/lib/base/PopupView":void 0,"../../../script/lib/utils/ComUtils":void 0,"./../../../script/app/view/ComUI":void 0,"./../../../script/lib/base/CxComponent":void 0}],TableGetPieceItem:[function(t,e,i){"use strict";cc._RF.push(e,"bf9bcjtriBNQZYxIXD0145X","TableGetPieceItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableGetPieceItem=void 0;var s=t("./../../../script/app/const/Global"),r=t("./../../../script/app/module/tables/TableSkinMgr"),p=t("../../../script/app/view/ComUI"),l=t("../../../script/lib/base/CxComponent"),c=t("../../../script/lib/base/SequenceAnim"),d=t("../../../script/app/event/Notify"),u=t("../../../script/app/const/AudioFile"),h=cc._decorator,b=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spPieceBg=null,e.spGrayBg=null,e.layoutStars=null,e.ndNewTag=null,e.seqenceAnim=null,e.spLight=null,e.labInfo=null,e.tableId=0,e.pieceId=0,e.bNew=!1,e.mChipsInfo=null,e.mbCanClick=!1,e}return a(e,t),e.prototype.init=function(t){this.mChipsInfo=t,this.mbCanClick=!1,t&&(this.tableId=t.dwTableId||0,this.pieceId=t.dwPieceId||0,this.bNew=t.bNew||0),this.clear()},e.prototype.start=function(){this.node.on("click",this.onBtnClicked,this),this.labInfo&&(this.labInfo.node.active=!1),this.spGrayBg&&(this.spGrayBg.node.active=!0),this.spPieceBg&&(this.spPieceBg.node.active=!1)},e.prototype.clear=function(){this.ndNewTag&&(this.ndNewTag.active=!1),this.spLight&&(this.spLight.node.active=!1);for(var t=this.layoutStars.node.children,e=0;e<t.length;e++)t[e].active=!1},e.prototype.setClickFunc=function(t){this.mClickFunc=t},e.prototype.onBtnClicked=function(){this.mClickFunc&&this.mbCanClick&&this.mClickFunc.call()},e.prototype.initStaticView=function(){if(this.spPieceBg){this.spPieceBg.node.active=!0;var t=r.TableSkinMgr.getTableCfgById(this.tableId);t&&p.ComUI.setSprite(this.spPieceBg.node,t.smlbg,s.gAssetBundleName.TABLES_RES)}for(var e=this.layoutStars.node.children,i=0;i<e.length;i++)i<this.mChipsInfo.dwStar?e[i].active=!0:e[i].active=!1;this.ndNewTag&&(this.ndNewTag.active=this.mChipsInfo.bNew),this.spLight&&(this.spLight.node.active=this.mChipsInfo.bNew),this.spGrayBg&&(this.spGrayBg.node.active=!1)},e.prototype.initOther=function(){for(var t=this.layoutStars.node.children,e=0;e<t.length;e++)e<this.mChipsInfo.dwStar?t[e].active=!0:t[e].active=!1;if(this.ndNewTag&&(this.ndNewTag.active=this.mChipsInfo.bNew),this.spLight){this.spLight.node.active=this.mChipsInfo.bNew;var i=this.spLight.getComponentInChildren(cc.Sprite).node;i&&cc.tween(i).repeatForever(cc.tween().by(8,{angle:360})).start()}this.labInfo&&(this.labInfo.node.active=!0,this.labInfo.string=this.tableId+"-"+this.pieceId)},e.prototype.showFront=function(){var t=this;this.dispatch(d.Notify.Base.PLAY_EFFECT,{path:u.AudioFile.Table.RESULT_FANG_PAI}),cc.tween(this.node).set({scale:.5}).to(.13,{scale:1}).delay(.27).to(.13,{scaleX:0,scaleY:1}).call(function(){if(t.spGrayBg&&(t.spGrayBg.node.active=!1),t.spPieceBg){t.spPieceBg.node.active=!0;var e=r.TableSkinMgr.getTableCfgById(t.tableId);e&&p.ComUI.setSprite(t.spPieceBg.node,e.smlbg,s.gAssetBundleName.TABLES_RES),t.scanLight()}}).to(.13,{scaleX:1,scaleY:1}).call(function(){t.initOther(),t.mbCanClick=!0}).start()},e.prototype.scanLight=function(){var t=this;this.seqenceAnim&&(this.seqenceAnim.play=!0,cc.tween(this.node).delay(.5).call(function(){t.seqenceAnim.stop(),t.seqenceAnim.node.active=!1}).start())},n([f({type:cc.Sprite,tooltip:"\u788e\u7247\u80cc\u666f"})],e.prototype,"spPieceBg",void 0),n([f({type:cc.Sprite,tooltip:"\u7070\u8272"})],e.prototype,"spGrayBg",void 0),n([f({type:cc.Layout,tooltip:"\u661f\u661f\u5217\u8868"})],e.prototype,"layoutStars",void 0),n([f({type:cc.Node,tooltip:"\u83b7\u53d6\u5230\u4e4b\u524d\u6ca1\u6709\u83b7\u53d6\u8fc7\u5f97\u6807\u8bb0"})],e.prototype,"ndNewTag",void 0),n([f({type:c.SequenceAnim,tooltip:"\u626b\u5149"})],e.prototype,"seqenceAnim",void 0),n([f({type:cc.Sprite,tooltip:"\u5149\u5708"})],e.prototype,"spLight",void 0),n([f({type:cc.Label,tooltip:"\u788e\u7247\u4fe1\u606f\uff0c\u684c\u5b50ID-\u788e\u7247ID"})],e.prototype,"labInfo",void 0),n([b],e)}(l.CxComponent);i.TableGetPieceItem=y,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0,"../../../script/lib/base/SequenceAnim":void 0,"./../../../script/app/const/Global":void 0,"./../../../script/app/module/tables/TableSkinMgr":void 0}],TableGetPieceList:[function(t,e,i){"use strict";cc._RF.push(e,"412d9xrfNBMHYAZECYacA83","TableGetPieceList");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableGetPieceList=void 0;var s=t("./../../../script/app/language/LanguageCfg"),r=t("./../../../script/lib/utils/ComUtils"),p=t("../../../script/lib/base/CxComponent"),l=t("./TableGetPieceItem"),c=t("../../../script/app/event/Notify"),d=t("../../../script/lib/base/Callback"),u=t("../../../script/app/event/GuiEvent"),h=t("../../../script/app/view/ComUI"),b=cc._decorator,f=b.ccclass,y=b.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfPiece=null,e.svPieceList=null,e.btnGetMoreChips=null,e.labGetMoreChips=null,e.delayLock=!0,e}return a(e,t),e.prototype.listEvent=function(){return new Map([[c.Notify.Tables.RTN_GAME_GET_CHIPS,this.onGetChipsList],[c.Notify.Tables.GUIDE_CLOSE,this.onCloseGuideDialog]])},e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.scheduleOnce(function(){e.dispatch(c.Notify.Tables.REQ_GAME_GET_CHIPS)},.7)},e.prototype.start=function(){this.btnGetMoreChips&&this.btnGetMoreChips.node.on("click",this.onGetMoreChipsClick,this),this.labGetMoreChips&&(this.labGetMoreChips.string=r.ComUtils.getLang(s.LangKey.table_get_table_chips),h.ComUI.getLabelSize(this.labGetMoreChips).width>660&&(this.labGetMoreChips.overflow=cc.Label.Overflow.SHRINK,this.labGetMoreChips.enableWrapText=!1,this.labGetMoreChips.node.width=660))},e.prototype.onGetChipsList=function(t){var e=this;if(this.svPieceList&&t){this.svPieceList.content.destroyAllChildren(),this.svPieceList.scrollToLeft(),this.pieceList=[];var i=t.tabChips,o=i.length;this.tabChips=i,this.chipsInfo=t;var a=0,n=this.svPieceList.content.getComponent(cc.Layout);if(n&&(o<5&&(n.spacingX=40),a=n.spacingX),i){for(var s=function(t){var e=cc.instantiate(r.pfPiece);e.parent=r.svPieceList.content,e.x=a*t+e.width/2;var o=e.getComponent(l.TableGetPieceItem);o.init(i[t]),o.setClickFunc(new d.Callback(r,r.onPieceClickCallback,i[t])),e.opacity=0,r.pieceList.push(o),cc.tween(o.node).delay(.06*t).call(function(){o.node.opacity=255,o.showFront()}).start()},r=this,p=0;p<o;p++)s(p);o>5&&cc.tween(this.svPieceList).delay(1.36).call(function(){cc.isValid(e.svPieceList)&&e.svPieceList.scrollToRight(2)}).delay(2).call(function(){cc.isValid(e.svPieceList)&&e.svPieceList.scrollToLeft(2)}).start()}t.bFirstUnlock?cc.tween(this.node).delay(2).call(function(){e.dispatch(u.GuiEvent.PopMsg.DISPLAY_TABLE_GUIDE)}).start():o>0?this.btnGetMoreChips&&(this.btnGetMoreChips.node.active=!1):this.chipsInfo.strExData&&this.btnGetMoreChips&&(this.btnGetMoreChips.node.active=!0)}},e.prototype.doAutoSeletctNewOne=function(){var t=this.tabChips.filter(function(t){return!0===t.bNew});if(t.length>0){for(var e=t[0],i=0;i<t.length;i++)e.objTable&&t[i].objTable&&e.objTable.dwFinishNum<t[i].objTable.dwFinishNum&&(e=t[i]);this.onPieceClickCallback(e)}},e.prototype.onPieceClickCallback=function(t){var e=t.dwTableId||0;if(this.delayLock){r.ComUtils.delayLimit(this);for(var i=[],o=this.pieceList.filter(function(t){return t.tableId==e}),a=0;a<o.length;a++){var n=o[a];if(n){var s=n.node.convertToWorldSpaceAR(cc.Vec2.ZERO);i.push({wPos:s,pieceId:n.pieceId,bNew:n.bNew})}}o&&o.length>0&&t.objTable&&this.dispatch(u.GuiEvent.PopMsg.DISPLAY_TABLE_PROGRESS,{tableData:t.objTable,bGameResultView:!0,piecePosList:i,resultPosY:this.node.parent.y}),t.objTable||cc.log("onPieceClickCallback objTable is null ")}},e.prototype.onCloseGuideDialog=function(){this.doAutoSeletctNewOne()},e.prototype.onGetMoreChipsClick=function(){this.dispatch(c.Notify.Tables.MORE_CHIPS_DLG,this.chipsInfo)},n([y(cc.Prefab)],e.prototype,"pfPiece",void 0),n([y(cc.ScrollView)],e.prototype,"svPieceList",void 0),n([y(cc.Button)],e.prototype,"btnGetMoreChips",void 0),n([y(cc.Label)],e.prototype,"labGetMoreChips",void 0),n([f],e)}(p.CxComponent);i.TableGetPieceList=_,cc._RF.pop()},{"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/Callback":void 0,"../../../script/lib/base/CxComponent":void 0,"./../../../script/app/language/LanguageCfg":void 0,"./../../../script/lib/utils/ComUtils":void 0,"./TableGetPieceItem":"TableGetPieceItem"}],TableGuideDlg:[function(t,e,i){"use strict";cc._RF.push(e,"b53cdlEea5E5692Z9KN3df3","TableGuideDlg");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableGuideDlg=void 0;var s=t("./../../../script/app/language/LanguageCfg"),r=t("./../../../script/lib/base/CxComponent"),p=t("../../../script/lib/utils/ComUtils"),l=t("../../../script/app/event/Notify"),c=cc._decorator,d=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labText=null,e.labTitle=null,e.ndArrow=null,e.btnSure=null,e.spklFinger=null,e}return a(e,t),e.prototype.start=function(){var t=this;this.labText&&(this.labText.string=p.ComUtils.getLang(s.LangKey.table_guide_content)),this.labTitle&&(this.labTitle.string=p.ComUtils.getLang(s.LangKey.table_guide_title)),this.btnSure&&(this.btnSure.node.on("click",this.onSureClicked,this),this.btnSure.getComponentInChildren(cc.Label).string=p.ComUtils.getLang(s.LangKey.txt_i_see)),this.ndArrow&&cc.tween(this.ndArrow).repeatForever(cc.tween().by(.4,{y:-50}).by(.4,{y:50})).start(),this.spklFinger&&cc.tween(this.spklFinger.node).delay(5).call(function(){t.spklFinger.node.active=!0,t.spklFinger.enabled=!0}).start()},e.prototype.onSureClicked=function(){this.dispatch(l.Notify.Tables.GUIDE_CLOSE),this.close()},n([u(cc.Label)],e.prototype,"labText",void 0),n([u(cc.Label)],e.prototype,"labTitle",void 0),n([u(cc.Node)],e.prototype,"ndArrow",void 0),n([u(cc.Button)],e.prototype,"btnSure",void 0),n([u(sp.Skeleton)],e.prototype,"spklFinger",void 0),n([d],e)}(r.CxComponent);i.TableGuideDlg=h,cc._RF.pop()},{"../../../script/app/event/Notify":void 0,"../../../script/lib/utils/ComUtils":void 0,"./../../../script/app/language/LanguageCfg":void 0,"./../../../script/lib/base/CxComponent":void 0}],TableListCell:[function(t,e,i){"use strict";cc._RF.push(e,"55bda2CKT9KUaXIgqkj1eMS","TableListCell");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableListCell=void 0;var s=t("../../../script/lib/base/CxComponent"),r=t("./TableListItem"),p=cc._decorator,l=p.ccclass,c=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfTableItem=null,e._cellIndex=0,e._actPlayed=!1,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.updateItem=function(t,e){if(this._cellIndex=t,e&&this.pfTableItem)for(var i=0;i<3;++i){var o=this.node.getChildByName(i.toString()),a=e[i];a?(o||(o=cc.instantiate(this.pfTableItem),this.node.addChild(o,0,i.toString())),o.getComponent(r.TableListItem).init(i,a),o.active=!0):o&&(o.active=!1)}this._actPlayed||(this._actPlayed=!0)},n([c({type:cc.Prefab,tooltip:"cell\u7684\u5185\u5bb9"})],e.prototype,"pfTableItem",void 0),n([l],e)}(s.CxComponent);i.TableListCell=d,cc._RF.pop()},{"../../../script/lib/base/CxComponent":void 0,"./TableListItem":"TableListItem"}],TableListItem:[function(t,e,i){"use strict";cc._RF.push(e,"91408AHodxHgLhcGfd3DysL","TableListItem");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableListItem=void 0;var s=t("./../../../script/app/const/Global"),r=t("../../../script/app/event/GuiEvent"),p=t("../../../script/app/model/DataProxy"),l=t("../../../script/app/module/tables/TableSkinMgr"),c=t("../../../script/app/view/ComUI"),d=t("../../../script/lib/base/CxComponent"),u=t("../../../script/app/language/LanguageCfg"),h=t("../../../script/lib/i18n/i18nHelper"),b=t("../../../script/app/event/Notify"),f=cc._decorator,y=f.ccclass,_=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pMainIcon=null,e.pNameLabel=null,e.pProgressBar=null,e.pProgressLabel=null,e.pStarNode=null,e.pFinishLabel=null,e.labTableNum=null,e.ndMask_1=null,e.ndMask_2=null,e.ndMask_3=null,e.labUnlockTips=null,e.spNew=null,e.mActPlayed=!1,e.mIndex=0,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.onDisable=function(){this.playAction()},e.prototype.init=function(t,e){this.mIndex=t,e&&(this.mItemData=e,this.mTableCfg=l.TableSkinMgr.getTableCfgById(this.mItemData.dwTableId),this.initLayer(),this.multiLang())},e.prototype.playAction=function(){this.mActPlayed||(this.node.opacity=0,this.node.scale=.8,cc.tween(this.node).delay(.025*this.mIndex).parallel(cc.tween(this.node).to(.15,{scale:1},{easing:cc.easing.backOut}),cc.tween(this.node).to(.2,{opacity:255},{easing:cc.easing.sineInOut})).start())},e.prototype.listEvent=function(){return new Map([[b.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage]])},e.prototype.initLayer=function(){this.mItemData&&this.mTableCfg&&(this.initMainIcon(),this.initStar(),this.initName(),this.initProgressBar(),this.initFinishLabel(),this.setLockState(this.mItemData.dwPreTableId))},e.prototype.initMainIcon=function(){if(this.pMainIcon){var t="table_icon_"+this.mTableCfg.id;c.ComUI.setSprite(this.pMainIcon.node,t,s.gAssetBundleName.TABLES_RES)}this.labTableNum&&(this.labTableNum.string=""+this.mItemData.dwTableId)},e.prototype.initStar=function(){for(var t=this.mItemData.dwStar,e=1;e<=5;e++){var i=this.pStarNode.getChildByName("star"+e);i&&(i.active=!1,e<=t&&(i.active=!0))}},e.prototype.initName=function(){if(this.pNameLabel){var t=p.DataProxy.getInstance().tablesData.getTableName(this.mItemData.dwTableId);this.pNameLabel.string=t}},e.prototype.initProgressBar=function(){if(this.pProgressBar&&this.pProgressLabel)if(this.mItemData.bFinish)this.pProgressBar.node.active=!1;else{this.pProgressBar.node.active=!0;var t=this.mItemData.dwTotal>0?this.mItemData.dwFinishNum/this.mItemData.dwTotal:0;this.pProgressBar.progress=t,this.pProgressLabel.string=this.mItemData.dwFinishNum+"/"+this.mItemData.dwTotal}},e.prototype.initFinishLabel=function(){this.pFinishLabel&&(this.pFinishLabel.node.active=this.mItemData.bFinish),this.pProgressLabel&&(this.pProgressLabel.node.active=!this.mItemData.bFinish)},e.prototype.onClick=function(){this.mItemData.dwPreTableId>0||this.mItemData&&this.dispatch(r.GuiEvent.PopMsg.DISPLAY_TABLE_PROGRESS,{tableData:this.mItemData})},e.prototype.setLockState=function(t){var e=t>0;this.ndMask_1&&(this.ndMask_1.active=e),this.ndMask_2&&(this.ndMask_2.active=e),this.ndMask_3&&(this.ndMask_3.active=e),this.labUnlockTips&&(this.labUnlockTips.node.active=e,this.labUnlockTips.string=h.i18nHelper.getLanguage([u.LangKey.table_unlock_tips,t]));var i=p.DataProxy.getInstance().otherData.isNewTable(this.mItemData.dwTableId);this.spNew&&(this.spNew.node.active=i)},e.prototype.multiLang=function(){this.pFinishLabel&&(this.pFinishLabel.language=h.i18nHelper.getLanguage(u.LangKey.table_complete))},e.prototype.onChangeLanguage=function(){this.multiLang()},n([_(cc.Sprite)],e.prototype,"pMainIcon",void 0),n([_(cc.Label)],e.prototype,"pNameLabel",void 0),n([_(cc.ProgressBar)],e.prototype,"pProgressBar",void 0),n([_(cc.Label)],e.prototype,"pProgressLabel",void 0),n([_(cc.Node)],e.prototype,"pStarNode",void 0),n([_(cc.Label)],e.prototype,"pFinishLabel",void 0),n([_({type:cc.Label,tooltip:"\u684c\u5b50\u7f16\u53f7"})],e.prototype,"labTableNum",void 0),n([_({type:cc.Node,tooltip:"\u684c\u5b50\u906e\u7f69"})],e.prototype,"ndMask_1",void 0),n([_({type:cc.Node,tooltip:"\u98d8\u5e26\u906e\u7f69"})],e.prototype,"ndMask_2",void 0),n([_({type:cc.Node,tooltip:"\u8fdb\u5ea6\u6761\u906e\u7f69"})],e.prototype,"ndMask_3",void 0),n([_({type:cc.Label,tooltip:"\u9700\u8981\u89e3\u9501\u54ea\u5f20\u684c\u5b50"})],e.prototype,"labUnlockTips",void 0),n([_({type:cc.Sprite,tooltip:"\u662f\u5426\u65b0\u684c\u5b50"})],e.prototype,"spNew",void 0),n([y],e)}(d.CxComponent);i.TableListItem=v,cc._RF.pop()},{"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/module/tables/TableSkinMgr":void 0,"../../../script/app/view/ComUI":void 0,"../../../script/lib/base/CxComponent":void 0,"../../../script/lib/i18n/i18nHelper":void 0,"./../../../script/app/const/Global":void 0}],TableListLayer:[function(t,e,i){"use strict";cc._RF.push(e,"db7d0xeLv5H6Ikb86WwkJy5","TableListLayer");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableListLayer=void 0;var s=t("../../../script/app/base/component/ComListView"),r=t("../../../script/app/const/AudioFile"),p=t("../../../script/app/event/Notify"),l=t("../../../script/app/language/LanguageCfg"),c=t("../../../script/app/model/DataProxy"),d=t("../../../script/app/module/buryPoint/BuryPoint"),u=t("../../../script/app/module/buryPoint/BuryPointUtils"),h=t("../../../script/lib/base/CxComponent"),b=t("../../../script/lib/utils/ComUtils"),f=t("../../../script/lib/utils/ScreenAdapter"),y=t("./TableListCell"),_=cc._decorator,v=_.ccclass,w=_.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.pfListCell=null,e.pListNode=null,e.pTitleNode=null,e.pTitleLabel=null,e.pBtnNode=null,e.pBtnLabel=null,e.pTipLabel=null,e.mListData=null,e}return a(e,t),e.prototype.listEvent=function(){return new Map([[p.Notify.Tables.RTN_TABLES_LIST,this.onUpdateTables],[p.Notify.Base.CHANGE_LANGUAGE,this.onChangeLanguage]])},e.prototype.start=function(){cc.log("TableListLayer: start() this.mListData=",this.mListData),this.initNode(),this.initListView(),this.initLabel()},e.prototype.onEnable=function(){this.dispatch(p.Notify.Other.REQ_READ_TABLES_NEW_ST),this.mListData=c.DataProxy.getInstance().tablesData.tableList,null==this.mListData||0==this.mListData.length?this.dispatch(p.Notify.Tables.REQ_TABLES_LIST):this.initListView()},e.prototype.onDisable=function(){this.dispatch(p.Notify.Other.REQ_TABLES_NEW_ST)},e.prototype.initNode=function(){this.pListNode&&f.ScreenAdapter.paddingTop(this.pListNode),this.pTitleNode&&f.ScreenAdapter.paddingTop(this.pTitleNode),this.pBtnNode&&f.ScreenAdapter.paddingBottom(this.pBtnNode.node),this.pTipLabel&&f.ScreenAdapter.paddingBottom(this.pTipLabel.node)},e.prototype.initLabel=function(){this.pTitleLabel&&(this.pTitleLabel.language=b.ComUtils.makeLang(l.LangKey.table_list_title)),this.pTipLabel&&(this.pTipLabel.language=b.ComUtils.makeLang(l.LangKey.table_list_info)),this.pBtnLabel&&(this.pBtnLabel.language=b.ComUtils.makeLang(l.LangKey.text_play_now))},e.prototype.initListView=function(){for(var t=[],e=0;e<this.mListData.length;++e){var i=this.mListData[e],o=Math.floor(e/3);t[o]||(t[o]=[]),t[o].push(i)}var a={scrollView:this.scrollView,content:this.scrollView.content,itemPrefab:this.pfListCell,itemClass:y.TableListCell,dataList:t,dataEx:null,space:0,top:0,bottom:0,createInterval:.075,scrollToIndex:0},n=this.node.getComponent(s.ComListView);null==n&&(n=this.node.addComponent(s.ComListView)),n.initParams(a),n.initScrollView()},e.prototype.update=function(){},e.prototype.onUpdateTables=function(t){t&&(this.mListData=t,this.initListView())},e.prototype.onChangeLanguage=function(){this.initListView(),this.initLabel()},e.prototype.onClickQuickGame=function(){this.dispatch(p.Notify.Base.PLAY_EFFECT,{path:r.AudioFile.Com.GO}),this.dispatch(p.Notify.MatchGame.MATCH_QUICK_START),u.BuryPointUtils.send(d.BuryPoint.Operation.Lobby.QuickStart)},n([w({type:cc.ScrollView,tooltip:"\u6eda\u52a8\u5217\u8868"})],e.prototype,"scrollView",void 0),n([w({type:cc.Prefab,tooltip:"\u5217\u8868\u5b50\u9879\u9884\u7f6e"})],e.prototype,"pfListCell",void 0),n([w({type:cc.Node,tooltip:"\u5217\u8868\u6839\u8282\u70b9"})],e.prototype,"pListNode",void 0),n([w({type:cc.Node,tooltip:"\u6807\u9898\u8282\u70b9"})],e.prototype,"pTitleNode",void 0),n([w({type:cc.Label,tooltip:"\u6807\u9898Label"})],e.prototype,"pTitleLabel",void 0),n([w({type:cc.Button,tooltip:"playnow\u6309\u94ae"})],e.prototype,"pBtnNode",void 0),n([w({type:cc.Label,tooltip:"\u6309\u94ae\u5b57"})],e.prototype,"pBtnLabel",void 0),n([w({type:cc.Label,tooltip:"\u63d0\u793a\u5b57"})],e.prototype,"pTipLabel",void 0),n([v],e)}(h.CxComponent);i.TableListLayer=T,cc._RF.pop()},{"../../../script/app/base/component/ComListView":void 0,"../../../script/app/const/AudioFile":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/app/module/buryPoint/BuryPoint":void 0,"../../../script/app/module/buryPoint/BuryPointUtils":void 0,"../../../script/lib/base/CxComponent":void 0,"../../../script/lib/utils/ComUtils":void 0,"../../../script/lib/utils/ScreenAdapter":void 0,"./TableListCell":"TableListCell"}],TableMainView:[function(t,e,i){"use strict";cc._RF.push(e,"939c3lr3B9LIK5iBww/gdQp","TableMainView");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableMainView=void 0;var s=t("../../../script/lib/base/CxComponent"),r=cc._decorator,p=r.ccclass,l=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.svTables=null,e.spTitleBg=null,e.labTitle=null,e.labDesc=null,e}return a(e,t),n([l({type:cc.ScrollView,tooltip:"\u684c\u5b50\u5217\u8868"})],e.prototype,"svTables",void 0),n([l({type:cc.ScrollView,tooltip:"\u684c\u5b50\u6807\u9898\u80cc\u666f"})],e.prototype,"spTitleBg",void 0),n([l({type:cc.ScrollView,tooltip:"\u684c\u5b50\u6807\u9898"})],e.prototype,"labTitle",void 0),n([l({type:cc.ScrollView,tooltip:"\u63d0\u793a\u53bb\u73a9\u6e38\u620f"})],e.prototype,"labDesc",void 0),n([p],e)}(s.CxComponent);i.TableMainView=c,cc._RF.pop()},{"../../../script/lib/base/CxComponent":void 0}],TablePiece:[function(t,e,i){"use strict";cc._RF.push(e,"91e3bxPT7pE3I5azcEp+g4M","TablePiece");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TablePiece=void 0;var s=t("./../../../script/app/language/LanguageCfg"),r=t("../../../script/lib/base/CxComponent"),p=t("../../../script/lib/i18n/i18nHelper"),l=cc._decorator,c=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spPic=null,e.spStarBg=null,e.layoutStars=null,e.labNum=null,e.ndLockState=null,e.labPreTableId=null,e.iNum=0,e}return a(e,t),e.prototype.init=function(t){this.iPeiceId=t.dwPieceId||0,this.iNum=t.dwNum,this.setPeiceNum(t.dwNum),this.setPeiceStar(t.dwStar),this.setBgState(t.dwNum),this.setLockState(t.dwPreTableId)},e.prototype.setPeiceNum=function(t){this.labNum&&(this.iNum=t,t--,this.labNum.node.parent.active=t>=1,t>=1&&(this.labNum.string="+"+t))},e.prototype.setPeiceStar=function(t){if(this.layoutStars){for(var e=this.layoutStars.node.children,i=0;i<e.length;i++)e[i].active=i<t;this.layoutStars.updateLayout()}},e.prototype.clearStar=function(){this.layoutStars&&this.layoutStars.node.children.forEach(function(t){t.active=!1})},e.prototype.setBgState=function(t){this.spPic&&(this.spPic.node.active=t<=0)},e.prototype.setLockState=function(t){this.ndLockState&&(this.ndLockState.active=t>0),this.labPreTableId&&(this.labPreTableId.node.active=t>0,this.labPreTableId.string=p.i18nHelper.getLanguage([s.LangKey.table_unlock_tips,t]))},e.prototype.updateView=function(t){this.setPeiceNum(t.dwNum),this.setPeiceStar(t.dwStar),this.setBgState(t.dwNum),this.setLockState(t.dwPreTableId)},e.prototype.clear=function(){this.clearStar(),this.setPeiceNum(0),this.setBgState(0),this.setLockState(0)},e.prototype.setFinish=function(){this.clearStar(),this.setPeiceNum(0),this.spStarBg&&(this.spStarBg.node.active=!1),this.setBgState(1),this.setLockState(0)},e.NAME="TablePiece",n([d({type:cc.Sprite,tooltip:"\u788e\u7247\u9ed8\u8ba4\u7684\u56fe"})],e.prototype,"spPic",void 0),n([d({type:cc.Sprite,tooltip:"\u7b49\u7ea7\u7684\u80cc\u666f"})],e.prototype,"spStarBg",void 0),n([d({type:cc.Layout,tooltip:"\u661f\u661flayout"})],e.prototype,"layoutStars",void 0),n([d({type:cc.Label,tooltip:"\u6570\u91cf"})],e.prototype,"labNum",void 0),n([d({type:cc.Node,tooltip:"\u672a\u89e3\u9501\u72b6\u6001"})],e.prototype,"ndLockState",void 0),n([d({type:cc.Label,tooltip:"\u9700\u8981\u89e3\u9501\u54ea\u5f20\u684c\u5b50"})],e.prototype,"labPreTableId",void 0),n([c],e)}(r.CxComponent);i.TablePiece=u,cc._RF.pop()},{"../../../script/lib/base/CxComponent":void 0,"../../../script/lib/i18n/i18nHelper":void 0,"./../../../script/app/language/LanguageCfg":void 0}],TableProgressView:[function(t,e,i){"use strict";cc._RF.push(e,"1c6330hK/xCLq6sagOvhBjb","TableProgressView");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TableProgressView=void 0;var s=t("./../../../script/lib/base/ComPopup"),r=t("./../../../script/app/module/tables/TableSkinMgr"),p=t("./../../../script/app/view/ComUI"),l=t("./../../../script/lib/base/CxComponent"),c=t("./../../../script/app/language/LanguageCfg"),d=t("./../../../script/app/const/Global"),u=t("./../../../script/lib/utils/ComUtils"),h=t("./TablePiece"),b=t("../../../script/app/event/Notify"),f=t("../../../script/app/model/DataProxy"),y=t("../../../script/lib/manager/ResManager"),_=t("../../../script/app/const/AudioFile"),v=cc._decorator,w=v.ccclass,T=v.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spTable=null,e.spScopa=null,e.btnClose=null,e.ndContainer=null,e.ndSpiltLines=null,e.labTitle=null,e.titleStar=null,e.labAwardTips=null,e.labTipsLeft=null,e.pb=null,e.btnUse=null,e.labGotoPlayTips=null,e.labUsing=null,e.btnGotoPlay=null,e.pfFlyPiece=null,e.layoutLight=null,e.labTableNum=null,e._bGameResultView=!1,e._pieceDataList=[],e}return a(e,t),e.prototype.init=function(t){this._usingTableId=t.usingTableId||f.DataProxy.getInstance().userData.useTableId,this._bGameResultView=t.bGameResultView||!1,this._pieceDataList=t.piecePosList||[],this._pieceList=[],this._tableData=u.ComUtils.clone(t.tableData)||{},this._resultPosY=t.resultPosY||0;var e=this.getComponent(s.ComPopup);e&&(e.needMask=!this._bGameResultView,e.swallowTouch=!this._bGameResultView)},e.prototype.start=function(){this._bGameResultView&&(this.node.y=this._resultPosY,this.filterGetNewPiece(),this.doEnterAnim()),this.initView(),this._bGameResultView&&this.playFlyAnim(this._pieceDataList)},e.prototype.doEnterAnim=function(){cc.tween(this.node).set({scale:.9,opacity:255}).to(.1,{scale:1.03,opacity:255}).to(.23,{scale:1,opacity:255}).start()},e.prototype.filterGetNewPiece=function(){if(this._pieceDataList&&this._tableData.pieceList){for(var t=0,e=this._tableData.pieceList,i=0;i<this._pieceDataList.length;i++){var o=this._pieceDataList[i];o.bNew&&t++;for(var a=0;a<e.length;a++)if(e[a].dwPieceId===o.pieceId&&e[a].dwNum>0){e[a].dwNum--;break}}this._tableData.dwFinishNum-=t,this._tableData.dwFinishNum<0&&(this._tableData.dwFinishNum=0)}},e.prototype.initView=function(){var t=this;if(this.initTitle(),this.initButton(),this.initProcess(),this.initTitleTips(),this._tableData){this.labTableNum&&(this.labTableNum.string=""+this._tableData.dwTableId);var e=r.TableSkinMgr.getTableCfgById(this._tableData.dwTableId);if(this.spTable&&e&&y.default.getInstance().loadImg(e.bg,d.gAssetBundleName.TABLES_RES,function(e,i){i&&cc.isValid(t.spTable)&&(t.spTable.spriteFrame=i)}),this.spScopa&&(e?y.default.getInstance().loadAtlas(e.skin,d.gAssetBundleName.TABLES_RES,function(e,i){i&&cc.isValid(t.spTable)&&(t.spScopa.spriteFrame=i.getSpriteFrame("table_scopa"))}):this.spScopa.node.active=!1),e&&"def"===e.id)this.ndSpiltLines&&(this.ndSpiltLines.active=!1),this.ndContainer&&(this.ndContainer.active=!1);else for(var i=this.ndContainer.children,o=0;o<i.length;o++){var a=i[o].getComponent(h.TablePiece);if(a){this._pieceList.push(a);var n=void 0;this._tableData.pieceList&&(n=this._tableData.pieceList[o]),n?a.init(n):a.clearStar(),a.iPeiceId=o+1}}}},e.prototype.initTitle=function(){if(this.labTitle){var t=f.DataProxy.getInstance().tablesData.getTableName(this._tableData.dwTableId);this.labTitle.string=t}if(this.titleStar)for(var e=this._tableData.dwStar,i=this.titleStar.children,o=0;o<i.length;o++)i[o].active=o<e},e.prototype.initButton=function(){var t=!this._bGameResultView&&this._usingTableId!==this._tableData.dwTableId;this.btnUse&&(this.btnUse.node.on("click",this.onUseBtnClicked,this),this.btnUse.node.active=this._tableData.bFinish&&t),this.labUsing&&(this.labUsing.string=u.ComUtils.getLang(c.LangKey.text_table_using),this.labUsing.node.active=this._usingTableId===this._tableData.dwTableId),this.btnClose&&this.btnClose.node.on("click",this.onCloseBtnClicked,this),this.btnGotoPlay&&(this.btnGotoPlay.node.on("click",this.onGotoPlayGame,this),this.btnGotoPlay.node.active=!this._bGameResultView,this.btnGotoPlay.getComponentInChildren(cc.Label).string=u.ComUtils.getLang(c.LangKey.text_play_now)),this.labGotoPlayTips&&(this.labGotoPlayTips.node.active=t,this.labGotoPlayTips.string=u.ComUtils.getLang(c.LangKey.table_list_info))},e.prototype.initProcess=function(){this.pb&&(this.pb.node.active=!this._tableData.bFinish,this.pb.progress=this._tableData.dwFinishNum/this._tableData.dwTotal,this.pb.getComponentInChildren(cc.Label).string=this._tableData.dwFinishNum+" / "+this._tableData.dwTotal)},e.prototype.initTitleTips=function(){if(this._tableData.bFinish)this.labTipsLeft&&(this.labTipsLeft.node.active=!1),this.labAwardTips&&(this.labAwardTips.string=u.ComUtils.getLang(c.LangKey.text_table_complete));else if(this.labTipsLeft&&(this.labTipsLeft.node.active=!0),this.labAwardTips&&this._tableData.rewardList){this.labAwardTips.string="";var t="";this._tableData.rewardList.forEach(function(e){var i=u.ComUtils.formatGoldStr(e.dwNum);e.dwType===d.gShopHBType.POWER?t.length>0?t=t+" and "+i+" tokens":t+=i+" tokens":e.dwType===d.gShopHBType.GOLD&&(t.length>0?t=t+" and "+i+" coins":t+=i+" coins")}),this.labAwardTips.string=t}},e.prototype.playFlyAnim=function(t){for(var e=this,i=r.TableSkinMgr.getTableCfgById(this._tableData.dwTableId).smlbg,o=d.gAssetBundleName.TABLES_RES,a=this.layoutLight.children,n=function(n){var r=t[n],l=s._pieceList.find(function(t){return t.iPeiceId===r.pieceId});if(!l||!r)return"continue";var c=cc.instantiate(s.pfFlyPiece);c.parent=s.node,c.active=!1;var d=c.getChildByName("whiteBg"),u=c.getChildByName("icon");d.active=!1,u.active=!1,p.ComUI.setSprite(u,i,o),cc.tween(u).delay(.16*n+.33).set({scale:.7,active:!0}).to(.4,{scaleX:1.05,scaleY:1.25}).to(.17,{opacity:0}).start(),cc.tween(d).delay(.16*n+.33).set({scaleX:.77,scaleY:.75,active:!0}).to(.4,{scaleX:1.15,scaleY:1.35}).removeSelf().start();var h=s.node.convertToNodeSpaceAR(r.wPos),f=s.node.convertToNodeSpace(l.node.convertToWorldSpaceAR(cc.Vec2.ZERO));cc.tween(c).set({x:h.x,y:h.y}).delay(.16*n+.33).set({active:!0}).call(function(){e.dispatch(b.Notify.Base.PLAY_EFFECT,{path:_.AudioFile.Table.PIECE_FLY})}).to(.4,{x:f.x,y:f.y}).start(),cc.tween(l.node).delay(.73+.16*n).call(function(){var t=a[l.iPeiceId-1];t&&(t.active=!0),l.setPeiceNum(l.iNum+1),l.setBgState(l.iNum),r.bNew&&(e._tableData.dwFinishNum++,e.setProceeState())}).start()},s=this,l=0;l<t.length;l++)n(l)},e.prototype.setProceeState=function(){this.initProcess(),this._tableData.dwFinishNum>=this._tableData.dwTotal&&this.initTitleTips()},e.prototype.onCloseBtnClicked=function(){this.dispatch(b.Notify.Base.PLAY_EFFECT,{path:_.AudioFile.Com.BACK}),this.close()},e.prototype.onUseBtnClicked=function(){this.dispatch(b.Notify.Tables.USE_TABLE,this._tableData.dwTableId),this.btnUse&&(this.btnUse.node.active=!1),this.labUsing&&(this.labUsing.node.active=!0)},e.prototype.onGotoPlayGame=function(){this.dispatch(b.Notify.Base.PLAY_EFFECT,{path:_.AudioFile.Com.GO}),this.dispatch(b.Notify.MatchGame.MATCH_QUICK_START)},n([T({type:cc.Sprite,tooltip:"\u684c\u5b50\u80cc\u666f"})],e.prototype,"spTable",void 0),n([T({type:cc.Sprite,tooltip:"\u684c\u5b50scopa"})],e.prototype,"spScopa",void 0),n([T({type:cc.Button,tooltip:"\u4f7f\u7528\u6309\u94ae"})],e.prototype,"btnClose",void 0),n([T({type:cc.Node,tooltip:"\u5bb9\u5668\u8282\u70b9"})],e.prototype,"ndContainer",void 0),n([T({type:cc.Node,tooltip:"\u767d\u8272\u5206\u5272\u7ebf"})],e.prototype,"ndSpiltLines",void 0),n([T({type:cc.Label,tooltip:"\u6807\u9898"})],e.prototype,"labTitle",void 0),n([T({type:cc.Node,tooltip:"\u6807\u9898\u7684\u661f\u661f"})],e.prototype,"titleStar",void 0),n([T({type:cc.Label,tooltip:"\u5956\u52b1\u63d0\u793a"})],e.prototype,"labAwardTips",void 0),n([T({type:cc.Label,tooltip:"\u767d\u8272\u7684"})],e.prototype,"labTipsLeft",void 0),n([T({type:cc.ProgressBar,tooltip:"\u5b8c\u6210\u8fdb\u5ea6"})],e.prototype,"pb",void 0),n([T({type:cc.Button,tooltip:"\u4f7f\u7528\u6309\u94ae"})],e.prototype,"btnUse",void 0),n([T({type:cc.Label,tooltip:"\u63d0\u793a"})],e.prototype,"labGotoPlayTips",void 0),n([T({type:cc.Label,tooltip:"\u6b63\u5728\u4f7f\u7528"})],e.prototype,"labUsing",void 0),n([T({type:cc.Button,tooltip:"\u53bb\u73a9\u6e38\u620f"})],e.prototype,"btnGotoPlay",void 0),n([T({type:cc.Node,tooltip:"\u98de\u8fc7\u53bb\u7684\u788e\u7247"})],e.prototype,"pfFlyPiece",void 0),n([T({type:cc.Node,tooltip:"\u788e\u7247\u7684\u5149\u6548"})],e.prototype,"layoutLight",void 0),n([T({type:cc.Label,tooltip:"\u684c\u5b50\u7f16\u53f7"})],e.prototype,"labTableNum",void 0),n([w],e)}(l.CxComponent);i.TableProgressView=m,cc._RF.pop()},{"../../../script/app/const/AudioFile":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/manager/ResManager":void 0,"./../../../script/app/const/Global":void 0,"./../../../script/app/language/LanguageCfg":void 0,"./../../../script/app/module/tables/TableSkinMgr":void 0,"./../../../script/app/view/ComUI":void 0,"./../../../script/lib/base/ComPopup":void 0,"./../../../script/lib/base/CxComponent":void 0,"./../../../script/lib/utils/ComUtils":void 0,"./TablePiece":"TablePiece"}],TableUIConfig:[function(t,e,i){"use strict";cc._RF.push(e,"00ce21ZDDdH6IwrmptUAc2z","TableUIConfig");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.TablesResConfig=i.TableUIConfig=void 0;var n=t("../../../script/app/config/ResConfig"),s=t("../../../script/app/const/Global"),r=t("../../../script/lib/manager/ResManager");i.TableUIConfig={prefab:{TableListLayer:new n.PrefabItem("TableListLayer","prefabs/TableListLayer",0,0)},popup:{TableProgressView:new n.PrefabItem("TableProgressView","prefabs/TableProgressView",s.gLayerLevel.Popup,0),TableCompleteView:new n.PrefabItem("TableCompleteView","prefabs/TableCompleteView",s.gLayerLevel.Popup,0),TableBoxLayer:new n.PrefabItem("TableBoxLayer","prefabs/TableBoxLayer",s.gLayerLevel.Popup,0),TableBoxInfo:new n.PrefabItem("TableBoxInfo","prefabs/TableBoxInfo",s.gLayerLevel.Popup,0),TableBoxRewardLayer:new n.PrefabItem("TableBoxRewardLayer","prefabs/TableBoxRewardLayer",s.gLayerLevel.Popup,1),TableGetPieceList:new n.PrefabItem("TableGetPieceList","prefabs/TableGetPieceList",s.gLayerLevel.None,0),TableGuideDlg:new n.PrefabItem("TableGuideDlg","prefabs/TableGuideDlg",s.gLayerLevel.Popup,0),TableGetMoreChipsDlg:new n.PrefabItem("TableGetMoreChipsDlg","prefabs/TableGetMoreChipsDlg",s.gLayerLevel.Popup,0)},altas:["altas/TableList"]};var p=function(t){function e(){var e=t.call(this)||this;return e.name=s.gAssetBundleName.TABLES_RES,e.tips="Tables",e.dependency=[],e}return a(e,t),e.prototype.getRes=function(){return i.TableUIConfig},e}(r.BundleConfig);i.TablesResConfig=p,r.default.getInstance().addBundleCfg(new p),cc._RF.pop()},{"../../../script/app/config/ResConfig":void 0,"../../../script/app/const/Global":void 0,"../../../script/lib/manager/ResManager":void 0}],TablesHandler:[function(t,e,i){"use strict";cc._RF.push(e,"cbdf2EnK65C+ps2HXRla7Fh","TablesHandler");var o,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.TablesHandler=void 0;var n=t("../../../script/app/base/handler/ProxyHandler"),s=t("../../../script/lib/utils/ComUtils"),r=t("../../../script/lib/utils/Logger"),p=t("../../../script/plugin/pb/protofile/GlobalMsgDef"),l=t("../model/CMD_TableMsg"),c=t("../../../script/app/event/Notify"),d=t("../../../script/app/model/DataProxy"),u=t("../../../script/app/event/GuiEvent"),h=t("../../../script/app/base/handler/HandlerMgr"),b=t("./../../../script/app/const/Global"),f=t("./../../../script/app/module/tables/TableSkinMgr"),y=t("./../../../script/app/model/LocalDataProxy"),_=t("../../../script/app/language/LanguageCfg"),v=t("../../../script/lib/base/PopUpLogic"),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SERVER_ID=170,e.isPop=!1,e}return a(e,t),e.prototype.getName=function(){return"TablesHandler"},e.prototype.protocolConfig=function(){return[{protocol:l.MSG_SC_ResponseTableList,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_TABLE_TABLE_LIST,cb:this.onRtnTableList},{protocol:l.MSG_SC_ResponseGameGetChips,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_GAME_GET_CHIPS,cb:this.onRtnGameGetChips},{protocol:l.MSG_SC_ResponseRedpoint,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_REDPOINT,cb:this.onRtnTableRedPoint},{protocol:l.MSG_SC_ResponseTableFinishReward,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_TABLE_FINISH_REWARD,cb:this.onRtnTableFinishReward},{protocol:l.MSG_SC_ResponseUseTable,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_USE_TABLE,cb:this.onRtnUseTable},{protocol:l.MSG_SC_ResponseRecycle,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_RECYCLE,cb:this.onRtnTableRecycle},{protocol:l.MSG_SC_ResponseUnLock,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_UNLOCK,cb:this.onRtnBoxUnLock},{protocol:l.MSG_SC_ResponseUnLockCD,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_UNLOCKCD,cb:this.onRtnBoxUnLockCD},{protocol:l.MSG_SC_ResponseTableMulitiCfg,subid:l.TABLE_SUB_MSG.MSG_CS_RESPONSE_TABLE_MULTI_CFG,cb:this.onRtnTableMultiCfg},{protocol:l.MSG_SC_ResponseTableNotFinishList,subid:l.TABLE_SUB_MSG.MSG_SC_RESPONSE_TABLE_NOT_FINISH_LIST,cb:this.onRtnNotFinishList}]},e.prototype.initEvent=function(){t.prototype.initEvent.call(this),this.addEvent(c.Notify.Tables.REQ_TABLES_LIST,this.sendTablesList),this.addEvent(c.Notify.Tables.REQ_GAME_GET_CHIPS,this.sendGameGetChips),this.addEvent(c.Notify.Tables.REQ_TABLE_RED_DOT,this.sendTableRedPoint),this.addEvent(c.Notify.Tables.REQ_TABLE_FINISH_REWARD,this.sendTableFinishReward),this.addEvent(c.Notify.Tables.REQ_TABLE_RECYCLE,this.sendTableRecycle),this.addEvent(c.Notify.Tables.REQ_TABLE_BOX_UNLOCK,this.sendBoxUnLock),this.addEvent(c.Notify.Tables.REQ_TABLE_BOX_UNLOCK_CD,this.sendBoxUnLockCD),this.addEvent(c.Notify.Tables.REQ_TABLES_MULTI_CFG,this.sendTableMultiCfg),this.addEvent(c.Notify.Tables.REQ_NOT_GET_AWARD,this.sendNotGetRewardMsg),this.addEvent(c.Notify.Tables.USE_TABLE,this.onUseTable),this.addEvent(c.Notify.Tables.MORE_CHIPS_DLG,this.onGuideGetMoreTableChips)},e.prototype.getMainID=function(){return p.MAIN_MSG_ID.MAIN_MSG_TABLE_SERVER_ID},e.prototype.getHeader=function(t,e){var i=t,o=void 0===e?i:e,a=new p.Msg_OtherServerHead;return a.dwGameID=i,a.dwGameTypeID=o,a.strUUID=this.userData.sessionId,a},e.prototype.sendTablesList=function(){cc.log("tables: sendTablesList()"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_SHOW_TABLE_LIST,this.getHeader(this.SERVER_ID))},e.prototype.parseTableReward=function(t){var e=new Array;return t&&t.forEach(function(t){var i={};if(i.dwNum=t.dwNum,i.dwType=t.dwType,i.bNew=t.bNew,i.dwMaxNum=0,t.strExData){var o=s.ComUtils.u8ToUTF8Str(t.strExData);if(!s.ComUtils.isTextEmpty(o)){var a=JSON.parse(o);a&&(i.dwMaxNum=a.maxnum||0)}}e.push(i)}),e},e.prototype.parseTableItem=function(t){var e=null;if(t){(e={}).dwTableId=t.dwTableId,e.dwStar=t.dwStar,e.dwTotal=t.dwTotal,e.dwFinishNum=t.dwFinishNum,e.bFinish=t.bFinish,e.dwPreTableId=t.dwPreTableId;var i=new Array;t.tabPiece&&t.tabPiece.forEach(function(t){var e={};e.dwPieceId=t.dwPieceId,e.dwStar=t.dwStar,e.dwNum=t.dwNum,e.dwPreTableId=t.dwPreTableId,i.push(e)}),e.pieceList=i,e.rewardList=this.parseTableReward(t.reward)}return e},e.prototype.parseChipArray=function(t){var e=this,i=Array();return t&&t.forEach(function(t){var o={};o.dwPieceId=t.dwPieceId,o.dwStar=t.dwStar,o.bNew=t.bNew,o.dwTableId=t.dwTableId,o.objTable=e.parseTableItem(t.objTable),i.push(o)}),i},e.prototype.onRtnTableList=function(t){var e=this;cc.log("tables: onRtnTableList()");var i=t.data;if(i.tabTable){var o=new Array;i.tabTable.forEach(function(t){var i=e.parseTableItem(t);i&&o.push(i)}),r.Logger.info("tables: tablelist =",o),d.DataProxy.getInstance().tablesData.tableList=o,this.dispatch(c.Notify.Tables.RTN_TABLES_LIST,o)}},e.prototype.sendGameGetChips=function(){r.Logger.info("tables: \u8bf7\u6c42\u788e\u7247\u5217\u8868 ======>"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_REQ_GAME_GET_CHIPS,this.getHeader(this.SERVER_ID))},e.prototype.onRtnGameGetChips=function(t){var e=t.data,i={};i.bGet=e.bGet,i.bFirstUnlock=e.bFirstUnlock||!1;var o=s.ComUtils.u8ToUTF8Str(e.strExData);if(o&&(i.strExData=JSON.parse(o)),e.tabChips){var a=this.parseChipArray(e.tabChips);i.tabChips=a}this.dispatch(c.Notify.Tables.RTN_GAME_GET_CHIPS,i)},e.prototype.sendTableFinishReward=function(t){r.Logger.info("tables: \u8bf7\u6c42\u684c\u5b50\u5b8c\u6210\u5956\u52b1 ======> dwTableId="+t);var e=new l.MSG_CS_GetTableFinishReward;e.dwTableId=t||0,this.sendRequest(e,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_GET_TABLE_FINISH_REWARD,this.getHeader(this.SERVER_ID))},e.prototype.onRtnTableFinishReward=function(t){var e=this,i=t.data,o=b.gSceneType.Lobby;this.gameData.enterGameId>0&&this.gameData.enterSceneInfo&&(o=this.gameData.enterSceneInfo.fromScene),this.dispatch(c.Notify.Tables.RTN_TABLE_FINISH_REWARD),0===i.dwError?(this.sendTablesList(),i.reward.length>0&&i.reward.forEach(function(t){var i=t.dwType;i===b.gShopHBType.GOLD?e.dispatch(u.GuiEvent.Anim.COM_AWARD_ANIM,{awardNum:t.dwNum,scene:o}):i===b.gShopHBType.POWER&&e.dispatch(u.GuiEvent.Anim.COM_POWER_ANIM,{awardNum:t.dwNum,scene:o})})):r.Logger.warn("tables: \u8fd4\u56de\u9886\u53d6\u684c\u5b50\u5b8c\u6210\u5956\u52b1 dwError("+i.dwError+")")},e.prototype.sendTableRedPoint=function(){r.Logger.info("tables: \u8bf7\u6c42\u684c\u5b50\u7ea2\u70b9 ======>"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_SHOWT_REDPOINT,this.getHeader(this.SERVER_ID))},e.prototype.onRtnTableRedPoint=function(t){var e=t.data;d.DataProxy.getInstance().tablesData.redPoint=e.dwRedPointNum,this.dispatch(c.Notify.Tables.RTN_TABLE_RED_DOT,{redPoint:e.dwRedPointNum})},e.prototype.sendTableRecycle=function(t){r.Logger.info("tables: \u8bf7\u6c42\u684c\u5b50\u56de\u6536 ======>"),t&&(this.isPop=t.isPop||!1),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_SHOWT_RECYCLE,this.getHeader(this.SERVER_ID))},e.prototype.onRtnTableRecycle=function(t){var e=t.data,i={};i.bCanOpen=e.bCanOpen,i.dwStar=e.dwStar,i.dwNeedStar=e.dwNeedStar,i.dwTime=e.dwTime,i.dwGold=e.dwGold,i.rewardList=this.parseTableReward(e.reward),i.dwStartTime=Math.floor((new Date).getTime()/1e3),i.isPop=this.isPop,this.isPop=!1,this.dispatch(c.Notify.Tables.RTN_TABLE_RECYCLE,i)},e.prototype.sendBoxUnLock=function(){r.Logger.info("tables: \u53d1\u9001\u89e3\u9501\u5b9d\u7bb1 ======>"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_REQ_UNLOCK,this.getHeader(this.SERVER_ID))},e.prototype.onRtnBoxUnLock=function(t){var e=t.data,i={};i.dwError=e.dwError,i.rewardList=this.parseTableReward(e.reward),i.chipList=this.parseChipArray(e.tabChips),this.dispatch(c.Notify.Tables.RTN_TABLE_BOX_UNLOCK,i),this.dispatch(c.Notify.Tables.REQ_TABLE_RECYCLE),this.dispatch(c.Notify.Tables.REQ_TABLES_LIST),this.dispatch(c.Notify.Tables.REQ_TABLE_RED_DOT),0==i.dwError&&this.dispatch(u.GuiEvent.PopMsg.SHOW_TABLE_BOX_REWARD,i)},e.prototype.sendBoxUnLockCD=function(){r.Logger.info("tables: \u53d1\u9001\u89e3\u9501cd ======>"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_REQ_UNLOCKCD,this.getHeader(this.SERVER_ID))},e.prototype.onRtnBoxUnLockCD=function(t){var e=t.data,i={};i.dwError=e.dwError,this.dispatch(c.Notify.Tables.RTN_TABLE_BOX_UNLOCK_CD,i)},e.prototype.sendTableMultiCfg=function(){r.Logger.info("tables: \u53d1\u9001\u591a\u8bed\u8a00\u914d\u7f6e ======>"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_GET_TABLE_MULTI_CFG,this.getHeader(this.SERVER_ID))},e.prototype.onRtnTableMultiCfg=function(t){var e=t.data;if(e.tabTable){var i=new Map;e.tabTable.forEach(function(t){var e={};e.dwTableId=t.dwTableId;var o=s.ComUtils.u8ToUTF8Str(t.strName);if(!s.ComUtils.isTextEmpty(o)){var a=JSON.parse(o);a&&(e.nameCfg=a)}var n=s.ComUtils.u8ToUTF8Str(t.strExData);if(!s.ComUtils.isTextEmpty(n)){var r=JSON.parse(o);r&&(e.exData=r)}i.set(e.dwTableId,e)}),r.Logger.info("tables: onRtnTableMultiCfg multicfg=",i),d.DataProxy.getInstance().tablesData.tableMultiCfg=i}},e.prototype.sendNotGetRewardMsg=function(){r.Logger.info("tables: \u8bf7\u6c42\u672a\u9886\u53d6\u684c\u5b50\u5b8c\u6210\u5956\u52b1\u7684\u684c\u5b50\u5217\u8868 ======>"),this.sendRequest(null,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_GET_TABLE_NOT_FINISH_LIST,this.getHeader(this.SERVER_ID))},e.prototype.onRtnNotFinishList=function(t){var e=t.data;d.DataProxy.getInstance().comData.bClickTableLettery?e.tabTabelItem&&e.tabTabelItem.length>0&&this.dispatch(u.GuiEvent.PopMsg.DISPLAY_COMPLT_TABLE,e.tabTabelItem):v.PopUpLogic.getInstance().canAutoPopByName(u.GuiEvent.PopMsg.DISPLAY_COMPLT_TABLE)&&e.tabTabelItem&&e.tabTabelItem.length>0&&this.dispatch(u.GuiEvent.PopMsg.DISPLAY_COMPLT_TABLE,{autoPop:!0,data:e.tabTabelItem})},e.prototype.sendUseTableMsg=function(t){r.Logger.info("tables: \u8bf7\u6c42\u4f7f\u7528\u684c\u5b50 ======>",t);var e=new l.MSG_CS_ReqUseTable;e.dwTableId=t,this.sendRequest(e,this.getMainID(),l.TABLE_SUB_MSG.MSG_CS_REQ_USE_TABLE,this.getHeader(this.SERVER_ID))},e.prototype.onRtnUseTable=function(t){var e=t.data;r.Logger.info("tables: \u56de\u590d\u4f7f\u7528\u684c\u5b50 <====== "+e.dwError)},e.prototype.onUseTable=function(t){var e=this;this.sendUseTableMsg(t),this.userData.useTableId=t,y.LocalStorageProxy.setUserValue(y.LocalStorageProxy.UseTableId,t),f.TableSkinMgr.changeTableId(t,function(){var i=f.TableSkinMgr.getTableCfgById(t);i&&e.dispatch(c.Notify.Base.CHANGE_SKIN,i)})},e.prototype.onGuideGetMoreTableChips=function(t){if(t&&t.strExData&&t.strExData){var e=t.strExData.gameid||0,i=this.configData.getGameConfigByGameId(e),o="",a=0;i&&(a=i.chClientData.basescore),o=1===t.strExData.special?s.ComUtils.getLang(_.LangKey.table_get_more_chips_special):(1===t.strExData.onetype?s.ComUtils.getLang(_.LangKey.table_get_more_chips_1_1):s.ComUtils.getLang(_.LangKey.table_get_more_chips_1_2))+","+(1===t.strExData.twotype?s.ComUtils.getLang(_.LangKey.table_get_more_chips_2_1):s.ComUtils.getLang(_.LangKey.table_get_more_chips_2_2)),this.dispatch(u.GuiEvent.PopMsg.DISPLAY_GET_MORE_CHIPS_DLG,{tips:o,gameId:e,bet:a})}},e}(n.ProxyHandler);i.TablesHandler=w,h.HandlerMgr.getInstance().addSubHandler(new w),cc._RF.pop()},{"../../../script/app/base/handler/HandlerMgr":void 0,"../../../script/app/base/handler/ProxyHandler":void 0,"../../../script/app/event/GuiEvent":void 0,"../../../script/app/event/Notify":void 0,"../../../script/app/language/LanguageCfg":void 0,"../../../script/app/model/DataProxy":void 0,"../../../script/lib/base/PopUpLogic":void 0,"../../../script/lib/utils/ComUtils":void 0,"../../../script/lib/utils/Logger":void 0,"../../../script/plugin/pb/protofile/GlobalMsgDef":void 0,"../model/CMD_TableMsg":"CMD_TableMsg","./../../../script/app/const/Global":void 0,"./../../../script/app/model/LocalDataProxy":void 0,"./../../../script/app/module/tables/TableSkinMgr":void 0}]},{},["TablesHandler","CMD_TableMsg","TableUIConfig","TableBoxInfo","TableBoxItem","TableBoxLayer","TableBoxRewardItem","TableBoxRewardLayer","TableCompleteView","TableGetMoreChipsDlg","TableGetPieceItem","TableGetPieceList","TableGuideDlg","TableListCell","TableListItem","TableListLayer","TableMainView","TablePiece","TableProgressView"]);